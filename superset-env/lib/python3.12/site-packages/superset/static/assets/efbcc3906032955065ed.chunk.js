(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[7546],{14018:(e,t)=>{"use strict";function i(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:i(o,n),time:i(l,d),"date-time":i((function(e){const t=e.split(c);return 2===t.length&&o(t[0])&&l(t[1],!0)}),u),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return h.test(e)&&p.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(C.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return g.lastIndex=0,g.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=f&&e>=m}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:v},double:{type:"number",validate:v},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:i(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,n),time:i(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,d),"date-time":i(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);const s=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,r=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(e){const t=s.exec(e);if(!t)return!1;const i=+t[1],o=+t[2],n=+t[3];return o>=1&&o<=12&&n>=1&&n<=(2===o&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(i)?29:r[o])}function n(e,t){if(e&&t)return e>t?1:e<t?-1:0}const a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function l(e,t){const i=a.exec(e);if(!i)return!1;const s=+i[1],r=+i[2],o=+i[3],n=i[5];return(s<=23&&r<=59&&o<=59||23===s&&59===r&&60===o)&&(!t||""!==n)}function d(e,t){if(!e||!t)return;const i=a.exec(e),s=a.exec(t);return i&&s?(e=i[1]+i[2]+i[3]+(i[4]||""))>(t=s[1]+s[2]+s[3]+(s[4]||""))?1:e<t?-1:0:void 0}const c=/t|\s/i;function u(e,t){if(!e||!t)return;const[i,s]=e.split(c),[r,o]=t.split(c),a=n(i,r);return void 0!==a?a||d(s,o):void 0}const h=/\/|:/,p=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,g=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,m=-(2**31),f=2**31-1;function v(){return!0}const C=/[^\\]\\Z/},68182:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(14018),r=i(26461),o=i(99029),n=new o.Name("fullFormats"),a=new o.Name("fastFormats"),l=(e,t={keywords:!0})=>{if(Array.isArray(t))return d(e,t,s.fullFormats,n),e;const[i,o]="fast"===t.mode?[s.fastFormats,a]:[s.fullFormats,n];return d(e,t.formats||s.formatNames,i,o),t.keywords&&r.default(e),e};function d(e,t,i,s){var r,n;null!==(r=(n=e.opts.code).formats)&&void 0!==r||(n.formats=o._`require("ajv-formats/dist/formats").${s}`);for(const s of t)e.addFormat(s,i[s])}l.get=(e,t="full")=>{const i=("fast"===t?s.fastFormats:s.fullFormats)[e];if(!i)throw new Error(`Unknown format "${e}"`);return i},e.exports=t=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l},26461:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const s=i(63282),r=i(99029),o=r.operators,n={formatMaximum:{okStr:"<=",ok:o.LTE,fail:o.GT},formatMinimum:{okStr:">=",ok:o.GTE,fail:o.LT},formatExclusiveMaximum:{okStr:"<",ok:o.LT,fail:o.GTE},formatExclusiveMinimum:{okStr:">",ok:o.GT,fail:o.LTE}},a={message:({keyword:e,schemaCode:t})=>r.str`should be ${n[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>r._`{comparison: ${n[e].okStr}, limit: ${t}}`};t.formatLimitDefinition={keyword:Object.keys(n),type:"string",schemaType:"string",$data:!0,error:a,code(e){const{gen:t,data:i,schemaCode:o,keyword:a,it:l}=e,{opts:d,self:c}=l;if(!d.validateFormats)return;const u=new s.KeywordCxt(l,c.RULES.all.format.definition,"format");function h(e){return r._`${e}.compare(${i}, ${o}) ${n[a].fail} 0`}u.$data?function(){const i=t.scopeValue("formats",{ref:c.formats,code:d.code.formats}),s=t.const("fmt",r._`${i}[${u.schemaCode}]`);e.fail$data(r.or(r._`typeof ${s} != "object"`,r._`${s} instanceof RegExp`,r._`typeof ${s}.compare != "function"`,h(s)))}():function(){const i=u.schema,s=c.formats[i];if(!s||!0===s)return;if("object"!=typeof s||s instanceof RegExp||"function"!=typeof s.compare)throw new Error(`"${a}": format "${i}" does not define "compare" function`);const o=t.scopeValue("formats",{key:i,ref:s,code:d.code.formats?r._`${d.code.formats}${r.getProperty(i)}`:void 0});e.fail$data(h(o))}()},dependencies:["format"]},t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},63282:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const s=i(4042),r=i(86144),o=i(36653),n=i(72079),a=["/properties"],l="http://json-schema.org/draft-07/schema";class d extends s.default{_addVocabularies(){super._addVocabularies(),r.default.forEach((e=>this.addVocabulary(e))),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(n,a):n;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv=d,e.exports=t=d,e.exports.Ajv=d,Object.defineProperty(t,"__esModule",{value:!0}),t.default=d;var c=i(62586);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var u=i(99029);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var h=i(13558);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return h.default}});var p=i(34551);Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return p.default}})},41520:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class i{}t._CodeOrName=i,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class s extends i{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=s;class r extends i{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof s&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function o(e,...t){const i=[e[0]];let s=0;for(;s<t.length;)l(i,t[s]),i.push(e[++s]);return new r(i)}t._Code=r,t.nil=new r(""),t._=o;const n=new r("+");function a(e,...t){const i=[c(e[0])];let s=0;for(;s<t.length;)i.push(n),l(i,t[s]),i.push(n,c(e[++s]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===n){const i=d(e[t-1],e[t+1]);if(void 0!==i){e.splice(t-1,3,i);continue}e[t++]="+"}t++}}(i),new r(i)}function l(e,t){var i;t instanceof r?e.push(...t._items):t instanceof s?e.push(t):e.push("number"==typeof(i=t)||"boolean"==typeof i||null===i?i:c(Array.isArray(i)?i.join(","):i))}function d(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof s||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof s?void 0:`"${e}${t.slice(1)}`}function c(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new r(c(e))},t.safeStringify=c,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new r(`.${e}`):o`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new r(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new r(e.toString())}},99029:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const s=i(41520),r=i(80226);var o=i(41520);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return o.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return o.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return o.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return o.Name}});var n=i(80226);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return n.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return n.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return n.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return n.varKinds}}),t.operators={GT:new s._Code(">"),GTE:new s._Code(">="),LT:new s._Code("<"),LTE:new s._Code("<="),EQ:new s._Code("==="),NEQ:new s._Code("!=="),NOT:new s._Code("!"),OR:new s._Code("||"),AND:new s._Code("&&"),ADD:new s._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends a{constructor(e,t,i){super(),this.varKind=e,this.name=t,this.rhs=i}render({es5:e,_n:t}){const i=e?r.varKinds.var:this.varKind,s=void 0===this.rhs?"":` = ${this.rhs}`;return`${i} ${this.name}${s};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=M(this.rhs,e,t)),this}get names(){return this.rhs instanceof s._CodeOrName?this.rhs.names:{}}}class d extends a{constructor(e,t,i){super(),this.lhs=e,this.rhs=t,this.sideEffects=i}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof s.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=M(this.rhs,e,t),this}get names(){return T(this.lhs instanceof s.Name?{}:{...this.lhs.names},this.rhs)}}class c extends d{constructor(e,t,i,s){super(e,i,s),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class u extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class p extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class g extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=M(this.code,e,t),this}get names(){return this.code instanceof s._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,i)=>t+i.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const i=e[t].optimizeNodes();Array.isArray(i)?e.splice(t,1,...i):i?e[t]=i:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:i}=this;let s=i.length;for(;s--;){const r=i[s];r.optimizeNames(e,t)||(I(e,r.names),i.splice(s,1))}return i.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>A(e,t.names)),{})}}class f extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class v extends m{}class C extends f{}C.kind="else";class y extends f{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new C(e):e}return t?!1===e?t instanceof y?t:t.nodes:this.nodes.length?this:new y(k(e),t instanceof y?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var i;if(this.else=null===(i=this.else)||void 0===i?void 0:i.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=M(this.condition,e,t),this}get names(){const e=super.names;return T(e,this.condition),this.else&&A(e,this.else.names),e}}y.kind="if";class w extends f{}w.kind="for";class S extends w{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=M(this.iteration,e,t),this}get names(){return A(super.names,this.iteration.names)}}class b extends w{constructor(e,t,i,s){super(),this.varKind=e,this.name=t,this.from=i,this.to=s}render(e){const t=e.es5?r.varKinds.var:this.varKind,{name:i,from:s,to:o}=this;return`for(${t} ${i}=${s}; ${i}<${o}; ${i}++)`+super.render(e)}get names(){const e=T(super.names,this.from);return T(e,this.to)}}class R extends w{constructor(e,t,i,s){super(),this.loop=e,this.varKind=t,this.name=i,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=M(this.iterable,e,t),this}get names(){return A(super.names,this.iterable.names)}}class E extends f{constructor(e,t,i){super(),this.name=e,this.args=t,this.async=i}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}E.kind="func";class F extends m{render(e){return"return "+super.render(e)}}F.kind="return";class P extends f{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var i,s;return super.optimizeNames(e,t),null===(i=this.catch)||void 0===i||i.optimizeNames(e,t),null===(s=this.finally)||void 0===s||s.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&A(e,this.catch.names),this.finally&&A(e,this.finally.names),e}}class x extends f{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}x.kind="catch";class D extends f{render(e){return"finally"+super.render(e)}}function A(e,t){for(const i in t)e[i]=(e[i]||0)+(t[i]||0);return e}function T(e,t){return t instanceof s._CodeOrName?A(e,t.names):e}function M(e,t,i){return e instanceof s.Name?o(e):(r=e)instanceof s._Code&&r._items.some((e=>e instanceof s.Name&&1===t[e.str]&&void 0!==i[e.str]))?new s._Code(e._items.reduce(((e,t)=>(t instanceof s.Name&&(t=o(t)),t instanceof s._Code?e.push(...t._items):e.push(t),e)),[])):e;var r;function o(e){const s=i[e.str];return void 0===s||1!==t[e.str]?e:(delete t[e.str],s)}}function I(e,t){for(const i in t)e[i]=(e[i]||0)-(t[i]||0)}function k(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:s._`!${G(e)}`}D.kind="finally",t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new r.Scope({parent:e}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const i=this._extScope.value(e,t);return(this._values[i.prefix]||(this._values[i.prefix]=new Set)).add(i),i}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,i,s){const r=this._scope.toName(t);return void 0!==i&&s&&(this._constants[r.str]=i),this._leafNode(new l(e,r,i)),r}const(e,t,i){return this._def(r.varKinds.const,e,t,i)}let(e,t,i){return this._def(r.varKinds.let,e,t,i)}var(e,t,i){return this._def(r.varKinds.var,e,t,i)}assign(e,t,i){return this._leafNode(new d(e,t,i))}add(e,i){return this._leafNode(new c(e,t.operators.ADD,i))}code(e){return"function"==typeof e?e():e!==s.nil&&this._leafNode(new g(e)),this}object(...e){const t=["{"];for(const[i,r]of e)t.length>1&&t.push(","),t.push(i),(i!==r||this.opts.es5)&&(t.push(":"),(0,s.addCodeArg)(t,r));return t.push("}"),new s._Code(t)}if(e,t,i){if(this._blockNode(new y(e)),t&&i)this.code(t).else().code(i).endIf();else if(t)this.code(t).endIf();else if(i)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new y(e))}else(){return this._elseNode(new C)}endIf(){return this._endBlockNode(y,C)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new S(e),t)}forRange(e,t,i,s,o=(this.opts.es5?r.varKinds.var:r.varKinds.let)){const n=this._scope.toName(e);return this._for(new b(o,n,t,i),(()=>s(n)))}forOf(e,t,i,o=r.varKinds.const){const n=this._scope.toName(e);if(this.opts.es5){const e=t instanceof s.Name?t:this.var("_arr",t);return this.forRange("_i",0,s._`${e}.length`,(t=>{this.var(n,s._`${e}[${t}]`),i(n)}))}return this._for(new R("of",o,n,t),(()=>i(n)))}forIn(e,t,i,o=(this.opts.es5?r.varKinds.var:r.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,s._`Object.keys(${t})`,i);const n=this._scope.toName(e);return this._for(new R("in",o,n,t),(()=>i(n)))}endFor(){return this._endBlockNode(w)}label(e){return this._leafNode(new u(e))}break(e){return this._leafNode(new h(e))}return(e){const t=new F;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(F)}try(e,t,i){if(!t&&!i)throw new Error('CodeGen: "try" without "catch" and "finally"');const s=new P;if(this._blockNode(s),this.code(e),t){const e=this.name("e");this._currNode=s.catch=new x(e),t(e)}return i&&(this._currNode=s.finally=new D,this.code(i)),this._endBlockNode(x,D)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const i=this._nodes.length-t;if(i<0||void 0!==e&&i!==e)throw new Error(`CodeGen: wrong number of nodes: ${i} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=s.nil,i,r){return this._blockNode(new E(e,t,i)),r&&this.code(r).endFunc(),this}endFunc(){return this._endBlockNode(E)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const i=this._currNode;if(i instanceof e||t&&i instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=k;const L=N(t.operators.AND);t.and=function(...e){return e.reduce(L)};const O=N(t.operators.OR);function N(e){return(t,i)=>t===s.nil?i:i===s.nil?t:s._`${G(t)} ${e} ${G(i)}`}function G(e){return e instanceof s.Name?e:s._`(${e})`}t.or=function(...e){return e.reduce(O)}},80226:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const s=i(41520);class r extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var o;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(o||(t.UsedValueState=o={})),t.varKinds={const:new s.Name("const"),let:new s.Name("let"),var:new s.Name("var")};class n{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof s.Name?e:this.name(e)}name(e){return new s.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,i;if((null===(i=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===i?void 0:i.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=n;class a extends s.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:i}){this.value=e,this.scopePath=s._`.${new s.Name(t)}[${i}]`}}t.ValueScopeName=a;const l=s._`\n`;t.ValueScope=class extends n{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:s.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var i;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const s=this.toName(e),{prefix:r}=s,o=null!==(i=t.key)&&void 0!==i?i:t.ref;let n=this._values[r];if(n){const e=n.get(o);if(e)return e}else n=this._values[r]=new Map;n.set(o,s);const a=this._scope[r]||(this._scope[r]=[]),l=a.length;return a[l]=t.ref,s.setValue(t,{property:r,itemIndex:l}),s}getValue(e,t){const i=this._values[e];if(i)return i.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,(t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return s._`${e}${t.scopePath}`}))}scopeCode(e=this._values,t,i){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,i)}_reduceValues(e,i,n={},a){let l=s.nil;for(const d in e){const c=e[d];if(!c)continue;const u=n[d]=n[d]||new Map;c.forEach((e=>{if(u.has(e))return;u.set(e,o.Started);let n=i(e);if(n){const i=this.opts.es5?t.varKinds.var:t.varKinds.const;l=s._`${l}${i} ${e} = ${n};${this.opts._n}`}else{if(!(n=null==a?void 0:a(e)))throw new r(e);l=s._`${l}${n}${this.opts._n}`}u.set(e,o.Completed)}))}return l}}},48708:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const s=i(99029),r=i(94227),o=i(64404);function n(e,t){const i=e.const("err",t);e.if(s._`${o.default.vErrors} === null`,(()=>e.assign(o.default.vErrors,s._`[${i}]`)),s._`${o.default.vErrors}.push(${i})`),e.code(s._`${o.default.errors}++`)}function a(e,t){const{gen:i,validateName:r,schemaEnv:o}=e;o.$async?i.throw(s._`new ${e.ValidationError}(${t})`):(i.assign(s._`${r}.errors`,t),i.return(!1))}t.keywordError={message:({keyword:e})=>s.str`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?s.str`"${e}" keyword must be ${t} ($data)`:s.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,i=t.keywordError,r,o){const{it:l}=e,{gen:c,compositeRule:u,allErrors:h}=l,p=d(e,i,r);(null!=o?o:u||h)?n(c,p):a(l,s._`[${p}]`)},t.reportExtraError=function(e,i=t.keywordError,s){const{it:r}=e,{gen:l,compositeRule:c,allErrors:u}=r;n(l,d(e,i,s)),c||u||a(r,o.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(o.default.errors,t),e.if(s._`${o.default.vErrors} !== null`,(()=>e.if(t,(()=>e.assign(s._`${o.default.vErrors}.length`,t)),(()=>e.assign(o.default.vErrors,null)))))},t.extendErrors=function({gen:e,keyword:t,schemaValue:i,data:r,errsCount:n,it:a}){if(void 0===n)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",n,o.default.errors,(n=>{e.const(l,s._`${o.default.vErrors}[${n}]`),e.if(s._`${l}.instancePath === undefined`,(()=>e.assign(s._`${l}.instancePath`,(0,s.strConcat)(o.default.instancePath,a.errorPath)))),e.assign(s._`${l}.schemaPath`,s.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(s._`${l}.schema`,i),e.assign(s._`${l}.data`,r))}))};const l={keyword:new s.Name("keyword"),schemaPath:new s.Name("schemaPath"),params:new s.Name("params"),propertyName:new s.Name("propertyName"),message:new s.Name("message"),schema:new s.Name("schema"),parentSchema:new s.Name("parentSchema")};function d(e,t,i){const{createErrors:r}=e.it;return!1===r?s._`{}`:function(e,t,i={}){const{gen:r,it:n}=e,a=[c(n,i),u(e,i)];return function(e,{params:t,message:i},r){const{keyword:n,data:a,schemaValue:d,it:c}=e,{opts:u,propertyName:h,topSchemaRef:p,schemaPath:g}=c;r.push([l.keyword,n],[l.params,"function"==typeof t?t(e):t||s._`{}`]),u.messages&&r.push([l.message,"function"==typeof i?i(e):i]),u.verbose&&r.push([l.schema,d],[l.parentSchema,s._`${p}${g}`],[o.default.data,a]),h&&r.push([l.propertyName,h])}(e,t,a),r.object(...a)}(e,t,i)}function c({errorPath:e},{instancePath:t}){const i=t?s.str`${e}${(0,r.getErrorPath)(t,r.Type.Str)}`:e;return[o.default.instancePath,(0,s.strConcat)(o.default.instancePath,i)]}function u({keyword:e,it:{errSchemaPath:t}},{schemaPath:i,parentSchema:o}){let n=o?t:s.str`${t}/${e}`;return i&&(n=s.str`${n}${(0,r.getErrorPath)(i,r.Type.Str)}`),[l.schemaPath,n]}},73835:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const s=i(99029),r=i(13558),o=i(64404),n=i(66939),a=i(94227),l=i(62586);class d{constructor(e){var t;let i;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(i=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,n.normalizeId)(null==i?void 0:i[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==i?void 0:i.$async,this.refs={}}}function c(e){const t=h.call(this,e);if(t)return t;const i=(0,n.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:a,lines:d}=this.opts.code,{ownProperties:c}=this.opts,u=new s.CodeGen(this.scope,{es5:a,lines:d,ownProperties:c});let p;e.$async&&(p=u.scopeValue("Error",{ref:r.default,code:s._`require("ajv/dist/runtime/validation_error").default`}));const g=u.scopeName("validate");e.validateName=g;const m={gen:u,allErrors:this.opts.allErrors,data:o.default.data,parentData:o.default.parentData,parentDataProperty:o.default.parentDataProperty,dataNames:[o.default.data],dataPathArr:[s.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,s.stringify)(e.schema)}:{ref:e.schema}),validateName:g,ValidationError:p,schema:e.schema,schemaEnv:e,rootId:i,baseId:e.baseId||i,schemaPath:s.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:s._`""`,opts:this.opts,self:this};let f;try{this._compilations.add(e),(0,l.validateFunctionCode)(m),u.optimize(this.opts.code.optimize);const t=u.toString();f=`${u.scopeRefs(o.default.scope)}return ${t}`,this.opts.code.process&&(f=this.opts.code.process(f,e));const i=new Function(`${o.default.self}`,`${o.default.scope}`,f)(this,this.scope.get());if(this.scope.value(g,{ref:i}),i.errors=null,i.schema=e.schema,i.schemaEnv=e,e.$async&&(i.$async=!0),!0===this.opts.code.source&&(i.source={validateName:g,validateCode:t,scopeValues:u._values}),this.opts.unevaluated){const{props:e,items:t}=m;i.evaluated={props:e instanceof s.Name?void 0:e,items:t instanceof s.Name?void 0:t,dynamicProps:e instanceof s.Name,dynamicItems:t instanceof s.Name},i.source&&(i.source.evaluated=(0,s.stringify)(i.evaluated))}return e.validate=i,e}catch(t){throw delete e.validate,delete e.validateName,f&&this.logger.error("Error compiling schema, function code:",f),t}finally{this._compilations.delete(e)}}function u(e){return(0,n.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:c.call(this,e)}function h(e){for(const s of this._compilations)if(i=e,(t=s).schema===i.schema&&t.root===i.root&&t.baseId===i.baseId)return s;var t,i}function p(e,t){let i;for(;"string"==typeof(i=this.refs[t]);)t=i;return i||this.schemas[t]||g.call(this,e,t)}function g(e,t){const i=this.opts.uriResolver.parse(t),s=(0,n._getFullPath)(this.opts.uriResolver,i);let r=(0,n.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&s===r)return f.call(this,i,e);const o=(0,n.normalizeId)(s),a=this.refs[o]||this.schemas[o];if("string"==typeof a){const t=g.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return f.call(this,i,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||c.call(this,a),o===(0,n.normalizeId)(t)){const{schema:t}=a,{schemaId:i}=this.opts,s=t[i];return s&&(r=(0,n.resolveUrl)(this.opts.uriResolver,r,s)),new d({schema:t,schemaId:i,root:e,baseId:r})}return f.call(this,i,a)}}t.SchemaEnv=d,t.compileSchema=c,t.resolveRef=function(e,t,i){var s;i=(0,n.resolveUrl)(this.opts.uriResolver,t,i);const r=e.refs[i];if(r)return r;let o=p.call(this,e,i);if(void 0===o){const r=null===(s=e.localRefs)||void 0===s?void 0:s[i],{schemaId:n}=this.opts;r&&(o=new d({schema:r,schemaId:n,root:e,baseId:t}))}return void 0!==o?e.refs[i]=u.call(this,o):void 0},t.getCompilingSchema=h,t.resolveSchema=g;const m=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function f(e,{baseId:t,schema:i,root:s}){var r;if("/"!==(null===(r=e.fragment)||void 0===r?void 0:r[0]))return;for(const s of e.fragment.slice(1).split("/")){if("boolean"==typeof i)return;const e=i[(0,a.unescapeFragment)(s)];if(void 0===e)return;const r="object"==typeof(i=e)&&i[this.opts.schemaId];!m.has(s)&&r&&(t=(0,n.resolveUrl)(this.opts.uriResolver,t,r))}let o;if("boolean"!=typeof i&&i.$ref&&!(0,a.schemaHasRulesButRef)(i,this.RULES)){const e=(0,n.resolveUrl)(this.opts.uriResolver,t,i.$ref);o=g.call(this,s,e)}const{schemaId:l}=this.opts;return o=o||new d({schema:i,schemaId:l,root:s,baseId:t}),o.schema!==o.root.schema?o:void 0}},64404:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r={data:new s.Name("data"),valCxt:new s.Name("valCxt"),instancePath:new s.Name("instancePath"),parentData:new s.Name("parentData"),parentDataProperty:new s.Name("parentDataProperty"),rootData:new s.Name("rootData"),dynamicAnchors:new s.Name("dynamicAnchors"),vErrors:new s.Name("vErrors"),errors:new s.Name("errors"),this:new s.Name("this"),self:new s.Name("self"),scope:new s.Name("scope"),json:new s.Name("json"),jsonPos:new s.Name("jsonPos"),jsonLen:new s.Name("jsonLen"),jsonPart:new s.Name("jsonPart")};t.default=r},34551:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(66939);class r extends Error{constructor(e,t,i,r){super(r||`can't resolve reference ${i} from id ${t}`),this.missingRef=(0,s.resolveUrl)(e,t,i),this.missingSchema=(0,s.normalizeId)((0,s.getFullPath)(e,this.missingRef))}}t.default=r},66939:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const s=i(94227),r=i(32017),o=i(7106),n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!l(e):!!t&&d(e)<=t)};const a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(e){for(const t in e){if(a.has(t))return!0;const i=e[t];if(Array.isArray(i)&&i.some(l))return!0;if("object"==typeof i&&l(i))return!0}return!1}function d(e){let t=0;for(const i in e){if("$ref"===i)return 1/0;if(t++,!n.has(i)&&("object"==typeof e[i]&&(0,s.eachItem)(e[i],(e=>t+=d(e))),t===1/0))return 1/0}return t}function c(e,t="",i){!1!==i&&(t=p(t));const s=e.parse(t);return u(e,s)}function u(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=c,t._getFullPath=u;const h=/#\/?$/;function p(e){return e?e.replace(h,""):""}t.normalizeId=p,t.resolveUrl=function(e,t,i){return i=p(i),e.resolve(t,i)};const g=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:i,uriResolver:s}=this.opts,n=p(e[i]||t),a={"":n},l=c(s,n,!1),d={},u=new Set;return o(e,{allKeys:!0},((e,t,s,r)=>{if(void 0===r)return;const o=l+t;let n=a[r];function c(t){const i=this.opts.uriResolver.resolve;if(t=p(n?i(n,t):t),u.has(t))throw m(t);u.add(t);let s=this.refs[t];return"string"==typeof s&&(s=this.refs[s]),"object"==typeof s?h(e,s.schema,t):t!==p(o)&&("#"===t[0]?(h(e,d[t],t),d[t]=e):this.refs[t]=o),t}function f(e){if("string"==typeof e){if(!g.test(e))throw new Error(`invalid anchor "${e}"`);c.call(this,`#${e}`)}}"string"==typeof e[i]&&(n=c.call(this,e[i])),f.call(this,e.$anchor),f.call(this,e.$dynamicAnchor),a[t]=n})),d;function h(e,t,i){if(void 0!==t&&!r(e,t))throw m(i)}function m(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},10396:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const i=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&i.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},94227:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const s=i(99029),r=i(41520);function o(e,t=e.schema){const{opts:i,self:s}=e;if(!i.strictSchema)return;if("boolean"==typeof t)return;const r=s.RULES.keywords;for(const i in t)r[i]||g(e,`unknown keyword: "${i}"`)}function n(e,t){if("boolean"==typeof e)return!e;for(const i in e)if(t[i])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function d({mergeNames:e,mergeToName:t,mergeValues:i,resultToName:r}){return(o,n,a,l)=>{const d=void 0===a?n:a instanceof s.Name?(n instanceof s.Name?e(o,n,a):t(o,n,a),a):n instanceof s.Name?(t(o,a,n),n):i(n,a);return l!==s.Name||d instanceof s.Name?d:r(o,d)}}function c(e,t){if(!0===t)return e.var("props",!0);const i=e.var("props",s._`{}`);return void 0!==t&&u(e,i,t),i}function u(e,t,i){Object.keys(i).forEach((i=>e.assign(s._`${t}${(0,s.getProperty)(i)}`,!0)))}t.toHash=function(e){const t={};for(const i of e)t[i]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(o(e,t),!n(t,e.self.RULES.all))},t.checkUnknownRules=o,t.schemaHasRules=n,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const i in e)if("$ref"!==i&&t.all[i])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},i,r,o){if(!o){if("number"==typeof i||"boolean"==typeof i)return i;if("string"==typeof i)return s._`${i}`}return s._`${e}${t}${(0,s.getProperty)(r)}`},t.unescapeFragment=function(e){return l(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(a(e))},t.escapeJsonPointer=a,t.unescapeJsonPointer=l,t.eachItem=function(e,t){if(Array.isArray(e))for(const i of e)t(i);else t(e)},t.mergeEvaluated={props:d({mergeNames:(e,t,i)=>e.if(s._`${i} !== true && ${t} !== undefined`,(()=>{e.if(s._`${t} === true`,(()=>e.assign(i,!0)),(()=>e.assign(i,s._`${i} || {}`).code(s._`Object.assign(${i}, ${t})`)))})),mergeToName:(e,t,i)=>e.if(s._`${i} !== true`,(()=>{!0===t?e.assign(i,!0):(e.assign(i,s._`${i} || {}`),u(e,i,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:c}),items:d({mergeNames:(e,t,i)=>e.if(s._`${i} !== true && ${t} !== undefined`,(()=>e.assign(i,s._`${t} === true ? true : ${i} > ${t} ? ${i} : ${t}`))),mergeToName:(e,t,i)=>e.if(s._`${i} !== true`,(()=>e.assign(i,!0===t||s._`${i} > ${t} ? ${i} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=c,t.setEvaluated=u;const h={};var p;function g(e,t,i=e.opts.strictSchema){if(i){if(t=`strict mode: ${t}`,!0===i)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:h[t.code]||(h[t.code]=new r._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(p||(t.Type=p={})),t.getErrorPath=function(e,t,i){if(e instanceof s.Name){const r=t===p.Num;return i?r?s._`"[" + ${e} + "]"`:s._`"['" + ${e} + "']"`:r?s._`"/" + ${e}`:s._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return i?(0,s.getProperty)(e).toString():"/"+a(e)},t.checkStrictMode=g},7887:(e,t)=>{"use strict";function i(e,t){return t.rules.some((t=>s(e,t)))}function s(e,t){var i;return void 0!==e[t.keyword]||(null===(i=t.definition.implements)||void 0===i?void 0:i.some((t=>void 0!==e[t])))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},s){const r=t.RULES.types[s];return r&&!0!==r&&i(e,r)},t.shouldUseGroup=i,t.shouldUseRule=s},28727:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const s=i(48708),r=i(99029),o=i(64404),n={message:"boolean schema is false"};function a(e,t){const{gen:i,data:r}=e,o={gen:i,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,s.reportError)(o,n,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:i,validateName:s}=e;!1===i?a(e,!1):"object"==typeof i&&!0===i.$async?t.return(o.default.data):(t.assign(r._`${s}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:i,schema:s}=e;!1===s?(i.var(t,!1),a(e)):i.var(t,!0)}},10208:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const s=i(10396),r=i(7887),o=i(48708),n=i(99029),a=i(94227);var l;function d(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(s.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l||(t.DataType=l={})),t.getSchemaTypes=function(e){const t=d(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=d,t.coerceAndCheckDataType=function(e,t){const{gen:i,data:s,opts:o}=e,a=function(e,t){return t?e.filter((e=>c.has(e)||"array"===t&&"array"===e)):[]}(t,o.coerceTypes),d=t.length>0&&!(0===a.length&&1===t.length&&(0,r.schemaHasRulesForType)(e,t[0]));if(d){const r=h(t,s,o.strictNumbers,l.Wrong);i.if(r,(()=>{a.length?function(e,t,i){const{gen:s,data:r,opts:o}=e,a=s.let("dataType",n._`typeof ${r}`),l=s.let("coerced",n._`undefined`);"array"===o.coerceTypes&&s.if(n._`${a} == 'object' && Array.isArray(${r}) && ${r}.length == 1`,(()=>s.assign(r,n._`${r}[0]`).assign(a,n._`typeof ${r}`).if(h(t,r,o.strictNumbers),(()=>s.assign(l,r))))),s.if(n._`${l} !== undefined`);for(const e of i)(c.has(e)||"array"===e&&"array"===o.coerceTypes)&&d(e);function d(e){switch(e){case"string":return void s.elseIf(n._`${a} == "number" || ${a} == "boolean"`).assign(l,n._`"" + ${r}`).elseIf(n._`${r} === null`).assign(l,n._`""`);case"number":return void s.elseIf(n._`${a} == "boolean" || ${r} === null
              || (${a} == "string" && ${r} && ${r} == +${r})`).assign(l,n._`+${r}`);case"integer":return void s.elseIf(n._`${a} === "boolean" || ${r} === null
              || (${a} === "string" && ${r} && ${r} == +${r} && !(${r} % 1))`).assign(l,n._`+${r}`);case"boolean":return void s.elseIf(n._`${r} === "false" || ${r} === 0 || ${r} === null`).assign(l,!1).elseIf(n._`${r} === "true" || ${r} === 1`).assign(l,!0);case"null":return s.elseIf(n._`${r} === "" || ${r} === 0 || ${r} === false`),void s.assign(l,null);case"array":s.elseIf(n._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${r} === null`).assign(l,n._`[${r}]`)}}s.else(),g(e),s.endIf(),s.if(n._`${l} !== undefined`,(()=>{s.assign(r,l),function({gen:e,parentData:t,parentDataProperty:i},s){e.if(n._`${t} !== undefined`,(()=>e.assign(n._`${t}[${i}]`,s)))}(e,l)}))}(e,t,a):g(e)}))}return d};const c=new Set(["string","number","integer","boolean","null"]);function u(e,t,i,s=l.Correct){const r=s===l.Correct?n.operators.EQ:n.operators.NEQ;let o;switch(e){case"null":return n._`${t} ${r} null`;case"array":o=n._`Array.isArray(${t})`;break;case"object":o=n._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=a(n._`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=a();break;default:return n._`typeof ${t} ${r} ${e}`}return s===l.Correct?o:(0,n.not)(o);function a(e=n.nil){return(0,n.and)(n._`typeof ${t} == "number"`,e,i?n._`isFinite(${t})`:n.nil)}}function h(e,t,i,s){if(1===e.length)return u(e[0],t,i,s);let r;const o=(0,a.toHash)(e);if(o.array&&o.object){const e=n._`typeof ${t} != "object"`;r=o.null?e:n._`!${t} || ${e}`,delete o.null,delete o.array,delete o.object}else r=n.nil;o.number&&delete o.integer;for(const e in o)r=(0,n.and)(r,u(e,t,i,s));return r}t.checkDataType=u,t.checkDataTypes=h;const p={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?n._`{type: ${e}}`:n._`{type: ${t}}`};function g(e){const t=function(e){const{gen:t,data:i,schema:s}=e,r=(0,a.schemaRefOrVal)(e,s,"type");return{gen:t,keyword:"type",data:i,schema:s.type,schemaCode:r,schemaValue:r,parentSchema:s,params:{},it:e}}(e);(0,o.reportError)(t,p)}t.reportTypeError=g},7870:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const s=i(99029),r=i(94227);function o(e,t,i){const{gen:o,compositeRule:n,data:a,opts:l}=e;if(void 0===i)return;const d=s._`${a}${(0,s.getProperty)(t)}`;if(n)return void(0,r.checkStrictMode)(e,`default is ignored for: ${d}`);let c=s._`${d} === undefined`;"empty"===l.useDefaults&&(c=s._`${c} || ${d} === null || ${d} === ""`),o.if(c,s._`${d} = ${(0,s.stringify)(i)}`)}t.assignDefaults=function(e,t){const{properties:i,items:s}=e.schema;if("object"===t&&i)for(const t in i)o(e,t,i[t].default);else"array"===t&&Array.isArray(s)&&s.forEach(((t,i)=>o(e,i,t.default)))}},62586:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const s=i(28727),r=i(10208),o=i(7887),n=i(10208),a=i(7870),l=i(33673),d=i(24495),c=i(99029),u=i(64404),h=i(66939),p=i(94227),g=i(48708);function m({gen:e,validateName:t,schema:i,schemaEnv:s,opts:r},o){r.code.es5?e.func(t,c._`${u.default.data}, ${u.default.valCxt}`,s.$async,(()=>{e.code(c._`"use strict"; ${f(i,r)}`),function(e,t){e.if(u.default.valCxt,(()=>{e.var(u.default.instancePath,c._`${u.default.valCxt}.${u.default.instancePath}`),e.var(u.default.parentData,c._`${u.default.valCxt}.${u.default.parentData}`),e.var(u.default.parentDataProperty,c._`${u.default.valCxt}.${u.default.parentDataProperty}`),e.var(u.default.rootData,c._`${u.default.valCxt}.${u.default.rootData}`),t.dynamicRef&&e.var(u.default.dynamicAnchors,c._`${u.default.valCxt}.${u.default.dynamicAnchors}`)}),(()=>{e.var(u.default.instancePath,c._`""`),e.var(u.default.parentData,c._`undefined`),e.var(u.default.parentDataProperty,c._`undefined`),e.var(u.default.rootData,u.default.data),t.dynamicRef&&e.var(u.default.dynamicAnchors,c._`{}`)}))}(e,r),e.code(o)})):e.func(t,c._`${u.default.data}, ${function(e){return c._`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${e.dynamicRef?c._`, ${u.default.dynamicAnchors}={}`:c.nil}}={}`}(r)}`,s.$async,(()=>e.code(f(i,r)).code(o)))}function f(e,t){const i="object"==typeof e&&e[t.schemaId];return i&&(t.code.source||t.code.process)?c._`/*# sourceURL=${i} */`:c.nil}function v({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const i in e)if(t.RULES.all[i])return!0;return!1}function C(e){return"boolean"!=typeof e.schema}function y(e){(0,p.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:i,opts:s,self:r}=e;t.$ref&&s.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(t,r.RULES)&&r.logger.warn(`$ref: keywords ignored in schema at path "${i}"`)}(e)}function w(e,t){if(e.opts.jtd)return b(e,[],!1,t);const i=(0,r.getSchemaTypes)(e.schema);b(e,i,!(0,r.coerceAndCheckDataType)(e,i),t)}function S({gen:e,schemaEnv:t,schema:i,errSchemaPath:s,opts:r}){const o=i.$comment;if(!0===r.$comment)e.code(c._`${u.default.self}.logger.log(${o})`);else if("function"==typeof r.$comment){const i=c.str`${s}/$comment`,r=e.scopeValue("root",{ref:t.root});e.code(c._`${u.default.self}.opts.$comment(${o}, ${i}, ${r}.schema)`)}}function b(e,t,i,s){const{gen:r,schema:a,data:l,allErrors:d,opts:h,self:g}=e,{RULES:m}=g;function f(p){(0,o.shouldUseGroup)(a,p)&&(p.type?(r.if((0,n.checkDataType)(p.type,l,h.strictNumbers)),R(e,p),1===t.length&&t[0]===p.type&&i&&(r.else(),(0,n.reportTypeError)(e)),r.endIf()):R(e,p),d||r.if(c._`${u.default.errors} === ${s||0}`))}!a.$ref||!h.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(a,m)?(h.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach((t=>{E(e.dataTypes,t)||F(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),function(e,t){const i=[];for(const s of e.dataTypes)E(t,s)?i.push(s):t.includes("integer")&&"number"===s&&i.push("integer");e.dataTypes=i}(e,t)):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&F(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const i=e.self.RULES.all;for(const s in i){const r=i[s];if("object"==typeof r&&(0,o.shouldUseRule)(e.schema,r)){const{type:i}=r.definition;i.length&&!i.some((e=>{return s=e,(i=t).includes(s)||"number"===s&&i.includes("integer");var i,s}))&&F(e,`missing type "${i.join(",")}" for keyword "${s}"`)}}}(e,e.dataTypes))}(e,t),r.block((()=>{for(const e of m.rules)f(e);f(m.post)}))):r.block((()=>x(e,"$ref",m.all.$ref.definition)))}function R(e,t){const{gen:i,schema:s,opts:{useDefaults:r}}=e;r&&(0,a.assignDefaults)(e,t.type),i.block((()=>{for(const i of t.rules)(0,o.shouldUseRule)(s,i)&&x(e,i.keyword,i.definition,t.type)}))}function E(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function F(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,p.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){C(e)&&(y(e),v(e))?function(e){const{schema:t,opts:i,gen:s}=e;m(e,(()=>{i.$comment&&t.$comment&&S(e),function(e){const{schema:t,opts:i}=e;void 0!==t.default&&i.useDefaults&&i.strictSchema&&(0,p.checkStrictMode)(e,"default is ignored in the schema root")}(e),s.let(u.default.vErrors,null),s.let(u.default.errors,0),i.unevaluated&&function(e){const{gen:t,validateName:i}=e;e.evaluated=t.const("evaluated",c._`${i}.evaluated`),t.if(c._`${e.evaluated}.dynamicProps`,(()=>t.assign(c._`${e.evaluated}.props`,c._`undefined`))),t.if(c._`${e.evaluated}.dynamicItems`,(()=>t.assign(c._`${e.evaluated}.items`,c._`undefined`)))}(e),w(e),function(e){const{gen:t,schemaEnv:i,validateName:s,ValidationError:r,opts:o}=e;i.$async?t.if(c._`${u.default.errors} === 0`,(()=>t.return(u.default.data)),(()=>t.throw(c._`new ${r}(${u.default.vErrors})`))):(t.assign(c._`${s}.errors`,u.default.vErrors),o.unevaluated&&function({gen:e,evaluated:t,props:i,items:s}){i instanceof c.Name&&e.assign(c._`${t}.props`,i),s instanceof c.Name&&e.assign(c._`${t}.items`,s)}(e),t.return(c._`${u.default.errors} === 0`))}(e)}))}(e):m(e,(()=>(0,s.topBoolOrEmptySchema)(e)))};class P{constructor(e,t,i){if((0,l.validateKeywordUsage)(e,t,i),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=i,this.data=e.data,this.schema=e.schema[i],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,p.schemaRefOrVal)(e,this.schema,i,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",T(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${i} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",u.default.errors))}result(e,t,i){this.failResult((0,c.not)(e),t,i)}failResult(e,t,i){this.gen.if(e),i?i():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,c.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(c._`${t} !== undefined && (${(0,c.or)(this.invalid$data(),e)})`)}error(e,t,i){if(t)return this.setParams(t),this._error(e,i),void this.setParams({});this._error(e,i)}_error(e,t){(e?g.reportExtraError:g.reportError)(this,this.def.error,t)}$dataError(){(0,g.reportError)(this,this.def.$dataError||g.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,g.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,i=c.nil){this.gen.block((()=>{this.check$data(e,i),t()}))}check$data(e=c.nil,t=c.nil){if(!this.$data)return;const{gen:i,schemaCode:s,schemaType:r,def:o}=this;i.if((0,c.or)(c._`${s} === undefined`,t)),e!==c.nil&&i.assign(e,!0),(r.length||o.validateSchema)&&(i.elseIf(this.invalid$data()),this.$dataError(),e!==c.nil&&i.assign(e,!1)),i.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:i,def:s,it:r}=this;return(0,c.or)(function(){if(i.length){if(!(t instanceof c.Name))throw new Error("ajv implementation error");const e=Array.isArray(i)?i:[i];return c._`${(0,n.checkDataTypes)(e,t,r.opts.strictNumbers,n.DataType.Wrong)}`}return c.nil}(),function(){if(s.validateSchema){const i=e.scopeValue("validate$data",{ref:s.validateSchema});return c._`!${i}(${t})`}return c.nil}())}subschema(e,t){const i=(0,d.getSubschema)(this.it,e);(0,d.extendSubschemaData)(i,this.it,e),(0,d.extendSubschemaMode)(i,e);const r={...this.it,...i,items:void 0,props:void 0};return function(e,t){C(e)&&(y(e),v(e))?function(e,t){const{schema:i,gen:s,opts:r}=e;r.$comment&&i.$comment&&S(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,h.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const o=s.const("_errs",u.default.errors);w(e,o),s.var(t,c._`${o} === ${u.default.errors}`)}(e,t):(0,s.boolOrEmptySchema)(e,t)}(r,t),r}mergeEvaluated(e,t){const{it:i,gen:s}=this;i.opts.unevaluated&&(!0!==i.props&&void 0!==e.props&&(i.props=p.mergeEvaluated.props(s,e.props,i.props,t)),!0!==i.items&&void 0!==e.items&&(i.items=p.mergeEvaluated.items(s,e.items,i.items,t)))}mergeValidEvaluated(e,t){const{it:i,gen:s}=this;if(i.opts.unevaluated&&(!0!==i.props||!0!==i.items))return s.if(t,(()=>this.mergeEvaluated(e,c.Name))),!0}}function x(e,t,i,s){const r=new P(e,i,t);"code"in i?i.code(r,s):r.$data&&i.validate?(0,l.funcKeywordCode)(r,i):"macro"in i?(0,l.macroKeywordCode)(r,i):(i.compile||i.validate)&&(0,l.funcKeywordCode)(r,i)}t.KeywordCxt=P;const D=/^\/(?:[^~]|~0|~1)*$/,A=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function T(e,{dataLevel:t,dataNames:i,dataPathArr:s}){let r,o;if(""===e)return u.default.rootData;if("/"===e[0]){if(!D.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);r=e,o=u.default.rootData}else{const n=A.exec(e);if(!n)throw new Error(`Invalid JSON-pointer: ${e}`);const a=+n[1];if(r=n[2],"#"===r){if(a>=t)throw new Error(l("property/index",a));return s[t-a]}if(a>t)throw new Error(l("data",a));if(o=i[t-a],!r)return o}let n=o;const a=r.split("/");for(const e of a)e&&(o=c._`${o}${(0,c.getProperty)((0,p.unescapeJsonPointer)(e))}`,n=c._`${n} && ${o}`);return n;function l(e,i){return`Cannot access ${e} ${i} levels up, current level is ${t}`}}t.getData=T},33673:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const s=i(99029),r=i(64404),o=i(15765),n=i(48708);function a(e){const{gen:t,data:i,it:r}=e;t.if(r.parentData,(()=>t.assign(i,s._`${r.parentData}[${r.parentDataProperty}]`)))}function l(e,t,i){if(void 0===i)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof i?{ref:i}:{ref:i,code:(0,s.stringify)(i)})}t.macroKeywordCode=function(e,t){const{gen:i,keyword:r,schema:o,parentSchema:n,it:a}=e,d=t.macro.call(a.self,o,n,a),c=l(i,r,d);!1!==a.opts.validateSchema&&a.self.validateSchema(d,!0);const u=i.name("valid");e.subschema({schema:d,schemaPath:s.nil,errSchemaPath:`${a.errSchemaPath}/${r}`,topSchemaRef:c,compositeRule:!0},u),e.pass(u,(()=>e.error(!0)))},t.funcKeywordCode=function(e,t){var i;const{gen:d,keyword:c,schema:u,parentSchema:h,$data:p,it:g}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(g,t);const m=!p&&t.compile?t.compile.call(g.self,u,h,g):t.validate,f=l(d,c,m),v=d.let("valid");function C(i=(t.async?s._`await `:s.nil)){const n=g.opts.passContext?r.default.this:r.default.self,a=!("compile"in t&&!p||!1===t.schema);d.assign(v,s._`${i}${(0,o.callValidateCode)(e,f,n,a)}`,t.modifying)}function y(e){var i;d.if((0,s.not)(null!==(i=t.valid)&&void 0!==i?i:v),e)}e.block$data(v,(function(){if(!1===t.errors)C(),t.modifying&&a(e),y((()=>e.error()));else{const i=t.async?function(){const e=d.let("ruleErrs",null);return d.try((()=>C(s._`await `)),(t=>d.assign(v,!1).if(s._`${t} instanceof ${g.ValidationError}`,(()=>d.assign(e,s._`${t}.errors`)),(()=>d.throw(t))))),e}():function(){const e=s._`${f}.errors`;return d.assign(e,null),C(s.nil),e}();t.modifying&&a(e),y((()=>function(e,t){const{gen:i}=e;i.if(s._`Array.isArray(${t})`,(()=>{i.assign(r.default.vErrors,s._`${r.default.vErrors} === null ? ${t} : ${r.default.vErrors}.concat(${t})`).assign(r.default.errors,s._`${r.default.vErrors}.length`),(0,n.extendErrors)(e)}),(()=>e.error()))}(e,i)))}})),e.ok(null!==(i=t.valid)&&void 0!==i?i:v)},t.validSchemaType=function(e,t,i=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||i&&void 0===e))},t.validateKeywordUsage=function({schema:e,opts:t,self:i,errSchemaPath:s},r,o){if(Array.isArray(r.keyword)?!r.keyword.includes(o):r.keyword!==o)throw new Error("ajv implementation error");const n=r.dependencies;if(null==n?void 0:n.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${o}: ${n.join(",")}`);if(r.validateSchema&&!r.validateSchema(e[o])){const e=`keyword "${o}" value is invalid at path "${s}": `+i.errorsText(r.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);i.logger.error(e)}}},24495:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const s=i(99029),r=i(94227);t.getSubschema=function(e,{keyword:t,schemaProp:i,schema:o,schemaPath:n,errSchemaPath:a,topSchemaRef:l}){if(void 0!==t&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const o=e.schema[t];return void 0===i?{schema:o,schemaPath:s._`${e.schemaPath}${(0,s.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:o[i],schemaPath:s._`${e.schemaPath}${(0,s.getProperty)(t)}${(0,s.getProperty)(i)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,r.escapeFragment)(i)}`}}if(void 0!==o){if(void 0===n||void 0===a||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:n,topSchemaRef:l,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:i,dataPropType:o,data:n,dataTypes:a,propertyName:l}){if(void 0!==n&&void 0!==i)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=t;if(void 0!==i){const{errorPath:n,dataPathArr:a,opts:l}=t;c(d.let("data",s._`${t.data}${(0,s.getProperty)(i)}`,!0)),e.errorPath=s.str`${n}${(0,r.getErrorPath)(i,o,l.jsPropertySyntax)}`,e.parentDataProperty=s._`${i}`,e.dataPathArr=[...a,e.parentDataProperty]}function c(i){e.data=i,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,i]}void 0!==n&&(c(n instanceof s.Name?n:d.let("data",n,!0)),void 0!==l&&(e.propertyName=l)),a&&(e.dataTypes=a)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:i,compositeRule:s,createErrors:r,allErrors:o}){void 0!==s&&(e.compositeRule=s),void 0!==r&&(e.createErrors=r),void 0!==o&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=i}},4042:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var s=i(62586);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return s.KeywordCxt}});var r=i(99029);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const o=i(13558),n=i(34551),a=i(10396),l=i(73835),d=i(99029),c=i(66939),u=i(10208),h=i(94227),p=i(63837),g=i(55944),m=(e,t)=>new RegExp(e,t);m.code="new RegExp";const f=["removeAdditional","useDefaults","coerceTypes"],v=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),C={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function w(e){var t,i,s,r,o,n,a,l,d,c,u,h,p,f,v,C,y,w,S,b,R,E,F,P,x;const D=e.strict,A=null===(t=e.code)||void 0===t?void 0:t.optimize,T=!0===A||void 0===A?1:A||0,M=null!==(s=null===(i=e.code)||void 0===i?void 0:i.regExp)&&void 0!==s?s:m,I=null!==(r=e.uriResolver)&&void 0!==r?r:g.default;return{strictSchema:null===(n=null!==(o=e.strictSchema)&&void 0!==o?o:D)||void 0===n||n,strictNumbers:null===(l=null!==(a=e.strictNumbers)&&void 0!==a?a:D)||void 0===l||l,strictTypes:null!==(c=null!==(d=e.strictTypes)&&void 0!==d?d:D)&&void 0!==c?c:"log",strictTuples:null!==(h=null!==(u=e.strictTuples)&&void 0!==u?u:D)&&void 0!==h?h:"log",strictRequired:null!==(f=null!==(p=e.strictRequired)&&void 0!==p?p:D)&&void 0!==f&&f,code:e.code?{...e.code,optimize:T,regExp:M}:{optimize:T,regExp:M},loopRequired:null!==(v=e.loopRequired)&&void 0!==v?v:200,loopEnum:null!==(C=e.loopEnum)&&void 0!==C?C:200,meta:null===(y=e.meta)||void 0===y||y,messages:null===(w=e.messages)||void 0===w||w,inlineRefs:null===(S=e.inlineRefs)||void 0===S||S,schemaId:null!==(b=e.schemaId)&&void 0!==b?b:"$id",addUsedSchema:null===(R=e.addUsedSchema)||void 0===R||R,validateSchema:null===(E=e.validateSchema)||void 0===E||E,validateFormats:null===(F=e.validateFormats)||void 0===F||F,unicodeRegExp:null===(P=e.unicodeRegExp)||void 0===P||P,int32range:null===(x=e.int32range)||void 0===x||x,uriResolver:I}}class S{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...w(e)};const{es5:t,lines:i}=this.opts.code;this.scope=new d.ValueScope({scope:{},prefixes:v,es5:t,lines:i}),this.logger=function(e){if(!1===e)return D;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,a.getRules)(),b.call(this,C,e,"NOT SUPPORTED"),b.call(this,y,e,"DEPRECATED","warn"),this._metaOpts=x.call(this),e.formats&&F.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&P.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),E.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:i}=this.opts;let s=p;"id"===i&&(s={...p},s.id=s.$id,delete s.$id),t&&e&&this.addMetaSchema(s,s[i],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let i;if("string"==typeof e){if(i=this.getSchema(e),!i)throw new Error(`no schema with key or ref "${e}"`)}else i=this.compile(e);const s=i(t);return"$async"in i||(this.errors=i.errors),s}compile(e,t){const i=this._addSchema(e,t);return i.validate||this._compileSchemaEnv(i)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:i}=this.opts;return s.call(this,e,t);async function s(e,t){await r.call(this,e.$schema);const i=this._addSchema(e,t);return i.validate||o.call(this,i)}async function r(e){e&&!this.getSchema(e)&&await s.call(this,{$ref:e},!0)}async function o(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof n.default))throw t;return a.call(this,t),await l.call(this,t.missingSchema),o.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const i=await d.call(this,e);this.refs[e]||await r.call(this,i.$schema),this.refs[e]||this.addSchema(i,e,t)}async function d(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=i(e))}finally{delete this._loading[e]}}}addSchema(e,t,i,s=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,i,s);return this}let r;if("object"==typeof e){const{schemaId:t}=this.opts;if(r=e[t],void 0!==r&&"string"!=typeof r)throw new Error(`schema ${t} must be string`)}return t=(0,c.normalizeId)(t||r),this._checkUnique(t),this.schemas[t]=this._addSchema(e,i,t,s,!0),this}addMetaSchema(e,t,i=this.opts.validateSchema){return this.addSchema(e,t,!0,i),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let i;if(i=e.$schema,void 0!==i&&"string"!=typeof i)throw new Error("$schema must be a string");if(i=i||this.opts.defaultMeta||this.defaultMeta(),!i)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const s=this.validate(i,e);if(!s&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return s}getSchema(e){let t;for(;"string"==typeof(t=R.call(this,e));)e=t;if(void 0===t){const{schemaId:i}=this.opts,s=new l.SchemaEnv({schema:{},schemaId:i});if(t=l.resolveSchema.call(this,s,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=R.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let i=e[this.opts.schemaId];return i&&(i=(0,c.normalizeId)(i),delete this.schemas[i],delete this.refs[i]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let i;if("string"==typeof e)i=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=i);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(i=(t=e).keyword,Array.isArray(i)&&!i.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(T.call(this,i,t),!t)return(0,h.eachItem)(i,(e=>M.call(this,e))),this;k.call(this,t);const s={...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)};return(0,h.eachItem)(i,0===s.type.length?e=>M.call(this,e,s):e=>s.type.forEach((t=>M.call(this,e,s,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const i of t.rules){const t=i.rules.findIndex((t=>t.keyword===e));t>=0&&i.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:i="data"}={}){return e&&0!==e.length?e.map((e=>`${i}${e.instancePath} ${e.message}`)).reduce(((e,i)=>e+t+i)):"No errors"}$dataMetaSchema(e,t){const i=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const s of t){const t=s.split("/").slice(1);let r=e;for(const e of t)r=r[e];for(const e in i){const t=i[e];if("object"!=typeof t)continue;const{$data:s}=t.definition,o=r[e];s&&o&&(r[e]=O(o))}}return e}_removeAllSchemas(e,t){for(const i in e){const s=e[i];t&&!t.test(i)||("string"==typeof s?delete e[i]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[i]))}}_addSchema(e,t,i,s=this.opts.validateSchema,r=this.opts.addUsedSchema){let o;const{schemaId:n}=this.opts;if("object"==typeof e)o=e[n];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let a=this._cache.get(e);if(void 0!==a)return a;i=(0,c.normalizeId)(o||i);const d=c.getSchemaRefs.call(this,e,i);return a=new l.SchemaEnv({schema:e,schemaId:n,meta:t,baseId:i,localRefs:d}),this._cache.set(a.schema,a),r&&!i.startsWith("#")&&(i&&this._checkUnique(i),this.refs[i]=a),s&&this.validateSchema(e,!0),a}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function b(e,t,i,s="error"){for(const r in e){const o=r;o in t&&this.logger[s](`${i}: option ${r}. ${e[o]}`)}}function R(e){return e=(0,c.normalizeId)(e),this.schemas[e]||this.refs[e]}function E(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function F(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function P(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const i=e[t];i.keyword||(i.keyword=t),this.addKeyword(i)}}}function x(){const e={...this.opts};for(const t of f)delete e[t];return e}S.ValidationError=o.default,S.MissingRefError=n.default,t.default=S;const D={log(){},warn(){},error(){}},A=/^[a-z_$][a-z0-9_$:-]*$/i;function T(e,t){const{RULES:i}=this;if((0,h.eachItem)(e,(e=>{if(i.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!A.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function M(e,t,i){var s;const r=null==t?void 0:t.post;if(i&&r)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let n=r?o.post:o.rules.find((({type:e})=>e===i));if(n||(n={type:i,rules:[]},o.rules.push(n)),o.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)}};t.before?I.call(this,n,a,t.before):n.rules.push(a),o.all[e]=a,null===(s=t.implements)||void 0===s||s.forEach((e=>this.addKeyword(e)))}function I(e,t,i){const s=e.rules.findIndex((e=>e.keyword===i));s>=0?e.rules.splice(s,0,t):(e.rules.push(t),this.logger.warn(`rule ${i} is not defined`))}function k(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=O(t)),e.validateSchema=this.compile(t,!0))}const L={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function O(e){return{anyOf:[e,L]}}},53869:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(32017);s.code='require("ajv/dist/runtime/equal").default',t.default=s},53853:(e,t)=>{"use strict";function i(e){const t=e.length;let i,s=0,r=0;for(;r<t;)s++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),56320==(64512&i)&&r++);return s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,i.code='require("ajv/dist/runtime/ucs2length").default'},55944:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(48343);s.code='require("ajv/dist/runtime/uri").default',t.default=s},13558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=i},15457:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const s=i(99029),r=i(94227),o={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>s.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>s._`{limit: ${e}}`},code(e){const{parentSchema:t,it:i}=e,{items:s}=t;Array.isArray(s)?n(e,s):(0,r.checkStrictMode)(i,'"additionalItems" is ignored when "items" is not an array of schemas')}};function n(e,t){const{gen:i,schema:o,data:n,keyword:a,it:l}=e;l.items=!0;const d=i.const("len",s._`${n}.length`);if(!1===o)e.setParams({len:t.length}),e.pass(s._`${d} <= ${t.length}`);else if("object"==typeof o&&!(0,r.alwaysValidSchema)(l,o)){const o=i.var("valid",s._`${d} <= ${t.length}`);i.if((0,s.not)(o),(()=>function(o){i.forRange("i",t.length,d,(t=>{e.subschema({keyword:a,dataProp:t,dataPropType:r.Type.Num},o),l.allErrors||i.if((0,s.not)(o),(()=>i.break()))}))}(o))),e.ok(o)}}t.validateAdditionalItems=n,t.default=o},38660:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(15765),r=i(99029),o=i(64404),n=i(94227),a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>r._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:i,parentSchema:a,data:l,errsCount:d,it:c}=e;if(!d)throw new Error("ajv implementation error");const{allErrors:u,opts:h}=c;if(c.props=!0,"all"!==h.removeAdditional&&(0,n.alwaysValidSchema)(c,i))return;const p=(0,s.allSchemaProperties)(a.properties),g=(0,s.allSchemaProperties)(a.patternProperties);function m(e){t.code(r._`delete ${l}[${e}]`)}function f(s){if("all"===h.removeAdditional||h.removeAdditional&&!1===i)m(s);else{if(!1===i)return e.setParams({additionalProperty:s}),e.error(),void(u||t.break());if("object"==typeof i&&!(0,n.alwaysValidSchema)(c,i)){const i=t.name("valid");"failing"===h.removeAdditional?(v(s,i,!1),t.if((0,r.not)(i),(()=>{e.reset(),m(s)}))):(v(s,i),u||t.if((0,r.not)(i),(()=>t.break())))}}}function v(t,i,s){const r={keyword:"additionalProperties",dataProp:t,dataPropType:n.Type.Str};!1===s&&Object.assign(r,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(r,i)}t.forIn("key",l,(i=>{p.length||g.length?t.if(function(i){let o;if(p.length>8){const e=(0,n.schemaRefOrVal)(c,a.properties,"properties");o=(0,s.isOwnProperty)(t,e,i)}else o=p.length?(0,r.or)(...p.map((e=>r._`${i} === ${e}`))):r.nil;return g.length&&(o=(0,r.or)(o,...g.map((t=>r._`${(0,s.usePattern)(e,t)}.test(${i})`)))),(0,r.not)(o)}(i),(()=>f(i))):f(i)})),e.ok(r._`${d} === ${o.default.errors}`)}};t.default=a},15844:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(94227),r={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:i,it:r}=e;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=t.name("valid");i.forEach(((t,i)=>{if((0,s.alwaysValidSchema)(r,t))return;const n=e.subschema({keyword:"allOf",schemaProp:i},o);e.ok(o),e.mergeEvaluated(n)}))}};t.default=r},16505:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:i(15765).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=s},12661:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r=i(94227),o={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?s.str`must contain at least ${e} valid item(s)`:s.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?s._`{minContains: ${e}}`:s._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:i,parentSchema:o,data:n,it:a}=e;let l,d;const{minContains:c,maxContains:u}=o;a.opts.next?(l=void 0===c?1:c,d=u):l=1;const h=t.const("len",s._`${n}.length`);if(e.setParams({min:l,max:d}),void 0===d&&0===l)return void(0,r.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==d&&l>d)return(0,r.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,r.alwaysValidSchema)(a,i)){let t=s._`${h} >= ${l}`;return void 0!==d&&(t=s._`${t} && ${h} <= ${d}`),void e.pass(t)}a.items=!0;const p=t.name("valid");function g(){const e=t.name("_valid"),i=t.let("count",0);m(e,(()=>t.if(e,(()=>function(e){t.code(s._`${e}++`),void 0===d?t.if(s._`${e} >= ${l}`,(()=>t.assign(p,!0).break())):(t.if(s._`${e} > ${d}`,(()=>t.assign(p,!1).break())),1===l?t.assign(p,!0):t.if(s._`${e} >= ${l}`,(()=>t.assign(p,!0))))}(i)))))}function m(i,s){t.forRange("i",0,h,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:r.Type.Num,compositeRule:!0},i),s()}))}void 0===d&&1===l?m(p,(()=>t.if(p,(()=>t.break())))):0===l?(t.let(p,!0),void 0!==d&&t.if(s._`${n}.length > 0`,g)):(t.let(p,!1),g()),e.result(p,(()=>e.reset()))}};t.default=o},83025:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const s=i(99029),r=i(94227),o=i(15765);t.error={message:({params:{property:e,depsCount:t,deps:i}})=>{const r=1===t?"property":"properties";return s.str`must have ${r} ${i} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:i,missingProperty:r}})=>s._`{property: ${e},
    missingProperty: ${r},
    depsCount: ${t},
    deps: ${i}}`};const n={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,i]=function({schema:e}){const t={},i={};for(const s in e)"__proto__"!==s&&((Array.isArray(e[s])?t:i)[s]=e[s]);return[t,i]}(e);a(e,t),l(e,i)}};function a(e,t=e.schema){const{gen:i,data:r,it:n}=e;if(0===Object.keys(t).length)return;const a=i.let("missing");for(const l in t){const d=t[l];if(0===d.length)continue;const c=(0,o.propertyInData)(i,r,l,n.opts.ownProperties);e.setParams({property:l,depsCount:d.length,deps:d.join(", ")}),n.allErrors?i.if(c,(()=>{for(const t of d)(0,o.checkReportMissingProp)(e,t)})):(i.if(s._`${c} && (${(0,o.checkMissingProp)(e,d,a)})`),(0,o.reportMissingProp)(e,a),i.else())}}function l(e,t=e.schema){const{gen:i,data:s,keyword:n,it:a}=e,l=i.name("valid");for(const d in t)(0,r.alwaysValidSchema)(a,t[d])||(i.if((0,o.propertyInData)(i,s,d,a.opts.ownProperties),(()=>{const t=e.subschema({keyword:n,schemaProp:d},l);e.mergeValidEvaluated(t,l)}),(()=>i.var(l,!0))),e.ok(l))}t.validatePropertyDeps=a,t.validateSchemaDeps=l,t.default=n},1239:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r=i(94227),o={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>s.str`must match "${e.ifClause}" schema`,params:({params:e})=>s._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:i,it:o}=e;void 0===i.then&&void 0===i.else&&(0,r.checkStrictMode)(o,'"if" without "then" and "else" is ignored');const a=n(o,"then"),l=n(o,"else");if(!a&&!l)return;const d=t.let("valid",!0),c=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},c);e.mergeEvaluated(t)}(),e.reset(),a&&l){const i=t.let("ifClause");e.setParams({ifClause:i}),t.if(c,u("then",i),u("else",i))}else a?t.if(c,u("then")):t.if((0,s.not)(c),u("else"));function u(i,r){return()=>{const o=e.subschema({keyword:i},c);t.assign(d,c),e.mergeValidEvaluated(o,d),r?t.assign(r,s._`${i}`):e.setParams({ifClause:i})}}e.pass(d,(()=>e.error(!0)))}};function n(e,t){const i=e.schema[t];return void 0!==i&&!(0,r.alwaysValidSchema)(e,i)}t.default=o},56378:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(15457),r=i(65354),o=i(20494),n=i(93966),a=i(12661),l=i(83025),d=i(19713),c=i(38660),u=i(40117),h=i(67714),p=i(57923),g=i(16505),m=i(96163),f=i(15844),v=i(1239),C=i(92045);t.default=function(e=!1){const t=[p.default,g.default,m.default,f.default,v.default,C.default,d.default,c.default,l.default,u.default,h.default];return e?t.push(r.default,n.default):t.push(s.default,o.default),t.push(a.default),t}},20494:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const s=i(99029),r=i(94227),o=i(15765),n={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:i}=e;if(Array.isArray(t))return a(e,"additionalItems",t);i.items=!0,(0,r.alwaysValidSchema)(i,t)||e.ok((0,o.validateArray)(e))}};function a(e,t,i=e.schema){const{gen:o,parentSchema:n,data:a,keyword:l,it:d}=e;!function(e){const{opts:s,errSchemaPath:o}=d,n=i.length,a=n===e.minItems&&(n===e.maxItems||!1===e[t]);if(s.strictTuples&&!a){const e=`"${l}" is ${n}-tuple, but minItems or maxItems/${t} are not specified or different at path "${o}"`;(0,r.checkStrictMode)(d,e,s.strictTuples)}}(n),d.opts.unevaluated&&i.length&&!0!==d.items&&(d.items=r.mergeEvaluated.items(o,i.length,d.items));const c=o.name("valid"),u=o.const("len",s._`${a}.length`);i.forEach(((t,i)=>{(0,r.alwaysValidSchema)(d,t)||(o.if(s._`${u} > ${i}`,(()=>e.subschema({keyword:l,schemaProp:i,dataProp:i},c))),e.ok(c))}))}t.validateTuple=a,t.default=n},93966:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r=i(94227),o=i(15765),n=i(15457),a={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>s.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>s._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:i,it:s}=e,{prefixItems:a}=i;s.items=!0,(0,r.alwaysValidSchema)(s,t)||(a?(0,n.validateAdditionalItems)(e,a):e.ok((0,o.validateArray)(e)))}};t.default=a},57923:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(94227),r={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:i,it:r}=e;if((0,s.alwaysValidSchema)(r,i))return void e.fail();const o=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),e.failResult(o,(()=>e.reset()),(()=>e.error()))},error:{message:"must NOT be valid"}};t.default=r},96163:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r=i(94227),o={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>s._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:i,parentSchema:o,it:n}=e;if(!Array.isArray(i))throw new Error("ajv implementation error");if(n.opts.discriminator&&o.discriminator)return;const a=i,l=t.let("valid",!1),d=t.let("passing",null),c=t.name("_valid");e.setParams({passing:d}),t.block((function(){a.forEach(((i,o)=>{let a;(0,r.alwaysValidSchema)(n,i)?t.var(c,!0):a=e.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},c),o>0&&t.if(s._`${c} && ${l}`).assign(l,!1).assign(d,s._`[${d}, ${o}]`).else(),t.if(c,(()=>{t.assign(l,!0),t.assign(d,o),a&&e.mergeEvaluated(a,s.Name)}))}))})),e.result(l,(()=>e.reset()),(()=>e.error(!0)))}};t.default=o},67714:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(15765),r=i(99029),o=i(94227),n=i(94227),a={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:i,data:a,parentSchema:l,it:d}=e,{opts:c}=d,u=(0,s.allSchemaProperties)(i),h=u.filter((e=>(0,o.alwaysValidSchema)(d,i[e])));if(0===u.length||h.length===u.length&&(!d.opts.unevaluated||!0===d.props))return;const p=c.strictSchema&&!c.allowMatchingProperties&&l.properties,g=t.name("valid");!0===d.props||d.props instanceof r.Name||(d.props=(0,n.evaluatedPropsToName)(t,d.props));const{props:m}=d;function f(e){for(const t in p)new RegExp(e).test(t)&&(0,o.checkStrictMode)(d,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function v(i){t.forIn("key",a,(o=>{t.if(r._`${(0,s.usePattern)(e,i)}.test(${o})`,(()=>{const s=h.includes(i);s||e.subschema({keyword:"patternProperties",schemaProp:i,dataProp:o,dataPropType:n.Type.Str},g),d.opts.unevaluated&&!0!==m?t.assign(r._`${m}[${o}]`,!0):s||d.allErrors||t.if((0,r.not)(g),(()=>t.break()))}))}))}!function(){for(const e of u)p&&f(e),d.allErrors?v(e):(t.var(g,!0),v(e),t.if(g))}()}};t.default=a},65354:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(20494),r={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,s.validateTuple)(e,"items")};t.default=r},40117:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(62586),r=i(15765),o=i(94227),n=i(38660),a={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:i,parentSchema:a,data:l,it:d}=e;"all"===d.opts.removeAdditional&&void 0===a.additionalProperties&&n.default.code(new s.KeywordCxt(d,n.default,"additionalProperties"));const c=(0,r.allSchemaProperties)(i);for(const e of c)d.definedProperties.add(e);d.opts.unevaluated&&c.length&&!0!==d.props&&(d.props=o.mergeEvaluated.props(t,(0,o.toHash)(c),d.props));const u=c.filter((e=>!(0,o.alwaysValidSchema)(d,i[e])));if(0===u.length)return;const h=t.name("valid");for(const i of u)p(i)?g(i):(t.if((0,r.propertyInData)(t,l,i,d.opts.ownProperties)),g(i),d.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(i),e.ok(h);function p(e){return d.opts.useDefaults&&!d.compositeRule&&void 0!==i[e].default}function g(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};t.default=a},19713:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r=i(94227),o={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>s._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:i,data:o,it:n}=e;if((0,r.alwaysValidSchema)(n,i))return;const a=t.name("valid");t.forIn("key",o,(i=>{e.setParams({propertyName:i}),e.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},a),t.if((0,s.not)(a),(()=>{e.error(!0),n.allErrors||t.break()}))})),e.ok(a)}};t.default=o},92045:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(94227),r={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:i}){void 0===t.if&&(0,s.checkStrictMode)(i,`"${e}" without "if" is ignored`)}};t.default=r},15765:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const s=i(99029),r=i(94227),o=i(64404),n=i(94227);function a(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:s._`Object.prototype.hasOwnProperty`})}function l(e,t,i){return s._`${a(e)}.call(${t}, ${i})`}function d(e,t,i,r){const o=s._`${t}${(0,s.getProperty)(i)} === undefined`;return r?(0,s.or)(o,(0,s.not)(l(e,t,i))):o}function c(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}t.checkReportMissingProp=function(e,t){const{gen:i,data:r,it:o}=e;i.if(d(i,r,t,o.opts.ownProperties),(()=>{e.setParams({missingProperty:s._`${t}`},!0),e.error()}))},t.checkMissingProp=function({gen:e,data:t,it:{opts:i}},r,o){return(0,s.or)(...r.map((r=>(0,s.and)(d(e,t,r,i.ownProperties),s._`${o} = ${r}`))))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=a,t.isOwnProperty=l,t.propertyInData=function(e,t,i,r){const o=s._`${t}${(0,s.getProperty)(i)} !== undefined`;return r?s._`${o} && ${l(e,t,i)}`:o},t.noPropertyInData=d,t.allSchemaProperties=c,t.schemaProperties=function(e,t){return c(t).filter((i=>!(0,r.alwaysValidSchema)(e,t[i])))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:i,topSchemaRef:r,schemaPath:n,errorPath:a},it:l},d,c,u){const h=u?s._`${e}, ${t}, ${r}${n}`:t,p=[[o.default.instancePath,(0,s.strConcat)(o.default.instancePath,a)],[o.default.parentData,l.parentData],[o.default.parentDataProperty,l.parentDataProperty],[o.default.rootData,o.default.rootData]];l.opts.dynamicRef&&p.push([o.default.dynamicAnchors,o.default.dynamicAnchors]);const g=s._`${h}, ${i.object(...p)}`;return c!==s.nil?s._`${d}.call(${c}, ${g})`:s._`${d}(${g})`};const u=s._`new RegExp`;t.usePattern=function({gen:e,it:{opts:t}},i){const r=t.unicodeRegExp?"u":"",{regExp:o}=t.code,a=o(i,r);return e.scopeValue("pattern",{key:a.toString(),ref:a,code:s._`${"new RegExp"===o.code?u:(0,n.useFunc)(e,o)}(${i}, ${r})`})},t.validateArray=function(e){const{gen:t,data:i,keyword:o,it:n}=e,a=t.name("valid");if(n.allErrors){const e=t.let("valid",!0);return l((()=>t.assign(e,!1))),e}return t.var(a,!0),l((()=>t.break())),a;function l(n){const l=t.const("len",s._`${i}.length`);t.forRange("i",0,l,(i=>{e.subschema({keyword:o,dataProp:i,dataPropType:r.Type.Num},a),t.if((0,s.not)(a),n)}))}},t.validateUnion=function(e){const{gen:t,schema:i,keyword:o,it:n}=e;if(!Array.isArray(i))throw new Error("ajv implementation error");if(i.some((e=>(0,r.alwaysValidSchema)(n,e)))&&!n.opts.unevaluated)return;const a=t.let("valid",!1),l=t.name("_valid");t.block((()=>i.forEach(((i,r)=>{const n=e.subschema({keyword:o,schemaProp:r,compositeRule:!0},l);t.assign(a,s._`${a} || ${l}`),e.mergeValidEvaluated(n,l)||t.if((0,s.not)(a))})))),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}},83463:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=i},72128:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(83463),r=i(13693),o=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",s.default,r.default];t.default=o},13693:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const s=i(34551),r=i(15765),o=i(99029),n=i(64404),a=i(73835),l=i(94227),d={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:i,it:r}=e,{baseId:n,schemaEnv:l,validateName:d,opts:h,self:p}=r,{root:g}=l;if(("#"===i||"#/"===i)&&n===g.baseId)return function(){if(l===g)return u(e,d,l,l.$async);const i=t.scopeValue("root",{ref:g});return u(e,o._`${i}.validate`,g,g.$async)}();const m=a.resolveRef.call(p,g,n,i);if(void 0===m)throw new s.default(r.opts.uriResolver,n,i);return m instanceof a.SchemaEnv?function(t){const i=c(e,t);u(e,i,t,t.$async)}(m):function(s){const r=t.scopeValue("schema",!0===h.code.source?{ref:s,code:(0,o.stringify)(s)}:{ref:s}),n=t.name("valid"),a=e.subschema({schema:s,dataTypes:[],schemaPath:o.nil,topSchemaRef:r,errSchemaPath:i},n);e.mergeEvaluated(a),e.ok(n)}(m)}};function c(e,t){const{gen:i}=e;return t.validate?i.scopeValue("validate",{ref:t.validate}):o._`${i.scopeValue("wrapper",{ref:t})}.validate`}function u(e,t,i,s){const{gen:a,it:d}=e,{allErrors:c,schemaEnv:u,opts:h}=d,p=h.passContext?n.default.this:o.nil;function g(e){const t=o._`${e}.errors`;a.assign(n.default.vErrors,o._`${n.default.vErrors} === null ? ${t} : ${n.default.vErrors}.concat(${t})`),a.assign(n.default.errors,o._`${n.default.vErrors}.length`)}function m(e){var t;if(!d.opts.unevaluated)return;const s=null===(t=null==i?void 0:i.validate)||void 0===t?void 0:t.evaluated;if(!0!==d.props)if(s&&!s.dynamicProps)void 0!==s.props&&(d.props=l.mergeEvaluated.props(a,s.props,d.props));else{const t=a.var("props",o._`${e}.evaluated.props`);d.props=l.mergeEvaluated.props(a,t,d.props,o.Name)}if(!0!==d.items)if(s&&!s.dynamicItems)void 0!==s.items&&(d.items=l.mergeEvaluated.items(a,s.items,d.items));else{const t=a.var("items",o._`${e}.evaluated.items`);d.items=l.mergeEvaluated.items(a,t,d.items,o.Name)}}s?function(){if(!u.$async)throw new Error("async schema referenced by sync schema");const i=a.let("valid");a.try((()=>{a.code(o._`await ${(0,r.callValidateCode)(e,t,p)}`),m(t),c||a.assign(i,!0)}),(e=>{a.if(o._`!(${e} instanceof ${d.ValidationError})`,(()=>a.throw(e))),g(e),c||a.assign(i,!1)})),e.ok(i)}():e.result((0,r.callValidateCode)(e,t,p),(()=>m(t)),(()=>g(t)))}t.getValidate=c,t.callRef=u,t.default=d},36653:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r=i(97652),o=i(73835),n=i(34551),a=i(94227),l={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===r.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:i}})=>s._`{error: ${e}, tag: ${i}, tagValue: ${t}}`},code(e){const{gen:t,data:i,schema:l,parentSchema:d,it:c}=e,{oneOf:u}=d;if(!c.opts.discriminator)throw new Error("discriminator: requires discriminator option");const h=l.propertyName;if("string"!=typeof h)throw new Error("discriminator: requires propertyName");if(l.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");const p=t.let("valid",!1),g=t.const("tag",s._`${i}${(0,s.getProperty)(h)}`);function m(i){const r=t.name("valid"),o=e.subschema({keyword:"oneOf",schemaProp:i},r);return e.mergeEvaluated(o,s.Name),r}t.if(s._`typeof ${g} == "string"`,(()=>function(){const i=function(){var e;const t={},i=r(d);let s=!0;for(let t=0;t<u.length;t++){let d=u[t];if((null==d?void 0:d.$ref)&&!(0,a.schemaHasRulesButRef)(d,c.self.RULES)){const e=d.$ref;if(d=o.resolveRef.call(c.self,c.schemaEnv.root,c.baseId,e),d instanceof o.SchemaEnv&&(d=d.schema),void 0===d)throw new n.default(c.opts.uriResolver,c.baseId,e)}const p=null===(e=null==d?void 0:d.properties)||void 0===e?void 0:e[h];if("object"!=typeof p)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${h}"`);s=s&&(i||r(d)),l(p,t)}if(!s)throw new Error(`discriminator: "${h}" must be required`);return t;function r({required:e}){return Array.isArray(e)&&e.includes(h)}function l(e,t){if(e.const)p(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${h}" must have "const" or "enum"`);for(const i of e.enum)p(i,t)}}function p(e,i){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${h}" values must be unique strings`);t[e]=i}}();t.if(!1);for(const e in i)t.elseIf(s._`${g} === ${e}`),t.assign(p,m(i[e]));t.else(),e.error(!1,{discrError:r.DiscrError.Mapping,tag:g,tagName:h}),t.endIf()}()),(()=>e.error(!1,{discrError:r.DiscrError.Tag,tag:g,tagName:h}))),e.ok(p)}};t.default=l},97652:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(i||(t.DiscrError=i={}))},86144:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(72128),r=i(67060),o=i(56378),n=i(97532),a=i(69857),l=[s.default,r.default,(0,o.default)(),n.default,a.metadataVocabulary,a.contentVocabulary];t.default=l},94737:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>s.str`must match format "${e}"`,params:({schemaCode:e})=>s._`{format: ${e}}`},code(e,t){const{gen:i,data:r,$data:o,schema:n,schemaCode:a,it:l}=e,{opts:d,errSchemaPath:c,schemaEnv:u,self:h}=l;d.validateFormats&&(o?function(){const o=i.scopeValue("formats",{ref:h.formats,code:d.code.formats}),n=i.const("fDef",s._`${o}[${a}]`),l=i.let("fType"),c=i.let("format");i.if(s._`typeof ${n} == "object" && !(${n} instanceof RegExp)`,(()=>i.assign(l,s._`${n}.type || "string"`).assign(c,s._`${n}.validate`)),(()=>i.assign(l,s._`"string"`).assign(c,n))),e.fail$data((0,s.or)(!1===d.strictSchema?s.nil:s._`${a} && !${c}`,function(){const e=u.$async?s._`(${n}.async ? await ${c}(${r}) : ${c}(${r}))`:s._`${c}(${r})`,i=s._`(typeof ${c} == "function" ? ${e} : ${c}.test(${r}))`;return s._`${c} && ${c} !== true && ${l} === ${t} && !${i}`}()))}():function(){const o=h.formats[n];if(!o)return void function(){if(!1!==d.strictSchema)throw new Error(e());function e(){return`unknown format "${n}" ignored in schema at path "${c}"`}h.logger.warn(e())}();if(!0===o)return;const[a,l,p]=function(e){const t=e instanceof RegExp?(0,s.regexpCode)(e):d.code.formats?s._`${d.code.formats}${(0,s.getProperty)(n)}`:void 0,r=i.scopeValue("formats",{key:n,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,r]:[e.type||"string",e.validate,s._`${r}.validate`]}(o);a===t&&e.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!u.$async)throw new Error("async format in sync schema");return s._`await ${p}(${r})`}return"function"==typeof l?s._`${p}(${r})`:s._`${p}.test(${r})`}())}())}};t.default=r},97532:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=[i(94737).default];t.default=s},69857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},27935:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r=i(94227),o=i(53869),n={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>s._`{allowedValue: ${e}}`},code(e){const{gen:t,data:i,$data:n,schemaCode:a,schema:l}=e;n||l&&"object"==typeof l?e.fail$data(s._`!${(0,r.useFunc)(t,o.default)}(${i}, ${a})`):e.fail(s._`${l} !== ${i}`)}};t.default=n},28643:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r=i(94227),o=i(53869),n={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>s._`{allowedValues: ${e}}`},code(e){const{gen:t,data:i,$data:n,schema:a,schemaCode:l,it:d}=e;if(!n&&0===a.length)throw new Error("enum must have non-empty array");const c=a.length>=d.opts.loopEnum;let u;const h=()=>null!=u?u:u=(0,r.useFunc)(t,o.default);let p;if(c||n)p=t.let("valid"),e.block$data(p,(function(){t.assign(p,!1),t.forOf("v",l,(e=>t.if(s._`${h()}(${i}, ${e})`,(()=>t.assign(p,!0).break()))))}));else{if(!Array.isArray(a))throw new Error("ajv implementation error");const e=t.const("vSchema",l);p=(0,s.or)(...a.map(((t,r)=>function(e,t){const r=a[t];return"object"==typeof r&&null!==r?s._`${h()}(${i}, ${e}[${t}])`:s._`${i} === ${r}`}(e,r))))}e.pass(p)}};t.default=n},67060:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(75882),r=i(63439),o=i(77307),n=i(68041),a=i(34486),l=i(56384),d=i(61163),c=i(60617),u=i(27935),h=i(28643),p=[s.default,r.default,o.default,n.default,a.default,l.default,d.default,c.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,h.default];t.default=p},61163:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const i="maxItems"===e?"more":"fewer";return s.str`must NOT have ${i} than ${t} items`},params:({schemaCode:e})=>s._`{limit: ${e}}`},code(e){const{keyword:t,data:i,schemaCode:r}=e,o="maxItems"===t?s.operators.GT:s.operators.LT;e.fail$data(s._`${i}.length ${o} ${r}`)}};t.default=r},77307:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r=i(94227),o=i(53853),n={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const i="maxLength"===e?"more":"fewer";return s.str`must NOT have ${i} than ${t} characters`},params:({schemaCode:e})=>s._`{limit: ${e}}`},code(e){const{keyword:t,data:i,schemaCode:n,it:a}=e,l="maxLength"===t?s.operators.GT:s.operators.LT,d=!1===a.opts.unicode?s._`${i}.length`:s._`${(0,r.useFunc)(e.gen,o.default)}(${i})`;e.fail$data(s._`${d} ${l} ${n}`)}};t.default=n},75882:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r=s.operators,o={maximum:{okStr:"<=",ok:r.LTE,fail:r.GT},minimum:{okStr:">=",ok:r.GTE,fail:r.LT},exclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},exclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},n={message:({keyword:e,schemaCode:t})=>s.str`must be ${o[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>s._`{comparison: ${o[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(o),type:"number",schemaType:"number",$data:!0,error:n,code(e){const{keyword:t,data:i,schemaCode:r}=e;e.fail$data(s._`${i} ${o[t].fail} ${r} || isNaN(${i})`)}};t.default=a},34486:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const i="maxProperties"===e?"more":"fewer";return s.str`must NOT have ${i} than ${t} properties`},params:({schemaCode:e})=>s._`{limit: ${e}}`},code(e){const{keyword:t,data:i,schemaCode:r}=e,o="maxProperties"===t?s.operators.GT:s.operators.LT;e.fail$data(s._`Object.keys(${i}).length ${o} ${r}`)}};t.default=r},63439:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(99029),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>s.str`must be multiple of ${e}`,params:({schemaCode:e})=>s._`{multipleOf: ${e}}`},code(e){const{gen:t,data:i,schemaCode:r,it:o}=e,n=o.opts.multipleOfPrecision,a=t.let("res"),l=n?s._`Math.abs(Math.round(${a}) - ${a}) > 1e-${n}`:s._`${a} !== parseInt(${a})`;e.fail$data(s._`(${r} === 0 || (${a} = ${i}/${r}, ${l}))`)}};t.default=r},68041:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(15765),r=i(99029),o={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>r.str`must match pattern "${e}"`,params:({schemaCode:e})=>r._`{pattern: ${e}}`},code(e){const{data:t,$data:i,schema:o,schemaCode:n,it:a}=e,l=a.opts.unicodeRegExp?"u":"",d=i?r._`(new RegExp(${n}, ${l}))`:(0,s.usePattern)(e,o);e.fail$data(r._`!${d}.test(${t})`)}};t.default=o},56384:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(15765),r=i(99029),o=i(94227),n={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>r.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>r._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:i,schemaCode:n,data:a,$data:l,it:d}=e,{opts:c}=d;if(!l&&0===i.length)return;const u=i.length>=c.loopRequired;if(d.allErrors?function(){if(u||l)e.block$data(r.nil,h);else for(const t of i)(0,s.checkReportMissingProp)(e,t)}():function(){const o=t.let("missing");if(u||l){const i=t.let("valid",!0);e.block$data(i,(()=>function(i,o){e.setParams({missingProperty:i}),t.forOf(i,n,(()=>{t.assign(o,(0,s.propertyInData)(t,a,i,c.ownProperties)),t.if((0,r.not)(o),(()=>{e.error(),t.break()}))}),r.nil)}(o,i))),e.ok(i)}else t.if((0,s.checkMissingProp)(e,i,o)),(0,s.reportMissingProp)(e,o),t.else()}(),c.strictRequired){const t=e.parentSchema.properties,{definedProperties:s}=e.it;for(const e of i)if(void 0===(null==t?void 0:t[e])&&!s.has(e)){const t=`required property "${e}" is not defined at "${d.schemaEnv.baseId+d.errSchemaPath}" (strictRequired)`;(0,o.checkStrictMode)(d,t,d.opts.strictRequired)}}function h(){t.forOf("prop",n,(i=>{e.setParams({missingProperty:i}),t.if((0,s.noPropertyInData)(t,a,i,c.ownProperties),(()=>e.error()))}))}}};t.default=n},60617:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(10208),r=i(99029),o=i(94227),n=i(53869),a={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>r.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>r._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:i,$data:a,schema:l,parentSchema:d,schemaCode:c,it:u}=e;if(!a&&!l)return;const h=t.let("valid"),p=d.items?(0,s.getSchemaTypes)(d.items):[];function g(o,n){const a=t.name("item"),l=(0,s.checkDataTypes)(p,a,u.opts.strictNumbers,s.DataType.Wrong),d=t.const("indices",r._`{}`);t.for(r._`;${o}--;`,(()=>{t.let(a,r._`${i}[${o}]`),t.if(l,r._`continue`),p.length>1&&t.if(r._`typeof ${a} == "string"`,r._`${a} += "_"`),t.if(r._`typeof ${d}[${a}] == "number"`,(()=>{t.assign(n,r._`${d}[${a}]`),e.error(),t.assign(h,!1).break()})).code(r._`${d}[${a}] = ${o}`)}))}function m(s,a){const l=(0,o.useFunc)(t,n.default),d=t.name("outer");t.label(d).for(r._`;${s}--;`,(()=>t.for(r._`${a} = ${s}; ${a}--;`,(()=>t.if(r._`${l}(${i}[${s}], ${i}[${a}])`,(()=>{e.error(),t.assign(h,!1).break(d)}))))))}e.block$data(h,(function(){const s=t.let("i",r._`${i}.length`),o=t.let("j");e.setParams({i:s,j:o}),t.assign(h,!0),t.if(r._`${s} > 1`,(()=>(p.length>0&&!p.some((e=>"object"===e||"array"===e))?g:m)(s,o)))}),r._`${c} === false`),e.ok(h)}};t.default=a},74761:(e,t,i)=>{"use strict";i.d(t,{Mh:()=>h});var s=i(6311),r=i(34598);const o=new s.Keyframes("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),n=new s.Keyframes("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),a=new s.Keyframes("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),l=new s.Keyframes("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),d=new s.Keyframes("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),c=new s.Keyframes("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),u={"move-up":{inKeyframes:new s.Keyframes("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),outKeyframes:new s.Keyframes("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}})},"move-down":{inKeyframes:o,outKeyframes:n},"move-left":{inKeyframes:a,outKeyframes:l},"move-right":{inKeyframes:d,outKeyframes:c}},h=(e,t)=>{const{antCls:i}=e,s=`${i}-${t}`,{inKeyframes:o,outKeyframes:n}=u[t];return[(0,r.b)(s,o,n,e.motionDurationMid),{[`\n        ${s}-enter,\n        ${s}-appear\n      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${s}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]}},9066:(e,t,i)=>{"use strict";i.d(t,{l:()=>s});const s=e=>{var t;return{columns:e.columns,name:(null==e?void 0:e.datasource_name)||(null==e?void 0:e.name)||"Untitled",dbId:(null==e||null==(t=e.database)?void 0:t.id)||(null==e?void 0:e.dbId),sql:(null==e?void 0:e.sql)||"",catalog:null==e?void 0:e.catalog,schema:null==e?void 0:e.schema}}},51403:(e,t,i)=>{"use strict";var s=i(85419),r=i(96552),o=i(82986),n=Math.pow(2,31)-1;function a(e,t){var i,s=1;if(0===e)return t;if(0===t)return e;for(;e%2==0&&t%2==0;)e/=2,t/=2,s*=2;for(;e%2==0;)e/=2;for(;t;){for(;t%2==0;)t/=2;e>t&&(i=t,t=e,e=i),t-=e}return s*e}function l(e,t){var i,s=0;if(0===e)return t;if(0===t)return e;for(;!(1&e||1&t);)e>>>=1,t>>>=1,s++;for(;!(1&e);)e>>>=1;for(;t;){for(;!(1&t);)t>>>=1;e>t&&(i=t,t=e,e=i),t-=e}return e<<s}e.exports=function(){var e,t,i,d,c,u,h,p=arguments.length;for(e=new Array(p),h=0;h<p;h++)e[h]=arguments[h];if(r(e)){if(2===p)return(c=e[0])<0&&(c=-c),(u=e[1])<0&&(u=-u),c<=n&&u<=n?l(c,u):a(c,u);i=e}else{if(!s(e[0]))throw new TypeError("gcd()::invalid input argument. Must provide an array of integers. Value: `"+e[0]+"`.");if(p>1){if(i=e[0],t=e[1],!o(t))throw new TypeError("gcd()::invalid input argument. Accessor must be a function. Value: `"+t+"`.")}else i=e[0]}if((d=i.length)<2)return null;if(t){for(c=new Array(d),h=0;h<d;h++)c[h]=t(i[h],h);i=c}if(p<3&&!r(i))throw new TypeError("gcd()::invalid input argument. Accessed array values must be integers. Value: `"+i+"`.");for(h=0;h<d;h++)(c=i[h])<0&&(i[h]=-c);for(c=i[0],h=1;h<d;h++)c=(u=i[h])<=n&&c<=n?l(c,u):a(c,u);return c}},78867:(e,t,i)=>{"use strict";var s=i(51403),r=i(85419),o=i(96552),n=i(82986);e.exports=function(){var e,t,i,a,l,d,c,u=arguments.length;for(e=new Array(u),c=0;c<u;c++)e[c]=arguments[c];if(o(e)){if(2===u)return(l=e[0])<0&&(l=-l),(d=e[1])<0&&(d=-d),0===l||0===d?0:l/s(l,d)*d;i=e}else{if(!r(e[0]))throw new TypeError("lcm()::invalid input argument. Must provide an array of integers. Value: `"+e[0]+"`.");if(u>1){if(i=e[0],t=e[1],!n(t))throw new TypeError("lcm()::invalid input argument. Accessor must be a function. Value: `"+t+"`.")}else i=e[0]}if((a=i.length)<2)return null;if(t){for(l=new Array(a),c=0;c<a;c++)l[c]=t(i[c],c);i=l}if(u<3&&!o(i))throw new TypeError("lcm()::invalid input argument. Accessed array values must be integers. Value: `"+i+"`.");for(c=0;c<a;c++)(l=i[c])<0&&(i[c]=-l);for(l=i[0],c=1;c<a;c++){if(d=i[c],0===l||0===d)return 0;l=l/s(l,d)*d}return l}},41816:function(e){e.exports=function(){"use strict";var e="month",t="quarter";return function(i,s){var r=s.prototype;r.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var o=r.add;r.add=function(i,s){return i=Number(i),this.$utils().p(s)===t?this.add(3*i,e):o.bind(this)(i,s)};var n=r.startOf;r.startOf=function(i,s){var r=this.$utils(),o=!!r.u(s)||s;if(r.p(i)===t){var a=this.quarter()-1;return o?this.month(3*a).startOf(e).startOf("day"):this.month(3*a+2).endOf(e).endOf("day")}return n.bind(this)(i,s)}}}()},32017:e=>{"use strict";e.exports=function e(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){if(t.constructor!==i.constructor)return!1;var s,r,o;if(Array.isArray(t)){if((s=t.length)!=i.length)return!1;for(r=s;0!=r--;)if(!e(t[r],i[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===i.source&&t.flags===i.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===i.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===i.toString();if((s=(o=Object.keys(t)).length)!==Object.keys(i).length)return!1;for(r=s;0!=r--;)if(!Object.prototype.hasOwnProperty.call(i,o[r]))return!1;for(r=s;0!=r--;){var n=o[r];if(!e(t[n],i[n]))return!1}return!0}return t!=t&&i!=i}},90370:(e,t,i)=>{var s=i(2404),r=i(33031),o=i(63375),n=i(9063),a=i(84684),l=i(80191),d=i(11331),c=i(53812),u=e=>Array.isArray(e)?e:[e],h=e=>void 0===e,p=e=>d(e)||Array.isArray(e)?Object.keys(e):[],g=(e,t)=>e.hasOwnProperty(t),m=e=>r(o(e)),f=e=>h(e)||Array.isArray(e)&&0===e.length,v=(e,t)=>h(e)&&0===t||h(t)&&0===e||s(e,t),C=e=>h(e)||s(e,{})||!0===e,y=e=>h(e)||s(e,{}),w=e=>h(e)||d(e)||!0===e||!1===e;function S(e,t){return!(!f(e)||!f(t))||s(m(e),m(t))}function b(e,t,i,r){var n=o(p(e).concat(p(t)));return!(!y(e)||!y(t))||(!y(e)||!p(t).length)&&(!y(t)||!p(e).length)&&n.every((function(i){var o=e[i],n=t[i];return Array.isArray(o)&&Array.isArray(n)?s(m(e),m(t)):!(Array.isArray(o)&&!Array.isArray(n))&&!(Array.isArray(n)&&!Array.isArray(o))&&((e,t,i,s)=>t&&g(t,i)&&e&&g(e,i)&&s(e[i],t[i]))(e,t,i,r)}))}function R(e,t,i,s){var r=n(e,s),o=n(t,s);return l(r,o,s).length===Math.max(r.length,o.length)}var E={title:s,uniqueItems:(e,t)=>h(e)&&!1===t||h(t)&&!1===e||s(e,t),minLength:v,minItems:v,minProperties:v,required:S,enum:S,type:function(e,t){return e=u(e),t=u(t),s(m(e),m(t))},items:function(e,t,i,r){return d(e)&&d(t)?r(e,t):Array.isArray(e)&&Array.isArray(t)?b(e,t,0,r):s(e,t)},anyOf:R,allOf:R,oneOf:R,properties:b,patternProperties:b,dependencies:b},F=["properties","patternProperties","dependencies","uniqueItems","minLength","minItems","minProperties","required"],P=["additionalProperties","additionalItems","contains","propertyNames","not"];e.exports=function e(t,i,r){if(r=a(r,{ignore:[]}),C(t)&&C(i))return!0;if(!w(t)||!w(i))throw new Error("Either of the values are not a JSON schema.");if(t===i)return!0;if(c(t)&&c(i))return t===i;if(void 0===t&&!1===i||void 0===i&&!1===t)return!1;if(h(t)&&!h(i)||!h(t)&&h(i))return!1;var n=o(Object.keys(t).concat(Object.keys(i)));if(r.ignore.length&&(n=n.filter((e=>-1===r.ignore.indexOf(e)))),!n.length)return!0;function l(t,i){return e(t,i,r)}return n.every((function(o){var n=t[o],a=i[o];if(-1!==P.indexOf(o))return e(n,a,r);var d=E[o];if(d||(d=s),s(n,a))return!0;if(-1===F.indexOf(o)&&(!g(t,o)&&g(i,o)||g(t,o)&&!g(i,o)))return n===a;var u=d(n,a,o,l);if(!c(u))throw new Error("Comparer must return true or false");return u}))}},5109:(e,t,i)=>{const s=i(35970),r=i(80795),o=i(11331),n=i(63375),a=i(9063),l=i(91648),d=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c=e=>o(e)||Array.isArray(e)?Object.keys(e):[],u=e=>!c(e).length&&!1!==e&&!0!==e;e.exports={allUniqueKeys:e=>n(r(e.map(c))),deleteUndefinedProps:function(e){for(const t in e)d(e,t)&&u(e[t])&&delete e[t];return e},getValues:(e,t)=>e.map((e=>e&&e[t])),has:d,isEmptySchema:u,isSchema:e=>o(e)||!0===e||!1===e,keys:c,notUndefined:e=>void 0!==e,uniqWith:a,withoutArr:(e,...t)=>l.apply(null,[e].concat(s(t)))}},11051:(e,t,i)=>{const s=i(90370),r=i(39754),{allUniqueKeys:o,deleteUndefinedProps:n,has:a,isSchema:l,notUndefined:d,uniqWith:c}=i(5109);e.exports={keywords:["items","additionalItems"],resolver(e,t,i){const u=e.map((e=>e.items)),h=u.filter(d),p={};let g;var m;return h.every(l)?p.items=i.items(u):p.items=function(e,t,i){return o(i).reduce((function(i,r){const o=function(e,t){return e.map((function(e){if(e){if(!Array.isArray(e.items))return e.items;{const i=e.items[t];if(l(i))return i;if(a(e,"additionalItems"))return e.additionalItems}}}))}(e,r),n=c(o.filter(d),s);return i[r]=t(n,r),i}),[])}(e,i.items,u),h.every(Array.isArray)?g=e.map((e=>e.additionalItems)):h.some(Array.isArray)&&(g=e.map((function(e){if(e)return Array.isArray(e.items)?e.additionalItems:e.items}))),g&&(p.additionalItems=i.additionalItems(g)),!1===p.additionalItems&&Array.isArray(p.items)&&(m=p.items,r(m,(function(e,t){!1===e&&m.splice(t,1)}))),n(p)}}},7894:(e,t,i)=>{const s=i(90370),r=i(39754),{allUniqueKeys:o,deleteUndefinedProps:n,getValues:a,keys:l,notUndefined:d,uniqWith:c,withoutArr:u}=i(5109);function h(e,t){return o(e).reduce((function(i,r){const o=a(e,r),n=c(o.filter(d),s);return i[r]=t(n,r),i}),{})}e.exports={keywords:["properties","patternProperties","additionalProperties"],resolver(e,t,i,s){s.ignoreAdditionalProperties||(e.forEach((function(t){const s=e.filter((e=>e!==t)),r=l(t.properties),o=l(t.patternProperties).map((e=>new RegExp(e)));s.forEach((function(e){const s=l(e.properties),n=s.filter((e=>o.some((t=>t.test(e)))));u(s,r,n).forEach((function(s){e.properties[s]=i.properties([e.properties[s],t.additionalProperties],s)}))}))})),e.forEach((function(t){const i=e.filter((e=>e!==t)),s=l(t.patternProperties);!1===t.additionalProperties&&i.forEach((function(e){const t=l(e.patternProperties);u(t,s).forEach((t=>delete e.patternProperties[t]))}))})));const o={additionalProperties:i.additionalProperties(e.map((e=>e.additionalProperties))),patternProperties:h(e.map((e=>e.patternProperties)),i.patternProperties),properties:h(e.map((e=>e.properties)),i.properties)};var a;return!1===o.additionalProperties&&r(a=o.properties,(function(e,t){!1===e&&delete a[t]})),n(o)}}},33978:(e,t,i)=>{const s=i(88055),r=i(90370),o=i(78867),n=i(51973),a=i(35970),l=i(80795),d=i(5287),c=i(80191),u=i(2404),h=i(11331),p=i(12358),g=i(33031),m=i(63375),f=i(9063),v=i(7894),C=i(11051),y=(e,t)=>-1!==e.indexOf(t),w=e=>h(e)||!0===e||!1===e,S=e=>!1===e,b=e=>!0===e,R=(e,t,i)=>i(e),E=e=>g(m(l(e))),F=e=>void 0!==e,P=e=>m(l(e.map(I))),x=e=>e[0],D=e=>Math.max.apply(Math,e),A=e=>Math.min.apply(Math,e);function T(e){let{allOf:t=[],...i}=e;return i=h(e)?i:e,[i,...t.map(T)]}function M(e,t){return e.map((e=>e&&e[t]))}function I(e){return h(e)||Array.isArray(e)?Object.keys(e):[]}function k(e,t){if(t=t||[],!e.length)return t;const i=e.slice(0).shift(),s=e.slice(1);return t.length?k(s,a(t.map((e=>i.map((t=>[t].concat(e))))))):k(s,i.map((e=>e)))}function L(e,t){let i;try{i=e.map((function(e){return JSON.stringify(e,null,2)})).join("\n")}catch(t){i=e.join(", ")}throw new Error('Could not resolve values for path:"'+t.join(".")+'". They are probably incompatible. Values: \n'+i)}function O(e,t,i,s,o,n){if(e.length){const a=o.complexResolvers[t];if(!a||!a.resolver)throw new Error("No resolver found for "+t);const l=i.map((t=>e.reduce(((e,i)=>(void 0!==t[i]&&(e[i]=t[i]),e)),{}))),d=f(l,r),c=a.keywords.reduce(((e,t)=>({...e,[t]:(e,i=[])=>s(e,null,n.concat(t,i))})),{}),u=a.resolver(d,n.concat(t),c,o);return h(u)||L(d,n.concat(t)),u}}function N(e){return{required:e}}const G=["properties","patternProperties","definitions","dependencies"],B=["anyOf","oneOf"],V=["additionalProperties","additionalItems","contains","propertyNames","not","items"],H={type(e){if(e.some(Array.isArray)){const t=e.map((function(e){return Array.isArray(e)?e:[e]})),i=d.apply(null,t);if(1===i.length)return i[0];if(i.length>1)return m(i)}},dependencies:(e,t,i)=>P(e).reduce((function(t,s){const o=M(e,s);let n=f(o.filter(F),u);const a=n.filter(Array.isArray);if(a.length){if(a.length===n.length)t[s]=E(n);else{const e=n.filter(w),r=a.map(N);t[s]=i(e.concat(r),s)}return t}return n=f(n,r),t[s]=i(n,s),t}),{}),oneOf(e,t,i){const o=function(e,t){return e.map((function(e,i){try{return t(e,i)}catch(e){return}})).filter(F)}(k(s(e)),i),n=f(o,r);if(n.length)return n},not:e=>({anyOf:e}),pattern:e=>e.map((e=>"(?="+e+")")).join(""),multipleOf(e){let t=e.slice(0),i=1;for(;t.some((e=>!Number.isInteger(e)));)t=t.map((e=>10*e)),i*=10;return o(t)/i},enum(e){const t=c.apply(null,e.concat(u));if(t.length)return g(t)}};H.$id=x,H.$ref=x,H.$schema=x,H.additionalItems=R,H.additionalProperties=R,H.anyOf=H.oneOf,H.contains=R,H.default=x,H.definitions=H.dependencies,H.description=x,H.examples=e=>f(a(e),u),H.exclusiveMaximum=A,H.exclusiveMinimum=D,H.items=C,H.maximum=A,H.maxItems=A,H.maxLength=A,H.maxProperties=A,H.minimum=D,H.minItems=D,H.minLength=D,H.minProperties=D,H.properties=v,H.propertyNames=R,H.required=e=>E(e),H.title=x,H.uniqueItems=e=>e.some(b);const $={properties:v,items:C};function W(e,t,i){i=i||[],t=n(t,{ignoreAdditionalProperties:!1,resolvers:H,complexResolvers:$,deep:!0});const o=Object.entries(t.complexResolvers),a=function e(n,a,l){n=s(n.filter(F)),l=l||[];const d=h(a)?a:{};if(!n.length)return;if(n.some(S))return!1;if(n.every(b))return!0;n=n.filter(h);const c=P(n);if(t.deep&&y(c,"allOf"))return W({allOf:n},t,i);const u=o.map((([e,t])=>c.filter((e=>t.keywords.includes(e)))));return u.forEach((e=>p(c,e))),c.forEach((function(i){const s=M(n,i),o=f(s.filter(F),function(e){return function(t,i){return r({[e]:t},{[e]:i})}}(i));if(1===o.length&&y(B,i))d[i]=o[0].map((t=>e([t],t)));else if(1!==o.length||y(G,i)||y(V,i)){const s=t.resolvers[i]||t.resolvers.defaultResolver;if(!s)throw new Error("No resolver found for key "+i+". You can provide a resolver for this keyword in the options, or provide a default resolver.");const r=(t,s=[])=>e(t,null,l.concat(i,s));d[i]=s(o,l.concat(i),r,t),void 0===d[i]?L(o,l.concat(i)):void 0===d[i]&&delete d[i]}else d[i]=o[0]})),o.reduce(((i,[s,r],o)=>({...i,...O(u[o],s,n,e,t,l)})),d)}(l(T(e)));return a}W.options={resolvers:H},e.exports=W},7106:e=>{"use strict";var t=e.exports=function(e,t,s){"function"==typeof t&&(s=t,t={}),i(t,"function"==typeof(s=t.cb||s)?s:s.pre||function(){},s.post||function(){},e,"",e)};function i(e,s,r,o,n,a,l,d,c,u){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var h in s(o,n,a,l,d,c,u),o){var p=o[h];if(Array.isArray(p)){if(h in t.arrayKeywords)for(var g=0;g<p.length;g++)i(e,s,r,p[g],n+"/"+h+"/"+g,a,n,h,o,g)}else if(h in t.propsKeywords){if(p&&"object"==typeof p)for(var m in p)i(e,s,r,p[m],n+"/"+h+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,n,h,o,m)}else(h in t.keywords||e.allKeys&&!(h in t.skipKeywords))&&i(e,s,r,p,n+"/"+h,a,n,h,o)}r(o,n,a,l,d,c,u)}}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},56239:(e,t)=>{var i=/~/,s=/~[01]/g;function r(e){switch(e){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+e)}function o(e){return i.test(e)?e.replace(s,r):e}function n(e){if("string"==typeof e){if(""===(e=e.split("/"))[0])return e;throw new Error("Invalid JSON pointer.")}if(Array.isArray(e)){for(const t of e)if("string"!=typeof t&&"number"!=typeof t)throw new Error("Invalid JSON pointer. Must be of type string or number.");return e}throw new Error("Invalid JSON pointer.")}function a(e,t){if("object"!=typeof e)throw new Error("Invalid input object.");var i=(t=n(t)).length;if(1===i)return e;for(var s=1;s<i;){if(e=e[o(t[s++])],i===s)return e;if("object"!=typeof e||null===e)return}}function l(e,t,i){if("object"!=typeof e)throw new Error("Invalid input object.");if(0===(t=n(t)).length)throw new Error("Invalid JSON pointer for set.");return function(e,t,i){for(var s,r,n=1,a=t.length;n<a;){if("constructor"===t[n]||"prototype"===t[n]||"__proto__"===t[n])return e;if(s=o(t[n++]),r=a>n,void 0===e[s]&&(Array.isArray(e)&&"-"===s&&(s=e.length),r&&(""!==t[n]&&t[n]<1/0||"-"===t[n]?e[s]=[]:e[s]={})),!r)break;e=e[s]}var l=e[s];return void 0===i?delete e[s]:e[s]=i,l}(e,t,i)}t.get=a,t.set=l,t.compile=function(e){var t=n(e);return{get:function(e){return a(e,t)},set:function(e,i){return l(e,t,i)}}}},83915:(e,t,i)=>{var s=i(38859),r=i(15325),o=i(29905),n=i(34932),a=i(27301),l=i(19219);e.exports=function(e,t,i,d){var c=-1,u=r,h=!0,p=e.length,g=[],m=t.length;if(!p)return g;i&&(t=n(t,a(i))),d?(u=o,h=!1):t.length>=200&&(u=l,h=!1,t=new s(t));e:for(;++c<p;){var f=e[c],v=null==i?f:i(f);if(f=d||0!==f?f:0,h&&v==v){for(var C=m;C--;)if(t[C]===v)continue e;g.push(f)}else u(t,v,d)||g.push(f)}return g}},98045:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,i){return null!=e&&t.call(e,i)}},12027:e=>{e.exports=function(e,t,i,s){for(var r=i-1,o=e.length;++r<o;)if(s(e[r],t))return r;return-1}},21988:(e,t,i)=>{var s=i(34932),r=i(96131),o=i(12027),n=i(27301),a=i(23007),l=Array.prototype.splice;e.exports=function(e,t,i,d){var c=d?o:r,u=-1,h=t.length,p=e;for(e===t&&(t=a(t)),i&&(p=s(e,n(i)));++u<h;)for(var g=0,m=t[u],f=i?i(m):m;(g=c(p,f,g,d))>-1;)p!==e&&l.call(p,g,1),l.call(e,g,1);return e}},85558:e=>{e.exports=function(e,t,i,s,r){return r(e,(function(e,r,o){i=s?(s=!1,e):t(i,e,r,o)})),i}},52606:(e,t,i)=>{var s=i(85250),r=i(23805);e.exports=function e(t,i,o,n,a,l){return r(t)&&r(i)&&(l.set(i,t),s(t,i,void 0,e,l),l.delete(i)),t}},84684:(e,t,i)=>{var s=i(69302),r=i(75288),o=i(36800),n=i(37241),a=Object.prototype,l=a.hasOwnProperty,d=s((function(e,t){e=Object(e);var i=-1,s=t.length,d=s>2?t[2]:void 0;for(d&&o(t[0],t[1],d)&&(s=1);++i<s;)for(var c=t[i],u=n(c),h=-1,p=u.length;++h<p;){var g=u[h],m=e[g];(void 0===m||r(m,a[g])&&!l.call(e,g))&&(e[g]=c[g])}return e}));e.exports=d},51973:(e,t,i)=>{var s=i(91033),r=i(69302),o=i(52606),n=i(6924),a=r((function(e){return e.push(void 0,o),s(n,void 0,e)}));e.exports=a},66245:(e,t,i)=>{var s=i(83915),r=i(83120),o=i(69302),n=i(83693),a=o((function(e,t){return n(e)?s(e,r(t,1,n,!0)):[]}));e.exports=a},80795:(e,t,i)=>{var s=i(83120),r=1/0;e.exports=function(e){return null!=e&&e.length?s(e,r):[]}},39754:(e,t,i)=>{var s=i(83729),r=i(80909),o=i(24066),n=i(56449);e.exports=function(e,t){return(n(e)?s:r)(e,o(t))}},61448:(e,t,i)=>{var s=i(98045),r=i(49326);e.exports=function(e,t){return null!=e&&r(e,t,s)}},80191:(e,t,i)=>{var s=i(34932),r=i(27185),o=i(69302),n=i(80741),a=i(68090),l=o((function(e){var t=a(e),i=s(e,n);return(t="function"==typeof t?t:void 0)&&i.pop(),i.length&&i[0]===e[0]?r(i,void 0,t):[]}));e.exports=l},12358:(e,t,i)=>{var s=i(21988);e.exports=function(e,t){return e&&e.length&&t&&t.length?s(e,t):e}},40860:(e,t,i)=>{var s=i(40882),r=i(80909),o=i(15389),n=i(85558),a=i(56449);e.exports=function(e,t,i){var l=a(e)?s:n,d=arguments.length<3;return l(e,o(t,4),i,d,r)}},95632:(e,t,i)=>{var s=i(73170);e.exports=function(e,t,i,r){return r="function"==typeof r?r:void 0,null==e?e:s(e,t,i,r)}},6638:(e,t,i)=>{var s=i(78096),r=i(24066),o=i(61489),n=4294967295,a=Math.min;e.exports=function(e,t){if((e=o(e))<1||e>9007199254740991)return[];var i=n,l=a(e,n);t=r(t),e-=n;for(var d=s(l,t);++i<e;)t(i);return d}},80299:(e,t,i)=>{var s=i(83120),r=i(69302),o=i(55765),n=i(83693),a=r((function(e){return o(s(e,1,n,!0))}));e.exports=a},73357:(e,t,i)=>{var s=i(19931);e.exports=function(e,t){return null==e||s(e,t)}},91648:(e,t,i)=>{var s=i(83915),r=i(69302),o=i(83693),n=r((function(e,t){return o(e)?s(e,t):[]}));e.exports=n},6411:(e,t,i)=>{var s;!function(r,o){if(r){for(var n,a={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},d={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},c={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u=1;u<20;++u)a[111+u]="f"+u;for(u=0;u<=9;++u)a[u+96]=u.toString();C.prototype.bind=function(e,t,i){var s=this;return e=e instanceof Array?e:[e],s._bindMultiple.call(s,e,t,i),s},C.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},C.prototype.trigger=function(e,t){var i=this;return i._directMap[e+":"+t]&&i._directMap[e+":"+t]({},e),i},C.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},C.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(v(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var i=e.composedPath()[0];i!==e.target&&(t=i)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},C.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},C.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);n=null},C.init=function(){var e=C(o);for(var t in e)"_"!==t.charAt(0)&&(C[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},C.init(),r.Mousetrap=C,e.exports&&(e.exports=C),void 0===(s=function(){return C}.call(t,i,t,e))||(e.exports=s)}function h(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)}function p(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return a[e.which]?a[e.which]:l[e.which]?l[e.which]:String.fromCharCode(e.which).toLowerCase()}function g(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function m(e,t,i){return i||(i=function(){if(!n)for(var e in n={},a)e>95&&e<112||a.hasOwnProperty(e)&&(n[a[e]]=e);return n}()[e]?"keydown":"keypress"),"keypress"==i&&t.length&&(i="keydown"),i}function f(e,t){var i,s,r,o=[];for(i=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),r=0;r<i.length;++r)s=i[r],c[s]&&(s=c[s]),t&&"keypress"!=t&&d[s]&&(s=d[s],o.push("shift")),g(s)&&o.push(s);return{key:s,modifiers:o,action:t=m(s,o,t)}}function v(e,t){return null!==e&&e!==o&&(e===t||v(e.parentNode,t))}function C(e){var t=this;if(e=e||o,!(t instanceof C))return new C(e);t.target=e,t._callbacks={},t._directMap={};var i,s={},r=!1,n=!1,a=!1;function l(e){e=e||{};var t,i=!1;for(t in s)e[t]?i=!0:s[t]=0;i||(a=!1)}function d(e,i,r,o,n,a){var l,d,c,u,h=[],p=r.type;if(!t._callbacks[e])return[];for("keyup"==p&&g(e)&&(i=[e]),l=0;l<t._callbacks[e].length;++l)if(d=t._callbacks[e][l],(o||!d.seq||s[d.seq]==d.level)&&p==d.action&&("keypress"==p&&!r.metaKey&&!r.ctrlKey||(c=i,u=d.modifiers,c.sort().join(",")===u.sort().join(",")))){var m=!o&&d.combo==n,f=o&&d.seq==o&&d.level==a;(m||f)&&t._callbacks[e].splice(l,1),h.push(d)}return h}function c(e,i,s,r){t.stopCallback(i,i.target||i.srcElement,s,r)||!1===e(i,s)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(i),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(i))}function u(e){"number"!=typeof e.which&&(e.which=e.keyCode);var i=p(e);i&&("keyup"!=e.type||r!==i?t.handleKey(i,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):r=!1)}function m(e,o,n,u,h){t._directMap[e+":"+n]=o;var g,v=(e=e.replace(/\s+/g," ")).split(" ");v.length>1?function(e,t,o,n){function d(t){return function(){a=t,++s[e],clearTimeout(i),i=setTimeout(l,1e3)}}function u(t){c(o,t,e),"keyup"!==n&&(r=p(t)),setTimeout(l,10)}s[e]=0;for(var h=0;h<t.length;++h){var g=h+1===t.length?u:d(n||f(t[h+1]).action);m(t[h],g,n,e,h)}}(e,v,o,n):(g=f(e,n),t._callbacks[g.key]=t._callbacks[g.key]||[],d(g.key,g.modifiers,{type:g.action},u,e,h),t._callbacks[g.key][u?"unshift":"push"]({callback:o,modifiers:g.modifiers,action:g.action,seq:u,level:h,combo:e}))}t._handleKey=function(e,t,i){var s,r=d(e,t,i),o={},u=0,h=!1;for(s=0;s<r.length;++s)r[s].seq&&(u=Math.max(u,r[s].level));for(s=0;s<r.length;++s)if(r[s].seq){if(r[s].level!=u)continue;h=!0,o[r[s].seq]=1,c(r[s].callback,i,r[s].combo,r[s].seq)}else h||c(r[s].callback,i,r[s].combo);var p="keypress"==i.type&&n;i.type!=a||g(e)||p||l(o),n=h&&"keydown"==i.type},t._bindMultiple=function(e,t,i){for(var s=0;s<e.length;++s)m(e[s],t,i)},h(e,"keypress",u),h(e,"keydown",u),h(e,"keyup",u)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},18575:(e,t,i)=>{"use strict";t.w$=t.uv=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},r=a(i(96540)),o=a(i(5556)),n=i(11447);function a(e){return e&&e.__esModule?e:{default:e}}t.uv=function(e){var t=e.itemTypeToComponent,i=e.WrapperComponent,a=void 0===i?"div":i,l=function(e){var i=e.currentPage,o=e.totalPages,l=e.boundaryPagesRange,d=e.siblingPagesRange,c=e.hideEllipsis,u=e.hidePreviousAndNextPageLinks,h=e.hideFirstAndLastPageLinks,p=e.onChange,g=e.disabled,m=function(e,t){var i={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s]);return i}(e,["currentPage","totalPages","boundaryPagesRange","siblingPagesRange","hideEllipsis","hidePreviousAndNextPageLinks","hideFirstAndLastPageLinks","onChange","disabled"]),f=(0,n.getPaginationModel)({currentPage:i,totalPages:o,boundaryPagesRange:l,siblingPagesRange:d,hideEllipsis:c,hidePreviousAndNextPageLinks:u,hideFirstAndLastPageLinks:h}),v=function(e,t,i){return function(o){var n,a,l,d=e[o.type],c=(a=(n=o).value,l=n.isDisabled,function(){!l&&i&&t!==a&&i(a)});return r.default.createElement(d,s({onClick:c},o))}}(t,i,p);return r.default.createElement(a,m,f.map((function(e){return v(s({},e,{isDisabled:!!g}))})))};return l.propTypes={currentPage:o.default.number.isRequired,totalPages:o.default.number.isRequired,boundaryPagesRange:o.default.number,siblingPagesRange:o.default.number,hideEllipsis:o.default.bool,hidePreviousAndNextPageLinks:o.default.bool,hideFirstAndLastPageLinks:o.default.bool,onChange:o.default.func,disabled:o.default.bool},l},t.w$=n.ITEM_TYPES},4454:(e,t,i)=>{"use strict";i.d(t,{D:()=>T});var s=i(62193),r=i.n(s),o=i(96540),n=i(69193),a=i(15595),l=i(90868),d=i(85861),c=i(46920),u=i(96453),h=i(35742),p=i(95579),g=i(93641),m=i(61225),f=i(74353),v=i.n(f),C=i(58561),y=i.n(C),w=i(74680),S=i(95272),b=i(39829),R=i(85183),E=i(60237),F=i(27023),P=i(2445);const x=u.I4.div`
  ${({theme:e})=>`\n  .sdm-body {\n    margin: 0 ${2*e.gridUnit}px;\n  }\n  .sdm-input {\n    margin-left: ${10*e.gridUnit}px;\n    width: 401px;\n  }\n  .sdm-autocomplete {\n    width: 401px;\n    align-self: center;\n    margin-left: ${e.gridUnit}px;\n  }\n  .sdm-radio {\n    height: 30px;\n    margin: 10px 0px;\n    line-height: 30px;\n  }\n  .sdm-radio span {\n    display: inline-flex;\n    padding-right: 0px;\n  }\n  .sdm-overwrite-msg {\n    margin: ${2*e.gridUnit}px;\n  }\n  .sdm-overwrite-container {\n    flex: 1 1 auto;\n    display: flex;\n  `}
`,D=async(e,t,i,s,r,o)=>{const n=`api/v1/dataset/${t}?override_columns=${o}`,a=JSON.stringify({sql:i,columns:s,owners:r,database_id:e});return(await h.A.put({endpoint:n,headers:{"Content-Type":"application/json"},body:a})).json.result},A=(0,p.t)("Untitled Dataset"),T=({visible:e,onHide:t,buttonTextOnSave:i,buttonTextOnOverwrite:s,modalDescription:u,datasource:f,openWindow:C=!0,formData:T={}})=>{const M=(0,m.d4)((e=>{var t,i;return(null==(t=e.common)||null==(i=t.conf)?void 0:i.DEFAULT_VIZ_TYPE)||g.Y.Table})),I=()=>`${(null==f?void 0:f.name)||A} ${v()().format("L HH:mm:ss")}`,[k,L]=(0,o.useState)(I()),[O,N]=(0,o.useState)(b.lr.SaveNew),[G,B]=(0,o.useState)(!1),[V,H]=(0,o.useState)({}),[$,W]=(0,o.useState)(void 0),[_,z]=(0,o.useState)(!1),U=(0,m.d4)((e=>e.user)),j=(0,m.wA)(),q=e=>{C?window.open(e,"_blank","noreferrer"):window.location.href=e},K={...b.V0,...T||{}},Y=(0,o.useCallback)((async(e="")=>{const{userId:t}=U,i=y().encode({filters:[{col:"table_name",opr:"ct",value:e},{col:"owners",opr:"rel_m_m",value:t}],order_column:"changed_on_delta_humanized",order_direction:"desc"});return h.A.get({endpoint:`/api/v1/dataset/?q=${i}`}).then((e=>({data:e.json.result.map((e=>({value:e.table_name,label:e.table_name,datasetid:e.id,owners:e.owners}))),totalCount:e.json.count})))}),[U]),Q=O===b.lr.SaveNew&&0===k.length||O===b.lr.OverwriteDataset&&r()($);return(0,P.Y)(d.Ay,{show:e,title:(0,p.t)("Save or Overwrite Dataset"),onHide:t,footer:(0,P.FD)(P.FK,{children:[O===b.lr.SaveNew&&(0,P.Y)(c.A,{disabled:Q,buttonStyle:"primary",onClick:()=>{var e,i;z(!0);const s=null!=(e=null==f?void 0:f.columns)?e:[];let r;if("string"==typeof(null==f?void 0:f.templateParams)){const e=JSON.parse(f.templateParams);e._filters&&(delete e._filters,r=JSON.stringify(e))}j((0,w.createDatasource)({sql:f.sql,dbId:f.dbId||(null==f||null==(i=f.database)?void 0:i.id),catalog:null==f?void 0:f.catalog,schema:null==f?void 0:f.schema,templateParams:r,datasourceName:k})).then((e=>(0,E.T3)(e.id,"table",{...K,datasource:`${e.id}__table`,...M===g.Y.Table&&{all_columns:s.map((e=>e.column_name))}}))).then((e=>{z(!1);const i=(0,R.eX)(null,{[F.vX.formDataKey.name]:e});q(i),L(I()),t()})).catch((()=>{z(!1),(0,S.iB)((0,p.t)("An error occurred saving dataset"))}))},loading:_,children:i}),O===b.lr.OverwriteDataset&&(0,P.FD)(P.FK,{children:[G&&(0,P.Y)(c.A,{onClick:()=>{B(!1),H({})},children:(0,p.t)("Back")}),(0,P.Y)(c.A,{className:"md",buttonStyle:"primary",onClick:async()=>{var e,i,s;if(!G)return void B(!0);z(!0);const[,r]=await Promise.all([D(null==f?void 0:f.dbId,null==V?void 0:V.datasetid,null==f?void 0:f.sql,null==f||null==(e=f.columns)?void 0:e.map((e=>({column_name:e.column_name,type:e.type,is_dttm:e.is_dttm}))),null==V||null==(i=V.owners)?void 0:i.map((e=>e.id)),!0),(0,E.T3)(V.datasetid,"table",{...K,datasource:`${V.datasetid}__table`,...M===g.Y.Table&&{all_columns:null==f||null==(s=f.columns)?void 0:s.map((e=>e.column_name))}})]);z(!1);const o=(0,R.eX)(null,{[F.vX.formDataKey.name]:r});q(o),B(!1),L(I()),t()},disabled:Q,loading:_,children:s})]})]}),children:(0,P.FD)(x,{children:[!G&&(0,P.FD)("div",{className:"sdm-body",children:[u&&(0,P.Y)("div",{className:"sdm-prompt",children:u}),(0,P.FD)(n.s.Group,{onChange:e=>{N(Number(e.target.value))},value:O,children:[(0,P.FD)(n.s,{className:"sdm-radio",value:1,children:[(0,p.t)("Save as new"),(0,P.Y)(l.pd,{className:"sdm-input",value:k,onChange:e=>{L(e.target.value)},disabled:1!==O})]}),(0,P.FD)("div",{className:"sdm-overwrite-container",children:[(0,P.Y)(n.s,{className:"sdm-radio",value:2,children:(0,p.t)("Overwrite existing")}),(0,P.Y)("div",{className:"sdm-autocomplete",children:(0,P.Y)(a.DW,{allowClear:!0,showSearch:!0,placeholder:(0,p.t)("Select or type dataset name"),ariaLabel:(0,p.t)("Existing dataset"),onChange:(e,t)=>{H(t),W(e)},options:e=>Y(e),value:$,filterOption:(e,t)=>t.value.toLowerCase().includes(e.toLowerCase()),disabled:2!==O,getPopupContainer:()=>document.body})})]})]})]}),G&&(0,P.Y)("div",{className:"sdm-overwrite-msg",children:(0,p.t)("Are you sure you want to overwrite this dataset?")})]})})}},28274:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var s=i(67553);const r=["AND","AS","ASC","AVG","BY","CASE","COUNT","CREATE","CROSS","DATABASE","DEFAULT","DELETE","DESC","DISTINCT","DROP","ELSE","END","FOREIGN","FROM","GRANT","GROUP","HAVING","IF","INNER","INSERT","JOIN","KEY","LEFT","LIMIT","MAX","MIN","NATURAL","NOT","NULL","OFFSET","ON","OR","ORDER","OUTER","PRIMARY","REFERENCES","RIGHT","SELECT","SUM","TABLE","THEN","TYPE","UNION","UPDATE","WHEN","WHERE"].concat(["BIGINT","BINARY","BIT","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","MONEY","NUMBER","NUMERIC","REAL","SET","TEXT","TIMESTAMP","VARCHAR"]).map((e=>({meta:"sql",name:e,score:s.lI,value:e})))},19966:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var s=i(96540),r=i(95579),o=i(19129),n=i(5261),a=i(73135),l=i(2445);const d={copyNode:(0,l.Y)("span",{children:(0,r.t)("Copy")}),onCopyEnd:()=>{},shouldShowText:!0,wrapped:!0,tooltipText:(0,r.t)("Copy to clipboard"),hideTooltip:!1};var c={name:"8irbms",styles:"display:inline-flex;align-items:center"};class u extends s.Component{constructor(e){super(e),this.copyToClipboard=this.copyToClipboard.bind(this),this.onClick=this.onClick.bind(this)}onClick(){this.props.getText?this.props.getText((e=>{this.copyToClipboard(Promise.resolve(e))})):this.copyToClipboard(Promise.resolve(this.props.text||""))}getDecoratedCopyNode(){return(0,s.cloneElement)(this.props.copyNode,{style:{cursor:"pointer"},onClick:this.onClick})}copyToClipboard(e){(0,a.A)((()=>e)).then((()=>{this.props.addSuccessToast((0,r.t)("Copied to clipboard!"))})).catch((()=>{this.props.addDangerToast((0,r.t)("Sorry, your browser does not support copying. Use Ctrl / Cmd + C!"))})).finally((()=>{this.props.onCopyEnd&&this.props.onCopyEnd()}))}renderTooltip(e){return(0,l.Y)(l.FK,{children:this.props.hideTooltip?this.getDecoratedCopyNode():(0,l.Y)(o.m_,{id:"copy-to-clipboard-tooltip",placement:"topRight",style:{cursor:e},title:this.props.tooltipText||"",trigger:["hover"],arrow:{pointAtCenter:!0},children:this.getDecoratedCopyNode()})})}renderNotWrapped(){return this.renderTooltip("pointer")}renderLink(){return(0,l.FD)("span",{css:c,children:[this.props.shouldShowText&&this.props.text&&(0,l.Y)("span",{className:"m-r-5",children:this.props.text}),this.renderTooltip("pointer")]})}render(){const{wrapped:e}=this.props;return e?this.renderLink():this.renderNotWrapped()}}u.defaultProps=d;const h=(0,n.Ay)(u)},93103:(e,t,i)=>{"use strict";i.d(t,{R2:()=>g,ms:()=>p});var s=i(96540),r=i(15595),o=i(45572),n=i(96453),a=i(12249),l=i(2445);const d=n.I4.div`
  width: ${({theme:e})=>.75*e.gridUnit}px;
  height: ${({theme:e})=>.75*e.gridUnit}px;
  border-radius: 50%;
  background-color: ${({theme:e})=>e.colors.grayscale.light1};

  font-weight: ${({theme:e})=>e.typography.weights.normal};
  display: inline-flex;
  position: relative;

  &:hover {
    background-color: ${({theme:e})=>e.colors.primary.base};

    &::before,
    &::after {
      background-color: ${({theme:e})=>e.colors.primary.base};
    }
  }

  &::before,
  &::after {
    position: absolute;
    content: ' ';
    width: ${({theme:e})=>.75*e.gridUnit}px;
    height: ${({theme:e})=>.75*e.gridUnit}px;
    border-radius: 50%;
    background-color: ${({theme:e})=>e.colors.grayscale.light1};
  }

  &::before {
    top: ${({theme:e})=>e.gridUnit}px;
  }

  &::after {
    bottom: ${({theme:e})=>e.gridUnit}px;
  }
`,c=n.I4.div`
  display: flex;
  align-items: center;
  padding: ${({theme:e})=>2*e.gridUnit}px;
  padding-left: ${({theme:e})=>e.gridUnit}px;
`;var u;!function(e){e.Vertical="vertical",e.Horizontal="horizontal"}(u||(u={}));const h=(e=u.Vertical)=>e===u.Horizontal?(0,l.Y)(a.A.MoreHoriz,{iconSize:"xl"}):(0,l.Y)(d,{}),p=({overlay:e,iconOrientation:t=u.Vertical,...i})=>(0,l.Y)(r.rM,{overlay:e,...i,children:(0,l.Y)(c,{children:h(t)})}),g=e=>{const{children:t,onBlur:i,onKeyDown:r,...n}=e,a=(0,s.cloneElement)(t,{onBlur:i,onKeyDown:r});return(0,l.Y)(o.A,{overlayStyle:e.overlayStyle,...n,children:a})}},99551:(e,t,i)=>{"use strict";i.d(t,{g:()=>d});var s=i(20249),r=i.n(s),o=i(15595),n=i(96453),a=i(2445);const l=n.I4.div`
  .ant-btn-group {
    button.ant-btn {
      background-color: ${({theme:e})=>e.colors.primary.dark1};
      border-color: transparent;
      color: ${({theme:e})=>e.colors.grayscale.light5};
      font-size: 12px;
      line-height: 13px;
      outline: none;
      &:first-of-type {
        border-radius: ${({theme:e})=>`${e.gridUnit}px 0 0 ${e.gridUnit}px`};
        margin: 0;
      }

      &:disabled {
        background-color: ${({theme:e})=>e.colors.grayscale.light2};
        color: ${({theme:e})=>e.colors.grayscale.base};
      }
      &:nth-of-type(2) {
        margin: 0;
        border-radius: ${({theme:e})=>`0 ${e.gridUnit}px ${e.gridUnit}px 0`};
        width: ${({theme:e})=>9*e.gridUnit}px;
        &:before,
        &:hover:before {
          border-left: 1px solid ${({theme:e})=>e.colors.grayscale.light5};
          content: '';
          display: block;
          height: ${({theme:e})=>8*e.gridUnit}px;
          margin: 0;
          position: absolute;
          width: ${({theme:e})=>.25*e.gridUnit}px;
        }

        &:disabled:before {
          border-left: 1px solid ${({theme:e})=>e.colors.grayscale.base};
        }
      }
    }
  }
`,d=({overlay:e,tooltip:t,placement:i,...s})=>{const n=(t={})=>(0,a.Y)(l,{children:(0,a.Y)(o.rM.Button,{overlay:e,...s,...t})});return t?n({buttonsRender:([e,s])=>[(0,a.Y)(o.$B,{placement:i,id:`${r()(t)}-tooltip`,title:t,children:e}),s]}):n()}},41621:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var s=i(33149),r=i(96453),o=i(96540),n=i(62221),a=i(2445);const l=r.I4.div`
  position: absolute;
  height: 100%;

  :hover .sidebar-resizer::after {
    background-color: ${({theme:e})=>e.colors.primary.base};
  }

  .sidebar-resizer {
    // @z-index-above-sticky-header (100) + 1 = 101
    z-index: 101;
  }

  .sidebar-resizer::after {
    display: block;
    content: '';
    width: 1px;
    height: 100%;
    margin: 0 auto;
  }
`,d=({id:e,initialWidth:t,minWidth:i,maxWidth:r,enable:d,children:c})=>{const[u,h]=function(e,t){const i=(0,o.useRef)(),[s,r]=(0,o.useState)(t);return(0,o.useEffect)((()=>{var t;i.current=null!=(t=i.current)?t:(0,n.Gq)(n.Hh.CommonResizableSidebarWidths,{}),i.current[e]&&r(i.current[e])}),[e]),[s,function(t){r(t),(0,n.SO)(n.Hh.CommonResizableSidebarWidths,{...i.current,[e]:t})}]}(e,t);return(0,a.FD)(a.FK,{children:[(0,a.Y)(l,{children:(0,a.Y)(s.c,{enable:{right:d},handleClasses:{right:"sidebar-resizer",bottom:"hidden",bottomRight:"hidden",bottomLeft:"hidden"},size:{width:u,height:"100%"},minWidth:i,maxWidth:r,onResizeStop:(e,t,i,s)=>h(u+s.width)})}),c(u)]})}},64527:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var s=i(96540),r=i(96453),o=i(35768),n=i(12249),a=i(7089),l=i(2445);const d=(0,r.I4)(o.Ay)`
  text-align: left;
  font-family: ${({theme:e})=>e.typography.families.monospace};
`;function c({endTime:e,isRunning:t,startTime:i,status:r="success"}){const[o,c]=(0,s.useState)("00:00:00.00"),u=(0,s.useRef)();return(0,s.useEffect)((()=>{const s=()=>{u.current&&(clearInterval(u.current),u.current=void 0)};return t&&(u.current=setInterval((()=>{if(i){const r=e||(0,a.tB)();i<r&&c((0,a.RW)(i,r)),t||s()}}),30)),s}),[e,t,i]),(0,l.Y)(d,{icon:(0,l.Y)(n.A.Clock,{iconSize:"m"}),type:r,role:"timer",children:o})}},78704:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var s=i(17437),r=i(96453),o=i(16784),n=i(12249),a=i(19129),l=i(2445);const d=function({warningMarkdown:e,size:t,marginRight:i}){const d=(0,r.DP)();return(0,l.Y)(a.m_,{id:"warning-tooltip",title:(0,l.Y)(o.A,{source:e}),children:(0,l.Y)(n.A.AlertSolid,{iconColor:d.colors.warning.base,iconSize:t,css:(0,s.AH)({marginRight:null!=i?i:2*d.gridUnit},"","")})})}},60237:(e,t,i)=>{"use strict";i.d(t,{T3:()=>c,cL:()=>u,kV:()=>a});var s=i(90179),r=i.n(s),o=i(35742);const n=["url_params"],a=e=>r()(e,n),l=(e,t)=>{let i="api/v1/explore/form_data";return e&&(i=i.concat(`/${e}`)),t&&(i=i.concat(`?tab_id=${t}`)),i},d=(e,t,i,s)=>{const r={datasource_id:e,datasource_type:t,form_data:JSON.stringify(a(i))};return s&&(r.chart_id=s),r},c=(e,t,i,s,r)=>o.A.post({endpoint:l(void 0,r),jsonPayload:d(e,t,i,s)}).then((e=>e.json.key)),u=(e,t,i,s,r,n)=>o.A.put({endpoint:l(i,n),jsonPayload:d(e,t,s,r)}).then((e=>e.json.message))},64791:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>hF});var s=i(96540),r=i(61225),o=i(17437),n=i(27366),a=i(43031);const l=a.F.injectEndpoints({endpoints:e=>({sqlLabInitialState:e.query({providesTags:["SqlLabInitialState"],query:()=>({endpoint:"/api/v1/sqllab/",headers:{"Content-Type":"application/json"},transformResponse:({json:e})=>e.result})})})}),{useSqlLabInitialStateQuery:d}=l;var c=i(74680),u=i(95272),h=i(2445);const p=()=>(0,h.Y)(o.mL,{styles:e=>o.AH`
      body {
        min-height: max(
          100vh,
          ${125*e.gridUnit}px
        ); // Set a min height so the gutter is always visible when resizing
        overflow: hidden;
      }
    `});var g=i(7350),m=i.n(g),f=i(61574),v=i(6411),C=i.n(v),y=i(96453),w=i(95579),S=i(67553),b=i(7735),R=i(35700),E=i(44383),F=i.n(E),P=i(48327),x=i(84193),D=i.n(x),A=i(19129),T=i(15151),M=i(50455),I=i(38708);const k=(0,s.createContext)({}),{Provider:L}=k,O={},N=({children:e})=>{const t=(0,f.zy)();return(0,h.Y)(L,{value:t.state||O,children:e})};var G=i(62193),B=i.n(G),V=i(38221),H=i.n(V),$=i(86963),W=i(58168),_=i(98587),z=i(77387);function U(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var j=i(28290);const q=s.createContext(null);var K=function(e){return e.scrollTop},Y="unmounted",Q="exited",J="entering",X="entered",Z="exiting",ee=function(e){function t(t,i){var s;s=e.call(this,t,i)||this;var r,o=i&&!i.isMounting?t.enter:t.appear;return s.appearStatus=null,t.in?o?(r=Q,s.appearStatus=J):r=X:r=t.unmountOnExit||t.mountOnEnter?Y:Q,s.state={status:r},s.nextCallback=null,s}(0,z.A)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Y?{status:Q}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var i=this.state.status;this.props.in?i!==J&&i!==X&&(t=J):i!==J&&i!==X||(t=Z)}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,i,s=this.props.timeout;return e=t=i=s,null!=s&&"number"!=typeof s&&(e=s.exit,t=s.enter,i=void 0!==s.appear?s.appear:t),{exit:e,enter:t,appear:i}},i.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===J){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:j.findDOMNode(this);i&&K(i)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Q&&this.setState({status:Y})},i.performEnter=function(e){var t=this,i=this.props.enter,s=this.context?this.context.isMounting:e,r=this.props.nodeRef?[s]:[j.findDOMNode(this),s],o=r[0],n=r[1],a=this.getTimeouts(),l=s?a.appear:a.enter;e||i?(this.props.onEnter(o,n),this.safeSetState({status:J},(function(){t.props.onEntering(o,n),t.onTransitionEnd(l,(function(){t.safeSetState({status:X},(function(){t.props.onEntered(o,n)}))}))}))):this.safeSetState({status:X},(function(){t.props.onEntered(o)}))},i.performExit=function(){var e=this,t=this.props.exit,i=this.getTimeouts(),s=this.props.nodeRef?void 0:j.findDOMNode(this);t?(this.props.onExit(s),this.safeSetState({status:Z},(function(){e.props.onExiting(s),e.onTransitionEnd(i.exit,(function(){e.safeSetState({status:Q},(function(){e.props.onExited(s)}))}))}))):this.safeSetState({status:Q},(function(){e.props.onExited(s)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,i=!0;return this.nextCallback=function(s){i&&(i=!1,t.nextCallback=null,e(s))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},i.onTransitionEnd=function(e,t){this.setNextCallback(t);var i=this.props.nodeRef?this.props.nodeRef.current:j.findDOMNode(this),s=null==e&&!this.props.addEndListener;if(i&&!s){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],o=r[0],n=r[1];this.props.addEndListener(o,n)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===Y)return null;var t=this.props,i=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,_.A)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.createElement(q.Provider,{value:null},"function"==typeof i?i(e,r):s.cloneElement(s.Children.only(i),r))},t}(s.Component);function te(){}ee.contextType=q,ee.propTypes={},ee.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:te,onEntering:te,onEntered:te,onExit:te,onExiting:te,onExited:te},ee.UNMOUNTED=Y,ee.EXITED=Q,ee.ENTERING=J,ee.ENTERED=X,ee.EXITING=Z;const ie=ee;var se=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return s=t,void((i=e).classList?i.classList.remove(s):"string"==typeof i.className?i.className=U(i.className,s):i.setAttribute("class",U(i.className&&i.className.baseVal||"",s)));var i,s}))},re=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,i){var s=t.resolveArguments(e,i),r=s[0],o=s[1];t.removeClasses(r,"exit"),t.addClass(r,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,i)},t.onEntering=function(e,i){var s=t.resolveArguments(e,i),r=s[0],o=s[1]?"appear":"enter";t.addClass(r,o,"active"),t.props.onEntering&&t.props.onEntering(e,i)},t.onEntered=function(e,i){var s=t.resolveArguments(e,i),r=s[0],o=s[1]?"appear":"enter";t.removeClasses(r,o),t.addClass(r,o,"done"),t.props.onEntered&&t.props.onEntered(e,i)},t.onExit=function(e){var i=t.resolveArguments(e)[0];t.removeClasses(i,"appear"),t.removeClasses(i,"enter"),t.addClass(i,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var i=t.resolveArguments(e)[0];t.addClass(i,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var i=t.resolveArguments(e)[0];t.removeClasses(i,"exit"),t.addClass(i,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,i){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,i]},t.getClassNames=function(e){var i=t.props.classNames,s="string"==typeof i,r=s?(s&&i?i+"-":"")+e:i[e];return{baseClassName:r,activeClassName:s?r+"-active":i[e+"Active"],doneClassName:s?r+"-done":i[e+"Done"]}},t}(0,z.A)(t,e);var i=t.prototype;return i.addClass=function(e,t,i){var s=this.getClassNames(t)[i+"ClassName"],r=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===i&&r&&(s+=" "+r),"active"===i&&e&&K(e),s&&(this.appliedClasses[t][i]=s,function(e,t){e&&t&&t.split(" ").forEach((function(t){return s=t,void((i=e).classList?i.classList.add(s):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(i,s)||("string"==typeof i.className?i.className=i.className+" "+s:i.setAttribute("class",(i.className&&i.className.baseVal||"")+" "+s)));var i,s}))}(e,s))},i.removeClasses=function(e,t){var i=this.appliedClasses[t],s=i.base,r=i.active,o=i.done;this.appliedClasses[t]={},s&&se(e,s),r&&se(e,r),o&&se(e,o)},i.render=function(){var e=this.props,t=(e.classNames,(0,_.A)(e,["classNames"]));return s.createElement(ie,(0,W.A)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(s.Component);re.defaultProps={classNames:""},re.propTypes={};const oe=re;var ne=i(71764),ae=i(72391),le=i(85861),de=i(46920),ce=i(64527),ue=i(41621),he=i(15595),pe=i(75488),ge=i(90868),me=i(6749),fe=i(12249),ve=i(62221),Ce=i(25946);function ye(e){const t=(0,r.wA)();return(0,s.useCallback)(((i,s)=>t((0,b.logEvent)(i,{payload:{...e,...s}}))),[e,t])}var we=i(66537),Se=i(69945),be=i(18301),Re=i(24976),Ee=i(27023);function Fe(e,t){return(0,r.d4)((({sqlLab:{unsavedQueryEditor:i,queryEditors:s}})=>F()({...s.find((({id:t})=>t===e)),...e===(null==i?void 0:i.id)&&i},["id"].concat(t))),r.bN)}const Pe=(0,y.I4)(Re._p)`
  &.ace_editor {
    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  }
`;var xe={name:"6n1ert",styles:"width:inherit"};const De=({queryEditorId:e,language:t,onChange:i=()=>{}})=>{const[r,o]=(0,s.useState)({}),[n,a]=(0,s.useState)(!0),{templateParams:l}=Fe(e,["templateParams"]),d=null!=l?l:"{}";(0,s.useEffect)((()=>{try{o(JSON.parse(d)),a(!0)}catch{o({}),a(!1)}}),[d]);const c=(0,h.FD)("div",{children:[(0,h.FD)("p",{children:[(0,w.t)("Assign a set of parameters as"),(0,h.Y)("code",{children:"JSON"}),(0,w.t)("below (example:"),(0,h.Y)("code",{children:'{"my_table": "foo"}'}),(0,w.t)("), and they become available in your SQL (example:"),(0,h.FD)("code",{children:["SELECT * FROM ","{{ my_table }}"," "]}),") ",(0,w.t)("by using")," ",(0,h.Y)("a",{href:"https://superset.apache.org/sqllab.html#templating-with-jinja",target:"_blank",rel:"noopener noreferrer",children:(0,w.t)("Jinja templating")})," ",(0,w.t)("syntax.")]}),(0,h.Y)(Pe,{mode:t,minLines:25,maxLines:50,onChange:H()(i,Ee.jW),width:"100%",editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,value:d})]}),u=r?Object.keys(r).length:0;return(0,h.Y)(be.A,{modalTitle:(0,w.t)("Template parameters"),triggerNode:(0,h.Y)(A.m_,{id:"parameters-tooltip",placement:"top",title:(0,w.t)("Edit template parameters"),trigger:["hover"],children:(0,h.FD)("div",{role:"button",css:xe,children:[(0,w.t)("Parameters "),(0,h.Y)(Se.A,{count:u}),!n&&(0,h.Y)(we.W,{icon:"exclamation-triangle",bsStyle:"danger",tooltip:(0,w.t)("Invalid JSON"),label:"invalid-json"})]})}),modalBody:c})};var Ae=i(43561),Te=i(35768),Me=i(90179),Ie=i.n(Me),ke=i(85692),Le=i(91162),Oe=i(96484);const Ne=(0,y.I4)((({striped:e,...t})=>(0,h.Y)(Oe.A,{...t})))`
  position: static;
  .antd5-progress-inner {
    position: static;
  }
  .antd5-progress-bg {
    position: static;
    ${({striped:e})=>e&&"\n        background-image: linear-gradient(45deg,\n            rgba(255, 255, 255, 0.15) 25%,\n            transparent 25%, transparent 50%,\n            rgba(255, 255, 255, 0.15) 50%,\n            rgba(255, 255, 255, 0.15) 75%,\n            transparent 75%, transparent) !important;\n        background-size: 1rem 1rem !important;\n        "};
  }
`;var Ge=i(50217),Be=i(7089);function Ve(e){const{className:t,children:i}=e;return(0,h.Y)("div",{role:"group",className:t,css:(0,o.AH)({display:"flex","& > :nth-of-type(1):not(:nth-last-of-type(1))":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0,marginLeft:0},"& > :not(:nth-of-type(1)):not(:nth-last-of-type(1))":{borderRadius:0,borderRight:0,marginLeft:0},"& > :nth-last-of-type(1):not(:nth-of-type(1))":{borderTopLeftRadius:0,borderBottomLeftRadius:0,marginLeft:0},...e.expand&&{"& .superset-button":{flexGrow:1}}},"",""),children:i})}var He=i(83505),$e=i(32142),We=i(69108),_e=i(79427),ze=i(4454),Ue=i(39829),je=i(85183),qe=i(60237),Ke=i(17444);const Ye="NULL";var Qe=i(21013),Je=i.n(Qe),Xe=i(31070),Ze=i(15311),et=i(19966);function tt(e){return"string"==typeof e&&/^"-?\d+"$/.test(e)?e.substring(1,e.length-1):e}function it(e){return(0,h.Y)(h.FK,{children:tt(e)})}const st=({modalTitle:e,jsonObject:t,jsonValue:i})=>{const r=(0,Ze.B)(),o=(0,s.useMemo)((()=>"object"==typeof i?JSON.stringify(i):i),[i]);return(0,h.Y)(be.A,{modalBody:(0,h.Y)(Xe.d,{data:t,theme:r,valueRenderer:it}),modalFooter:(0,h.Y)(de.A,{children:(0,h.Y)(et.A,{shouldShowText:!1,text:o})}),modalTitle:e,triggerNode:(0,h.Y)(h.FK,{children:o})})};var rt=i(58642);var ot=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const s=t?this.allAsyncListeners:this.allSyncListeners;let r=s.get(e);return!r&&i&&(r=new Set,s.set(e,r)),r}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const s=this.getListeners(e,i,!1);s&&(s.delete(t),0===s.size)&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e)}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}const s=this.getListeners(i,t,!1)??new Set,r=new Set(s);r.size>0&&((i,s)=>{i.forEach((i=>{if(!s.has(i))return;const r=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>i(e))):()=>i(e);t?this.dispatchAsync(r):r()}))})(r,s),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach((s=>{const r=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>s(i,e))):()=>s(i,e);t?this.dispatchAsync(r):r()}))}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach((e=>e()))}},nt=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(nt||{}),at={};function lt(e,t){at[t]||(e(),at[t]=!0)}function dt(e,...t){console.log("AG Grid: "+e,...t)}function ct(e,...t){lt((()=>console.warn("AG Grid: "+e,...t)),e+t?.join(""))}function ut(e,...t){lt((()=>console.error("AG Grid: "+e,...t)),e+t?.join(""))}function ht(e){return!!(e&&e.constructor&&e.call&&e.apply)}var pt=[],gt=!1;function mt(e){pt.push(e),gt||(gt=!0,window.setTimeout((()=>{const e=pt.slice();pt.length=0,gt=!1,e.forEach((e=>e()))}),0))}function ft(e,t){let i;return function(...s){const r=this;window.clearTimeout(i),i=window.setTimeout((function(){e.apply(r,s)}),t)}}function vt(e,t){let i=0;return function(...s){const r=(new Date).getTime();r-i<t||(i=r,e.apply(this,s))}}function Ct(e){return null==e||""===e?null:e}function yt(e,t=!1){return null!=e&&(""!==e||t)}function wt(e){return!yt(e)}function St(e){return null==e||0===e.length}function bt(e){return null!=e&&"function"==typeof e.toString?e.toString():null}function Rt(e){if(void 0===e)return;if(null===e||""===e)return null;if("number"==typeof e)return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Et(e){if(void 0!==e)return null!==e&&""!==e&&Ft(e)}function Ft(e){return"boolean"==typeof e?e:"string"==typeof e&&("TRUE"===e.toUpperCase()||""==e)}function Pt(e,t){return(e?JSON.stringify(e):null)===(t?JSON.stringify(t):null)}function xt(e,t,i=!1){const s=null==e,r=null==t;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),s&&r)return 0;if(s)return-1;if(r)return 1;function o(e,t){return e>t?1:e<t?-1:0}if("string"!=typeof e)return o(e,t);if(!i)return o(e,t);try{return e.localeCompare(t)}catch(i){return o(e,t)}}function Dt(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach((e=>t.push(e))),t}return Object.values(e)}function At(e,t){return e.get("rowModelType")===t}function Tt(e){return At(e,"clientSide")}function Mt(e){return At(e,"serverSide")}function It(e,t){return e.get("domLayout")===t}function kt(e){return void 0!==li(e)}function Lt(e){return!e.get("suppressAsyncEvents")}function Ot(e){return"function"==typeof e.get("getRowHeight")}function Nt(e,t,i=!1,s){if(null==s&&(s=e.environment.getDefaultRowHeight()),Ot(e)){if(i)return{height:s,estimated:!0};const r={node:t,data:t.data},o=e.getCallback("getRowHeight")(r);if(Bt(o))return 0===o&&ct("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,o),estimated:!1}}if(t.detail&&e.get("masterDetail"))return function(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return Bt(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}(e);const r=e.get("rowHeight");return{height:r&&Bt(r)?r:s,estimated:!1}}function Gt(e){const{environment:t}=e,i=e.get("rowHeight");if(!i||wt(i))return t.getDefaultRowHeight();const s=t.refreshRowHeightVariable();return-1!==s?s:(ct("row height must be a number if not using standard row model"),t.getDefaultRowHeight())}function Bt(e){return!isNaN(e)&&"number"==typeof e&&isFinite(e)}function Vt(e,t,i){const s=t[e.getDomDataKey()];return s?s[i]:void 0}function Ht(e,t,i,s){const r=e.getDomDataKey();let o=t[r];wt(o)&&(o={},t[r]=o),o[i]=s}function $t(e){let t=null;const i=e.get("getDocument");return i&&yt(i)?t=i():e.eGridDiv&&(t=e.eGridDiv.ownerDocument),t&&yt(t)?t:document}function Wt(e){return $t(e).defaultView||window}function _t(e){return e.eGridDiv.getRootNode()}function zt(e){return _t(e).activeElement}function Ut(e){const t=$t(e),i=zt(e);return null===i||i===t.body}function jt(e){return!e.get("ensureDomOrder")&&e.get("animateRows")}function qt(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||It(e,"print"))}function Kt(e){const t=e.get("autoGroupColumnDef");return!t?.comparator&&!e.get("treeData")}function Yt(e){const t=e.get("groupAggFiltering");return"function"==typeof t?e.getCallback("groupAggFiltering"):!0===t?()=>!0:void 0}function Qt(e){const t=e.get("grandTotalRow");return t||(e.get("groupIncludeTotalFooter")?"bottom":void 0)}function Jt(e){const t=e.get("groupTotalRow");if("function"==typeof t)return e.getCallback("groupTotalRow");if(t)return()=>t;const i=e.get("groupIncludeFooter");if("function"==typeof i){const t=e.getCallback("groupIncludeFooter");return e=>t(e)?"bottom":void 0}return()=>i?"bottom":void 0}function Xt(e){return e.exists("groupDisplayType")?"multipleColumns"===e.get("groupDisplayType"):e.get("groupHideOpenParents")}function Zt(e,t){return!t&&"groupRows"===e.get("groupDisplayType")}function ei(e){const t=e.getCallback("getRowId");return void 0===t?t:e=>{let i=t(e);return"string"!=typeof i&&(ct("The getRowId callback must return a string. The ID ",i," is being cast to a string."),i=String(i)),i}}function ti(e){return e?.checkboxes??!0}function ii(e){return"multiRow"===e?.mode&&(e.headerCheckbox??!0)}function si(e){const t=e.get("cellSelection");return void 0!==t?!!t:e.get("enableRangeSelection")}function ri(e){const t=e.get("cellSelection");return void 0!==t?"boolean"!=typeof t&&"fill"===t.handle?.mode:e.get("enableFillHandle")}function oi(e){const t=e.get("rowSelection")??"single";if("string"==typeof t){const t=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return(!t||!i)&&(t?"enableDeselection":!i||"enableSelection")}return("singleRow"===t.mode||"multiRow"===t.mode)&&(t.enableClickSelection??!1)}function ni(e){const t=oi(e);return!0===t||"enableDeselection"===t}function ai(e){const t=e.get("rowSelection");return"string"==typeof t?e.get("isRowSelectable"):t?.isRowSelectable}function li(e){const t=e.get("rowSelection");if("string"==typeof t)switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return t?.mode}function di(e){return"multiRow"===li(e)}function ci(e){const t=e.get("rowSelection");if("string"==typeof t){const t=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return t&&i?"filteredDescendants":t?"descendants":"self"}return"multiRow"===t?.mode?t.groupSelects:void 0}function ui(e){const t=ci(e);return"descendants"===t||"filteredDescendants"===t}function hi(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function pi(e){if(e&&e.length)return e[e.length-1]}function gi(e,t,i){return null==e&&null==t||null!=e&&null!=t&&e.length===t.length&&e.every(((e,s)=>i?i(e,t[s]):t[s]===e))}function mi(e,t){const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function fi(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function vi(e,t,i){e.splice(i,0,t)}function Ci(e,t,i){!function(e,t){for(let i=0;i<t.length;i++)fi(e,t[i])}(e,t),t.slice().reverse().forEach((t=>vi(e,t,i)))}function yi(e,t){return e.indexOf(t)>-1}function wi(e,t){null!=t&&null!=e&&t.forEach((t=>e.push(t)))}var Si="__ag_Grid_Stop_Propagation",bi=["touchstart","touchend","touchmove","touchcancel","scroll"],Ri={};function Ei(e){e[Si]=!0}function Fi(e){return!0===e[Si]}var Pi=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"==typeof Ri[t])return Ri[t];const i=document.createElement(e[t]||"div");return Ri[t="on"+t]=t in i}})();function xi(e,t,i){let s=t;for(;s;){const t=Vt(e,s,i);if(t)return t;s=s.parentElement}return null}function Di(e,t){return!(!t||!e)&&function(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():function(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}(t)}(t).indexOf(e)>=0}var Ai=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new ot),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService&&this.localEventService.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const s in t){const r=t[s];r&&i.push(this._setupListener(e,s,r))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;e instanceof HTMLElement?function(e,t,i,s){const r=yi(bi,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,s,r)}(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);const s=()=>(e.removeEventListener(t,i),null);return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==s)),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);const i=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==i)),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,s=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=e.changeSet.id}const s={type:"gridPropertyChanged",changeSet:e.changeSet,source:e.source};t(s)};e.forEach((e=>this.setupGridOptionListener(e,s)))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function Ti(e){return e instanceof Mi}var Mi=class extends Ai{constructor(e,t,i,s){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=Xi(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=s}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some((e=>e.isVisible()))}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach((t=>{Zi(t)?e.push(t):Ti(t)&&t.addLeafColumns(e)}))}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach((t=>t.addEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach((t=>t.removeEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const s=this.findChildrenRemovingPadding();for(let r=0,o=s.length;r<o;r++){const o=s[r];if(!o.isVisible())continue;const n=o.getColumnGroupShow();"open"===n?(e=!0,i=!0):"closed"===n?(t=!0,i=!0):(e=!0,t=!0)}const r=e&&t&&i;this.expandable!==r&&(this.expandable=r,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach((i=>{Ti(i)&&i.isPadding()?t(i.children):e.push(i)}))};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},Ii="ag-Grid-ControlsColumn",ki=class extends Ai{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){const e=this.gos.get("rowSelection");if(!e||"string"==typeof e)return[];const t=ti(e),i=ii(e);if(t||i){const e=this.gos.get("selectionColumnDef"),t={maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:this.gos.get("enableRtl")?"right":"left",comparator(e,t,i,s){const r=i.isSelected(),o=s.isSelected();return r&&o?0:r?1:-1},editable:!1,suppressFillHandle:!0,...e,colId:`${Ii}`},i=new es(t,null,t.colId,!1);return this.createBean(i),[i]}return[]}},Li="ag-Grid-AutoColumn";function Oi(e){const t=[],i=e=>{for(let s=0;s<e.length;s++){const r=e[s];Zi(r)?t.push(r):Ti(r)&&i(r.getChildren())}};return i(e),t}function Ni(e){return e.reduce(((e,t)=>e+t.getActualWidth()),0)}function Gi(e,t,i){const s={};if(!t)return;rs(null,t,(e=>{s[e.getInstanceId()]=e})),i&&rs(null,i,(e=>{s[e.getInstanceId()]=null}));const r=Object.values(s).filter((e=>null!=e));e.destroyBeans(r)}function Bi(e){return e.getId().startsWith(Li)}function Vi(e){return e.getColId().startsWith(Ii)}function Hi(e){let t=[];if(e instanceof Array){const i=e.some((e=>"string"!=typeof e));i?ct("if colDef.type is supplied an array it should be of type 'string[]'"):t=e}else"string"==typeof e?t=e.split(","):ct("colDef.type should be of type 'string' | 'string[]'");return t}var $i=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=t=>{this.frameworkOverrides.wrapOutgoing((()=>e(t)))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(t,i)=>{this.frameworkOverrides.wrapOutgoing((()=>e(t,i)))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}},Wi=new Set(["__proto__","constructor","prototype"]);function _i(e,t){if(null!=e)if(Array.isArray(e))for(let i=0;i<e.length;i++)t(i.toString(),e[i]);else for(const[i,s]of Object.entries(e))t(i,s)}function zi(e){const t={},i=Object.keys(e);for(let s=0;s<i.length;s++){if(Wi.has(i[s]))continue;const r=i[s],o=e[r];t[r]=o}return t}function Ui(e,t){if(!e)return;const i=e,s={};return Object.keys(i).forEach((e=>{if(t&&t.indexOf(e)>=0||Wi.has(e))return;const r=i[e],o=Yi(r)&&r.constructor===Object;s[e]=o?Ui(r):r})),s}function ji(e){if(!e)return[];const t=Object;if("function"==typeof t.values)return t.values(e);const i=[];for(const t in e)e.hasOwnProperty(t)&&e.propertyIsEnumerable(t)&&i.push(e[t]);return i}function qi(e,t,i=!0,s=!1){yt(t)&&_i(t,((t,r)=>{if(Wi.has(t))return;let o=e[t];o!==r&&(s&&null==o&&null!=r&&"object"==typeof r&&r.constructor===Object&&(o={},e[t]=o),Yi(r)&&Yi(o)&&!Array.isArray(o)?qi(o,r,i,s):(i||void 0!==r)&&(e[t]=r))}))}function Ki(e,t,i){if(!t||!e)return;if(!i)return e[t];const s=t.split(".");let r=e;for(let e=0;e<s.length;e++){if(null==r)return;r=r[s[e]]}return r}function Yi(e){return"object"==typeof e&&null!==e}var Qi={resizable:!0,sortable:!0},Ji=0;function Xi(){return Ji++}function Zi(e){return e instanceof es}var es=class extends Ai{constructor(e,t,i,s){super(),this.isColumn=!0,this.instanceId=Xi(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new ot,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=s,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){void 0!==e.sort?"asc"!==e.sort&&"desc"!==e.sort||(this.sort=e.sort):"asc"!==e.initialSort&&"desc"!==e.initialSort||(this.sort=e.initialSort);const t=e.sortIndex,i=e.initialSortIndex;void 0!==t?null!==t&&(this.sortIndex=t):null!==i&&(this.sortIndex=i);const s=e.hide,r=e.initialHide;this.visible=void 0!==s?!s:!r,void 0!==e.pinned?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const o=e.flex,n=e.initialFlex;void 0!==o?this.flex=o:void 0!==n&&(this.flex=n)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",i))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=yt(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=yt(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=yt(this.colDef.tooltipField)||yt(this.colDef.tooltipValueGetter)||yt(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=Rt(e.width),s=Rt(e.initialWidth);return t=null!=i?i:null!=s?s:200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(wt(this.colDef)||wt(this.colDef.showRowGroup))return!1;const t=!0===this.colDef.showRowGroup,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new $i(this.frameworkOverrides));const i=this.frameworkEventListenerService?.wrap(t)??t;this.columnEventService.addEventListener(e,i)}removeEventListener(e,t){const i=this.frameworkEventListenerService?.unwrap(t)??t;this.columnEventService.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if("boolean"==typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"==typeof this.colDef.suppressNavigable){const t=this.createColumnFunctionCallbackParams(e);return(0,this.colDef.suppressNavigable)(t)}return!1}isCellEditable(e){if(e.group)if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1;return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){const t=this.gos.get("rowSelection");if(t&&"string"!=typeof t){const i=Vi(this)&&ti(t);return this.isColumnFunc(e,i)}return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??Qi[e]}isColumnFunc(e,t){return"boolean"==typeof t?t:"function"==typeof t&&t(this.createColumnFunctionCallbackParams(e))}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.sort}isSortDescending(){return"desc"===this.sort}isSortNone(){return wt(this.sort)}isSorting(){return yt(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,i){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const s=this.createColumnEvent("filterChanged",t);i&&qi(s,i),this.columnEventService.dispatchEvent(s)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){this.pinned=!0===e||"left"===e?"left":"right"===e?"right":null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){const i=!0===e;this.visible!==i&&(this.visible=i,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(wt(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(wt(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},ts={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},is=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=bt(e);let i=0;for(;;){let s;if(e?(s=e,0!==i&&(s+="_"+i)):t?(s=t,0!==i&&(s+="_"+i)):s=i,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);i++}}},ss=class extends Ai{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,i,s){const r=new is,{existingCols:o,existingGroups:n,existingColKeys:a}=this.extractExistingTreeData(i);r.addExistingKeys(a);const l=this.recursivelyCreateColumns(e,0,t,o,r,n,s),d=this.findMaxDept(l,0),c=this.balanceColumnTree(l,0,d,r);return rs(null,c,((e,t)=>{Ti(e)&&e.setupExpandable(),e.setOriginalParent(t)})),{columnTree:c,treeDept:d}}extractExistingTreeData(e){const t=[],i=[],s=[];return e&&rs(null,e,(e=>{if(Ti(e)){const t=e;i.push(t)}else{const i=e;s.push(i.getId()),t.push(i)}})),{existingCols:t,existingGroups:i,existingColKeys:s}}balanceTreeForAutoCols(e,t){const i=[],s=this.findDepth(t);return e.forEach((e=>{let t=e;for(let i=s-1;i>=0;i--){const s=new Mi(null,`FAKE_PATH_${e.getId()}}_${i}`,!0,i);this.createBean(s),s.setChildren([t]),t.setOriginalParent(s),t=s}0===s&&e.setOriginalParent(null),i.push(t)})),[i,s]}findDepth(e){let t=0,i=e;for(;i&&i[0]&&Ti(i[0]);)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,s){const r=[];for(let o=0;o<e.length;o++){const n=e[o];if(Ti(n)){const e=n,o=this.balanceColumnTree(e.getChildren(),t+1,i,s);e.setChildren(o),r.push(e)}else{let o,a;for(let e=i-1;e>=t;e--){const e=s.getUniqueKey(null,null),i=this.createMergedColGroupDef(null),r=new Mi(i,e,!0,t);this.createBean(r),a&&a.setChildren([r]),a=r,o||(o=a)}if(o&&a){if(r.push(o),e.some((e=>Ti(e)))){a.setChildren([n]);continue}a.setChildren(e);break}r.push(n)}}return r}findMaxDept(e,t){let i=t;for(let s=0;s<e.length;s++){const r=e[s];if(Ti(r)){const e=r,s=this.findMaxDept(e.getChildren(),t+1);i<s&&(i=s)}}return i}recursivelyCreateColumns(e,t,i,s,r,o,n){if(!e)return[];const a=new Array(e.length);for(let l=0;l<a.length;l++){const d=e[l];this.isColumnGroup(d)?a[l]=this.createColumnGroup(i,d,t,s,r,o,n):a[l]=this.createColumn(i,d,s,r,n)}return a}createColumnGroup(e,t,i,s,r,o,n){const a=this.createMergedColGroupDef(t),l=r.getUniqueKey(a.groupId||null,null),d=new Mi(a,l,!1,i);this.createBean(d);const c=this.findExistingGroup(t,o);c&&o.splice(c.idx,1);const u=c?.group;u&&d.setExpanded(u.isExpanded());const h=this.recursivelyCreateColumns(a.children,i+1,e,s,r,o,n);return d.setChildren(h),d}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,s,r){const o=this.findExistingColumn(t,i);o&&i?.splice(o.idx,1);let n=o?.column;if(n){const e=this.addColumnDefaultAndTypes(t,n.getColId());n.setColDef(e,t,r),this.applyColumnState(n,e,r)}else{const i=s.getUniqueKey(t.colId,t.field),r=this.addColumnDefaultAndTypes(t,i);n=new es(r,t,i,e),this.createBean(n)}return this.dataTypeService?.addColumnListeners(n),n}applyColumnState(e,t,i){const s=Rt(t.flex);if(void 0!==s&&e.setFlex(s),e.getFlex()<=0){const s=Rt(t.width);if(null!=s)e.setActualWidth(s,i);else{const t=e.getActualWidth();e.setActualWidth(t,i)}}void 0!==t.sort&&("asc"==t.sort||"desc"==t.sort?e.setSort(t.sort,i):e.setSort(void 0,i));const r=Rt(t.sortIndex);void 0!==r&&e.setSortIndex(r);const o=Et(t.hide);void 0!==o&&e.setVisible(!o,i),void 0!==t.pinned&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){const s=t[i].getUserProvidedColDef();if(s)if(null==e.colId){if(null!=e.field){if(s.field===e.field)return{idx:i,column:t[i]}}else if(s===e)return{idx:i,column:t[i]}}else if(t[i].getId()===e.colId)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(null!=e.groupId)for(let i=0;i<t.length;i++){const s=t[i];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:i,group:s}}}addColumnDefaultAndTypes(e,t){const i={};qi(i,this.gos.get("defaultColDef"),!1,!0);const s=this.updateColDefAndGetColumnType(i,e,t);s&&this.assignColumnTypes(s,i),qi(i,e,!1,!0);const r=this.gos.get("autoGroupColumnDef"),o=Kt(this.gos);return e.rowGroup&&r&&o&&qi(i,{sort:r.sort,initialSort:r.initialSort},!1,!0),this.dataTypeService?.validateColDef(i),i}updateColDefAndGetColumnType(e,t,i){const s=this.dataTypeService?.updateColDefAndGetColumnType(e,t,i),r=t.type??s??e.type;return e.type=r,r?Hi(r):void 0}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},ts);_i(this.gos.get("columnTypes")||{},((e,t)=>{e in i?ct(`the column type '${e}' is a default column type and cannot be overridden.`):(t.type&&ct("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[e]=t)})),e.forEach((e=>{const s=i[e.trim()];s?qi(t,s,!1,!0):ct("colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes")}))}isColumnGroup(e){return void 0!==e.children}};function rs(e,t,i){if(t)for(let s=0;s<t.length;s++){const r=t[s];Ti(r)&&rs(r,r.getChildren(),i),i(r,e)}}var os=class extends Ai{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],(e=>this.refreshAll(ns(e.source)))),this.addManagedPropertyListener("rowSelection",(e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,ns(e.source))})),this.addManagedPropertyListener("autoGroupColumnDef",(e=>this.onAutoGroupColumnDefChanged(ns(e.source)))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],(e=>this.recreateColumnDefs(ns(e.source)))),this.addManagedPropertyListener("pivotMode",(e=>this.setPivotMode(this.gos.get("pivotMode"),ns(e.source)))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){const t=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();const i=this.colDefCols?.list,s=this.colDefCols?.tree,r=this.columnFactory.createColumnTree(this.colDefs,!0,s,e);Gi(this.context,this.colDefCols?.tree,r.columnTree);const o=r.columnTree,n=r.treeDept,a=Oi(o),l={};a.forEach((e=>l[e.getId()]=e)),this.colDefCols={tree:o,treeDepth:n,list:a,map:l},this.funcColsService.extractCols(e,i),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),t&&(this.changeEventsDispatching=!0,t(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),"gridInitializing"===e&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;const t=this.cols?.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();const i=(s=this.gos,this.showingPivotResult?!s.get("enableStrictPivotColumnOrder"):s.get("maintainColumnOrder"));var s;e&&!i||this.restoreColOrder(),this.positionLockedCols(),this.showRowGroupColsService?.refresh(),this.quickFilterService?.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!gi(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){const e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=null!=e,e){const{map:t,list:i,tree:s,treeDepth:r}=e;this.cols={list:i.slice(),map:{...t},tree:s.slice(),treeDepth:r},e.list.some((e=>void 0!==this.cols?.map[e.getColId()]))||(this.lastPivotOrder=null)}else{const{map:e,list:t,tree:i,treeDepth:s}=this.colDefCols;this.cols={list:t.slice(),map:{...e},tree:i.slice(),treeDepth:s}}}getColsToShow(){const e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter((i=>{const s=Bi(i);if(e){const e=t&&yi(t,i);return s||e}return s||i.isVisible()}))}addAutoCols(){null!=this.autoCols&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),as(this.cols))}createAutoCols(){const e=Zt(this.gos,this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),i=this.funcColsService.getRowGroupColumns(),s=()=>{this.autoCols&&(Gi(this.context,this.autoCols.tree),this.autoCols=null)};if(!(i.length>0||this.gos.get("treeData"))||t||e||!this.autoColService)return void s();const r=this.autoColService.createAutoCols(i)??[],o=gi(r,this.autoCols?.list||null,((e,t)=>e.getColId()===t.getColId()));const n=this.cols.treeDepth,a=this.autoCols?this.autoCols.treeDepth:-1;if(o&&a==n)return;s();const[l,d]=this.columnFactory.balanceTreeForAutoCols(r,this.cols?.tree);this.autoCols={list:r,tree:l,treeDepth:d,map:{}};const c=e=>{if(!e)return null;const t=e.filter((e=>!Bi(e)));return[...r,...t]};this.lastOrder=c(this.lastOrder),this.lastPivotOrder=c(this.lastPivotOrder)}createControlsCols(){Gi(this.context,this.controlsCols?.tree),this.controlsCols=null;const e=this.controlsColService?.createControlsCols()??[],[t,i]=this.columnFactory.balanceTreeForAutoCols(e,this.cols.tree);function s(e,t){const i=Vi(e),s=Vi(t);return i&&!s?-1:!i&&s?1:0}this.controlsCols={list:e,tree:t,treeDepth:i,map:{}},this.lastOrder?.sort(s),this.lastPivotOrder?.sort(s)}addControlsCols(){null!=this.controlsCols&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),as(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,i){this.columnApplyStateService.applyColumnState({state:e.map((e=>({colId:"string"==typeof e?e:e.getColId(),hide:!t})))},i)}setColsPinned(e,t,i){if(!this.cols)return;if(St(e))return;if(It(this.gos,"print"))return void ct("Changing the column pinning status is not allowed with domLayout='print'");let s;this.columnAnimationService.start(),s=!0===t||"left"===t?"left":"right"===t?"right":null;const r=[];e.forEach((e=>{if(!e)return;const t=this.getCol(e);t&&t.getPinned()!==s&&(t.setPinned(s),r.push(t))})),r.length&&(this.visibleColsService.refresh(i),this.eventDispatcher.columnPinned(r,i)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let s;s=Ti(e)?e.getId():e||"",this.columnGroupStateService.setColumnGroupState([{groupId:s,open:t}],i)}getProvidedColGroup(e){let t=null;return rs(null,this.cols?.tree,(i=>{Ti(i)&&i.getId()===e&&(t=i)})),t}isColGroupLocked(e){const t=this.gos.get("groupLockGroupColumns");return!(!e.isRowGroupActive()||0===t)&&(-1===t||t>this.funcColsService.getRowGroupColumns().findIndex((t=>t.getColId()===e.getColId())))}isSuppressAutoCol(){return"custom"===this.gos.get("groupDisplayType")||"custom"===this.gos.get("treeDataDisplayType")}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some((e=>e.isVisible()&&e.isAutoHeight())),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,Tt(this.gos)||Mt(this.gos)||ct("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;const t=new Map(e.map(((e,t)=>[e,t])));if(!this.cols.list.some((e=>t.has(e))))return;const i=new Map(this.cols.list.map((e=>[e,!0]))),s=e.filter((e=>i.has(e))),r=new Map(s.map((e=>[e,!0]))),o=this.cols.list.filter((e=>!r.has(e))),n=s.slice();o.forEach((e=>{let t=e.getOriginalParent();if(!t)return void n.push(e);const i=[];for(;!i.length&&t;)t.getLeafColumns().forEach((e=>{const t=n.indexOf(e)>=0,s=i.indexOf(e)<0;t&&s&&i.push(e)})),t=t.getOriginalParent();if(!i.length)return void n.push(e);const s=i.map((e=>n.indexOf(e))),r=Math.max(...s);vi(n,e,r+1)})),this.cols.list=n}sortColsLikeKeys(e){if(null==this.cols)return;let t=[];const i={};e.forEach((e=>{if(i[e])return;const s=this.cols.map[e];s&&(t.push(s),i[e]=!0)}));let s=0;this.cols.list.forEach((e=>{const r=e.getColId();null==i[r]&&(r.startsWith(Li)?vi(t,e,s++):t.push(e))})),t=this.columnMoveService.placeLockedColumns(t),this.columnMoveService.doesMovePassMarryChildren(t)?this.cols.list=t:ct("Applying column order broke a group where columns should be married together. Applying new order has been discarded.")}sortColsLikeCols(e){if(!e||e.length<=1)return;const t=e.filter((e=>this.cols.list.indexOf(e)<0)).length>0;t||e.sort(((e,t)=>this.cols.list.indexOf(e)-this.cols.list.indexOf(t)))}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const s=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(s,i,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach((e=>e())),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,i){Ci(this.cols?.list,e,t),this.visibleColsService.refresh(i)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list:this.lastOrder=this.cols?.list}getColumnDefs(){if(!this.colDefCols)return;const e=this.colDefCols.list.slice();this.showingPivotResult?e.sort(((e,t)=>this.lastOrder.indexOf(e)-this.lastOrder.indexOf(t))):this.lastOrder&&e.sort(((e,t)=>this.cols.list.indexOf(e)-this.cols.list.indexOf(t)));const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,i)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){return this.colDefCols?.treeDepth>0}setColSpanActive(){this.colSpanActive=this.cols.list.some((e=>null!=e.getColDef().colSpan))}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)&&(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return!e||!this.gos.get("treeData")||(ct("Pivot mode not available with treeData."),!1)}isPivotActive(){const e=this.funcColsService.getPivotColumns();return this.pivotMode&&!St(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){Gi(this.context,this.colDefCols?.tree),Gi(this.context,this.autoCols?.tree),Gi(this.context,this.controlsCols?.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){return this.colDefCols?.list?this.colDefCols.list:null}getCols(){return this.cols?.list??[]}getAllCols(){const e=this.pivotResultColsService.getPivotResultCols(),t=e?.list;return[this.colDefCols?.list??[],this.autoCols?.list??[],this.controlsCols?.list??[],t??[]].flat()}getColsForKeys(e){return e?e.map((e=>this.getCol(e))).filter((e=>null!=e)):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return null==e?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(null==t)return null;const{map:i,list:s}=t;if("string"==typeof e&&i[e])return i[e];for(let t=0;t<s.length;t++)if(ls(s[t],e))return s[t];return this.getAutoCol(e)}getAutoCol(e){return this.autoCols?.list.find((t=>ls(t,e)))??null}getAutoCols(){return this.autoCols?.list??null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){const e=[],t=this.ctrlsService.getHeaderRowContainerCtrls();for(const i of t){if(!i)continue;const t=i.getGroupRowCount()||0;for(let s=0;s<t;s++){const t=i.getGroupRowCtrlAtIndex(s),r=e[s];if(t){const i=this.getColumnGroupHeaderRowHeight(t);(null==r||i>r)&&(e[s]=i)}}}return e}getColumnGroupHeaderRowHeight(e){const t=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight();let i=0;const s=e.getHeaderCtrls();for(const e of s){const t=e.getColumn();if(t.isAutoHeaderHeight()){const e=t.getAutoHeaderHeight();null!=e&&e>i&&(i=e)}}return Math.max(t,i)}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.visibleColsService.getAllCols().filter((e=>e.isAutoHeaderHeight())).map((e=>e.getAutoHeaderHeight()||0));return Math.max(e,...t)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if("fitCellContents"!==e?.type)return;const{colIds:t,skipHeader:i}=e;setTimeout((()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",i)}))}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,t,i){if("string"==typeof e||"string"==typeof t)return;const s=(t?ti(t):void 0)!==(e?ti(e):void 0),r=t?ii(t):void 0,o=e?ii(e):void 0;(s||r!==o)&&this.refreshAll(i)}};function ns(e){return"gridOptionsUpdated"===e?"gridOptionsChanged":e}function as(e){e.map={},e.list.forEach((t=>e.map[t.getId()]=t))}function ls(e,t){const i=e===t,s=e.getColDef()===t,r=e.getColId()==t;return i||s||r}var ds=class extends Ai{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation((()=>this.autoSizeCols(e)));const{colKeys:t,skipHeader:i,skipHeaderGroups:s,stopAtGroup:r,source:o="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered())return this.timesDelayed++,void setTimeout((()=>this.autoSizeCols(e)));this.timesDelayed=0;const n=[];let a=-1;const l=null!=i?i:this.gos.get("skipHeaderOnAutoSize"),d=null!=s?s:l;for(;0!==a;){a=0;const e=[];t.forEach((t=>{if(!t)return;const i=this.columnModel.getCol(t);if(!i)return;if(n.indexOf(i)>=0)return;const s=this.autoWidthCalculator.getPreferredWidthForColumn(i,l);if(s>0){const e=this.normaliseColumnWidth(i,s);i.setActualWidth(e,o),n.push(i),a++}e.push(i)})),e.length&&this.visibleColsService.refresh(o)}d||this.autoSizeColumnGroupsByColumns(t,o,r),this.eventDispatcher.columnResized(n,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const s=new Set;let r;this.columnModel.getColsForKeys(e).forEach((e=>{let t=e.getParent();for(;t&&t!=i;)t.isPadding()||s.add(t),t=t.getParent()}));for(const e of s){for(const t of this.ctrlsService.getHeaderRowContainerCtrls())if(r=t.getHeaderCtrlForColumn(e),r)break;r&&r.resizeLeafColumnsToFit(t)}return[]}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation((()=>this.autoSizeAllColumns(e,t)));const i=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}normaliseColumnWidth(e,t){const i=e.getMinWidth();t<i&&(t=i);const s=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=s),t}},cs=class extends Ai{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>fi(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>fi(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>fi(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(!0===t)return this.rowGroupCols.slice(0);const i=this.columnModel.getColDefCol(t);return i?[i]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return St(this.rowGroupCols)}setColumnAggFunc(e,t,i){if(!e)return;const s=this.columnModel.getColDefCol(e);s&&(s.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[s],i))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,((e,i)=>this.setRowGroupActive(e,i,t)),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,i),e||this.gos.get("suppressMakeColumnVisibleAfterUnGroup")||this.columnModel.setColsVisible([t],!0,i))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,(e=>this.setRowGroupActive(!0,e,t)),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,(e=>this.setRowGroupActive(!1,e,t)),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,(e=>e.setPivotActive(!0,t)),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,((e,i)=>{i.setPivotActive(e,t)}),t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,(e=>e.setPivotActive(!1,t)),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,((e,i)=>this.setValueActive(e,i,t)),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&this.aggFuncService)){const e=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(e)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,(e=>this.setValueActive(!0,e,t)),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,(e=>this.setValueActive(!1,e,t)),"columnValueChanged",t)}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;const s=this.rowGroupCols[e],r=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,s),this.eventDispatcher.rowGroupChanged(r,i)}setColList(e,t,i,s,r,o,n){if(St(this.columnModel.getCols()))return;const a=new Map;t.forEach(((e,t)=>a.set(e,t))),t.length=0,yt(e)&&e.forEach((e=>{const i=this.columnModel.getColDefCol(e);i&&t.push(i)})),t.forEach(((e,t)=>{const i=a.get(e);void 0!==i?s&&i!==t||a.delete(e):a.set(e,0)})),(this.columnModel.getColDefCols()||[]).forEach((e=>{const i=t.indexOf(e)>=0;o(i,e)})),r&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(n),this.eventDispatcher.columnChanged(i,[...a.keys()],n)}updateColList(e,t,i,s,r,o,n){if(!e||St(e))return;let a=!1;const l=new Set;e.forEach((e=>{if(!e)return;const s=this.columnModel.getColDefCol(e);if(s){if(l.add(s),i){if(t.indexOf(s)>=0)return;t.push(s)}else{const e=t.indexOf(s);if(e<0)return;for(let i=e+1;i<t.length;i++)l.add(t[i]);fi(t,s)}r(s),a=!0}})),a&&(s&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(n),this.eventDispatcher.genericColumnEvent(o,Array.from(l),n))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,((t,i)=>t.setValueActive(i,e)),(()=>{}),(()=>{}),(e=>{const t=e.aggFunc;return null===t||""===t?null:void 0!==t?!!t:void 0}),(e=>null!=e.initialAggFunc&&""!=e.initialAggFunc)),this.valueCols.forEach((e=>{const t=e.getColDef();null!=t.aggFunc&&""!=t.aggFunc?e.setAggFunc(t.aggFunc):e.getAggFunc()||e.setAggFunc(t.initialAggFunc)}))}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,((t,i)=>t.setRowGroupActive(i,e)),(e=>e.rowGroupIndex),(e=>e.initialRowGroupIndex),(e=>e.rowGroup),(e=>e.initialRowGroup))}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,((t,i)=>t.setPivotActive(i,e)),(e=>e.pivotIndex),(e=>e.initialPivotIndex),(e=>e.pivot),(e=>e.initialPivot))}extractColsCommon(e=[],t=[],i,s,r,o,n){const a=[],l=[];(this.columnModel.getColDefCols()||[]).forEach((i=>{const d=e.indexOf(i)<0,c=i.getColDef(),u=Et(o(c)),h=Et(n(c)),p=Rt(s(c)),g=Rt(r(c));let m;m=void 0!==u?u:void 0!==p?null!==p&&p>=0:d?void 0!==h?h:!(void 0===g)&&null!=g&&g>=0:t.indexOf(i)>=0,m&&((d?null!=p||null!=g:null!=p)?a.push(i):l.push(i))}));const d=e=>{const t=s(e.getColDef()),i=r(e.getColDef());return null!=t?t:i};a.sort(((e,t)=>{const i=d(e),s=d(t);return i===s?0:i<s?-1:1}));const c=[].concat(a);return t.forEach((e=>{l.indexOf(e)>=0&&c.push(e)})),l.forEach((e=>{c.indexOf(e)<0&&c.push(e)})),t.forEach((e=>{c.indexOf(e)<0&&i(e,!1)})),c.forEach((e=>{t.indexOf(e)<0&&i(e,!0)})),c}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},s=(e,t,s,r,o,n)=>{const a=this.columnModel.getColDefCols();if(!t.length||!a)return[];const l=Object.keys(e),d=new Set(l),c=new Set(l),u=new Set(t.map((e=>{const t=e.getColId();return c.delete(t),t})).concat(l)),h=[],p={};let g=0;for(let e=0;e<a.length;e++){const t=a[e].getColId();u.has(t)&&(h.push(t),p[t]=g++)}let m=1e3,f=!1,v=0;const C=t=>{const i=p[t];for(let t=v;t<i;t++){const i=h[t];c.has(i)&&(e[i][o]=m++,c.delete(i))}v=i};t.forEach((t=>{const a=t.getColId();if(d.has(a))C(a),e[a][o]=m++;else{const l=t.getColDef();(null===l[o]||void 0===l[o]&&null==l[n])&&(f||(l[s]||void 0===l[s]&&l[r]?C(a):(c.forEach((t=>{e[t][o]=m+p[t]})),m+=h.length,f=!0)),i[a]||(i[a]={colId:a}),i[a][o]=m++)}}))};return s(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}},us=class extends Ai{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){const i=this.columnModel.getColDefCols()||[];if(St(i))return!1;if(e&&e.state&&!e.state.forEach)return ct("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const s=this.funcColsService.getModifyColumnsNoEventsCallbacks(),r=(i,r,o)=>{const n=this.compareColumnStatesAndDispatchEvents(t),a=r.slice(),l={},d={},c=[],u=[];let h=0;const p=this.funcColsService.getRowGroupColumns().slice(),g=this.funcColsService.getPivotColumns().slice();i.forEach((i=>{const r=i.colId||"";if(r.startsWith(Li))return c.push(i),void u.push(i);const n=o(r);n?(this.syncColumnWithStateItem(n,i,e.defaultState,l,d,!1,t,s),fi(a,n)):(u.push(i),h+=1)}));const m=i=>this.syncColumnWithStateItem(i,null,e.defaultState,l,d,!1,t,s);a.forEach(m),this.funcColsService.sortRowGroupColumns(hs.bind(this,l,p)),this.funcColsService.sortPivotColumns(hs.bind(this,d,g)),this.columnModel.refreshCols(!1);const f=(this.columnModel.getAutoCols()||[]).slice();return c.forEach((i=>{const r=this.columnModel.getAutoCol(i.colId);fi(f,r),this.syncColumnWithStateItem(r,i,e.defaultState,null,null,!0,t,s)})),f.forEach(m),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),n(),{unmatchedAndAutoStates:u,unmatchedCount:h}};this.columnAnimationService.start();let{unmatchedAndAutoStates:o,unmatchedCount:n}=r(e.state||[],i,(e=>this.columnModel.getColDefCol(e)));if(o.length>0||yt(e.defaultState)){const e=this.pivotResultColsService.getPivotResultCols(),t=e?.list;n=r(o,t||[],(e=>this.pivotResultColsService.getPivotResultCol(e))).unmatchedCount}return this.columnAnimationService.finish(),0===n}resetColumnState(e){if(St(this.columnModel.getColDefCols()))return;const t=Oi(this.columnModel.getColDefColTree()),i=[];let s=1e3,r=1e3,o=[];const n=this.columnModel.getAutoCols();n&&(o=o.concat(n)),t&&(o=o.concat(t)),o.forEach((e=>{const t=this.getColumnStateFromColDef(e);wt(t.rowGroupIndex)&&t.rowGroup&&(t.rowGroupIndex=s++),wt(t.pivotIndex)&&t.pivot&&(t.pivotIndex=r++),i.push(t)})),this.applyColumnState({state:i,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(e,t)=>null!=e?e:null!=t?t:null,i=e.getColDef(),s=t(i.sort,i.initialSort),r=t(i.sortIndex,i.initialSortIndex),o=t(i.hide,i.initialHide),n=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex);let d=t(i.rowGroupIndex,i.initialRowGroupIndex),c=t(i.rowGroup,i.initialRowGroup);null!=d||null!=c&&0!=c||(d=null,c=null);let u=t(i.pivotIndex,i.initialPivotIndex),h=t(i.pivot,i.initialPivot);null!=u||null!=h&&0!=h||(u=null,h=null);const p=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:s,sortIndex:r,hide:o,pinned:n,width:a,flex:l,rowGroup:c,rowGroupIndex:d,pivot:h,pivotIndex:u,aggFunc:p}}syncColumnWithStateItem(e,t,i,s,r,o,n,a){if(!e)return;const l=(e,s)=>{const r={value1:void 0,value2:void 0};let o=!1;return t&&(void 0!==t[e]&&(r.value1=t[e],o=!0),yt(s)&&void 0!==t[s]&&(r.value2=t[s],o=!0)),!o&&i&&(void 0!==i[e]&&(r.value1=i[e]),yt(s)&&void 0!==i[s]&&(r.value2=i[s])),r},d=l("hide").value1;void 0!==d&&e.setVisible(!d,n);const c=l("pinned").value1;void 0!==c&&e.setPinned(c);const u=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),h=l("flex").value1;if(void 0!==h&&e.setFlex(h),null==h){const t=l("width").value1;null!=t&&null!=u&&t>=u&&e.setActualWidth(t,n)}const p=l("sort").value1;void 0!==p&&("desc"===p||"asc"===p?e.setSort(p,n):e.setSort(void 0,n));const g=l("sortIndex").value1;if(void 0!==g&&e.setSortIndex(g),o||!e.isPrimary())return;const m=l("aggFunc").value1;void 0!==m&&("string"==typeof m?(e.setAggFunc(m),e.isValueActive()||(e.setValueActive(!0,n),a.addValueCol(e))):(yt(m)&&ct("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,n),a.removeValueCol(e))));const{value1:f,value2:v}=l("rowGroup","rowGroupIndex");void 0===f&&void 0===v||("number"==typeof v||f?(e.isRowGroupActive()||(e.setRowGroupActive(!0,n),a.addGroupCol(e)),s&&"number"==typeof v&&(s[e.getId()]=v)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,n),a.removeGroupCol(e)));const{value1:C,value2:y}=l("pivot","pivotIndex");void 0===C&&void 0===y||("number"==typeof y||C?(e.isPivotActive()||(e.setPivotActive(!0,n),a.addPivotCol(e)),r&&"number"==typeof y&&(r[e.getId()]=y)):e.isPivotActive()&&(e.setPivotActive(!1,n),a.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;const t=[];e.state.forEach((e=>{null!=e.colId&&t.push(e.colId)})),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},i=this.columnGetStateService.getColumnState(),s={};return i.forEach((e=>{s[e.colId]=e})),()=>{const r=this.columnModel.getAllCols(),o=(t,i,s,r)=>{if(gi(i.map(r),s.map(r)))return;const o=new Set(i);s.forEach((e=>{o.delete(e)||o.add(e)}));const n=[...o];this.eventService.dispatchEvent({type:t,columns:n,column:1===n.length?n[0]:null,source:e})},n=e=>{const t=[];return r.forEach((i=>{const r=s[i.getColId()];r&&e(r,i)&&t.push(i)})),t},a=e=>e.getColId();o("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),o("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),a);const l=n(((e,t)=>{const i=null!=e.aggFunc,s=i!=t.isValueActive(),r=i&&e.aggFunc!=t.getAggFunc();return s||r}));l.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",l,e),this.eventDispatcher.columnResized(n(((e,t)=>e.width!=t.getActualWidth())),!0,e),this.eventDispatcher.columnPinned(n(((e,t)=>e.pinned!=t.getPinned())),e),this.eventDispatcher.columnVisible(n(((e,t)=>e.hide==t.isVisible())),e);const d=n(((e,t)=>e.sort!=t.getSort()||e.sortIndex!=t.getSortIndex()));d.length>0&&this.sortController.dispatchSortChangedEvents(e,d),this.normaliseColumnMovedEventForColumnState(i,e)}}normaliseColumnMovedEventForColumnState(e,t){const i=this.columnGetStateService.getColumnState(),s={};i.forEach((e=>s[e.colId]=e));const r={};e.forEach((e=>{s[e.colId]&&(r[e.colId]=!0)}));const o=e.filter((e=>r[e.colId])),n=i.filter((e=>r[e.colId])),a=[];n.forEach(((e,t)=>{const i=o&&o[t];if(i&&i.colId!==e.colId){const e=this.columnModel.getCol(i.colId);e&&a.push(e)}})),a.length&&this.eventDispatcher.columnMoved({movedColumns:a,source:t,finished:!0})}},hs=(e,t,i,s)=>{const r=e[i.getId()],o=e[s.getId()],n=null!=r,a=null!=o;if(n&&a)return r-o;if(n)return-1;if(a)return 1;const l=t.indexOf(i),d=t.indexOf(s),c=l>=0;return c&&d>=0?l-d:c?-1:1},ps=class extends Ai{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,i){const s=this.columnModel.getCols();if(!s)return;const r=s[e];this.moveColumns([r],t,i)}moveColumns(e,t,i,s=!0){const r=this.columnModel.getCols();if(!r)return;if(t>r.length-e.length)return ct("tried to insert columns in invalid location, toIndex = ",t),void ct("remember that you should not count the moving columns when calculating the new index");this.columnAnimationService.start();const o=this.columnModel.getColsForKeys(e);this.doesMovePassRules(o,t)&&(this.columnModel.moveInCols(o,t,i),this.eventDispatcher.columnMoved({movedColumns:o,source:i,toIndex:t,finished:s})),this.columnAnimationService.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!!this.doesMovePassMarryChildren(e)&&!!this.doesMovePassLockedPositions(e)}getProposedColumnOrder(e,t){const i=this.columnModel.getCols().slice();return Ci(i,e,t),i}doesMovePassLockedPositions(e){const t=this.gos.get("enableRtl");let i=t?1:-1,s=!0;return e.forEach((e=>{const r=(o=e.getColDef().lockPosition)?"left"===o||!0===o?-1:1:0;var o;t?r>i&&(s=!1):r<i&&(s=!1),i=r})),s}doesMovePassMarryChildren(e){let t=!0;return rs(null,this.columnModel.getColTree(),(i=>{if(!Ti(i))return;const s=i,r=s.getColGroupDef();if(!r||!r.marryChildren)return;const o=[];s.getLeafColumns().forEach((t=>{const i=e.indexOf(t);o.push(i)})),Math.max.apply(Math,o)-Math.min.apply(Math,o)>s.getLeafColumns().length-1&&(t=!1)})),t}placeLockedColumns(e){const t=[],i=[],s=[];return e.forEach((e=>{const r=e.getColDef().lockPosition;"right"===r?s.push(e):"left"===r||!0===r?t.push(e):i.push(e)})),this.gos.get("enableRtl")?[...s,...i,...t]:[...t,...i,...s]}},gs=/[&<>"']/g,ms={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function fs(e,t){if(null==e)return null;const i=e.toString().toString();return t?i:i.replace(gs,(e=>ms[e]))}var vs=class extends Ai{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const s=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,s):s}getDisplayNameForProvidedColumnGroup(e,t,i){const s=t?t.getColGroupDef():null;return s?this.getHeaderName(s,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,s,r){const o=e.headerValueGetter;if(o){const n=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:s,location:r});return"function"==typeof o?o(n):"string"==typeof o?this.expressionService.evaluate(o,n):(ct("headerValueGetter must be a function or a string"),"")}return null!=e.headerName?e.headerName:e.field?(n=e.field)&&null!=n?n.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map((e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):""))).join(" "):null:"";var n}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn;let s,r=null;if(yt(i)){const o=this.funcColsService.getValueColumns(),n=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&1===o.length,a=void 0!==e.getColDef().pivotTotalColumnIds;if(n&&!a)return t;r=i?i.getAggFunc():null,s=!0}else{const t=e.isValueActive(),i=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();t&&i?(r=e.getAggFunc(),s=!0):s=!1}if(s){const e="string"==typeof r?r:"func";return`${this.localeService.getLocaleTextFunc()(e,e)}(${t})`}return t}},Cs=class extends Ai{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){Gi(this.context,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return null!=this.pivotResultCols}lookupPivotResultCol(e,t){if(null==this.pivotResultCols)return null;const i=this.columnModel.getColDefCol(t);let s=null;return this.pivotResultCols.list.forEach((t=>{const r=t.getColDef().pivotKeys,o=t.getColDef().pivotValueColumn;gi(r,e)&&o===i&&(s=t)})),s}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.columnModel.isReady()&&(null!=e||null!=this.pivotResultCols)){if(e){this.processPivotResultColDef(e);const i=this.columnFactory.createColumnTree(e,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,t);Gi(this.context,this.pivotResultCols?.tree,i.columnTree);const s=i.columnTree,r=i.treeDept,o=Oi(s),n={};this.pivotResultCols={tree:s,treeDepth:r,list:o,map:n},this.pivotResultCols.list.forEach((e=>this.pivotResultCols.map[e.getId()]=e));const a=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!a)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(t)}}processPivotResultColDef(e){const t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;const s=e=>{e.forEach((e=>{if(yt(e.children)){const t=e;i&&i(t),s(t.children)}else t&&t(e)}))};e&&s(e)}},ys=class extends Ai{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,i,s){const r=[];e.forEach((e=>{const i=this.columnModel.getColDefCol(e.key)||this.columnModel.getCol(e.key);if(i&&(r.push({width:e.newWidth,ratios:[1],columns:[i]}),"shift"===this.gos.get("colResizeDefault")&&(t=!t),t)){const t=this.visibleColsService.getColAfter(i);if(!t)return;const s=i.getActualWidth()-e.newWidth,o=t.getActualWidth()+s;r.push({width:o,ratios:[1],columns:[t]})}})),0!==r.length&&this.resizeColumnSets({resizeSets:r,finished:i,source:s})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:s}=e;if(t&&!t.every((e=>this.checkMinAndMaxWidthsForSet(e)))){if(i){const e=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(e,i,s)}return}const r=[],o=[];t.forEach((e=>{const{width:t,columns:i,ratios:n}=e,a={},l={};i.forEach((e=>o.push(e)));let d=!0,c=0;for(;d;){if(c++,c>1e3){ut("infinite loop in resizeColumnSets");break}d=!1;const e=[];let s=0,r=t;i.forEach(((t,i)=>{if(l[t.getId()])r-=a[t.getId()];else{e.push(t);const r=n[i];s+=r}}));const o=1/s;e.forEach(((i,s)=>{let c;s===e.length-1?c=r:(c=Math.round(n[s]*t*o),r-=c);const u=i.getMinWidth(),h=i.getMaxWidth();c<u?(c=u,l[i.getId()]=!0,d=!0):h>0&&c>h&&(c=h,l[i.getId()]=!0,d=!0),a[i.getId()]=c}))}i.forEach((e=>{const t=a[e.getId()];e.getActualWidth()!==t&&(e.setActualWidth(t,s),r.push(e))}))}));const n=r.length>0;let a=[];n&&(a=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.visibleColsService.setLeftValues(s),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());const l=o.concat(a);(n||i)&&this.eventDispatcher.columnResized(l,i,s,a)}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let s=0,r=0,o=!0;return t.forEach((e=>{const t=e.getMinWidth();s+=t||0;const i=e.getMaxWidth();i>0?r+=i:o=!1})),i>=s&&(!o||i<=r)}refreshFlexedColumns(e={}){const t=e.source?e.source:"flex";if(null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];const i=this.visibleColsService.getCenterCols();let s=-1;if(e.resizingCols){const t=new Set(e.resizingCols);for(let e=i.length-1;e>=0;e--)if(t.has(i[e])){s=e;break}}let r=0,o=[],n=0,a=0;for(let e=0;e<i.length;e++)i[e].getFlex()&&e>s?(o.push(i[e]),a+=i[e].getFlex(),n+=i[e].getMinWidth()):r+=i[e].getActualWidth();if(!o.length)return[];let l=[];r+n>this.flexViewportWidth&&(o.forEach((e=>e.setActualWidth(e.getMinWidth(),t))),l=o,o=[]);const d=[];let c;e:for(;;){c=this.flexViewportWidth-r;const e=c/a;for(let i=0;i<o.length;i++){const s=o[i],n=e*s.getFlex();let c=0;const u=s.getMinWidth(),h=s.getMaxWidth();if(n<u?c=u:n>h&&(c=h),c){s.setActualWidth(c,t),mi(o,s),a-=s.getFlex(),l.push(s),r+=s.getActualWidth();continue e}d[i]=Math.floor(n)}break}let u=c;return o.forEach(((e,i)=>{const s=i<o.length-1?Math.min(d[i],u):Math.max(d[i],u);e.setActualWidth(s,t),l.push(e),u-=d[i]})),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(l,!0,t,o),o}sizeColumnsToFit(e,t="sizeColumnsToFit",i,s){if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation((()=>this.sizeColumnsToFit(e,t,i,s)));const r={};s&&s?.columnLimits?.forEach((({key:e,...t})=>{r["string"==typeof e?e:e.getColId()]=t}));const o=this.visibleColsService.getAllCols(),n=e===Ni(o);if(e<=0||!o.length||n)return;const a=[],l=[];o.forEach((e=>{!0===e.getColDef().suppressSizeToFit?l.push(e):a.push(e)}));const d=a.slice(0);let c=!1;const u=e=>{fi(a,e),l.push(e)};for(a.forEach((e=>{e.resetActualWidth(t);const i=r?.[e.getId()],o=i?.minWidth??s?.defaultMinWidth,n=i?.maxWidth??s?.defaultMaxWidth,a=e.getActualWidth();"number"==typeof o&&a<o?e.setActualWidth(o,t,!0):"number"==typeof n&&a>n&&e.setActualWidth(n,t,!0)}));!c;){c=!0;const i=e-Ni(l);if(i<=0)a.forEach((e=>{const i=r?.[e.getId()]?.minWidth??s?.defaultMinWidth;"number"!=typeof i?e.setMinimum(t):e.setActualWidth(i,t,!0)}));else{const e=i/Ni(a);let o=i;for(let i=a.length-1;i>=0;i--){const n=a[i],l=r?.[n.getId()],d=l?.minWidth??s?.defaultMinWidth,h=l?.maxWidth??s?.defaultMaxWidth,p=n.getMinWidth(),g=n.getMaxWidth(),m="number"==typeof d&&d>p?d:p,f="number"==typeof h&&h<g?h:g;let v=Math.round(n.getActualWidth()*e);v<m?(v=m,u(n),c=!1):v>f?(v=f,u(n),c=!1):0===i&&(v=o),n.setActualWidth(v,t,!0),o-=v}}}d.forEach((e=>{e.fireColumnWidthChangedEvent(t)})),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),i||this.eventDispatcher.columnResized(d,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout((()=>{if("fitGridWidth"===t){const{columnLimits:t,defaultMinWidth:i,defaultMaxWidth:s}=e,r=t?.map((({colId:e,minWidth:t,maxWidth:i})=>({key:e,minWidth:t,maxWidth:i})));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:i,defaultMaxWidth:s,columnLimits:r})}else"fitProvidedWidth"===t&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")}))}};function ws(e,t){return e+"_"+t}function Ss(e){return e instanceof bs}var bs=class extends Ai{constructor(e,t,i,s){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=s}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return ws(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every((e=>e.isMoving()))}checkLeft(){if(this.displayedChildren.forEach((e=>{Ss(e)&&e.checkLeft()})),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const e=pi(this.displayedChildren).getLeft();this.setLeft(e)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach((t=>{e+=t.getActualWidth()})),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach((t=>{t.isResizable()&&(e=!0)})),e}getMinWidth(){let e=0;return this.displayedChildren.forEach((t=>{e+=t.getMinWidth()})),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach((t=>{Zi(t)?e.push(t):Ss(t)&&t.addDisplayedLeafColumns(e)}))}addLeafColumns(e){this.children.forEach((t=>{Zi(t)?e.push(t):Ss(t)&&t.addLeafColumns(e)}))}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&e&&e.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;null!=e&&e.isPadding();)e=e.getParent();if(!e||!e.getProvidedColumnGroup().isExpandable())return this.displayedChildren=this.children,void this.dispatchLocalEvent({type:"displayedChildrenChanged"});this.children.forEach((t=>{if(!Ss(t)||t.displayedChildren&&t.displayedChildren.length)switch(t.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(t);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(t);break;default:this.displayedChildren.push(t)}})),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},Rs=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return i="number"!=typeof t?0:t+1,this.existingIds[e]=i,i}},Es=class extends Ai{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=Ps(this.treeLeft),this.columnsCenter=Ps(this.treeCenter),this.columnsRight=Ps(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter((e=>e.isAutoHeight())),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){const e=Ni(this.columnsCenter),t=Ni(this.columnsLeft),i=Ni(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,i;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,i=this.columnsRight?pi(this.columnsRight):null):(t=this.columnsLeft?pi(this.columnsLeft):null,i=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach((s=>{s.setLastLeftPinned(s===t,e),s.setFirstRightPinned(s===i,e)}))}buildTrees(){const e=this.columnModel.getColsToShow(),t=e.filter((e=>"left"==e.getPinned())),i=e.filter((e=>"right"==e.getPinned())),s=e.filter((e=>"left"!=e.getPinned()&&"right"!=e.getPinned())),r=new Rs;this.treeLeft=this.createGroups({columns:t,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:i,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:s,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){const e=this.columnModel.getCols(),t=[],i=[],s=[];for(const r of e){const e=r.getPinned();e?!0===e||"left"===e?t.push(r):s.push(r):i.push(r)}this.ariaOrderColumns=t.concat(i).concat(s)}getAriaColIndex(e){let t;return t=Ss(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach((e=>{e.forEach((e=>{Ss(e)&&e.checkLeft()}))}))}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;const t=this.columnModel.getCols().slice(0),i=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach((s=>{if(i){let t=Ni(s);s.forEach((i=>{t-=i.getActualWidth(),i.setLeft(t,e)}))}else{let t=0;s.forEach((i=>{i.setLeft(t,e),t+=i.getActualWidth()}))}!function(e,t){for(let i=0;i<t.length;i++)mi(e,t[i])}(t,s)})),t.forEach((t=>{t.setLeft(null,e)}))}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,i,s){const r=[];let o=null;for(let n=0;n<t.length;n++){const a=t[n],l=t.length-n,d=Math.min(a.getColSpan(e),l),c=[a];if(d>1){const e=d-1;for(let i=1;i<=e;i++)c.push(t[n+i]);n+=e}let u;i?(u=!1,c.forEach((e=>{i(e)&&(u=!0)}))):u=!0,u&&(0===r.length&&o&&s&&s(a)&&r.push(o),r.push(a)),o=a}return r}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){const t=this.getAllCols(),i=t.indexOf(e);return i>0?t[i-1]:null}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),s=e.getDisplayedLeafColumns(),r="After"===t?pi(s):s[0],o=`getCol${t}`;for(;;){const t=this[o](r);if(!t)return null;const s=this.getColGroupAtLevel(t,i);if(s!==e)return s}}getColGroupAtLevel(e,t){let i,s,r=e.getParent();for(;i=r.getProvidedColumnGroup().getLevel(),s=r.getPaddingLevel(),!(i+s<=t);)r=r.getParent();return r}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};Fs(this.treeCenter,!1,e),Fs(this.treeLeft,!1,e),Fs(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){Fs(this.getAllTrees(),!1,(e=>{Ss(e)&&e.calculateDisplayedColumns()}))}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const s=this[t[i]]();if(s.length)return e?pi(s):s[0]}return null}getColumnGroup(e,t){if(!e)return null;if(Ss(e))return e;const i=this.getAllTrees(),s="number"==typeof t;let r=null;return Fs(i,!1,(i=>{if(Ss(i)){const o=i;let n;n=s?e===o.getGroupId()&&t===o.getPartId():e===o.getGroupId(),n&&(r=o)}})),r}getColAfter(e){const t=this.getAllCols(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return Ni(this.columnsLeft)}getDisplayedColumnsRightWidth(){return Ni(this.columnsRight)}isColAtEdge(e,t){const i=this.getAllCols();if(!i.length)return!1;const s="first"===t;let r;if(Ss(e)){const t=e.getDisplayedLeafColumns();if(!t.length)return!1;r=s?t[0]:pi(t)}else r=e;return(s?i[0]:pi(i))===r}createGroups(e){const{columns:t,idCreator:i,pinned:s,oldDisplayedGroups:r,isStandaloneStructure:o}=e,n=this.mapOldGroupsById(r),a=[];let l=t;for(;l.length;){const e=l;l=[];let t=0;const r=r=>{const d=t;t=r;const c=e[d],u=(Ss(c)?c.getProvidedColumnGroup():c).getOriginalParent();if(null==u){for(let t=d;t<r;t++)a.push(e[t]);return}const h=this.createColGroup(u,i,n,s,o);for(let t=d;t<r;t++)h.addChild(e[t]);l.push(h)};for(let i=1;i<e.length;i++){const s=e[i],o=(Ss(s)?s.getProvidedColumnGroup():s).getOriginalParent(),n=e[t];o!==(Ss(n)?n.getProvidedColumnGroup():n).getOriginalParent()&&r(i)}t<e.length&&r(e.length)}return o||this.setupParentsIntoCols(a,null),a}createColGroup(e,t,i,s,r){const o=e.getGroupId(),n=t.getInstanceIdForKey(o);let a=i[ws(o,n)];return a&&a.getProvidedColumnGroup()!==e&&(a=null),yt(a)?a.reset():(a=new bs(e,o,n,s),r||this.createBean(a)),a}mapOldGroupsById(e){const t={},i=e=>{e.forEach((e=>{if(Ss(e)){const s=e;t[e.getUniqueId()]=s,i(s.getChildren())}}))};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach((e=>{if(e.setParent(t),Ss(e)){const t=e;this.setupParentsIntoCols(t.getChildren(),t)}}))}};function Fs(e,t,i){if(e)for(let s=0;s<e.length;s++){const r=e[s];Ss(r)&&Fs(t?r.getDisplayedChildren():r.getChildren(),t,i),i(r)}}function Ps(e){const t=[];return Fs(e,!0,(e=>{Zi(e)&&t.push(e)})),t}var xs=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],Ds=[...xs,"scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],As={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},Ts=class{};Ts.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"],Ts.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"],Ts.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],Ts.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],Ts.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"],Ts.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"],Ts.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"],Ts.ALL_PROPERTIES=[...Ts.ARRAY_PROPERTIES,...Ts.OBJECT_PROPERTIES,...Ts.STRING_PROPERTIES,...Ts.NUMBER_PROPERTIES,...Ts.FUNCTION_PROPERTIES,...Ts.BOOLEAN_PROPERTIES,...Ts.OTHER_PROPERTIES];var Ms=Ts,Is=class{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}};Is.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY",Is.PUBLIC_EVENTS=xs,Is.EVENT_CALLBACKS=Ds.map((e=>Is.getCallbackForEvent(e))),Is.BOOLEAN_PROPERTIES=Ms.BOOLEAN_PROPERTIES,Is.ALL_PROPERTIES=Ms.ALL_PROPERTIES,Is.ALL_PROPERTIES_AND_CALLBACKS=[...Is.ALL_PROPERTIES,...Is.EVENT_CALLBACKS],Is.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Is.ALL_PROPERTIES_AND_CALLBACKS);var ks=Is,Ls=class extends Ai{};function Os(e,t,i){return i&&e.addDestroyFunc((()=>t.destroyBean(i))),i??e}var Ns,Gs,Bs,Vs,Hs,$s,Ws,_s,zs,Us,js=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1)t.forEach((e=>this.addCssClass(e)));else if(!0!==this.cssClassStates[e]&&e.length){const t=this.getGui();t&&t.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1)t.forEach((e=>this.removeCssClass(e)));else if(!1!==this.cssClassStates[e]&&e.length){const t=this.getGui();t&&t.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return!!t&&t.classList.contains(e)}addOrRemoveCssClass(e,t){if(e){if(e.indexOf(" ")>=0){const i=(e||"").split(" ");if(i.length>1)return void i.forEach((e=>this.addOrRemoveCssClass(e,t)))}if(this.cssClassStates[e]!==t&&e.length){const i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}}};function qs(e,t,i){null==i||"string"==typeof i&&""==i?Ys(e,t):Ks(e,t,i)}function Ks(e,t,i){e.setAttribute(Qs(t),i.toString())}function Ys(e,t){e.removeAttribute(Qs(t))}function Qs(e){return`aria-${e}`}function Js(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function Xs(e,t){qs(e,"label",t)}function Zs(e,t){qs(e,"labelledby",t)}function er(e,t){qs(e,"live",t)}function tr(e,t){qs(e,"hidden",t)}function ir(e,t){Ks(e,"expanded",t)}function sr(e,t){Ks(e,"colindex",t)}function rr(e,t){qs(e,"selected",t)}function or(e,t){return void 0===t?e("ariaIndeterminate","indeterminate"):!0===t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}function nr(){return void 0===Ns&&(Ns=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Ns}function ar(){if(void 0===Gs)if(nr()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(Gs=null!=e[1]?parseFloat(e[1]):0)}else Gs=0;return Gs}function lr(){if(void 0===Bs){const e=window;Bs=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Bs}function dr(){return void 0===Vs&&(Vs=/(firefox)/i.test(navigator.userAgent)),Vs}function cr(){return void 0===Hs&&(Hs=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Hs}function ur(){return void 0===$s&&($s=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),$s}function hr(){return!nr()||ar()>=15}function pr(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return-1!==t||null!==i&&(""!==i||dr())?t.toString():null}function gr(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;0===i&&0===t.clientWidth&&(i=null),t.parentNode&&t.parentNode.removeChild(t),null!=i&&(_s=i,Ws=0===i)}function mr(){return null==Ws&&gr(),Ws}var fr="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function vr(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),s=t.call(e,fr),r=kr(e);return i&&!s&&r}function Cr(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-hidden",!t),s||tr(e,!t)}function yr(e,t){const i="disabled",s=t?e=>e.setAttribute(i,""):e=>e.removeAttribute(i);s(e),$r(e.querySelectorAll("input"),(e=>s(e)))}function wr(e,t,i){let s=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,"number"==typeof i){if(++s>i)break}else if(e===i)break}return!1}function Sr(e){const{height:t,width:i,borderTopWidth:s,borderRightWidth:r,borderBottomWidth:o,borderLeftWidth:n,paddingTop:a,paddingRight:l,paddingBottom:d,paddingLeft:c,marginTop:u,marginRight:h,marginBottom:p,marginLeft:g,boxSizing:m}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(r||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(n||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(d||"0"),paddingLeft:parseFloat(c||"0"),marginTop:parseFloat(u||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:m}}function br(e){const t=Sr(e);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom:t.height}function Rr(e){const t=Sr(e);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight:t.width}function Er(e){const{height:t,marginBottom:i,marginTop:s}=Sr(e);return Math.floor(t+i+s)}function Fr(e){const{width:t,marginLeft:i,marginRight:s}=Sr(e);return Math.floor(t+i+s)}function Pr(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:r,borderBottomWidth:o}=Sr(e);return{top:t.top+(i||0),left:t.left+(s||0),right:t.right+(r||0),bottom:t.bottom+(o||0)}}function xr(){if("boolean"==typeof Us)return Us;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(e),e.scrollLeft=1,Us=0===Math.floor(e.scrollLeft),document.body.removeChild(e),Us}function Dr(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),lr()&&!xr()&&(i=e.scrollWidth-e.clientWidth-i)),i}function Ar(e,t,i){i&&(xr()?t*=-1:(nr()||lr())&&(t=e.scrollWidth-e.clientWidth-t)),e.scrollLeft=t}function Tr(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function Mr(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ir(e){return!!e.offsetParent}function kr(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!Ir(e)||"visible"!==window.getComputedStyle(e).visibility)}function Lr(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function Or(e,t){"flex"===t?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Nr(e,t)}function Nr(e,t){t=Br(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function Gr(e,t){t=Br(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function Br(e){return"number"==typeof e?`${e}px`:e}function Vr(e){return e instanceof Node||e instanceof HTMLElement}function Hr(e,t,i){null==i||""===i?e.removeAttribute(t):e.setAttribute(t,i.toString())}function $r(e,t){if(null!=e)for(let i=0;i<e.length;i++)t(e[i])}var Wr=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},_r=class e extends Ai{constructor(e,t,i,s){super(),this.parentComp=e,this.tooltipShowDelayOverride=t,this.tooltipHideDelayOverride=i,this.shouldDisplayTooltip=s,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupService=e.popupService,this.userComponentFactory=e.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.parentComp.getGui();0===this.tooltipTrigger&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),1===this.tooltipTrigger&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return t<0&&ct(`${e} should not be lower than 0`),Math.max(200,t)}getTooltipDelay(e){return"show"===e?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return e&&"hover"!==e?1:0}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),ur()||(e.isLocked?this.showTooltipTimeoutId=window.setTimeout((()=>{this.prepareToShowTooltip(t)}),100):this.prepareToShowTooltip(t))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&2===this.state&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){const t=e.relatedTarget,i=this.parentComp.getGui(),s=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(t)||this.interactionEnabled&&s?.contains(t)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(t){if(0!=this.state||e.isLocked)return;let i=0;t&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){return(new Date).getTime()-e.lastTooltipHideTime<1e3}setToDoNothing(e){e||2!==this.state||this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e={...this.parentComp.getTooltipParams()};if(!yt(e.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip())return void this.setToDoNothing();this.state=2,this.tooltipInstanceCount++;const t=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(t)}hideTooltip(t){!t&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),e.lastTooltipHideTime=(new Date).getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),t&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(2!==this.state||this.tooltipInstanceCount!==e)return void this.destroyBean(t);const i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),0===this.tooltipTrigger&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");const s=this.localeService.getLocaleTextFunc(),r=this.popupService.addPopup({eChild:i,ariaLabel:s("ariaLabelTooltip","Tooltip")});if(r&&(this.tooltipPopupDestroyFunc=r.hideFunc),this.positionTooltip(),1===this.tooltipTrigger){const e=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:e,columnMoved:e})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),1===this.tooltipTrigger&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){const e=this.tooltipComp?.getGui(),t=zt(this.gos);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):this.popupService.positionPopupByComponent({...e,eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=0===this.tooltipTrigger?1e3:0;window.setTimeout((()=>{e(),this.destroyBean(t)}),i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach((e=>{e&&e()})),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){e.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout((()=>{this.unlockService(),this.setToDoNothing()}),100)}unlockService(){e.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};_r.isLocked=!1;var zr=_r,Ur=class extends Ai{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(null!=e&&""!=e?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(null!=this.tooltipManager)return;const e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new zr(e,this.ctrl.getTooltipShowDelayOverride?.(),this.ctrl.getTooltipHideDelayOverride?.(),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const e=this.ctrl,t=e.getColumn?.(),i=e.getColDef?.(),s=e.getRowNode?.();return{location:e.getLocation(),colDef:i,column:t,rowIndex:e.getRowIndex?.(),node:s,data:s?.data,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?.(),hideTooltipCallback:()=>this.tooltipManager?.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},jr=new Wr,qr=null,Kr=class e extends Ai{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=jr.next(),this.cssClassManager=new js((()=>this.eGui)),this.componentSelectors=new Map((t??[]).map((e=>[e.selector,e]))),e&&this.setTemplate(e)}preWireBeans(e){super.preWireBeans(e)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e){const{newTooltipText:t,showDelayOverride:i,hideDelayOverride:s,location:r,shouldDisplayTooltip:o}=e||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==t&&(this.tooltipText=t);null!=t&&(this.tooltipFeature=this.createBean(new Ur({getTooltipValue:()=>this.tooltipText,getGui:()=>this.getGui(),getLocation:()=>r??"UNKNOWN",getColDef:e?.getColDef,getColumn:e?.getColumn,getTooltipShowDelayOverride:null!=i?()=>i:void 0,getTooltipHideDelayOverride:null!=s?()=>s:void 0,shouldDisplayTooltip:o})))}getDataRefAttribute(e){return e.getAttribute?e.getAttribute("data-ref"):null}applyElementsToComponent(e,t,i,s=null){if(void 0===t&&(t=this.getDataRefAttribute(e)),t){const r=this[t];if(r===qr)this[t]=s??e;else{const e=i&&i[t];this.suppressDataRefValidation||e||ct(`Issue with data-ref: ${t} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(e,t){(function(e){if(null==e)return[];const t=[];return $r(e,(e=>t.push(e))),t})(e.childNodes).forEach((i=>{if(!(i instanceof HTMLElement))return;const s=this.createComponentFromElement(i,(e=>{e.getGui()&&this.copyAttributesFromNode(i,e.getGui())}),t);if(s){if(s.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);const e=Array.prototype.slice.call(i.children);s.addItems(e)}this.swapComponentForNode(s,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)}))}createComponentFromElement(t,i,s){const r=t.nodeName,o=this.getDataRefAttribute(t),n=0===r.indexOf("AG-"),a=n?this.componentSelectors.get(r):null;let l=null;if(a){e.elementGettingCreated=t;const r=s&&o?s[o]:void 0;l=new a.component(r),l.setParentComponent(this),this.createBean(l,null,i)}else n&&ct(`Missing selector: ${r}`);return this.applyElementsToComponent(t,o,s,l),l}copyAttributesFromNode(e,t){!function(e){if(e)for(let r=0;r<e.length;r++){const o=e[r];i=o.name,s=o.value,t.setAttribute(i,s)}var i,s}(e.attributes)}swapComponentForNode(e,t,i){const s=e.getGui();t.replaceChild(s,i),t.insertBefore(document.createComment(i.nodeName),s),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach((e=>e.setAttribute("tabindex",t.toString())))}setTemplate(e,t,i){const s=Lr(e);this.setTemplateFromElement(s,t,i)}setTemplateFromElement(e,t,i,s=!1){if(this.eGui=e,this.suppressDataRefValidation=s,t)for(let e=0;e<t.length;e++){const i=t[e];this.componentSelectors.set(i.selector,i)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return null==e?null:(i||(i=this.eGui),Vr(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,t){const{element:i,parent:s}=this.getContainerAndElement(e,t)||{};i&&s&&s.insertAdjacentElement("afterbegin",i)}appendChild(e,t){const{element:i,parent:s}=this.getContainerAndElement(e,t)||{};i&&s&&s.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;!function(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-invisible",!t),s||tr(e,!t)}(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;Cr(this.eGui,e,{skipAriaHidden:i});const s={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(s)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc((()=>this.eGui.removeEventListener(e,t)))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}},Yr={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},Qr=(()=>{const e=new Set(Object.values(Yr));return e.add("eye"),e})();function Jr(e,t,i,s){let r=null;const o=i&&i.getColDef().icons;if(o&&(r=o[e]),t&&!r){const i=t.get("icons");i&&(r=i[e])}if(!r){const t=document.createElement("span");let i=Yr[e]??(Qr.has(e)?e:void 0);return i||(s?i=e:(ct(`Did not find icon ${e}`),i="")),t.setAttribute("class",`ag-icon ag-icon-${i}`),t.setAttribute("unselectable","on"),Js(t,"presentation"),t}{let e;if("function"==typeof r)e=r();else{if("string"!=typeof r)throw new Error("icon from grid options needs to be a string or a function");e=r}if("string"==typeof e)return Lr(e);if(Vr(e))return e;ct("iconRenderer should return back a string or a dom object")}}var Xr=class extends Kr{constructor(){super(...arguments),this.dragSource=null,this.eIcon=qr,this.eLabel=qr}postConstruct(){const e=e=>function(e,t){const i=Jr(e,t,null);if(i){const{className:e}=i;if("string"==typeof e&&e.indexOf("ag-icon")>-1||"object"==typeof e&&e["ag-icon"])return i}const s=document.createElement("span");return s.appendChild(i),s}(e,this.gos);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate('<div class="ag-dnd-ghost ag-unselectable">\n                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>\n            </div>')}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t=!1){Tr(this.eIcon);let i=null;e||(e=this.dragSource?.getDefaultIconName?this.dragSource?.getDefaultIconName():"notAllowed"),i=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",t),i===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns")||i&&this.eIcon.appendChild(i)}setLabel(e){this.eLabel.textContent=fs(e)}};function Zr(e,t,i){if(0===i)return!1;const s=Math.abs(e.clientX-t.clientX),r=Math.abs(e.clientY-t.clientY);return Math.max(s,r)<=i}var eo=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new ot,this.eElement=e,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),s=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",s,{passive:!0}),this.eElement.addEventListener("touchend",r,{passive:!1}),this.destroyFuncs.push((()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",s,{passive:!0}),this.eElement.removeEventListener("touchend",r,{passive:!1})}))}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout((()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const t={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(t)}}),500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);t&&!Zr(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const e={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=(new Date).getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const e={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach((e=>e()))}};function to(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var io=`<span class="ag-sort-indicator-container">\n        ${to("Order","order")}\n        ${to("Asc","ascending-icon")}\n        ${to("Desc","descending-icon")}\n        ${to("Mixed","mixed-icon")}\n        ${to("None","none-icon")}\n    </span>`,so=class extends Kr{constructor(e){super(),this.eSortOrder=qr,this.eSortAsc=qr,this.eSortDesc=qr,this.eSortMixed=qr,this.eSortNone=qr,e||this.setTemplate(io)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,i,s,r){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=s,this.eSortNone=r}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),s=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:s,columnRowGroupChanged:s}),this.onSortChanged()}addInIcon(e,t,i){if(null==t)return;const s=Jr(e,this.gos,i);s&&t.appendChild(s)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t="asc"===e;Cr(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t="desc"===e;Cr(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),i=null==e;Cr(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;Kt(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e="mixed"===this.sortController.getDisplaySortForColumn(this.column);Cr(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;const e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,i=e.some((e=>this.sortController.getDisplaySortIndexForColumn(e)??!1)),s=t>=0&&i;Cr(this.eSortOrder,s,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():Tr(this.eSortOrder)}},ro={selector:"AG-SORT-INDICATOR",component:so},oo=class extends Kr{constructor(){super(...arguments),this.eFilter=qr,this.eFilterButton=qr,this.eSortIndicator=qr,this.eMenu=qr,this.eLabel=qr,this.eText=qr,this.eSortOrder=qr,this.eSortAsc=qr,this.eSortDesc=qr,this.eSortMixed=qr,this.eSortNone=qr,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&this.workOutSort()==this.currentSort&&this.shouldSuppressMenuHide()==this.currentSuppressMenuHide&&t.enableFilterButton==e.enableFilterButton&&t.enableFilterIcon==e.enableFilterIcon&&(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??'<div class="ag-cell-label-container" role="presentation">\n        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>\n        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">\n            <span data-ref="eText" class="ag-header-cell-text"></span>\n            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>\n        </div>\n    </div>';return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[ro]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=fs(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,i){if(null==t)return;const s=Jr(e,this.gos,i);s&&t.appendChild(s)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const t=new eo(this.getGui(),!0),i=this.shouldSuppressMenuHide(),s=i&&yt(this.eMenu),r=s?new eo(this.eMenu,!0):t;if(this.params.enableMenu){const e=s?"tap":"longTap",t=e=>this.params.showColumnMenuAfterMouseClick(e.touchStart);this.addManagedListeners(r,{[e]:t})}if(this.params.enableSorting){const e=e=>{const t=e.touchStart.target;i&&(this.eMenu?.contains(t)||this.eFilterButton?.contains(t))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:e})}if(this.params.enableFilterButton){const e=new eo(this.eFilterButton,!0);this.addManagedListeners(e,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc((()=>e.destroy()))}this.addDestroyFunc((()=>t.destroy())),s&&this.addDestroyFunc((()=>r.destroy()))}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return Mr(this.eMenu),void(this.eMenu=void 0);const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){const t=this.params.column,i=this.menuService.isLegacyMenuEnabled();if(e&&!i){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new so(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=(new Date).getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:e=>{const t=this.params.column.isMoving(),i=(new Date).getTime()-this.lastMovingChanged<50;if(!t&&!i){const t="ctrl"===this.gos.get("multiSortKey")?e.ctrlKey||e.metaKey:e.shiftKey;this.params.progressSort(t)}}});const e=()=>{const e=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc","asc"===e),this.addOrRemoveCssClass("ag-header-cell-sorted-desc","desc"===e),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!e),this.params.column.getColDef().showRowGroup){const e=this.funcColsService.getSourceColumnsForGroupColumn(this.params.column),t=e?.every((e=>this.params.column.getSort()==e.getSort())),i=!t;this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",i)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){this.eFilterButton&&(this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0)}configureFilter(e,t,i){if(!e)return Mr(t),!1;const s=this.params.column;return this.addInIcon("filter",t,s),this.addManagedListeners(s,{filterChanged:i}),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();Cr(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},no=class extends Kr{constructor(){super('<div class="ag-header-group-cell-label" role="presentation">\n            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>'),this.agOpened=qr,this.agClosed=qr,this.agLabel=qr}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&ct("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);const e=e=>{if(Fi(e))return;const t=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),t,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);const t=e=>{Ei(e)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();const i=this.params.columnGroup.getProvidedColumnGroup(),s=this.updateIconVisibility.bind(this);this.addManagedListeners(i,{expandedChanged:s,expandableChanged:s})}addTouchAndClickListeners(e,t){const i=new eo(e,!0);this.addManagedListeners(i,{tap:t}),this.addDestroyFunc((()=>i.destroy())),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const e=this.params.columnGroup.isExpanded();Cr(this.agOpened,e),Cr(this.agClosed,!e)}else Cr(this.agOpened,!1),Cr(this.agClosed,!1)}addInIcon(e,t){const i=Jr(e,this.gos,null);i&&t.appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable())return Cr(this.agOpened,!1),void Cr(this.agClosed,!1)}setupLabel(){const{displayName:e,columnGroup:t}=this.params;if(yt(e)){const t=fs(e,!0);this.agLabel.textContent=t}this.addOrRemoveCssClass("ag-sticky-label",!t.getColGroupDef()?.suppressStickyLabel)}},ao=class extends Kr{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),s=e.formatValue(i),r=yt(s)?s:i,o=t>=0;this.eDelta.textContent=o?"↑"+r:"↓"+r,this.eDelta.classList.toggle("ag-value-change-delta-up",o),this.eDelta.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.hideDeltaValue()}),2e3)}))}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Tr(this.eDelta)}refresh(e,t=!1){const i=e.value;if(i===this.lastValue)return!1;if(yt(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:yt(e.value)?this.eValue.textContent=i:Tr(this.eValue),this.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;if("number"==typeof i&&"number"==typeof this.lastValue){const t=i-this.lastValue;this.showDelta(e,t)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},lo=class extends Kr{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")}),50),window.setTimeout((()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)}),3e3)}))}refresh(e,t=!1){let i=e.value;return wt(i)&&(i=""),i!==this.lastValue&&!this.filterManager?.isSuppressFlashingCellsBecauseFiltering()&&(t||this.addSlideAnimation(),this.lastValue=i,yt(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:yt(e.value)?this.eCurrent.textContent=i:Tr(this.eCurrent),!0)}},co=class{};co.BACKSPACE="Backspace",co.TAB="Tab",co.ENTER="Enter",co.ESCAPE="Escape",co.SPACE=" ",co.LEFT="ArrowLeft",co.UP="ArrowUp",co.RIGHT="ArrowRight",co.DOWN="ArrowDown",co.DELETE="Delete",co.F2="F2",co.PAGE_UP="PageUp",co.PAGE_DOWN="PageDown",co.PAGE_HOME="Home",co.PAGE_END="End",co.A="KeyA",co.C="KeyC",co.D="KeyD",co.V="KeyV",co.X="KeyX",co.Y="KeyY",co.Z="KeyZ";var uo=class extends Kr{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:s,disabled:r}=this.config;null!=r&&this.setDisabled(r),null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=i&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){Tr(this.eLabel),"string"==typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(Cr(this.eLabel,!1),Js(this.eLabel,"presentation")):(Cr(this.eLabel,!0),Js(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||Or(this.eLabel,e),this}setDisabled(e){e=!!e;const t=this.getGui();return yr(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},ho=class extends uo{constructor(e,t,i,s){super(e,t,i),this.className=s}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),null!=i&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();null==i||""==i||null!==e.getAttribute("aria-label")?Zs(e,""):Zs(e,t??"")}setAriaLabel(e){return Xs(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Nr(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}},po=class extends ho{constructor(e,t,i="text",s="input"){super(e,e?.template??`\n            <div role="presentation">\n                <div data-ref="eLabel" class="ag-input-field-label"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <${s} data-ref="eInput" class="ag-input-field-input"></${s}>\n                </div>\n            </div>`,[],t),this.inputType=i,this.displayFieldTag=s,this.eLabel=qr,this.eWrapper=qr,this.eInput=qr}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:t}=this.config;null!=e&&this.setInputName(e),null!=t&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return Or(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return Hr(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Xs(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return yr(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(!0===e)Hr(this.eInput,"autocomplete",null);else{const t="string"==typeof e?e:"off";Hr(this.eInput,"autocomplete",t)}return this}},go=class extends po{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;"boolean"==typeof e&&this.setReadOnly(e),"boolean"==typeof t&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected="boolean"==typeof e?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const s=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:s.id,name:s.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",!0===e),this.eWrapper.classList.toggle("ag-indeterminate",null==e)}},mo={selector:"AG-CHECKBOX",component:go},fo=class extends Kr{constructor(){super('\n            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[mo]),this.eCheckbox=qr}init(e){this.refresh(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),er(t,"polite"),this.addManagedListeners(t,{click:e=>{if(Ei(e),this.eCheckbox.isDisabled())return;const t=this.eCheckbox.getValue();this.onCheckboxChanged(t)},dblclick:e=>{Ei(e)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:e=>{if(e.key===co.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===zt(this.gos)&&this.eCheckbox.toggle();const t=this.eCheckbox.getValue();this.onCheckboxChanged(t),e.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,i=!0;if(e.node.group&&e.column)if("boolean"==typeof e.value)t=e.value;else{const s=e.column.getColId();s.startsWith(Li)?t=null==e.value||""===e.value?void 0:"true"===e.value:e.node.aggData&&void 0!==e.node.aggData[s]?t=e.value??void 0:i=!1}else t=e.value??void 0;if(!i)return void this.eCheckbox.setDisplayed(!1);this.eCheckbox.setValue(t);const s=null!=e.disabled?e.disabled:!e.column?.isCellEditable(e.node);this.eCheckbox.setDisabled(s);const r=this.localeService.getLocaleTextFunc(),o=or(r,t),n=s?o:`${r("ariaToggleCellValue","Press SPACE to toggle cell value")} (${o})`;this.eCheckbox.setInputAriaLabel(n)}onCheckboxChanged(e){const{column:t,node:i,value:s}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s});const r=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s,oldValue:s,newValue:e,valueChanged:r}),r||this.updateCheckbox(this.params)}},vo=class extends Kr{constructor(){super('<div class="ag-loading">\n            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" data-ref="eLoadingText"></span>\n        </div>'),this.eLoadingIcon=qr,this.eLoadingText=qr}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=Jr("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},Co=class extends Kr{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){const t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc((()=>Zs(e.eParentOfValue))),Zs(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");Xs(this.getGui(),t)}setupLoading(e){const t=$t(this.gos).createElement("div");t.classList.add("ag-skeleton-effect");const i=e.node.rowIndex;if(null!=i){const e=75+25*(i%2==0?Math.sin(i):Math.cos(i));t.style.width=`${e}%`}this.getGui().appendChild(t);const s=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");Xs(this.getGui(),s)}refresh(e){return!1}destroy(){super.destroy()}},yo=class extends Kr{constructor(){super()}destroy(){super.destroy()}},wo=class extends yo{init(){const e=Ct(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const e=this.localeService.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("loadingOoo","Loading...")}))}}},So=class extends yo{init(){const e=Ct(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const e=this.localeService.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("noRowsToShow","No Rows To Show")}))}}},bo=class extends Kr{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},Ro=class extends bo{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=fs(t,!0)}};function Eo(e,t,i,s){let r=t.map(((t,i)=>({value:t,relevance:Fo(e.toLowerCase(),t.toLocaleLowerCase()),idx:i})));if(r.sort(((e,t)=>t.relevance-e.relevance)),i&&(r=r.filter((e=>0!==e.relevance))),r.length>0&&s&&s>0){const e=r[0].relevance*s;r=r.filter((t=>e-t.relevance<0))}const o=[],n=[];for(const e of r)o.push(e.value),n.push(e.idx);return{values:o,indices:n}}function Fo(e,t){const i=e.replace(/\s/g,""),s=t.replace(/\s/g,"");let r=0,o=-1;for(let e=0;e<i.length;e++){const t=s.indexOf(i[e],o+1);-1!==t&&(o=t,r+=100-100*o/1e4*100)}return r}var Po=class extends Ai{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:Xr,agColumnHeader:oo,agColumnGroupHeader:no,agSortIndicator:so,agAnimateShowChangeCellRenderer:ao,agAnimateSlideCellRenderer:lo,agLoadingCellRenderer:vo,agSkeletonCellRenderer:Co,agCheckboxCellRenderer:fo,agLoadingOverlay:wo,agNoRowsOverlay:So,agTooltipComponent:Ro},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){const e=this.gos.get("components");null!=e&&_i(e,((e,t)=>this.registerJsComponent(e,t)))}registerDefaultComponent(e,t,i){this.agGridDefaults[e]=t,i&&(this.agGridDefaultParams[e]=i)}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const i=(e,t,i)=>({componentFromFramework:t,component:e,params:i}),s=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(null!=s)return i(s,!0);const r=this.jsComps[t];if(r)return i(r,this.getFrameworkOverrides().isFrameworkComponent(r));const o=this.agGridDefaults[t];if(o)return i(o,!1,this.agGridDefaultParams[t]);const n=this.enterpriseAgDefaultCompsModule[t];return n?this.gos.assertModuleRegistered(n,`AG Grid '${e}' component: ${t}`):lt((()=>{this.warnAboutMissingComponent(e,t)}),"MissingComp"+t),null}warnAboutMissingComponent(e,t){const i=[...Object.keys(this.agGridDefaults).filter((e=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(e))),...Object.keys(this.jsComps)],s=Eo(t,i,!0,.8).values;ct(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),s.length>0&&ct(`         Did you mean: [${s.slice(0,3)}]?`),ct(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},xo=class e{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e((e=>this.onDone(e)),(e=>this.onReject(e)))}static all(t){return t.length?new e((e=>{let i=t.length;const s=new Array(i);t.forEach(((t,r)=>{t.then((t=>{s[r]=t,i--,0===i&&e(s)}))}))})):e.resolve()}static resolve(t=null){return new e((e=>e(t)))}then(t){return new e((e=>{1===this.status?e(t(this.resolution)):this.waiters.push((i=>e(t(i))))}))}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach((t=>t(e)))}onReject(e){}},Do={propertyName:"dateComponent",cellRenderer:!1},Ao={propertyName:"dragAndDropImageComponent",cellRenderer:!1},To={propertyName:"headerComponent",cellRenderer:!1},Mo={propertyName:"headerGroupComponent",cellRenderer:!1},Io={propertyName:"cellRenderer",cellRenderer:!0},ko={propertyName:"cellRenderer",cellRenderer:!1},Lo={propertyName:"loadingCellRenderer",cellRenderer:!0},Oo={propertyName:"cellEditor",cellRenderer:!1},No={propertyName:"innerRenderer",cellRenderer:!0},Go={propertyName:"loadingOverlayComponent",cellRenderer:!1},Bo={propertyName:"noRowsOverlayComponent",cellRenderer:!1},Vo={propertyName:"tooltipComponent",cellRenderer:!1},Ho={propertyName:"filter",cellRenderer:!1},$o={propertyName:"floatingFilterComponent",cellRenderer:!1},Wo={propertyName:"toolPanel",cellRenderer:!1},_o={propertyName:"statusPanel",cellRenderer:!1},zo={propertyName:"fullWidthCellRenderer",cellRenderer:!0},Uo={propertyName:"loadingCellRenderer",cellRenderer:!0},jo={propertyName:"groupRowRenderer",cellRenderer:!0},qo={propertyName:"detailCellRenderer",cellRenderer:!0},Ko={propertyName:"menuItem",cellRenderer:!1},Yo=class e extends Ai{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(e){this.agComponentUtils=e.agComponentUtils,this.componentMetadataProvider=e.componentMetadataProvider,this.userComponentRegistry=e.userComponentRegistry,this.frameworkComponentWrapper=e.frameworkComponentWrapper,this.gridOptions=e.gridOptions}getDragAndDropImageCompDetails(e){return this.getCompDetails(this.gridOptions,Ao,"agDragAndDropImage",e,!0)}getHeaderCompDetails(e,t){return this.getCompDetails(e,To,"agColumnHeader",t)}getHeaderGroupCompDetails(e){const t=e.columnGroup.getColGroupDef();return this.getCompDetails(t,Mo,"agColumnGroupHeader",e)}getFullWidthCellRendererDetails(e){return this.getCompDetails(this.gridOptions,zo,null,e,!0)}getFullWidthLoadingCellRendererDetails(e){return this.getCompDetails(this.gridOptions,Uo,"agLoadingCellRenderer",e,!0)}getFullWidthGroupCellRendererDetails(e){return this.getCompDetails(this.gridOptions,jo,"agGroupRowRenderer",e,!0)}getFullWidthDetailCellRendererDetails(e){return this.getCompDetails(this.gridOptions,qo,"agDetailCellRenderer",e,!0)}getInnerRendererDetails(e,t){return this.getCompDetails(e,No,null,t)}getFullWidthGroupRowInnerCellRenderer(e,t){return this.getCompDetails(e,No,null,t)}getCellRendererDetails(e,t){return this.getCompDetails(e,Io,null,t)}getEditorRendererDetails(e,t){return this.getCompDetails(e,ko,null,t)}getLoadingCellRendererDetails(e,t){return this.getCompDetails(e,Lo,"agSkeletonCellRenderer",t,!0)}getCellEditorDetails(e,t){return this.getCompDetails(e,Oo,"agCellEditor",t,!0)}getFilterDetails(e,t,i){return this.getCompDetails(e,Ho,i,t,!0)}getDateCompDetails(e){return this.getCompDetails(this.gridOptions,Do,"agDateInput",e,!0)}getLoadingOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,Go,"agLoadingOverlay",e,!0)}getNoRowsOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,Bo,"agNoRowsOverlay",e,!0)}getTooltipCompDetails(e){return this.getCompDetails(e.colDef,Vo,"agTooltipComponent",e,!0)}getSetFilterCellRendererDetails(e,t){return this.getCompDetails(e,Io,null,t)}getFloatingFilterCompDetails(e,t,i){return this.getCompDetails(e,$o,i,t)}getToolPanelCompDetails(e,t){return this.getCompDetails(e,Wo,null,t,!0)}getStatusPanelCompDetails(e,t){return this.getCompDetails(e,_o,null,t,!0)}getMenuItemCompDetails(e,t){return this.getCompDetails(e,Ko,"agMenuItem",t,!0)}getCompDetails(t,i,s,r,o=!1){const{propertyName:n,cellRenderer:a}=i;let l,{compName:d,jsComp:c,fwComp:u,paramsFromSelector:h,popupFromSelector:p,popupPositionFromSelector:g}=e.getCompKeys(this.frameworkOverrides,t,i,r);const m=e=>{const t=this.userComponentRegistry.retrieve(n,e);t&&(c=t.componentFromFramework?void 0:t.component,u=t.componentFromFramework?t.component:void 0,l=t.params)};if(null!=d&&m(d),null==c&&null==u&&null!=s&&m(s),c&&a&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(n,c)),!c&&!u)return void(o&&ut(`Could not find component ${d}, did you forget to configure this component?`));const f=this.mergeParamsWithApplicationProvidedParams(t,i,r,h,l),v=null==c,C=c||u;return{componentFromFramework:v,componentClass:C,params:f,type:i,popupFromSelector:p,popupPositionFromSelector:g,newAgStackInstance:()=>this.newAgStackInstance(C,v,f,i)}}static getCompKeys(e,t,i,s){const{propertyName:r}=i;let o,n,a,l,d,c;if(t){const i=t,u=i[r+"Selector"],h=u?u(s):null,p=t=>{"string"==typeof t?o=t:null!=t&&!0!==t&&(e.isFrameworkComponent(t)?a=t:n=t)};h?(p(h.component),l=h.params,d=h.popup,c=h.popupPosition):p(i[r])}return{compName:o,jsComp:n,fwComp:a,paramsFromSelector:l,popupFromSelector:d,popupPositionFromSelector:c}}newAgStackInstance(e,t,i,s){const r=s.propertyName;let o;if(t){const t=this.componentMetadataProvider.retrieve(r);o=this.frameworkComponentWrapper.wrap(e,t.mandatoryMethodList,t.optionalMethodList,s)}else o=new e;const n=this.initComponent(o,i);return null==n?xo.resolve(o):n.then((()=>o))}mergeParamsWithApplicationProvidedParams(e,t,i,s=null,r){const o=this.gos.getGridCommonParams();qi(o,i),r&&qi(o,r);const n=e&&e[t.propertyName+"Params"];return"function"==typeof n?qi(o,n(i)):"object"==typeof n&&qi(o,n),qi(o,s),o}initComponent(e,t){if(this.createBean(e),null!=e.init)return e.init(t)}};function Qo(e){const t=e;return null!=t&&null!=t.getFrameworkComponentInstance?t.getFrameworkComponentInstance():e}var Jo=class e{static register(t){e.__register(t,!0,void 0)}static registerModules(t){e.__registerModules(t,!0,void 0)}static __register(t,i,s){e.runVersionChecks(t),void 0!==s?(e.areGridScopedModules=!0,void 0===e.gridModulesMap[s]&&(e.gridModulesMap[s]={}),e.gridModulesMap[s][t.moduleName]=t):e.globalModulesMap[t.moduleName]=t,e.setModuleBased(i)}static __unRegisterGridModules(t){delete e.gridModulesMap[t]}static __registerModules(t,i,s){e.setModuleBased(i),t&&t.forEach((t=>e.__register(t,i,s)))}static isValidModuleVersion(t){const[i,s]=t.version.split(".")||[],[r,o]=e.currentModuleVersion.split(".")||[];return i===r&&s===o}static runVersionChecks(t){e.currentModuleVersion||(e.currentModuleVersion=t.version);const i=e=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${e} Please update all modules to the same version.`;if(t.version?e.isValidModuleVersion(t)||ut(i(`'${t.moduleName}' is version ${t.version} but the other modules are version ${e.currentModuleVersion}.`)):ut(i(`'${t.moduleName}' is incompatible.`)),t.validate){const e=t.validate();e.isValid||ut(`${e.message}`)}}static setModuleBased(t){void 0===e.moduleBased?e.moduleBased=t:e.moduleBased!==t&&(ut("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),ut("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){e.isBundled=!0}static __assertRegistered(t,i,s){if(this.__isRegistered(t,s))return!0;let r;if(e.isBundled)r=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:\n        \n        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>\n        \nFor more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(e.moduleBased||void 0===e.moduleBased){const o=Object.entries(nt).find((([e,i])=>i===t))?.[0];r=`AG Grid: unable to use ${i} as the ${o} is not registered${e.areGridScopedModules?` for gridId: ${s}`:""}. Check if you have registered the module:\n           \n    import { ModuleRegistry } from '@ag-grid-community/core';\n    import { ${o} } from '${t}';\n    \n    ModuleRegistry.registerModules([ ${o} ]);\n\nFor more info see: https://www.ag-grid.com/javascript-grid/modules/`}else r=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:\n            \n    import 'ag-grid-enterprise';`;return ut(r),!1}static __isRegistered(t,i){return!!e.globalModulesMap[t]||!!e.gridModulesMap[i]?.[t]}static __getRegisteredModules(t){return[...Dt(e.globalModulesMap),...Dt(e.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return Dt(e.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!e.moduleBased}};Jo.globalModulesMap={},Jo.gridModulesMap={},Jo.areGridScopedModules=!1;var Xo=Jo,Zo=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,e&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){Object.entries(e.providedBeanInstances).forEach((([e,t])=>{this.beans[e]=t})),e.beanClasses.forEach((e=>{const t=new e;t.beanName?this.beans[t.beanName]=t:console.error(`Bean ${e.name} is missing beanName`),this.createdBeans.push(t)})),e.derivedBeans?.forEach((e=>{const{beanName:t,bean:i}=e(this);this.beans[t]=i,this.createdBeans.push(i)})),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach((e=>{e.preWireBeans?.(this.beans),e.wireBeans?.(this.beans)})),e.forEach((e=>e.preConstruct?.())),t&&e.forEach(t),e.forEach((e=>e.postConstruct?.()))}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},en=class extends Zo{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),Xo.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}},tn=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(tn||{}),sn=class extends Ai{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e,t=!1){const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return e&&e.comp?e.comp:null}removeDragSource(e){const t=this.dragSourceAndParamsList.find((t=>t.dragSource===e));t&&(this.dragService.removeDragSource(t.params),fi(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach((e=>this.dragService.removeDragSource(e.params))),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){if(this.dragSource?.onDragStopped?.(),this.lastDropTarget?.onDragStop){const t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.clearDragAndDropProperties()}onDragCancel(){this.dragSource?.onDragCancelled?.(),this.lastDropTarget?.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){const i=this.getHorizontalDirection(e),s=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const r=this.dropTargets.filter((t=>this.isMouseOnDropTarget(e,t))),o=this.findCurrentDropTarget(e,r);if(o!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,i,s,t),null!==this.lastDropTarget&&null===o&&this.dragSource?.onGridExit?.(this.dragItem),null===this.lastDropTarget&&null!==o&&this.dragSource?.onGridEnter?.(this.dragItem),this.enterDragTargetIfExists(o,e,i,s,t),o&&this.dragAndDropImageComp){const{comp:e,promise:t}=this.dragAndDropImageComp;e?e.setIcon(o.getIconName?o.getIconName():null):t.then((e=>{e&&e.setIcon(o.getIconName?o.getIconName():null)}))}this.lastDropTarget=o}else if(o&&o.onDragging){const r=this.createDropTargetEvent(o,e,i,s,t);o.onDragging(r)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(const i of t){const{width:t,height:s,left:r,right:o,top:n,bottom:a}=i.getBoundingClientRect();if(0===t||0===s)return!1;const l=e.clientX>=r&&e.clientX<o,d=e.clientY>=n&&e.clientY<a;if(!l||!d)return!1}return!0}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let s=!1;for(const t of i)if(this.allContainersIntersect(e,t)){s=!0;break}const{eElement:r,type:o}=this.dragSource;return!(t.targetContainsSource&&!t.getContainer().contains(r))&&s&&t.isInterestedIn(o,r)}findCurrentDropTarget(e,t){const i=t.length;if(0===i)return null;if(1===i)return t[0];const s=_t(this.gos).elementsFromPoint(e.clientX,e.clientY);for(const e of s)for(const i of t){const t=(r=this.getAllContainersFromDropTarget(i),r?.flatMap((e=>e))??[]);if(-1!==t.indexOf(e))return i}var r;return null}enterDragTargetIfExists(e,t,i,s,r){if(e&&e.onDragEnter){const o=this.createDropTargetEvent(e,t,i,s,r);e.onDragEnter(o)}}leaveLastTargetIfExists(e,t,i,s){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){const r=this.createDropTargetEvent(this.lastDropTarget,e,t,i,s);this.lastDropTarget.onDragLeave(r)}const r=this.getDragAndDropImageComponent();r&&r.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter((t=>t.getContainer()!==e.getContainer()))}hasExternalDropZones(){return this.dropTargets.some((e=>e.external))}findExternalZone(e){return this.dropTargets.filter((e=>e.external)).find((t=>t.getContainer()===e.getContainer()))||null}isDropZoneWithinThisGrid(e){const t=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:i}=e;return t.contains(i)}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?0:1}createDropTargetEvent(e,t,i,s,r){const o=e.getContainer(),n=o.getBoundingClientRect(),{dragItem:a,dragSource:l}=this,d=t.clientX-n.left,c=t.clientY-n.top;return this.gos.addGridCommonParams({event:t,x:d,y:c,vDirection:s,hDirection:i,dragSource:l,fromNudge:r,dragItem:a,dropZoneTarget:o})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();if(!t)return;const i=t.getGui(),s=i.getBoundingClientRect().height,r=(document.body?.clientWidth??(window.innerHeight||document.documentElement?.clientWidth||-1))-2,o=(document.body?.clientHeight??(window.innerHeight||document.documentElement?.clientHeight||-1))-2;if(!i.offsetParent)return;const n=Pr(i.offsetParent),{clientY:a,clientX:l}=e;let d=a-n.top-s/2,c=l-n.left-10;const u=$t(this.gos),h=u.defaultView||window,p=h.pageYOffset||u.documentElement.scrollTop,g=h.pageXOffset||u.documentElement.scrollLeft;r>0&&c+i.clientWidth>r+g&&(c=r+g-i.clientWidth),c<0&&(c=0),o>0&&d+i.clientHeight>o+p&&(d=o+p-i.clientHeight),d<0&&(d=0),i.style.left=`${c}px`,i.style.top=`${d}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){const{comp:e}=this.dragAndDropImageComp;if(e){const t=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(t),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e}=this;if(!e)return;const t=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:t},t.then((e=>{e&&this.isAlive()&&(this.processDragAndDropImageComponent(e),this.dragAndDropImageComp.comp=e)}))}processDragAndDropImageComponent(e){const{dragSource:t,mouseEventService:i,environment:s}=this;if(!t)return;const r=e.getGui();r.style.setProperty("position","absolute"),r.style.setProperty("z-index","9999"),i.stampTopLevelGridCompWithGridInstance(r),s.applyThemeClasses(r),e.setIcon(null);let{dragItemName:o}=t;ht(o)&&(o=o()),e.setLabel(o||""),r.style.top="20px",r.style.left="20px";const n=$t(this.gos);let a=null,l=null;try{a=n.fullscreenElement}catch(e){}finally{a||(a=_t(this.gos));l=a.querySelector("body")||(a instanceof ShadowRoot?a:a instanceof Document?a?.documentElement:a)}this.dragAndDropImageParent=l,l?l.appendChild(r):ct("Could not find document body, it is needed for drag and drop.")}},rn=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=-1!==e.scrollAxis.indexOf("x"),this.scrollVertically=-1!==e.scrollAxis.indexOf("y"),this.scrollByTick=null!=e.scrollByTick?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const s=this.scrollContainer.getBoundingClientRect(),r=this.scrollByTick;this.tickLeft=e.clientX<s.left+r,this.tickRight=e.clientX>s.right-r,this.tickUp=e.clientY<s.top+r&&!i,this.tickDown=e.clientY>s.bottom-r&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},on=class extends Ai{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){Tt(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,(e=>{const t=e.gridBodyCtrl;this.autoScrollService=new rn({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:e=>t.getScrollFeature().setVerticalScrollPosition(e),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})}))}getContainer(){return this.eContainer}isInterestedIn(e){return 2===e}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){if(this.funcColsService.getRowGroupColumns().length)return!0;const e=this.filterManager?.isAnyFilterPresent();return!!e||!!this.sortController.isSortActive()}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const e=[...this.selectionService.getSelectedNodes()].sort(((e,t)=>null==e.rowIndex||null==t.rowIndex?0:this.getRowIndexNumber(e)-this.getRowIndexNumber(t)));if(-1!==e.indexOf(t))return e}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach((e=>{e.setDragging(!0)})),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const i=this.isFromThisGrid(e),s=this.gos.get("rowDragManaged"),r=e.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(r[0],t):this.moveRows(r,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(pi(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&1===t.highlighted,s=this.mouseEventService.getNormalisedPosition(e).y,r=e.dragItem.rowNodes;let o=i?1:0;if(this.isFromThisGrid(e))r.forEach((e=>{e.rowTop<s&&(o-=1)})),this.moveRows(r,s,o);else{const e=ei(this.gos);let t=this.clientSideRowModel.getRowIndexAtPixel(s)+1;0===this.clientSideRowModel.getHighlightPosition(s)&&t--,this.clientSideRowModel.updateRowData({add:r.filter((t=>!this.clientSideRowModel.getRowNode(e?.({data:t.data,level:0,rowPinned:t.rowPinned})??t.data.id))).map((e=>e.data)),addIndex:t})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),this.rangeService?.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer())return void ct("addRowDropZone - A container target needs to be provided");if(this.dragAndDropService.findExternalZone(e))return void ct("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=t=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}),e.onDragLeave&&(t.onDragLeave=t=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}),e.onDragging&&(t.onDragging=t=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}),e.onDragStop&&(t.onDragStop=t=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}),e.onDragCancel&&(t.onDragCancel=t=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}));const i={isInterestedIn:e=>2===e,getIconName:()=>"move",external:!0,...t};this.dragAndDropService.addDropTarget(i),this.addDestroyFunc((()=>this.dragAndDropService.removeDropTarget(i)))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),r=this.onDragging.bind(this),o=this.onDragStop.bind(this),n=this.onDragCancel.bind(this);let a;return a=e?{getContainer:t,onDragEnter:e.onDragEnter?t=>{i(t),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}:i,onDragLeave:e.onDragLeave?t=>{s(t),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}:s,onDragging:e.onDragging?t=>{r(t),e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}:r,onDragStop:e.onDragStop?t=>{o(t),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}:o,onDragCancel:e.onDragCancel?t=>{n(t),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}:n,fromGrid:!0}:{getContainer:t,onDragEnter:i,onDragLeave:s,onDragging:r,onDragStop:o,onDragCancel:n,fromGrid:!0},a}draggingToRowDragEvent(e,t){const i=this.mouseEventService.getNormalisedPosition(t).y;let s,r,o=-1;switch(i>this.pageBoundsService.getCurrentPageHeight()||(o=this.rowModel.getRowIndexAtPixel(i),s=this.rowModel.getRow(o)),t.vDirection){case 1:r="down";break;case 0:r="up";break;default:r=null}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:o,overNode:s,y:i,vDirection:r})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach((e=>{e.setDragging(!1)}))}},nn=class extends Ai{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find((t=>t.dragSource===e));t&&(this.removeListener(t),fi(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:s,stopPropagationForTouch:r}=e;i.addEventListener("mousedown",t);let o=null;const n=this.gos.get("suppressTouch");s&&!n&&(o=t=>{vr(t.target)||(r&&t.stopPropagation(),this.onTouchStart(e,t))},i.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:o,touchEnabled:!!s})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const s=t=>this.onTouchUp(t,e.eElement),r=t.target,o=[{target:_t(this.gos),type:"touchmove",listener:e=>{e.cancelable&&e.preventDefault()},options:{passive:!1}},{target:r,type:"touchmove",listener:t=>this.onTouchMove(t,e.eElement),options:{passive:!0}},{target:r,type:"touchend",listener:s,options:{passive:!0}},{target:r,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(o),0===e.dragStartPixels&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t))return;if(i._alreadyProcessedByDragService)return;if(i._alreadyProcessedByDragService=!0,0!==t.button)return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const s=_t(this.gos),r=[{target:s,type:"mousemove",listener:t=>this.onMouseMove(t,e.eElement)},{target:s,type:"mouseup",listener:t=>this.onMouseUp(t,e.eElement)},{target:s,type:"contextmenu",listener:e=>e.preventDefault()},{target:s,type:"keydown",listener:t=>{t.key===co.ESCAPE&&this.cancelDrag(e.eElement)}}];this.addTemporaryEvents(r),0===e.dragStartPixels&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach((e=>{const{target:t,type:i,listener:s,options:r}=e;t.addEventListener(i,s,r)})),this.dragEndFunctions.push((()=>{e.forEach((e=>{const{target:t,type:i,listener:s,options:r}=e;t.removeEventListener(i,s,r)}))}))}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams;return Zr(e,t,yt(i)?i:4)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){if(nr()){const e=$t(this.gos);e.getSelection()?.removeAllRanges()}this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gos.get("enableCellTextSelection"),i="mousemove"===e.type;return t&&i&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,i=t?.tagName.toLocaleLowerCase();return!!i?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){this.eventService.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach((e=>e())),this.dragEndFunctions.length=0}},an=class extends Kr{constructor(e,t,i,s,r,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=s,this.dragStartPixels=r,this.suppressVisibilityChange=o,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return null!=this.customGui}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Jr("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new cn(this,this.beans,this.rowNode,this.column):new dn(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const e=this.beans.selectionService.getSelectedNodes();return-1!==e.indexOf(this.rowNode)?e:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&ct("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:e=>{e?.preventDefault()}})[0]);const i=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{const e=this.getDragItem(),t=e.rowNodes?.length||1,s=this.getRowDragText(this.column);return s?s(e,t):1===t?this.cellValueFn():`${t} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},ln=class extends Ai{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let e=!0,i=!1;this.column&&(e=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),i=ht(this.column.getColDef().rowDrag)),i?(this.parent.setDisplayed(!0,t),this.parent.setVisible(e,t)):(this.parent.setDisplayed(e,t),this.parent.setVisible(!0,t))}}},dn=class extends ln{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},cn=class extends ln{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),t=e&&e.shouldPreventRowMove(),i=this.gos.get("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones(),r=t&&!s||i;this.setDisplayedOrVisible(r)}},un=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),hn=class e{constructor(t){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=e.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const i=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const s=this.createDataChangedEvent(e,i,t);this.localEventService?.dispatchEvent(s)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return null==this.rowIndex?(ut("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):"top"===this.rowPinned?e.ID_PREFIX_TOP_PINNED+this.rowIndex:"bottom"===this.rowPinned?e.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new e(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(e,t){const i=yt(this.id)?this.createDaemonNode():null,s=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,i);const r=this.createDataChangedEvent(e,s,!1);this.localEventService?.dispatchEvent(r)}checkRowSelectable(){const e=ai(this.beans.gos);this.setRowSelectable(!e||e(this))}setRowSelectable(e,t){if(this.selectable!==e){if(this.selectable=e,this.dispatchRowEvent("selectableChanged"),t)return;if(ui(this.beans.gos)){const e=this.calculateSelectedFromChildren();return void this.setSelectedParams({newValue:e??!1,source:"selectableChanged"})}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){const i=ei(this.beans.gos);if(i)if(this.data){const t=this.parent?.getRoute()??[];this.id=i({data:this.data,parentKeys:t.length>0?t:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(e.ID_PREFIX_ROW_GROUP)&&ut(`Row IDs cannot start with ${e.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(null!==e))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setMaster(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.dispatchRowEvent("masterChanged"))}setGroup(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(e,t){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[t.getId()]=e,null!=e&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=ft(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,t=!0,i=0;const s=this.__autoHeights;if(null==s)return;if(this.beans.visibleColsService.getAllAutoHeightCols().forEach((r=>{let o=s[r.getId()];if(null==o){if(!this.beans.columnModel.isColSpanActive())return void(e=!0);{let t=[];switch(r.getPinned()){case"left":t=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":t=this.beans.visibleColsService.getRightColsForRow(this);break;case null:t=this.beans.columnViewportService.getColsWithinViewport(this)}if(t.includes(r))return void(e=!0);o=-1}}else t=!1;o>i&&(i=o)})),e)return;if((t||i<10)&&(i=Nt(this.beans.gos,this).height),i==this.rowHeight)return;this.setRowHeight(i);const r=this.beans.rowModel;r.onRowHeightChangedDebounced?.()}setExpanded(e,t,i){if(this.expanded===e)return;this.expanded=e,this.dispatchRowEvent("expandedChanged");const s={...this.createGlobalRowEvent("rowGroupOpened"),expanded:e,event:t||null};this.beans.rowNodeEventThrottle.dispatchExpanded(s,i),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return this.beans.gos.addGridCommonParams({type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(e,t,i){const s=(()=>"string"!=typeof e?e:this.beans.columnModel.getCol(e)??this.beans.columnModel.getColDefCol(e))(),r=this.beans.valueService.getValueForDisplay(s,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:s,colDef:s.getColDef(),data:this.data,node:this,oldValue:r,newValue:t,value:t,source:i}),!1;const o=this.beans.valueService.setValue(this,s,t,i);return this.dispatchCellChangedEvent(s,t,r),this.checkRowSelectable(),o}setGroupValue(e,t){const i=this.beans.columnModel.getCol(e);wt(this.groupData)&&(this.groupData={});const s=i.getColId(),r=this.groupData[s];r!==t&&(this.groupData[s]=t,this.dispatchCellChangedEvent(i,t,r))}setAggData(e){const t=this.aggData;if(this.aggData=e,this.localEventService){const i=e=>{const i=this.aggData?this.aggData[e]:void 0,s=t?t[e]:void 0;if(i===s)return;const r=this.beans.columnModel.getCol(e);r&&this.dispatchCellChangedEvent(r,i,s)};for(const e in t)i(e);for(const s in e)t&&s in t||i(s)}}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(Mt(this.beans.gos)){const t=this.beans.gos.get("treeData"),i=this.beans.gos.get("isServerSideGroup");e=!this.stub&&!this.footer&&(t?!!i&&i(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,i){const s={type:"cellChanged",node:this,column:e,newValue:t,oldValue:i};this.localEventService?.dispatchEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return!this.footer&&(this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master)}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach((t=>t.depthFirstSearch(e))),e(this)}calculateSelectedFromChildren(){let e=!1,t=!1;if(!this.childrenAfterGroup?.length)return this.selectable?this.selected:null;for(let i=0;i<this.childrenAfterGroup.length;i++){const s=this.childrenAfterGroup[i];let r=s.isSelected();if(!s.selectable){const e=s.calculateSelectedFromChildren();if(null===e)continue;r=e}switch(r){case!0:e=!0;break;case!1:t=!0;break;default:return}}return e&&t?void 0:!!e||!t&&(this.selectable?this.selected:null)}setSelectedInitialValue(e){this.selected=e}dispatchRowEvent(e){this.localEventService?.dispatchEvent({type:e,node:this})}selectThisNode(e,t,i="api"){const s=!this.selectable&&e,r=this.selected===e;if(s||r)return!1;this.selected=e,this.dispatchRowEvent("rowSelected");const o=this.sibling;return o&&o.footer&&o.localEventService&&o.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent({...this.createGlobalRowEvent("rowSelected"),event:t||null,source:i}),!0}setSelected(e,t=!1,i="api"){"boolean"!=typeof i?this.setSelectedParams({newValue:e,clearSelection:t,rangeSelect:!1,source:i}):ct("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.")}setSelectedParams(e){return this.rowPinned?(ct("cannot select pinned rows"),0):void 0===this.id?(ct("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected({...e,nodes:[this.footer?this.sibling:this]})}isRowPinned(){return!!this.rowPinned}addEventListener(e,t){this.localEventService||(this.localEventService=new ot),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new $i(this.beans.frameworkOverrides));const i=this.frameworkEventListenerService?.wrap(t)??t;this.localEventService.addEventListener(e,i)}removeEventListener(e,t){if(!this.localEventService)return;const i=this.frameworkEventListenerService?.unwrap(t)??t;this.localEventService.removeEventListener(e,i),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(ct("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this})}getRoute(){if(-1===this.level)return[];if(null==this.key)return;const e=[];let t=this;for(;t&&null!=t.key;)e.push(t.key),t=t.parent;return e.reverse()}createFooter(){if(this.sibling)return;const t=new e(this.beans);Object.keys(this).forEach((e=>{un.has(e)||(t[e]=this[e])})),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.dispatchRowEvent("firstChildChanged"))}setLastChild(e){this.lastChild!==e&&(this.lastChild=e,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(e){this.childIndex!==e&&(this.childIndex=e,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent("displayedChanged"))}setDragging(e){this.dragging!==e&&(this.dragging=e,this.dispatchRowEvent("draggingChanged"))}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}};hn.ID_PREFIX_ROW_GROUP="row-group-",hn.ID_PREFIX_TOP_PINNED="t-",hn.ID_PREFIX_BOTTOM_PINNED="b-",hn.OBJECT_ID_SEQUENCE=0;var pn=hn,gn=class extends Kr{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then((()=>{}))??xo.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then((t=>{t?.afterGuiAttached?.(e)}))}afterGuiDetached(){this.filterWrapper?.filterPromise?.then((e=>{e?.afterGuiDetached?.()}))}createFilter(e){const{column:t,source:i}=this;this.filterWrapper=this.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then((s=>{const r=s.getGui();yt(r)||ct(`getGui method from filter returned ${r}; it should be a DOM element.`),this.appendChild(r),e&&this.eventService.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()})}))}onFilterDestroyed(e){"api"!==e.source&&"paramsUpdated"!==e.source||e.column.getId()!==this.column.getId()||!this.columnModel.getColDefCol(this.column)||(Tr(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},mn="ag-resizer-wrapper",fn=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,vn=`<div class="${mn}">\n        ${fn("eTopLeft","topLeft")}\n        ${fn("eTop","top")}\n        ${fn("eTopRight","topRight")}\n        ${fn("eRight","right")}\n        ${fn("eBottomRight","bottomRight")}\n        ${fn("eBottom","bottom")}\n        ${fn("eBottomLeft","bottomLeft")}\n        ${fn("eLeft","left")}\n    </div>`,Cn=class extends Ai{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,s=e/2-this.getHeight()/2;this.offsetElement(i,s)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:s,minHeight:r,height:o,x:n,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,d=0;const c=kr(this.element);if(c){const e=this.findBoundaryElement(),t=window.getComputedStyle(e);if(null!=t.minWidth){const i=e.offsetWidth-this.element.offsetWidth;d=parseInt(t.minWidth,10)-i}if(null!=t.minHeight){const i=e.offsetHeight-this.element.offsetHeight;l=parseInt(t.minHeight,10)-i}}if(this.minHeight=r||l,this.minWidth=i||d,s&&this.setWidth(s),o&&this.setHeight(o),s&&o||this.refreshSize(),e)this.center();else if(n||a)this.offsetElement(n,a);else if(c&&t){let e=this.boundaryEl,t=!0;if(e||(e=this.findBoundaryElement(),t=!1),e){const i=parseFloat(e.style.top),s=parseFloat(e.style.left);t?this.offsetElement(isNaN(s)?0:s,isNaN(i)?0:i):this.setPosition(s,i)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"==typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach((t=>{const i=!!e[t],s=this.getResizerElement(t),r={dragStartPixels:0,eElement:s,onDragStart:e=>this.onResizeStart(e,t),onDragging:this.onResize.bind(this),onDragStop:e=>this.onResizeEnd(e,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragService.addDragSource(r),this.resizeListeners.push(r),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=i)}))}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;-1!==t&&(this.element.style.width=`${t}px`),-1!==e&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let s=!1;if("string"==typeof e&&-1!==e.indexOf("%"))Gr(i,e),e=Er(i),s=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const t=this.getAvailableHeight();t&&e>t&&(e=t)}this.getHeight()!==e&&(s?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?Gr(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height="number"==typeof e?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:s.top,n=e?0:r.top;let a=0;if(t){const e=this.element.parentElement;if(e){const{bottom:t}=e.getBoundingClientRect();a=t-s.bottom}}return i+n-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let s=!1;if("string"==typeof e&&-1!==e.indexOf("%"))Nr(t,e),e=Fr(t),s=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:t}=this.offsetParent,s=i?this.position.x:this.element.getBoundingClientRect().left;t&&e+s>t&&(e=t-s)}this.getWidth()!==e&&(s?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Nr(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width="number"==typeof e?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:i}=this.config,s=i?this.boundaryEl:this.element;s&&(this.popupService.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),(()=>{const e=this.getAvailableHeight();this.element.style.setProperty("max-height",`${e}px`)})):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:s,anywhereWithin:r,topBuffer:o}=e,n=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!i,!!r,n)?0:n,movementY:this.shouldSkipY(t,!!s,o,a)?0:a}}shouldSkipX(e,t,i,s){const r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),n=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:r.left;let l=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=n.right;return!!l||(l=t?s<0&&e.clientX>a+o.left||s>0&&e.clientX<a+o.left:i?s<0&&e.clientX>n.right||s>0&&e.clientX<a+o.left:s<0&&e.clientX>n.right||s>0&&e.clientX<n.right,l)}shouldSkipY(e,t,i=0,s){const r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),n=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:r.top;let l=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=n.bottom;return!!l||(l=t?s<0&&e.clientY>a+o.top+i||s>0&&e.clientY<a+o.top:s<0&&e.clientY>n.bottom||s>0&&e.clientY<n.bottom,l)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const t=(new DOMParser).parseFromString(vn,"text/html").body;e.appendChild(t.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${mn}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:s}=this.config;i||s||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter((e=>!e.classList.contains("ag-hidden"))):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let s=0;s<e.length;s++){const r=e[s],o=!!r.style.flex&&"0 0 auto"!==r.style.flex;if(r===this.element)continue;let n=this.minHeight||0,a=this.minWidth||0;if(o){const e=window.getComputedStyle(r);e.minHeight&&(n=parseInt(e.minHeight,10)),e.minWidth&&(a=parseInt(e.minWidth,10))}else n=r.offsetHeight,a=r.offsetWidth;t+=n,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let s=0;s<i.length;s++){const r=i[s];r!==t&&(e?r.style.height=`${r.offsetHeight}px`:r.style.width=`${r.offsetWidth}px`,r.style.flex="0 0 auto",r===this.element&&(t=i[s+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some((e=>e))}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:s,isRight:r,isBottom:o,isLeft:n}=this.currentResizer,a=r||n,l=o||s,{movementX:d,movementY:c}=this.calculateMouseMovement({e,isLeft:n,isTop:s}),u=this.position.x,h=this.position.y;let p=0,g=0;if(a&&d){const e=n?-1:1,t=this.getWidth(),i=t+d*e;let s=!1;n&&(p=t-i,(u+p<=0||i<=this.minWidth)&&(s=!0,p=0)),s||this.setWidth(i)}if(l&&c){const e=s?-1:1,t=this.getHeight(),i=t+c*e;let r=!1;s?(g=t-i,(h+g<=0||i<=this.minHeight)&&(r=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&t<i&&this.getMinSizeOfSiblings().height+i>this.element.parentElement.offsetHeight&&(r=!0),r||this.setHeight(i)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&p||g)&&this.offsetElement(u+p,h+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:r,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(t+r,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},yn=class e extends Ai{constructor(e,t={}){super(),this.eFocusableElement=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;const t=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e.shiftKey);t&&(t.focus(),e.preventDefault())},...t}}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.eFocusableElement.classList.add(e.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:e=>{e.defaultPrevented||Fi(e)||(this.callbacks.shouldStopEventPropagation(e)?Ei(e):e.key===co.TAB?this.callbacks.onTabKeyDown(e):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(e))}})}};yn.FOCUS_MANAGED_CLASS="ag-focus-managed";var wn=yn,Sn={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function bn(e,t){return Rn(e)?(null!=e.debounceMs&&ct("debounceMs is ignored when apply button is present"),0):null!=e.debounceMs?e.debounceMs:t}function Rn(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var En=class extends Kr{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=qr,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new wn(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Cn(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i=`\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">\n                    ${this.createBodyTemplate()}\n                </div>\n            </form>`;this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then((()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}setParams(e){this.providedFilterParams=e,this.applyActive=Rn(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=Rn(e),this.resetUiToActiveModel(this.getModel(),(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}resetButtonsPanel(e,t){const{buttons:i,readOnly:s}=t??{},{buttons:r,readOnly:o}=e;if(s===o&&Pt(i,r))return;const n=r&&r.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(Tr(this.eButtonsPanel),this.buttonListeners.forEach((e=>e())),this.buttonListeners=[]):n&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!n)return void(this.eButtonsPanel&&Mr(this.eButtonsPanel));const a=document.createDocumentFragment(),l=e=>{let t,i;switch(e){case"apply":t=this.translate("applyFilter"),i=e=>this.onBtApply(!1,!1,e);break;case"clear":t=this.translate("clearFilter"),i=()=>this.onBtClear();break;case"reset":t=this.translate("resetFilter"),i=()=>this.onBtReset();break;case"cancel":t=this.translate("cancelFilter"),i=e=>{this.onBtCancel(e)};break;default:return void ct("Unknown button type specified")}const s=Lr(`<button\n                    type="${"apply"===e?"submit":"button"}"\n                    data-ref="${e}FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >${t}\n                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(s,{click:i})),a.append(s)};r.forEach((e=>l(e))),this.eButtonsPanel.append(a),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=bn(this.providedFilterParams,this.getDefaultDebounceMs()),t=ft(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(null!=e?this.setModelIntoUi(e):this.resetUiToDefaults()).then((()=>{this.updateUiVisibility(),this.applyModel("api")}))}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),(()=>{this.handleCancelEnd(e)}))}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),t?.()};null!=e?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then((()=>this.onUiChanged()))}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){if(i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")){const i="columnFilter";this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:i})}const{closeOnApply:s}=this.providedFilterParams;s&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let s;"Enter"!==i&&"Space"!==i||(s={keyboardEvent:t}),this.hidePopup(s),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const e=this.isModelValid(this.getModelFromUi()),t=this.queryForHtmlElement('[data-ref="applyFilterButton"]');t&&yr(t,!e)}e&&!t||"immediately"===t?this.onBtApply(e):(this.applyActive||t)&&"debounce"!==t||this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||"toolPanel"===e)return;const t="floatingFilter"===e||"columnFilter"===e,{positionableFeature:i,gos:s}=this;t?(i.restoreLastSize(),i.setResizable(s.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,Sn[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},Fn=class extends go{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},Pn=class extends Kr{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),this.unFocusable||this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case co.ENTER:if(this.highlightedEl){const e=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(e)}else this.setValue(this.getValue());break;case co.DOWN:case co.UP:e.preventDefault(),this.navigate(t);break;case co.PAGE_DOWN:case co.PAGE_UP:case co.PAGE_HOME:case co.PAGE_END:e.preventDefault(),this.navigateToPage(t)}}navigate(e){const t=e===co.DOWN;let i;if(this.highlightedEl){let e=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);e=Math.min(Math.max(e,0),this.itemEls.length-1),i=this.itemEls[e]}else i=this.itemEls[t?0:this.itemEls.length-1];this.highlightItem(i)}navigateToPage(e){if(!this.highlightedEl||0===this.itemEls.length)return;const t=this.itemEls.indexOf(this.highlightedEl),i=this.options.length-1,s=this.itemEls[0].clientHeight,r=Math.floor(this.getGui().clientHeight/s);let o=-1;e===co.PAGE_HOME?o=0:e===co.PAGE_END?o=i:e===co.PAGE_DOWN?o=Math.min(t+r,i):e===co.PAGE_UP&&(o=Math.max(t-r,0)),-1!==o&&this.highlightItem(this.itemEls[o])}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){const{value:t,text:i}=e,s=i||t;return this.options.push({value:t,text:s}),this.renderOption(t,s),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach((e=>{Mr(e)})),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach(((t,i)=>{var s,r;Ks(t,"posinset",i+1),s=t,r=e.length,Ks(s,"setsize",r)}))}renderOption(e,t){const i=$t(this.gos),s=i.createElement("div");Js(s,"option"),s.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const r=i.createElement("span");s.appendChild(r),r.textContent=t,this.unFocusable||(s.tabIndex=-1),this.itemEls.push(s),this.addManagedListeners(s,{mouseover:()=>this.highlightItem(s),mousedown:t=>{t.preventDefault(),t.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new Ur({getTooltipValue:()=>t,getGui:()=>s,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>r.scrollWidth>r.clientWidth})),this.getGui().appendChild(s)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(t),this;const i=this.options.findIndex((t=>t.value===e));if(-1!==i){const e=this.options[i];this.value=e.value,this.displayValue=e.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex((e=>e.value===this.value));-1!==e&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!kr(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),rr(this.highlightedEl,!0);const t=this.getGui(),{scrollTop:i,clientHeight:s}=t,{offsetTop:r,offsetHeight:o}=e;(r+o>i+s||r<i)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){this.highlightedEl&&kr(this.highlightedEl)&&(this.highlightedEl.classList.remove(this.activeClass),rr(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},xn=class extends ho{constructor(e){if(super(e,e?.template||'\n            <div class="ag-picker-field" role="presentation">\n                <div data-ref="eLabel"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=qr,this.eWrapper=qr,this.eDisplayField=qr,this.eIcon=qr,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:s,minPickerWidth:r,maxPickerWidth:o}=e;null!=t&&(this.pickerGap=t),this.variableWidth=!!s,null!=i&&this.setPickerMaxHeight(i),null!=r&&this.setPickerMinWidth(r),null!=o&&this.setPickerMaxWidth(o)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:s}=this.config;if(i){const e=Jr(i,this.gos);e&&this.eIcon.appendChild(e)}null!=s&&this.setInputWidth(s)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),ir(e,!1),this.ariaRole&&Js(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case co.UP:case co.DOWN:case co.ENTER:case co.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case co.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:s,modalPicker:r=!0}=this.config,o={modal:r,eChild:e,closeOnEsc:!0,closedCallback:()=>{const e=Ut(this.gos);this.beforeHidePicker(),e&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,s),anchorToElement:this.eWrapper};e.style.position="absolute";const n=this.popupService.addPopup(o),{maxPickerHeight:a,minPickerWidth:l,maxPickerWidth:d,variableWidth:c}=this;c?(l&&(e.style.minWidth=l),e.style.width=Br(Fr(this.eWrapper)),d&&(e.style.maxWidth=d)):Or(e,d??Fr(this.eWrapper));const u=a??`${br(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",u),this.alignPickerToComponent(),n.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){this.isAlive()&&(ir(this.getAriaElement(),e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e))}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return Or(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return"number"==typeof e&&(e=`${e}px`),this.minPickerWidth=null==e?void 0:e,this}setPickerMaxWidth(e){return"number"==typeof e&&(e=`${e}px`),this.maxPickerWidth=null==e?void 0:e,this}setPickerMaxHeight(e){return"number"==typeof e&&(e=`${e}px`),this.maxPickerHeight=null==e?void 0:e,this}destroy(){this.hidePicker(),super.destroy()}},Dn=class extends xn{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox",...e})}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;null!=e&&this.addOptions(e),null!=t&&this.setValue(t,!0),i&&null==t&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new Pn("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;var i,s;e.setAttribute("id",t),qs(i=this.getAriaElement(),"controls",(s=e).id),Zs(s,i.id),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){const{key:t}=e;switch(t===co.TAB&&this.hidePicker(),t){case co.ENTER:case co.UP:case co.DOWN:case co.PAGE_UP:case co.PAGE_DOWN:case co.PAGE_HOME:case co.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case co.ESCAPE:super.onKeyDown(e);break;case co.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e)}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,i){if(this.value===e||!this.listComponent)return this;if(i||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let s=this.listComponent.getDisplayValue();return null==s&&this.config.placeholder&&(s=this.config.placeholder),this.eDisplayField.textContent=s,this.setTooltip({newTooltipText:s??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},An={selector:"AG-SELECT",component:Dn},Tn=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach((e=>{"string"!=typeof e&&([["displayKey"],["displayName"],["predicate","test"]].every((t=>!!t.some((t=>null!=e[t]))||(ct(`ignoring FilterOptionDef as it doesn't contain one of '${t}'`),!1)))?this.customFilterOptions[e.displayKey]=e:this.filterOptions=this.filterOptions.filter((t=>t===e))||[])}))}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const e=this.filterOptions[0];"string"==typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:ct("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else ct("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},Mn=class extends En{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:e}=t;return null!=e?e:1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:"inRange"===e?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach(((t,i)=>{0===i?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)}))}getModelFromUi(){const e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map((e=>e.getValue()))}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return 0===this.eJoinOperatorsOr.length?this.defaultJoinOperator:!0===this.eJoinOperatorsOr[0].getValue()?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,s=!t.operator;if(!i&&s||i&&!s)return!1;let r;if(i){const i=e,s=t;r=this.areSimpleModelsEqual(i,s)}else{const i=e,s=t;r=i.operator===s.operator&&gi(i.conditions,s.conditions,((e,t)=>this.areSimpleModelsEqual(e,t)))}return r}shouldRefresh(e){const t=this.getModel(),i=t?t.conditions??[t]:null,s=e.filterOptions?.map((e=>"string"==typeof e?e:e.displayKey))??this.getDefaultFilterOptions();return!(i&&!i.every((e=>void 0!==s.find((t=>t===e.type))))||"number"==typeof e.maxNumConditions&&i&&i.length>e.maxNumConditions)}refresh(e){return!!this.shouldRefresh(e)&&(!!super.refresh(e)&&(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0))}setModelIntoUi(e){if(e.operator){const t=e;let i=t.conditions;null==i&&(i=[],ct("Filter model is missing 'conditions'"));const s=this.validateAndUpdateConditions(i),r=this.getNumConditions();if(s<r)this.removeConditionsAndOperators(s);else if(s>r)for(let e=r;e<s;e++)this.createJoinOperatorPanel(),this.createOption();const o="OR"===t.operator;this.eJoinOperatorsAnd.forEach((e=>e.setValue(!o,!0))),this.eJoinOperatorsOr.forEach((e=>e.setValue(o,!0))),i.forEach(((e,t)=>{this.eTypes[t].setValue(e.type,!0),this.setConditionIntoUi(e,t)}))}else{const t=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(t.type,!0),this.setConditionIntoUi(t,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),xo.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),ct('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){const t=this.getModel();if(null==t)return!0;const{operator:i}=t,s=[];if(i){const e=t;s.push(...e.conditions??[])}else s.push(t);return s[i&&"OR"===i?"some":"every"]((t=>this.individualConditionPasses(e,t)))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new Tn,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(ct('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(ct('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(ct('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new Dn);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,(e=>this.resetInput(e))),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const s=this.eJoinOperatorPanels.length-1,r=this.joinOperatorId++;this.resetJoinOperatorAnd(t,s,r),this.resetJoinOperatorOr(i,s,r),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const s=this.createManagedBean(new Fn);return e.push(s),s.addCssClass("ag-filter-condition-operator"),s.addCssClass(`ag-filter-condition-operator-${i}`),t.appendChild(s.getGui()),s}getDefaultJoinOperator(e){return"AND"===e||"OR"===e?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map((e=>"string"==typeof e?this.createBoilerplateListOption(e):this.createCustomListOption(e)))}putOptionsIntoDropdown(e){this.filterListOptions.forEach((t=>{e.addOption(t)})),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const t=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<t){this.removeConditionsAndOperators(t+1);const i=e+1,s=t-i;s>0&&this.removeConditionsAndOperators(i,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach(((t,i)=>{const s=this.isConditionDisabled(i,e);t.setDisabled(s||this.filterListOptions.length<=1),1===i&&(yr(this.eJoinOperatorPanels[0],s),this.eJoinOperatorsAnd[0].setDisabled(s),this.eJoinOperatorsOr[0].setDisabled(s))})),this.eConditionBodies.forEach(((e,t)=>{Cr(e,this.isConditionBodyVisible(t))}));const i="OR"===(t??this.getJoinOperator());this.eJoinOperatorsAnd.forEach((e=>{e.setValue(!i,!0)})),this.eJoinOperatorsOr.forEach((e=>{e.setValue(i,!0)})),this.forEachInput(((t,i,s,r)=>{this.setElementDisplayed(t,i<r),this.setElementDisabled(t,this.isConditionDisabled(s,e))})),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,t),this.removeComponents(this.eJoinOperatorsAnd,i,t),this.removeComponents(this.eJoinOperatorsOr,i,t)}removeElements(e,t,i){this.removeItems(e,t,i).forEach((e=>Mr(e)))}removeComponents(e,t,i){this.removeItems(e,t,i).forEach((e=>{Mr(e.getGui()),this.destroyBean(e)}))}removeItems(e,t,i){return null==i?e.splice(t):e.splice(t,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{const e=this.getInputs(0)[0];if(!e)return;e instanceof po&&e.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,s=!1;const r=this.getJoinOperator();for(let e=this.getNumConditions()-1;e>=0;e--)if(this.isConditionUiComplete(e))-1===t&&(t=e,i=e);else{const r=e<t;(e>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(e-1)||r)&&(this.removeConditionsAndOperators(e,1),s=!0,r&&i--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(i,r),s&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if(ht(this.filterPlaceholder)){const e=this.filterPlaceholder,s=this.eTypes[t].getValue();i=e({filterOptionKey:s,filterOption:this.translate(s),placeholder:i})}else"string"==typeof this.filterPlaceholder&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput(((t,i,s,r)=>{if(!(t instanceof po))return;const o=0===i&&r>1?"inRangeStart":0===i?"filterOoo":"inRangeEnd",n=0===i&&r>1?e("ariaFilterFromValue","Filter from value"):0===i?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,s)),t.setInputAriaLabel(n)}))}setElementValue(e,t,i){e instanceof po&&e.setValue(null!=t?String(t):null,!0)}setElementDisplayed(e,t){e instanceof Kr&&Cr(e.getGui(),t)}setElementDisabled(e,t){e instanceof Kr&&yr(e.getGui(),t)}attachElementOnChange(e,t){e instanceof po&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach(((t,i)=>{this.forEachPositionTypeInput(i,t,e)}))}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const s=this.getNumberOfInputs(t),r=this.getInputs(e);for(let t=0;t<r.length;t++){const o=r[t];null!=o&&i(o,t,e,s)}}isConditionDisabled(e,t){return!!this.isReadOnly()||0!==e&&e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions())&&("empty"!==this.getConditionType(e)&&!this.getValues(e).some((e=>null==e)))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach((e=>this.resetType(e))),this.eJoinOperatorsAnd.forEach(((e,t)=>this.resetJoinOperatorAnd(e,t,this.joinOperatorId+t))),this.eJoinOperatorsOr.forEach(((e,t)=>this.resetJoinOperatorOr(e,t,this.joinOperatorId+t))),this.joinOperatorId++,this.forEachInput((e=>this.resetInput(e))),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),xo.resolve()}resetType(e){const t=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(t).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,t,i,s,r){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${r}`).setLabel(s),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach(((e,t)=>this.updateJoinOperatorDisabled(e,t))),this.eJoinOperatorsOr.forEach(((e,t)=>this.updateJoinOperatorDisabled(e,t)))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput(((e,s,r)=>{r===t&&this.setElementValue(e,null!=i[s]?i[s]:null)}))}setValueFromFloatingFilter(e){this.forEachInput(((t,i,s)=>{this.setElementValue(t,0===i&&0===s?e:null,!0)}))}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,(e=>{this.attachElementOnChange(e,this.listener)})))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),s=this.mapValuesFromModel(t),r=this.optionsFactory.getCustomOption(t.type),o=this.evaluateCustomFilter(r,s,i);return null!=o?o:null==i?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,i,t,e)}evaluateCustomFilter(e,t,i){if(null==e)return;const{predicate:s}=e;return null==s||t.some((e=>null==e))?void 0:s(t,i)}isBlank(e){return null==e||"string"==typeof e&&0===e.trim().length}hasInvalidInputs(){return!1}},In=class extends Mn{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const s=this.comparator(),r=null!=e[0]?s(e[0],t):0;switch(i.type){case"equals":return 0===r;case"notEqual":return 0!==r;case"greaterThan":return r>0;case"greaterThanOrEqual":return r>=0;case"lessThan":return r<0;case"lessThanOrEqual":return r<=0;case"inRange":{const i=s(e[1],t);return this.scalarFilterParams.inRangeInclusive?r>=0&&i<=0:r>0&&i<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return ct('Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}};function kn(e){return!(e.altKey||e.ctrlKey||e.metaKey)&&1===e.key?.length}function Ln(e,t,i,s,r){const o=s?s.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const n=e.addGridCommonParams({event:t,editing:r,column:s,node:i,data:i.data,colDef:s.getColDef()});return!(!o||!o(n))}var On=class extends po{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=yt(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`);this.addManagedListeners(this.eInput,{keydown:t=>{kn(t)&&t.key&&!e.test(t.key)&&t.preventDefault()},paste:t=>{const i=t.clipboardData?.getData("text");i&&i.split("").some((t=>!e.test(t)))&&t.preventDefault()}})}},Nn={selector:"AG-INPUT-TEXT-FIELD",component:On},Gn=class extends On{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{const e=parseFloat(this.eInput.value),t=isNaN(e)?"":this.normalizeValue(e.toString());this.value!==t&&this.setValue(t)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";const{precision:e,min:t,max:i,step:s}=this.config;"number"==typeof e&&this.setPrecision(e),"number"==typeof t&&this.setMin(t),"number"==typeof i&&this.setMax(i),"number"==typeof s&&this.setStep(s)}onWheel(e){zt(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(""===e)return"";null!=this.precision&&(e=this.adjustPrecision(e));const t=parseFloat(e);return null!=this.min&&t<this.min?e=this.min.toString():null!=this.max&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(null==this.precision)return e;if(t){const t=parseFloat(e).toFixed(this.precision);return parseFloat(t).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e||(this.min=e,Hr(this.eInput,"min",e)),this}setMax(e){return this.max===e||(this.max=e,Hr(this.eInput,"max",e)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e||(this.step=e,Hr(this.eInput,"step",e)),this}setValue(e,t){return this.setValueOrInputValue((e=>super.setValue(e,t)),(()=>this),e)}setStartValue(e){return this.setValueOrInputValue((e=>super.setValue(e,!0)),(e=>{this.eInput.value=e}),e)}setValueOrInputValue(e,t,i){if(yt(i)){let s=this.isScientificNotation(i);if(s&&this.eInput.validity.valid)return e(i);if(s||(s=(i=this.adjustPrecision(i))!=this.normalizeValue(i)),s)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return"string"==typeof e&&e.includes("e")}},Bn={selector:"AG-INPUT-NUMBER-FIELD",component:Gn},Vn=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],Hn=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=null!=e.operator,i=this.localeService.getLocaleTextFunc();if(t){const t=e,s=(t.conditions??[]).map((e=>this.getModelAsString(e))),r="AND"===t.operator?"andCondition":"orCondition";return s.join(` ${i(r,Sn[r])} `)}if("blank"===e.type||"notBlank"===e.type)return i(e.type,e.type);{const t=e,s=this.optionsFactory.getCustomOption(t.type),{displayKey:r,displayName:o,numberOfInputs:n}=s||{};return r&&o&&0===n?(i(r,o),o):this.conditionToString(t,s)}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},$n=class extends Hn{conditionToString(e,t){const{numberOfInputs:i}=t||{};return"inRange"==e.type||2===i?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:null!=e.filter?this.formatValue(e.filter):`${e.type}`}};function Wn(e){const{allowedCharPattern:t}=e??{};return t??null}var _n=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],zn=class extends Hn{conditionToString(e,t){const{numberOfInputs:i}=t||{};return"inRange"==e.type||2===i?`${e.filter}-${e.filterTo}`:null!=e.filter?`${e.filter}`:`${e.type}`}};function Un(e){const t=e&&e.trim();return""===t?e:t}function jn(e){if("number"==typeof e)return e;if("string"==typeof e){const t=parseInt(e);if(isNaN(t))return;return t}}function qn(e,t=Number.MAX_VALUE){return i=>{const s=jn(i);if(!(null==s||s<e||s>t))return s}}function Kn(e,t){return e.toString().padStart(t,"0")}function Yn(e,t=!0,i="-"){if(!e)return null;let s=[e.getFullYear(),e.getMonth()+1,e.getDate()].map((e=>Kn(e,2))).join(i);return t&&(s+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map((e=>Kn(e,2))).join(":")),s}var Qn=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function Jn(e,t="YYYY-MM-DD"){const i=Kn(e.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>s[e.getMonth()],MMM:()=>s[e.getMonth()].slice(0,3),MM:()=>Kn(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${Qn(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${Qn(e.getDate())}`,DD:()=>Kn(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>r[e.getDay()],ddd:()=>r[e.getDay()].slice(0,3),dd:()=>r[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${Qn(e.getDay())}`,d:()=>`${e.getDay()}`},n=new RegExp(Object.keys(o).join("|"),"g");return t.replace(n,(e=>e in o?o[e]():e))}function Xn(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const s=t.split("-").map((e=>parseInt(e,10)));if(3!==s.filter((e=>!isNaN(e))).length)return null;const[r,o,n]=s,a=new Date(r,o-1,n);if(a.getFullYear()!==r||a.getMonth()!==o-1||a.getDate()!==n)return null;if(!i||"00:00:00"===i)return a;const[l,d,c]=i.split(":").map((e=>parseInt(e,10)));return l>=0&&l<24&&a.setHours(l),d>=0&&d<60&&a.setMinutes(d),c>=0&&c<60&&a.setSeconds(c),a}var Zn=class{constructor(e,t,i,s,r){this.alive=!0,this.context=e,this.eParent=s,t.getDateCompDetails(i).newAgStackInstance().then((t=>{this.alive?(this.dateComp=t,t&&(s.appendChild(t.getGui()),t.afterGuiAttached&&t.afterGuiAttached(),this.tempValue&&t.setDate(this.tempValue),null!=this.disabled&&this.setDateCompDisabled(this.disabled),r?.(this))):e.destroyBean(t)}))}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Cr(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&"function"==typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(e)}updateParams(e){let t=!1;this.dateComp?.refresh&&"function"==typeof this.dateComp.refresh&&null!==this.dateComp.refresh(e)&&(t=!0),!t&&this.dateComp?.onParamsUpdated&&"function"==typeof this.dateComp.onParamsUpdated&&null!==this.dateComp.onParamsUpdated(e)&&ct("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(e)}},ea=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],ta=class extends Hn{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:s}=t||{},r="inRange"==i||2===s,o=Xn(e.dateFrom),n=Xn(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;return r?`${null!==o?Jn(o,a):"null"}-${null!==n?Jn(n,a):"null"}`:null!=o?Jn(o,a):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},ia=1/0,sa=class extends Ai{constructor(e,t,i,s){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=s,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?pi(this.colsSpanning):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),t=yt(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),s=this.modifyLeftForPrintLayout(e,i),r=this.modifyLeftForPrintLayout(e,t);this.setLeft(s),this.actualLeft=r,this.beans.columnAnimationService.executeNextVMTurn((()=>{this.actualLeft===r&&this.setLeft(r)}))}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!It(this.beans.gos,"print"))return t;if("left"===e.getPinned())return t;const i=this.beans.visibleColsService.getColsLeftWidth();return"right"===e.getPinned()?i+this.beans.visibleColsService.getBodyContainerWidth()+t:i+t}setLeft(e){if(yt(e)&&(this.eCell.style.left=`${e}px`),Ss(this.columnOrGroup)){const e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&Ks(this.ariaEl,"colspan",e.length)}}};function ra(e,t,i,s){return wt(e)?[]:function(e,t,i,s,r){if(wt(e))return[];let o;if("function"==typeof e){const n=function(e,t,i,s){return t.addGridCommonParams({colDef:e,column:i,columnGroup:s})}(t,i,s,r);o=e(n)}else o=e;return"string"==typeof o?[o]:Array.isArray(o)?[...o]:[]}(e.headerClass,e,t,i,s)}function oa(e,t,i){e.addOrRemoveCssClass("ag-column-first",i.isColAtEdge(t,"first")),e.addOrRemoveCssClass("ag-column-last",i.isColAtEdge(t,"last"))}var na=0,aa=class e extends Ai{constructor(e,t,i){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=e,this.parentRowCtrl=i,this.beans=t,this.instanceId=e.getUniqueId()+"-"+na++}wireBeans(e){this.pinnedWidthService=e.pinnedWidthService,this.focusService=e.focusService,this.userComponentFactory=e.userComponentFactory,this.ctrlsService=e.ctrlsService,this.dragAndDropService=e.dragAndDropService,this.menuService=e.menuService}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.focusService.getFocusedHeader();return function(e,t,i,s){const r=s.getDefinition(),o=r&&r.suppressHeaderKeyboardEvent;return!!yt(o)&&!!o(e.addGridCommonParams({colDef:r,column:s,headerRowIndex:i,event:t}))}(this.gos,e,t,i)}getWrapperHasFocus(){return zt(this.gos)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:i,compBean:s}=e,{animationFrameService:r,resizeObserverService:o,columnModel:n,gos:a}=this.beans,l=e=>{if(!this.isAlive()||!s.isAlive())return;const{paddingTop:i,paddingBottom:o,borderBottomWidth:d,borderTopWidth:c}=Sr(this.getGui()),u=i+o+d+c,h=t.offsetHeight+u;if(e<5){const i=$t(a);if(!i||!i.contains(t)||0==h)return void r.requestAnimationFrame((()=>l(e+1)))}n.setColHeaderHeight(this.column,h)};let d,c=!1;const u=()=>{const e=this.column.isAutoHeaderHeight();e&&!c&&h(),!e&&c&&p()},h=()=>{c=!0,l(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),d=o.observeResize(t,(()=>l(0)))},p=()=>{c=!1,d&&d(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),d=void 0};u(),s.addDestroyFunc((()=>p())),s.addManagedListeners(this.column,{widthChanged:()=>c&&l(0)}),s.addManagedEventListeners({sortChanged:()=>{c&&window.setTimeout((()=>l(0)))}}),i&&i(u)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:i,eGui:s}=this;e&&t&&s&&(oa(e,t,i.visibleColsService),sr(s,i.visibleColsService.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){this.resizeFeature&&e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=this.focusService.isHeaderFocusSuppressed();this.eGui&&Hr(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=zt(this.gos),i=e.key===co.LEFT||e.key===co.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey)return;if((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i)return;const s=e.key===co.LEFT!==this.gos.get("enableRtl"),r=tn[s?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const t=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(t,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(r)}getViewportAdjustedResizeDiff(e){let t=this.getResizeDiff(e);if(this.column.getPinned()){const e=this.pinnedWidthService.getPinnedLeftWidth(),i=this.pinnedWidthService.getPinnedRightWidth(),s=Rr(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(e+i+t>s){if(!(s>e+i))return 0;t=s-e-i}}return t}getResizeDiff(e){let t=e.key===co.LEFT!==this.gos.get("enableRtl");const i=this.column.getPinned(),s=this.gos.get("enableRtl");return i&&s!==("right"===i)&&(t=!t),(t?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout((()=>{this.resizeFeature?.toggleColumnResizing(!1)}),150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case co.PAGE_DOWN:case co.PAGE_UP:case co.PAGE_HOME:case co.PAGE_END:t&&e.preventDefault()}}addDomData(t){const i=e.DOM_DATA_KEY_HEADER_CTRL;Ht(this.gos,this.eGui,i,this),t.addDestroyFunc((()=>Ht(this.gos,this.eGui,i,null)))}getGui(){return this.eGui}focus(e){return!!this.eGui&&(this.lastFocusEvent=e||null,this.eGui.focus(),!0)}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const s=e??t;this.gos.get("preventDefaultOnContextMenu")&&s.preventDefault(),this.menuService.isHeaderContextMenuEnabled(i)&&this.menuService.showHeaderContextMenu(i,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){this.eventService.dispatchEvent({type:e,column:t})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};aa.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var la=aa,da=class extends Ai{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},ca="32.2.1",ua={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},ha=["january","february","march","april","may","june","july","august","september","october","november","december"],pa=class extends Kr{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e)return void(this.lastType=this.optionsFactory.getDefaultOption());let t;t=e.operator?e.conditions[0]:e,this.lastType=t.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const t=e;return this.isTypeEditable(t.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new Tn,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return null==i||1==i}isTypeEditable(e){return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&["inRange","empty","blank","notBlank"].indexOf(e)<0}getAriaLabel(e){return`${this.columnNameService.getDisplayNameForColumn(e.column,"header",!0)} ${this.localeService.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},ga=class extends Ai{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=qr,this.valueChangedListener=()=>{}}setupGui(e){this.eFloatingFilterTextInput=this.createManagedBean(new On(this.params?.config));const t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);const i=e=>this.valueChangedListener(e);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},ma=class extends pa{constructor(){super(...arguments),this.eFloatingFilterInputContainer=qr}postConstruct(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>\n        ')}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=Rn(this.params.filterParams),!this.isReadOnly()){const e=bn(this.params.filterParams,this.getDefaultDebounceMs()),t=ft(this.syncUpWithParentFilter.bind(this),e);this.floatingFilterInputService.setValueChangedListener(t)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();Tr(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){const t=e.key===co.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=Un(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance((e=>{e&&e.onFloatingFilterChanged(this.getLastType()||null,i||null)}))}setEditable(e){this.floatingFilterInputService.setEditable(e)}},fa=class extends Ai{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new Gn),this.eFloatingFilterTextInput=this.createManagedBean(new On),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,(e=>this.valueChangedListener(e))),this.setupListeners(i,(e=>this.valueChangedListener(e)))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},va={version:ca,moduleName:"@ag-grid-community/filter-core",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:e})=>this.onAdvancedFilterEnabledChanged(e),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],(()=>{this.onFilterChanged({source:"api"})})),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",(()=>{this.updateAggFiltering(),this.onFilterChanged()})),this.addManagedPropertyListener("advancedFilterModel",(e=>this.setAdvancedFilterModel(e.currentValue))),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return"function"==typeof e&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return"function"==typeof t&&t(e)}setFilterModel(e,t="api"){this.isAdvancedFilterEnabled()?this.warnAdvancedFilters():this.columnFilterService?.setFilterModel(e,t)}getFilterModel(){return this.columnFilterService?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.columnFilterService?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.columnFilterService?.isAggregateFilterPresent()}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){e?this.columnFilterService?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilterService?.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){return!!this.advancedFilterService?.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){this.quickFilterService?.resetQuickFilterCache()}refreshFiltersForAggregations(){Yt(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:i,columns:s=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):xo.resolve()).then((()=>{const e={source:t,type:"filterChanged",columns:s};i&&qi(e,i),this.eventService.dispatchEvent(e),this.columnFilterService?.updateAfterFilterChanged()}))}isSuppressFlashingCellsBecauseFiltering(){return!!this.columnFilterService?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilterService?.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!Yt(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){return!!this.columnFilterService?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.columnFilterService?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){return!this.isAdvancedFilterEnabled()&&!!this.columnFilterService?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.columnFilterService?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.columnFilterService?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){this.columnFilterService?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.columnFilterService?.areFilterCompsDifferent(e,t)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){this.isAdvancedFilterEnabled()&&(this.dataTypeService?.isPendingInference()?this.advancedFilterModelUpdateQueue.push(e):(this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})))}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return!this.isAdvancedFilterEnabled()&&!!this.columnFilterService?.hasFloatingFilters()}getFilterInstance(e,t){if(!this.isAdvancedFilterEnabled())return this.columnFilterService?.getFilterInstance(e,t);this.warnAdvancedFilters()}getColumnFilterInstance(e){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):this.columnFilterService?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvancedFilters(){ct("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){this.advancedFilterService?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach((e=>this.setAdvancedFilterModel(e))),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.columnFilterService?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):this.columnFilterService?.setColumnFilterModel(e,t)??Promise.resolve()}setColDefPropertiesForDataType(e,t,i){this.columnFilterService?.setColDefPropertiesForDataType(e,t,i)}}]},Ca={version:ca,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:function(e){return!!e.filterManager?.isAnyFilterPresent()},onFilterChanged:function(e,t="api"){e.filterManager?.onFilterChanged({source:t})}},dependantModules:[va]},ya={version:ca,moduleName:"@ag-grid-community/column-filter",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...this.gos.get("initialState")?.filter?.filterModel??{}}}setFilterModel(e,t="api"){if(this.dataTypeService?.isPendingInference())return void this.filterModelUpdateQueue.push({model:e,source:t});const i=[],s=this.getFilterModel(!0);if(e){const t=new Set(Object.keys(e));this.allColumnFilters.forEach(((s,r)=>{const o=e[r];i.push(this.setModelOnFilterWrapper(s.filterPromise,o)),t.delete(r)})),t.forEach((t=>{const s=this.columnModel.getColDefCol(t)||this.columnModel.getCol(t);if(!s)return void ct("setFilterModel() - no column found for colId: "+t);if(!s.isFilterAllowed())return void ct("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+t);const r=this.getOrCreateFilterWrapper(s);r?i.push(this.setModelOnFilterWrapper(r.filterPromise,e[t])):ct("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+t)}))}else this.allColumnFilters.forEach((e=>{i.push(this.setModelOnFilterWrapper(e.filterPromise,null))}));xo.all(i).then((()=>{const e=this.getFilterModel(!0),i=[];this.allColumnFilters.forEach(((t,r)=>{Pt(s?s[r]:null,e?e[r]:null)||i.push(t.column)})),i.length>0&&this.filterManager?.onFilterChanged({columns:i,source:t})}))}setModelOnFilterWrapper(e,t){return new xo((i=>{e.then((e=>{"function"!=typeof e.setModel&&(ct("filter missing setModel method, which is needed for setFilterModel"),i()),(e.setModel(t)||xo.resolve()).then((()=>i()))}))}))}getFilterModel(e){const t={},{allColumnFilters:i,initialFilterModel:s}=this;return i.forEach(((e,i)=>{const s=this.getModelFromFilterWrapper(e);yt(s)&&(t[i]=s)})),e||Object.entries(s).forEach((([e,s])=>{yt(s)&&!i.has(e)&&this.columnModel.getCol(e)?.isFilterAllowed()&&(t[e]=s)})),t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?"function"!=typeof t.getModel?(ct("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return!!this.allColumnFilters.size&&(this.allColumnFilters.forEach((e=>this.disposeFilterWrapper(e,"advancedFilterEnabled"))),!0)}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const e=!!Yt(this.gos),t=t=>{if(!t.isPrimary())return!0;const i=!this.columnModel.isPivotActive();return!(!t.isValueActive()||!i)&&(!!this.columnModel.isPivotMode()||e)},i=[],s=[];return this.forEachColumnFilter(((e,r)=>{const o=(e=>!!e&&(e.isFilterActive?e.isFilterActive():(ct("Filter is missing isFilterActive() method"),!1)))(e);o&&(t(r.column)?i.push(e):s.push(e))})).then((()=>{this.activeAggregateFilters=i,this.activeColumnFilters=s}))}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter(((i,s)=>s.column.setFilterActive(i.isFilterActive(),e,t)))}forEachColumnFilter(e){return xo.all(Array.from(this.allColumnFilters.values()).map((t=>t.filterPromise.then((i=>e(i,t))))))}doColumnFiltersPass(e,t,i){const{data:s,aggData:r}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,n=i?r:s;for(let i=0;i<o.length;i++){const s=o[i];if(null!=s&&s!==t){if("function"!=typeof s.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!s.doesFilterPass({node:e,data:n}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const t=()=>this.filterManager?.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){const{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then((()=>this.updateFilterFlagInColumns("filterChanged",i).then((()=>{this.allColumnFilters.forEach((e=>{e.filterPromise&&e.filterPromise.then((e=>{e&&e!==t&&e.onAnyFilterChanged&&e.onAnyFilterChanged()}))})),this.processingFilterChange=!0}))))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!this.gos.get("allowShowChangeAfterFilter")&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter((e=>{e.onNewRowsLoaded&&e.onNewRowsLoaded()})).then((()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0}))).then((()=>this.updateActiveFilters()))}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,i)=>{const s=i?this.columnModel.getCol(i):e;return s?this.valueService.getValue(s,t,!0):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():null!=this.getModelFromInitialState(e)}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(hi(this.gos))t="agSetColumnFilter";else{const i=this.dataTypeService?.getBaseDataType(e);t="number"===i?"agNumberColumnFilter":"date"===i||"dateString"===i?"agDateColumnFilter":"agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(hi(this.gos))t="agSetColumnFloatingFilter";else{const i=this.dataTypeService?.getBaseDataType(e);t="number"===i?"agNumberColumnFloatingFilter":"date"===i||"dateString"===i?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const i=this.getDefaultFilter(e),s=e.getColDef();let r;const o={...this.createFilterParams(e,s),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(r,e)(),filterChangedCallback:t=>this.filterChangedCallbackFactory(r,e)(t),doesRowPassOtherFilter:e=>!this.filterManager||this.filterManager.doesRowPassOtherFilters(r,e)},n=this.userComponentFactory.getFilterDetails(s,o,i);return n?{filterPromise:()=>{const e=n.newAgStackInstance();return null!=e&&e.then((e=>{r=e,t&&(t.filter=e)})),e},compDetails:n}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:zi(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:i,compDetails:s}=this.createFilterInstance(e,t);return t.filterPromise=i?.()??null,t.compDetails=s,t}onColumnsChanged(){const e=[];this.allColumnFilters.forEach(((t,i)=>{let s;s=t.column.isPrimary()?this.columnModel.getColDefCol(i):this.columnModel.getCol(i),s&&s===t.column||(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(i))}));const t=e.every((e=>"agGroupColumnFilter"===e.getColDef().filter));e.length>0&&!t?this.filterManager?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){const e=this.columnModel.getAutoCols();e?.forEach((e=>{"agGroupColumnFilter"===e.getColDef().filter&&this.getOrCreateFilterWrapper(e)}))}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:t}=this.allColumnFilters.get(e.getColId())??{};return!t||"function"!=typeof t?.isFilterAllowed||t.isFilterAllowed()}getFloatingFilterCompDetails(e,t){const i=t=>{const i=this.getOrCreateFilterWrapper(e)?.filterPromise;null!=i&&i.then((e=>{t(Qo(e))}))},s=e.getColDef(),r={...this.createFilterParams(e,s),filterChangedCallback:()=>i((t=>this.filterChangedCallbackFactory(t,e)()))},o=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(s,Ho,r);let n=function(e,t,i){if(null==t)return null;let s=null;const{compName:r,jsComp:o,fwComp:n}=Yo.getCompKeys(e,t,Ho);return r?s={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[r]:null==o&&null==n&&!0===t.filter&&(s=i()),s}(this.frameworkOverrides,s,(()=>this.getDefaultFloatingFilter(e)));null==n&&(n="agReadOnlyFloatingFilter");const a={column:e,filterParams:o,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(s,a,n)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){const i=e.getColId(),s=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],s&&(this.disposeFilterWrapper(s,t),this.filterManager?.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then((i=>{this.destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})}))}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{const s={filter:e,additionalEventAttributes:i,columns:[t],source:i?.source??"columnFilter"};this.callOnFilterChangedOutsideRenderCycle(s)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:s}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,s))return void this.destroyFilter(i,"paramsUpdated");const r=i.getColDef().filterParams;t.filterPromise?t.filterPromise.then((e=>{!1===(!e?.refresh||e.refresh({...this.createFilterParams(i,i.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(e,i),filterChangedCallback:this.filterChangedCallbackFactory(e,i),doesRowPassOtherFilter:t=>!this.filterManager||this.filterManager.doesRowPassOtherFilters(e,t),...r}))&&this.destroyFilter(i,"paramsUpdated")})):this.destroyFilter(i,"paramsUpdated")}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:s}=t;return!(i===s||i?.render&&s?.render&&i.render===s.render)}hasFloatingFilters(){return this.columnModel.getCols().some((e=>e.getColDef().floatingFilter))}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then((e=>{const i=Qo(e);t(i)}))}getColumnFilterInstance(e){return new Promise((t=>{this.getFilterInstanceImpl(e).then((e=>{t(Qo(e))}))}))}getFilterInstanceImpl(e){const t=this.columnModel.getColDefCol(e);if(!t)return xo.resolve(void 0);const i=this.getOrCreateFilterWrapper(t)?.filterPromise;return i??xo.resolve(null)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach((({model:e,source:t})=>this.setFilterModel(e,t))),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach((({key:e,model:t,resolve:i})=>{this.setColumnFilterModel(e,t).then((()=>i()))})),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.dataTypeService?.isPendingInference()){let i=()=>{};const s=new Promise((e=>{i=e}));return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:i}),s}const i=this.columnModel.getColDefCol(e),s=i?this.getOrCreateFilterWrapper(i):null;return s?(r=this.setModelOnFilterWrapper(s.filterPromise,t),new Promise((e=>{r.then((t=>e(t)))}))):Promise.resolve();var r}getFilterWrapper(e){const t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,i){const s=hi(this.gos),r=this.localeService.getLocaleTextFunc(),o=t=>{const{filterParams:i}=e;e.filterParams="object"==typeof i?{...i,...t}:t};switch(t.baseDataType){case"number":s&&o({comparator:(e,t)=>{const i=null==e?0:parseInt(e),s=null==t?0:parseInt(t);return i===s?0:i>s?1:-1}});break;case"boolean":o(s?{valueFormatter:e=>yt(e.value)?r(String(e.value),e.value?"True":"False"):r("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>!1===t,numberOfInputs:0}]});break;case"date":s&&o({valueFormatter:e=>{const t=i(e);return yt(t)?t:r("blanks","(Blanks)")},treeList:!0,treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=ha[Number(e)-1];return r(t,ua[t])}return e??r("blanks","(Blanks)")}});break;case"dateString":{const e=t.dateParser;o(s?{valueFormatter:e=>{const t=i(e);return yt(t)?t:r("blanks","(Blanks)")},treeList:!0,treeListPathGetter:t=>{const i=e(t??void 0);return i?[String(i.getFullYear()),String(i.getMonth()+1),String(i.getDate())]:null},treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=ha[Number(e)-1];return r(t,ua[t])}return e??r("blanks","(Blanks)")}}:{comparator:(t,i)=>{const s=e(i);return null==i||s<t?-1:s>t?1:0}});break}case"object":s?o({valueFormatter:e=>{const t=i(e);return yt(t)?t:r("blanks","(Blanks)")}}):e.filterValueGetter=e=>i({column:e.column,node:e.node,value:this.valueService.getValue(e.column,e.node)})}}destroy(){super.destroy(),this.allColumnFilters.forEach((e=>this.disposeFilterWrapper(e,"gridDestroyed"))),this.allColumnListeners.clear()}}],dependantModules:[va]},wa={version:ca,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:function(e){return!!e.filterManager?.isColumnFilterPresent()||!!e.filterManager?.isAggregateFilterPresent()},getFilterInstance:function(e,t,i){return e.filterManager?.getFilterInstance(t,i)},getColumnFilterInstance:function(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)},destroyFilter:function(e,t){const i=e.columnModel.getColDefCol(t);if(i)return e.filterManager?.destroyFilter(i,"api")},setFilterModel:function(e,t){e.frameworkOverrides.wrapIncoming((()=>e.filterManager?.setFilterModel(t)))},getFilterModel:function(e){return e.filterManager?.getFilterModel()??{}},getColumnFilterModel:function(e,t){return e.filterManager?.getColumnFilterModel(t)??null},setColumnFilterModel:function(e,t,i){return e.filterManager?.setColumnFilterModel(t,i)??Promise.resolve()},showColumnFilter:function(e,t){const i=e.columnModel.getCol(t);i?e.menuService.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"}):ut(`column '${t}' not found`)}},dependantModules:[ya,Ca]},Sa={version:ca,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:class extends la{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,s,r){this.comp=e,r=Os(this,this.beans.context,r),this.eButtonShowMainFilter=i,this.eFloatingFilterBody=s,this.setGui(t,r),this.setupActive(),this.setupWidth(r),this.setupLeft(r),this.setupHover(r),this.setupFocus(r),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(r),this.setupUi(),r.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(r),r.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(r)}),r.addDestroyFunc((()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()}))}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Jr("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new wn(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();Xs(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(zt(this.gos)===this.eGui)return;const t=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(t)return this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),void t.focus();const i=this.findNextColumnWithFloatingFilter(e.shiftKey);i&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:i},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleColsService;let i=this.column;do{if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break}while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case co.UP:case co.DOWN:t||e.preventDefault();case co.LEFT:case co.RIGHT:if(t)return;e.stopPropagation();case co.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case co.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const t=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&wr(e.relatedTarget,"ag-floating-filter");if(t&&i&&e.target===this.eGui){const e=this.lastFocusEvent,t=!(!e||e.key!==co.TAB);if(e&&t){const t=e.shiftKey;this.focusService.focusInto(this.eGui,t)}}const s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.column)}setupHover(e){e.createManagedBean(new da([this.column],this.eGui));const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(e){const t=new sa(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;const e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter()));e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,i=e=>{if("filterDestroyed"===e?.source&&!this.isAlive())return;const i=this.comp.getFloatingFilterComp();i&&i.then((i=>{if(i){const s=t?.getCurrentFloatingFilterParentModel(this.column),r=e?{...e,columns:e.columns??[],source:"api"===e.source?"api":"columnFilter"}:null;i.onParentModelChanged(s,r)}}))};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:i}),t?.isFilterActive(this.column)&&i(null)}setupWidth(e){const t=()=>{const e=`${this.column.getActualWidth()}px`;this.comp.setWidth(e)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const s=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter())):null,r=this.comp.getFloatingFilterComp();r&&s?r.then((t=>{!t||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,s)?this.updateCompDetails(e,s,i):this.updateFloatingFilterParams(s)})):this.updateCompDetails(e,s,i)}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){if(!e)return;const t=e.params;this.comp.getFloatingFilterComp()?.then((e=>{let i=!1;e?.refresh&&"function"==typeof e.refresh&&null!==e.refresh(t)&&(i=!0),!i&&e?.onParamsUpdated&&"function"==typeof e.onParamsUpdated&&null!==e.onParamsUpdated(t)&&ct("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}))}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}}}],dependantModules:[ya]},ba={version:ca,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:class extends Kr{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>\n            </div>',[Nn]),this.eFloatingFilterText=qr}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){null!=e?this.params.parentFilterInstance((t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})):this.eFloatingFilterText.setValue("")}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}}}],dependantModules:[Sa]},Ra={version:ca,moduleName:"@ag-grid-community/simple-filter",dependantModules:[ya],userComponents:[{name:"agTextColumnFilter",classImp:class extends Mn{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>null==e?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:i})=>{if(null==i)return!1;switch(e){case"contains":return t.indexOf(i)>=0;case"notContains":return t.indexOf(i)<0;case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return 0===t.indexOf(i);case"endsWith":{const e=t.lastIndexOf(i);return e>=0&&e===t.length-i.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new zn(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(ct("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:i,filterText:s})=>e(t,i,s)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValuesWithSideEffects(e,!0);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,((e,s,r,o)=>{if(s<o){let s=Ct(e.getValue());t&&this.textFilterParams.trimInput&&(s=Un(s)??null,e.setValue(s,!0)),i.push(s)}})),i}getDefaultFilterOptions(){return _n}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),Js(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const s=this.createManagedBean(new On);s.addCssClass(`ag-filter-${i}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(s))}evaluateNullValue(e){return!!e&&["notEqual","notContains","blank"].indexOf(e)>=0}evaluateNonNullValue(e,t,i,s){const r=e.map((e=>this.formatter(e)))||[],o=this.formatter(t),{api:n,colDef:a,column:l,context:d,textFormatter:c}=this.textFilterParams;if("blank"===i.type)return this.isBlank(t);if("notBlank"===i.type)return!this.isBlank(t);const u={api:n,colDef:a,column:l,context:d,node:s.node,data:s.data,filterOption:i.type,value:o,textFormatter:c};return r.some((e=>this.matcher({...u,filterText:e})))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}}},{name:"agNumberColumnFilter",classImp:class extends In{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern===e.allowedCharPattern&&super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(s))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new $n(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return Vn}setElementValue(e,t,i){const s=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,s)}createValueElement(){const e=Wn(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),Js(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,s){const r=this.createManagedBean(s?new On({allowedCharPattern:s}):new Gn);r.addCssClass(`ag-filter-${i}`),r.addCssClass("ag-filter-filter"),t.push(r),e.appendChild(r.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,s,r)=>{i<r&&t.push(this.processValue(this.stringToFloat(e.getValue())))})),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return null==e||isNaN(e)?null:e}stringToFloat(e){if("number"==typeof e)return e;let t=Ct(e);return null!=t&&""===t.trim()&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):null==t||"-"===t.trim()?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValues(e);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput((t=>{t.getInputElement().validity.valid||(e=!0)})),e}}},{name:"agDateColumnFilter",classImp:class extends In{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=1e3,this.maxValidYear=ia,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:s}=e||{};return[t&&Xn(t)||null,i&&Xn(i)||null].slice(0,this.getNumberOfInputs(s))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){return null==t||t<e?-1:t>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(t,i)=>{if(null!=e[t]){if(!isNaN(e[t]))return null==e[t]?i:Number(e[t]);ct(`DateFilter ${t} is not a number`)}return i};this.minValidYear=t("minValidYear",1e3),this.maxValidYear=t("maxValidYear",ia),this.minValidYear>this.maxValidYear&&ct("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Xn(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Xn(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&ct("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new ta(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new Zn(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc((()=>t.destroy())),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return ea}createValueElement(){const e=$t(this.gos).createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,s){const r=$t(this.gos).createElement("div");r.classList.add(`ag-filter-${s}`),r.classList.add(`ag-filter-date-${s}`),t.push(r),e.appendChild(r),i.push(this.createDateCompWrapper(r))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach((e=>e.destroy()))}isValidDateValue(e){if(null===e)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput(((i,s,r,o)=>{r!==e||!t||s>=o||(t=t&&this.isValidDateValue(i.getDate()))})),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),i={},s=this.getValues(e);return s.length>0&&(i.dateFrom=Yn(s[0])),s.length>1&&(i.dateTo=Yn(s[1])),{dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t,...i}}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput((e=>{e.setInputPlaceholder(t),e.setInputAriaLabel(i)}))}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,s,r)=>{i<r&&t.push(e.getDate())})),t}translate(e){return"lessThan"===e?super.translate("before"):"greaterThan"===e?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}}},{name:"agDateInput",classImp:class extends Kr{constructor(){super('\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>\n            </div>',[Nn]),this.eDateInput=qr}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:e=>{e.target===zt(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&nr(),t.type=i?"date":"text";const{minValidYear:s,maxValidYear:r,minValidDate:o,maxValidDate:n}=e.filterParams||{};if(o&&s&&ct("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),n&&r&&ct("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),o&&n){const[e,t]=[o,n].map((e=>e instanceof Date?e:Xn(e)));e&&t&&e.getTime()>t.getTime()&&ct("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}o?o instanceof Date?t.min=Jn(o):t.min=o:s&&(t.min=`${s}-01-01`),n?n instanceof Date?t.max=Jn(n):t.max=n:r&&(t.max=`${r}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Xn(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Yn(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e&&e.suppressFocus||this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&null!=e.filterParams.browserDatePicker?e.filterParams.browserDatePicker:lr()||dr()||nr()&&ar()>=14.1}}}]},Ea={version:ca,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[Ra,Sa],userComponents:[{name:"agTextColumnFloatingFilter",classImp:class extends ma{init(e){super.init(e),this.filterModelFormatter=new zn(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return _n}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new ga)}}},{name:"agNumberColumnFloatingFilter",classImp:class extends ma{init(e){super.init(e),this.filterModelFormatter=new $n(this.localeService,this.optionsFactory,e.filterParams?.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){Wn(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Vn}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=Wn(e.filterParams),this.allowedCharPattern?this.createManagedBean(new ga({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new fa)}}},{name:"agDateColumnFloatingFilter",classImp:class extends pa{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>\n                <div data-ref="eDateWrapper" style="display: flex;"></div>\n            </div>',[Nn]),this.eReadOnlyText=qr,this.eDateWrapper=qr}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return ea}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new ta(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const t=e;this.dateComp.setDate(Xn(t.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Cr(this.eDateWrapper,e),Cr(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=Yn(this.dateComp.getDate());this.params.parentFilterInstance((t=>{if(t){const i=Xn(e);t.onFloatingFilterChanged(this.getLastType()||null,i)}}))}getDateComponentParams(){const e=bn(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:ft(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new Zn(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,(e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))})),this.addDestroyFunc((()=>this.dateComp.destroy()))}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}}}]},Fa={version:ca,moduleName:"@ag-grid-community/quick-filter-core",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){const e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",(e=>this.setQuickFilter(e.currentValue))),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],(()=>this.onQuickFilterColumnConfigChanged())),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],(()=>this.setQuickFilterParserAndMatcher()))}refreshQuickFilterCols(){const e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),i=this.columnModel.getColDefCols();let s=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.pivotResultColsService.getPivotResultCols()?.list:i)??[];t&&(s=s.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?s:s.filter((e=>e.isVisible()||e.isRowGroupActive()))}isQuickFilterPresent(){return null!==this.quickFilter}doesRowPassQuickFilter(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every((i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i)))}resetQuickFilterCache(){this.rowModel.forEachNode((e=>e.quickFilterAggregateText=null))}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;this.quickFilterParts=e?t?t(e):e.split(" "):null}parseQuickFilter(e){return yt(e)?Tt(this.gos)?e.toUpperCase():(ct("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(null!=e&&"string"!=typeof e)return void ct("Grid option quickFilterText only supports string inputs, received: "+typeof e);const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some((i=>{const s=this.getQuickFilterTextForColumn(i,e);return yt(s)&&s.indexOf(t)>=0}))}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);const{quickFilterParts:s,matcher:r}=this;return r(s,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0);const s=e.getColDef();if(s.getQuickFilterText){const r=this.gos.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:s});i=s.getQuickFilterText(r)}return yt(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.colsForQuickFilter.forEach((i=>{const s=this.getQuickFilterTextForColumn(i,e);yt(s)&&t.push(s)})),t.join("\n")}}],dependantModules:[va]},Pa={version:ca,moduleName:"@ag-grid-community/filter",dependantModules:[Ea,ba,{version:ca,moduleName:"@ag-grid-community/quick-filter",dependantModules:[Fa,{version:ca,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:function(e){return!!e.filterManager?.isQuickFilterPresent()},getQuickFilter:function(e){return e.gos.get("quickFilterText")},resetQuickFilter:function(e){e.filterManager?.resetQuickFilterCache()}},dependantModules:[Fa]}]},wa]},xa=(e=>(e.COLUMN_GROUP="group",e.COLUMN="column",e.FLOATING_FILTER="filter",e))(xa||{}),Da=class extends Ai{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}));const e=$t(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){return this.ctrlsService.getHeaderRowContainerCtrl()?.getRowCount()??0}getHeaderPositionForColumn(e,t){let i;if("string"==typeof e?(i=this.columnModel.getCol(e),i||(i=this.visibleColService.getColumnGroup(e))):i=e,!i)return null;const s=this.ctrlsService.getHeaderRowContainerCtrl(),r=s?.getAllCtrls(),o="filter"===pi(r||[]).getType(),n=this.getHeaderRowCount()-1;let a=-1,l=i;for(;l;)a++,l=l.getParent();let d=a;return t&&o&&d===n-1&&d++,-1===d?null:{headerRowIndex:d,column:i}}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:s}=t,r=t.column,o=this.getHeaderRowCount(),n=0===e;let{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:d}=n?this.headerPositionUtils.getColumnVisibleParent(r,s):this.headerPositionUtils.getColumnVisibleChild(r,s),c=!1;return a<0&&(a=0,l=r,c=!0),a>=o?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):void 0!==d&&(this.currentHeaderRowWithoutSpan=d),!(!c&&!l)&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,i){const s=this.focusService.getFocusedHeader(),r=2===e,o=this.gos.get("enableRtl");let n,a;if(-1!==this.currentHeaderRowWithoutSpan?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,r!==o?(a="Before",n=this.headerPositionUtils.findHeader(s,a)):(a="After",n=this.headerPositionUtils.findHeader(s,a)),n||!t)return this.focusService.focusHeaderPosition({headerPosition:n,direction:a,fromTab:t,allowUserOverride:!0,event:i});if(t){const e=this.gos.getCallback("tabToNextHeader");if(e)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:e,headerPosition:n,direction:a})}return this.focusNextHeaderRow(s,a,i)}focusNextHeaderRow(e,t,i){const s=e.headerRowIndex;let r,o=null;if("Before"===t?s>0&&(r=s-1,this.currentHeaderRowWithoutSpan-=1,o=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"end")):(r=s+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),o=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"start")),!o)return!1;const{column:n,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(o.column,o?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(Ss(e)){const s=e.getDisplayedLeafColumns();i="Before"===t?pi(s):s[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}},Aa=class extends Ai{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new wn(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();const s=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:s}),this.mockContextMenuForIPad(s),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame((()=>e())),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:e}=this;let t=0;const i=this.columnModel.getGroupRowsHeight().reduce(((e,t)=>e+t),0),s=this.columnModel.getColumnHeaderRowHeight();if(this.filterManager?.hasFloatingFilters()&&(t+=e.getFloatingFiltersHeight()),t+=i,t+=s,this.headerHeight===t)return;this.headerHeight=t;const r=`${t+1}px`;this.comp.setHeightAndMinHeight(r),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const e=this.visibleColsService.getAllCols().some((e=>e.isSpanHeaderHeight()));this.comp.addOrRemoveCssClass("ag-header-allow-overflow",e)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,s=i!==t?2:3;(this.headerNavigationService.navigateHorizontally(s,!0,e)||!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case co.LEFT:t=2;case co.RIGHT:yt(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e)&&e.preventDefault();break;case co.UP:t=0;case co.DOWN:yt(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:t}=e;!t&&this.eGui.contains(zt(this.gos))||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;const{target:s}=e??t;s!==this.eGui&&s!==this.ctrlsService.getHeaderRowContainerCtrl()?.getViewportElement()||this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!ur())return;const t=new eo(this.eGui);this.addManagedListeners(t,{longTap:t=>{e(void 0,t.touchStart,t.touchEvent)}}),this.addDestroyFunc((()=>t.destroy()))}},Ta=class extends Ai{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=It(this.gos,"print"),t=this.visibleColsService.getBodyContainerWidth(),i=this.visibleColsService.getColsLeftWidth(),s=this.visibleColsService.getDisplayedColumnsRightWidth();let r;e?r=t+i+s:(r=t,this.addSpacer&&0===(this.gos.get("enableRtl")?i:s)&&this.scrollVisibleService.isVerticalScrollShowing()&&(r+=this.scrollVisibleService.getScrollbarWidth())),this.callback(r)}},Ma=class extends Ai{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach((e=>{e.isPrimary()&&(e.isAnyFunctionActive()||(e.isAllowValue()?this.columnsToAggregate.push(e):e.isAllowRowGroup()?this.columnsToGroup.push(e):e.isAllowPivot()&&this.columnsToPivot.push(e)))}))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function Ia(e){const{isFromHeader:t,fromLeft:i,xPosition:s,fromEnter:r,fakeEvent:o,pinned:n,gos:a,columnModel:l,columnMoveService:d,visibleColsService:c}=e;let{allMovingColumns:u}=e;if(t){const e=[];u.forEach((t=>{let i=null,s=t.getParent();for(;null!=s&&1===s.getDisplayedLeafColumns().length;)i=s,s=s.getParent();null!=i?(i.getColGroupDef()?.marryChildren?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns()).forEach((t=>{e.includes(t)||e.push(t)})):e.includes(t)||e.push(t)})),u=e}const h=u.slice();l.sortColsLikeCols(h);const p=function(e){const{movingCols:t,draggingRight:i,xPosition:s,pinned:r,gos:o,columnModel:n,visibleColsService:a}=e;if(o.get("suppressMovableColumns")||t.some((e=>e.getColDef().suppressMovable)))return[];const l=function(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}(a,r),d=n.getCols(),c=l.filter((e=>yi(t,e))),u=l.filter((e=>!yi(t,e))),h=d.filter((e=>!yi(t,e)));let p,g=0,m=s;if(i){let e=0;c.forEach((t=>e+=t.getActualWidth())),m-=e}if(m>0){for(let e=0;e<u.length&&(m-=u[e].getActualWidth(),!(m<0));e++)g++;i&&g++}if(g>0){const e=u[g-1];p=h.indexOf(e)+1}else p=h.indexOf(u[0]),-1===p&&(p=0);const f=[p],v=(e,t)=>e-t;if(i){let e=p+1;const t=d.length-1;for(;e<=t;)f.push(e),e++;f.sort(v)}else{let e=p;const t=d.length-1;let i=d[e];for(;e<=t&&l.indexOf(i)<0;)e++,f.push(e),i=d[e];e=p-1;const s=0;for(;e>=s;)f.push(e),e--;f.sort(v).reverse()}return f}({movingCols:h,draggingRight:i,xPosition:s,pinned:n,gos:a,columnModel:l,visibleColsService:c}),g=function(e,t){const i=t.getCols(),s=e.map((e=>i.indexOf(e))).sort(((e,t)=>e-t)),r=s[0];return pi(s)-r!=s.length-1?null:r}(h,l);if(0===p.length)return;const m=p[0];let f=null!==g&&!r;if(t&&(f=null!==g),f&&!o){if(!i&&m>=g)return;if(i&&m<=g)return}const v=c.getAllCols(),C=[];let y=null;for(let e=0;e<p.length;e++){const t=p[e],i=d.getProposedColumnOrder(h,t);if(!d.doesOrderPassRules(i))continue;const s=i.filter((e=>v.includes(e)));if(null===y)y=s;else if(!gi(s,y))break;const r=La(i);C.push({move:t,fragCount:r})}if(0===C.length)return;C.sort(((e,t)=>e.fragCount-t.fragCount));const w=C[0].move;return w>l.getCols().length-u.length?void 0:{columns:u,toIndex:w}}function ka(e){const{columns:t,toIndex:i}=Ia(e)||{},{finished:s,columnMoveService:r}=e;return t&&null!=i?(r.moveColumns(t,i,"uiColumnMoved",s),s?null:{columns:t,toIndex:i}):null}function La(e){function t(e){const t=[];let i=e.getOriginalParent();for(;null!=i;)t.push(i),i=i.getOriginalParent();return t}let i=0;for(let s=0;s<e.length-1;s++){let r=t(e[s]),o=t(e[s+1]);[r,o]=r.length>o.length?[r,o]:[o,r],r.forEach((e=>{-1===o.indexOf(e)&&i++}))}return i}function Oa(e){const{pinned:t,fromKeyboard:i,gos:s,ctrlsService:r,useHeaderRow:o,skipScrollPadding:n}=e;let a=r.getHeaderRowContainerCtrl(t)?.getViewportElement(),{x:l}=e;return a?(i&&(l-=a.getBoundingClientRect().left),s.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),null!=t||n||(l+=r.get("center").getCenterViewportScrollLeft()),l):0}function Na(e,t){for(const i of e)i.setMoving(t,"uiColumnMoved")}var Ga=class extends Ai{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!yt(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}))}getIconName(){const e=this.lastDraggingEvent?.dragItem.columns??[];for(const t of e){const e=t.getPinned();if(t.getColDef().lockPinned){if(e==this.pinned)return"move"}else{if(e===this.pinned||!this.pinned)return"move";if(!e&&this.pinned)return"pinned"}}return"notAllowed"}onDragEnter(e){const t=e.dragItem.columns;if(0===e.dragSource.type)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const i=e.dragItem.visibleState,s=(t||[]).filter((e=>i[e.getId()]));this.setColumnsVisible(s,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(t,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,s=!1){const r=this.gos.get("suppressMoveWhenColumnDragging");if(s&&!r)return void this.finishColumnMoving();if(this.lastDraggingEvent=e,!e||!s&&wt(e.hDirection))return;const{pinned:o,gos:n,ctrlsService:a}=this,l=Oa({x:e.x,pinned:o,gos:n,ctrlsService:a});t||this.checkCenterForScrolling(l),r?this.handleColumnDragWhileSuppressingMovement(e,t,i,l,s):this.handleColumnDragWhileAllowingMovement(e,t,i,l,s)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e)return;const s=e.filter((e=>!e.getColDef().lockVisible));this.columnModel.setColsVisible(s,t,i)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;const{columns:e,toIndex:t}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,t,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,i,s,r){const o=this.getAllMovingColumns(e,!0);if(r){const e=this.isAttemptingToPin(o);e&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:s,xPosition:r}=this.getNormalisedXPositionInfo(o,e)||{};if(null==s||null==r)return void this.finishColumnMoving();this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:r,fromEnter:t,fakeEvent:i,fromLeft:s})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,s)}}handleColumnDragWhileAllowingMovement(e,t,i,s,r){const o=this.getAllMovingColumns(e),n=1===this.normaliseDirection(e.hDirection),a=1===e.dragSource.type,l=ka({...this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:s,fromLeft:n,fromEnter:t,fakeEvent:i}),finished:r});l&&(this.lastMovedInfo=l)}getAllMovingColumns(e,t=!1){const i=e.dragSource.getDragItem();let s=null;return t?(s=i.columnsInSplit,s||(s=i.columns)):s=i.columns,s?s.filter((e=>!e.getColDef().lockPinned||e.getPinned()==this.pinned)):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:s,fromLeft:r,fromEnter:o,fakeEvent:n}=e,{pinned:a,gos:l,columnModel:d,columnMoveService:c,visibleColsService:u}=this;return{allMovingColumns:t,isFromHeader:i,fromLeft:r,xPosition:s,pinned:a,fromEnter:o,fakeEvent:n,gos:l,columnModel:d,columnMoveService:c,visibleColsService:u}}findFirstAndLastMovingColumns(e){const t=e.length;let i,s;for(let r=0;r<=t;r++){if(!i){const t=e[r];null!=t.getLeft()&&(i=t)}if(!s){const i=e[t-1-r];null!=i.getLeft()&&(s=i)}if(i&&s)break}return{firstMovingCol:i,lastMovingCol:s}}highlightHoveredColumn(e,t){const{gos:i,columnModel:s}=this,r=i.get("enableRtl"),o=s.getCols().filter((e=>e.isVisible()&&e.getPinned()===this.pinned));let n,a=null,l=null,d=null;for(const e of o){if(l=e.getActualWidth(),a=this.getNormalisedColumnLeft(e,0,r),null!=a&&a<=t&&a+l>=t){d=e;break}a=null,l=null}if(d)-1!==e.indexOf(d)&&(d=null);else{for(let e=o.length-1;e>=0;e--){const t=o[e],i=o[e].getParent();if(!i){d=t;break}const s=i?.getDisplayedLeafColumns();if(s.length){d=pi(s);break}}if(!d)return;a=this.getNormalisedColumnLeft(d,0,r),l=d.getActualWidth()}this.lastHighlightedColumn?.column!==d&&this.clearHighlighted(),null!=d&&null!=a&&null!=l&&(n=t-a<l/2!==r?0:1,d.setHighlighted(n),this.lastHighlightedColumn={column:d,position:n})}getNormalisedXPositionInfo(e,t){const{gos:i,visibleColsService:s}=this,r=i.get("enableRtl"),{firstMovingCol:o,column:n,position:a}=this.getColumnMoveAndTargetInfo(e,t,r);if(!o||!n||null==a)return;const l=s.getAllCols(),d=l.indexOf(o),c=l.indexOf(n),u=0===a!==r,h=d<c||d===c&&!u;let p=0;if(u?h&&(p-=1):h||(p+=1),c+p===d)return;const g=l[c+p];return g?{fromLeft:h,xPosition:this.getNormalisedColumnLeft(g,20,r)}:void 0}getColumnMoveAndTargetInfo(e,t,i){const s=this.lastHighlightedColumn||{},{firstMovingCol:r,lastMovingCol:o}=this.findFirstAndLastMovingColumns(e);if(!r||!o||s.column||!t)return{firstMovingCol:r,...s};const n="left"===this.getPinDirection();return{firstMovingCol:r,position:n?1:0,column:n!==i?r:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,t,i){const{gos:s,ctrlsService:r}=this,o=e.getLeft();if(null==o)return null;const n=e.getActualWidth();return Oa({x:i?o+n-t:o+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:s,ctrlsService:r})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>7;return t&&i||e.some((e=>e.getPinned()!==this.pinned))}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:s,fakeEvent:r,fromLeft:o}=e,n=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:o,fromEnter:s,fakeEvent:r}),{columns:a,toIndex:l}=Ia(n)||{};a&&null!=l&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.ctrlsService.get("center"),i=t.getCenterViewportScrollLeft(),s=i+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<i+50,this.needToMoveLeft=e>s-50):(this.needToMoveLeft=e<i+50,this.needToMoveRight=e>s-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+5*this.intervalCount,e>100&&(e=100);let t=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=8)return;if(this.dragAndDropService.getDragAndDropImageComponent()?.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){const e=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(e,void 0,!0)}}}getPinDirection(){return this.needToMoveLeft||"left"===this.pinned?"left":this.needToMoveRight||"right"===this.pinned?"right":void 0}attemptToPinColumns(e,t,i=!1){const s=(e||[]).filter((e=>!e.getColDef().lockPinned));return s.length?(i&&(t=this.getPinDirection()),this.columnModel.setColsPinned(s,t,"uiColumnDragged"),i&&this.dragAndDropService.nudge(),s.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},Ba=class extends Ai{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(this,(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]]}})),this.moveColumnFeature=this.createManagedBean(new Ga(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new Ma(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc((()=>this.dragAndDropService.removeDropTarget(this)))}isInterestedIn(e){return 1===e||0===e&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&0===e.dragSource.type}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},Va=class extends Ai{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s,r){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=s,this.ctrl=r}postConstruct(){const e=[];let t,i;const s=()=>{if(Cr(this.eResize,t),!t)return;const s=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(s),i){const t=this.gos.get("skipHeaderOnAutoSize"),i=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",t)};this.eResize.addEventListener("dblclick",i);const s=new eo(this.eResize);s.addEventListener("doubleTap",i),e.push((()=>{this.eResize.removeEventListener("dblclick",i),s.removeEventListener("doubleTap",i),s.destroy()}))}},r=()=>{e.forEach((e=>e())),e.length=0},o=()=>{const e=this.column.isResizable(),o=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(e!==t||o!==i)&&(t=e,i=o,r(),s())};o(),this.addDestroyFunc(r),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){const{column:i,lastResizeAmount:s,resizeStartWidth:r}=this,o=this.normaliseResizeAmount(t),n=[{key:i,newWidth:r+o}];this.column.getPinned()&&this.pinnedWidthService.getPinnedLeftWidth()+this.pinnedWidthService.getPinnedRightWidth()+(o-s)>Rr(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50||(this.lastResizeAmount=o,this.columnSizeService.setColumnWidths(n,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1))}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i="left"!==this.pinned,s="right"===this.pinned;return this.gos.get("enableRtl")?i&&(t*=-1):s&&(t*=-1),t}},Ha=class extends Ai{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){const e=e=>{e&&"string"!=typeof e&&(this.selectionOptions=e)};e(this.gos.get("rowSelection")),this.addManagedPropertyListener("rowSelection",(t=>e(t.currentValue)))}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(zt(this.gos))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new go),this.cbSelectAll.addCssClass("ag-header-select-all"),Js(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),tr(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),t=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),i=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${i} (${t})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${i} (${t})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return!!di(this.gos)||(ct(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return!(!Tt(this.gos)&&!Mt(this.gos)&&(ct(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),1))}onCbSelectAll(){if(this.processingEventFromCheckbox)return;if(!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly();let s="uiSelectAll";i?s="uiSelectAllCurrentPage":t&&(s="uiSelectAllFiltered");const r={source:s,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(r):this.selectionService.deselectAllRowNodes(r)}isCheckboxSelection(){const e=this.selectionOptions,t=e&&ii(e)&&Vi(this.column),i=this.column.getColDef().headerCheckboxSelection;let s=!1;return s=!!t||("function"==typeof i?i(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):!!i),s&&this.checkRightRowModelType(t?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(t?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){const e=this.selectionOptions;return void 0!==e?"multiRow"===e.mode&&"filtered"===e.selectAll:!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){const e=this.selectionOptions;return void 0!==e?"multiRow"===e.mode&&"currentPage"===e.selectAll:!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},$a=class extends la{constructor(e,t,i){super(e,t,i),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,s,r){this.comp=e,r=Os(this,this.beans.context,r),this.setGui(t,r),this.updateState(),this.setupWidth(r),this.setupMovingCss(r),this.setupMenuClass(r),this.setupSortableClass(r),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:s,checkMeasuringCallback:e=>this.setRefreshFunction("measuring",e),compBean:r}),this.addColumnHoverListener(r),this.setupFilterClass(r),this.setupClassesFromColDef(),this.setupTooltip(r),this.addActiveHeaderMouseListeners(r),this.setupSelectAll(r),this.setupUserComp(r),this.refreshAria(),this.resizeFeature=r.createManagedBean(new Va(this.getPinned(),this.column,i,e,this)),r.createManagedBean(new da([this.column],t)),r.createManagedBean(new sa(this.column,t,this.beans)),r.createManagedBean(new wn(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(r),r.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],(()=>this.refresh(r))),r.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(r)}),r.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const o=()=>this.checkDisplayName(r);r.addManagedEventListeners({columnValueChanged:o,columnRowGroupChanged:o,columnPivotChanged:o,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),r.addDestroyFunc((()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()}))}resizeHeader(e,t){if(!this.column.isResizable())return;const i=this.column.getActualWidth(),s=this.column.getMinWidth(),r=this.column.getMaxWidth(),o=Math.min(Math.max(i+e,s),r);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:o}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,beans:i,column:s,ctrlsService:r}=this,{gos:o,columnModel:n,columnMoveService:a,visibleColsService:l}=i,d=this.getPinned(),c=t.getBoundingClientRect().left,u=s.getActualWidth(),h=Oa({x:0===e!==o.get("enableRtl")?c-20:c+u+20,pinned:d,fromKeyboard:!0,gos:o,ctrlsService:r}),p=this.focusService.getFocusedHeader();ka({allMovingColumns:[s],isFromHeader:!0,fromLeft:1===e,xPosition:h,pinned:d,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:n,columnMoveService:a,visibleColsService:l,finished:!0}),r.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(s,"auto"),this.isAlive()&&!this.beans.gos.get("ensureDomOrder")||!p||this.restoreFocus(p)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:{...e,column:this.column}})}setupUserComp(e){const t=this.lookupUserCompDetails(e);this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){const t=this.createParams(e),i=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(i,t)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:e=>{this.menuService.showColumnMenu({column:this.column,buttonElement:e,positionBy:"button"})},showColumnMenuAfterMouseClick:e=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:e,positionBy:"mouse"})},showFilter:e=>{this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{this.beans.sortController.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,t)=>{this.beans.sortController.setSortForColumn(this.column,e,!!t,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(t,i)=>{this.setupTooltip(e,t,i)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new Ha(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===co.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===co.ENTER&&this.onEnterKeyDown(e),e.key===co.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();i&&i instanceof oo&&i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const e=this.getRowIndex();this.focusService.setFocusedHeader(e,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s="whenTruncated"===this.gos.get("tooltipShowMode"),r=this.eGui,o=this.column.getColDef();i||!s||o.headerComponent||(i=()=>{const e=r.querySelector(".ag-header-cell-text");return!e||e.scrollWidth>e.clientWidth});const n={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>r,getLocation:()=>"header",getTooltipValue:()=>null!=t?t:this.column.getColDef().headerTooltip,shouldDisplayTooltip:i},a=e.createManagedBean(new Ur(n));this.setRefreshFunction("tooltip",(()=>a.refreshToolTip()))}setupClassesFromColDef(){const e=()=>{const e=ra(this.column.getColDef(),this.gos,this.column,null),t=this.userHeaderClasses;this.userHeaderClasses=new Set(e),e.forEach((e=>{t.has(e)?t.delete(e):this.comp.addOrRemoveCssClass(e,!0)})),t.forEach((e=>this.comp.addOrRemoveCssClass(e,!1)))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:i,displayName:s,dragAndDropService:r,gos:o}=this,{columnModel:n}=i;let a=!this.gos.get("suppressDragLeaveHidesColumns");const l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:s,onDragStarted:()=>{a=!o.get("suppressDragLeaveHidesColumns"),Na([t],!0)},onDragStopped:()=>Na([t],!1),onDragCancelled:()=>Na([t],!1),onGridEnter:e=>{if(a){const t=e?.columns?.filter((e=>!e.getColDef().lockVisible))||[];n.setColsVisible(t,!0,"uiColumnMoved")}},onGridExit:e=>{if(a){const t=e?.columns?.filter((e=>!e.getColDef().lockVisible))||[];n.setColsVisible(t,!1,"uiColumnMoved")}}};r.addDragSource(l,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach((e=>e()))}refreshHeaderComp(e){const t=this.lookupUserCompDetails(e);null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==t.componentClass&&this.attemptHeaderCompRefresh(t.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!!t&&(!!t.refresh&&t.refresh(e))}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){const e=this.column.getColDef();return!(this.gos.get("suppressMovableColumns")||e.suppressMovable||e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=0===e,i=1===e;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:s}=this;if(!t.isSpanHeaderHeight())return e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),void i.addOrRemoveCssClass("ag-header-span-total",!1);const{numberOfParents:r,isSpanningTotal:o}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",r>0);const{columnModel:n}=s,a=n.getColumnHeaderRowHeight();if(0===r)return i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),void e.style.setProperty("height",`${a}px`);i.addOrRemoveCssClass("ag-header-span-total",o);const l=this.beans.columnModel.getGroupRowsHeight();let d=0;for(let e=0;e<r;e++)d+=l[l.length-1-e];e.style.setProperty("top",-d+"px"),e.style.setProperty("height",`${a+d}px`)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(function(e){let t;return t="asc"===e?"ascending":"desc"===e?"descending":"mixed"===e?"other":"none",t}(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){null!=t?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(zt(this.beans.gos)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort(((e,t)=>"filter"===e?-1:t.charCodeAt(0)-e.charCodeAt(0))).map((e=>this.ariaDescriptionProperties.get(e))).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column)})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof oo?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},Wa=class extends Ai{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const e=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",(()=>{const t=[];this.columnGroup.getDisplayedLeafColumns().forEach((e=>{e.getColDef().suppressAutoSize||t.push(e.getColId())})),t.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:e,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")}))}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const s=this.normaliseDragChange(t),r=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(r,i,e)}getInitialValues(e){const t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),s={columnsToResize:t,resizeStartWidth:i,resizeRatios:this.getSizeRatiosOfColumns(t,i)};let r=null;if(e&&(r=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),r){const e=r.getDisplayedLeafColumns(),t=s.groupAfterColumns=e.filter((e=>e.isResizable())),i=s.groupAfterStartWidth=this.getInitialSizeOfColumns(t);s.groupAfterRatios=this.getSizeRatiosOfColumns(t,i)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:s,groupAfterColumns:r,groupAfterStartWidth:o,groupAfterRatios:n}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=s,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=n}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;const s={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(s,e,t,i)}resizeColumns(e,t,i,s=!0){const{columnsToResize:r,resizeStartWidth:o,resizeRatios:n,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:d}=e,c=[];if(c.push({columns:r,ratios:n,width:t}),a){const e=t-o;c.push({columns:a,ratios:d,width:l-e})}this.columnSizeService.resizeColumnSets({resizeSets:c,finished:s,source:i}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter((e=>e.isResizable()))}getInitialSizeOfColumns(e){return e.reduce(((e,t)=>e+t.getActualWidth()),0)}getSizeRatiosOfColumns(e,t){return e.map((e=>e.getActualWidth()/t))}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},_a=class extends Ai{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach((t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push((()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)}))}))}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach((e=>e())),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",0===e)}},za=class extends la{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const e=this.getGui();this.setDragSource(e)}},this.column=e}setComp(e,t,i,s,r){this.comp=e,r=Os(this,this.beans.context,r),this.setGui(t,r),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(r),this.setupExpandable(r),this.setupTooltip(r),this.setupAutoHeight({wrapperElement:s,compBean:r}),this.setupUserComp(r),this.addHeaderMouseListeners(r);const o=this.getParentRowCtrl().getPinned(),n=this.column.getProvidedColumnGroup().getLeafColumns();r.createManagedBean(new da(n,t)),r.createManagedBean(new sa(this.column,t,this.beans)),r.createManagedBean(new _a(e,this.column)),this.resizeFeature=r.createManagedBean(new Wa(e,i,o,this.column)),r.createManagedBean(new wn(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(r,n),r.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(r),r.addDestroyFunc((()=>this.clearComponent()))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,s=pi(t)===e;if(!i&&!s)return;const r=e.getHighlighted();let o=!1,n=!1;if(this.getParentRowCtrl().findHeaderCellCtrl((e=>e.getColumnGroupChild().isMoving()))){const e=this.beans.gos.get("enableRtl"),t=1===r,a=0===r;i&&(e?n=t:o=a),s&&(e?o=a:n=t)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",o),this.comp.addOrRemoveCssClass("ag-header-highlight-after",n)}getColumn(){return this.column}resizeHeader(e,t){if(!this.resizeFeature)return;const i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:i,column:s,ctrlsService:r}=this,{gos:o,columnModel:n,columnMoveService:a,visibleColsService:l}=t,d=o.get("enableRtl"),c=0===e,u=this.getPinned(),h=i.getBoundingClientRect(),p=h.left,g=h.width,m=Oa({x:c!==d?p-20:p+g+20,pinned:u,fromKeyboard:!0,gos:o,ctrlsService:r}),f=s.getGroupId(),v=this.focusService.getFocusedHeader();ka({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:1===e,xPosition:m,pinned:u,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:n,columnMoveService:a,visibleColsService:l,finished:!0});const C=s.getDisplayedLeafColumns(),y=c?C[0]:pi(C);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(y,"auto"),this.isAlive()&&!this.beans.gos.get("ensureDomOrder")||!v||this.restoreFocus(f,s,v)}restoreFocus(e,t,i){const s=t.getLeafColumns();if(!s.length)return;const r=s[0].getParent();if(!r)return;const o=this.findGroupWidthId(r,e);o&&this.focusService.focusHeaderPosition({headerPosition:{...i,column:o}})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){const t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:e=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),e,"gridInitializing")},setTooltip:(t,i)=>{this.setupTooltip(e,t,i)}}),i=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(i)}addHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column.getProvidedColumnGroup())})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s=this.column.getColGroupDef(),r="whenTruncated"===this.gos.get("tooltipShowMode"),o=this.eGui;i||!r||s?.headerGroupComponent||(i=()=>{const e=o.querySelector(".ag-header-group-text");return!e||e.scrollWidth>e.clientWidth});const n={getColumn:()=>this.column,getGui:()=>o,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(s&&s.headerTooltip),shouldDisplayTooltip:i};s&&(n.getColDef=()=>s),e.createManagedBean(new Ur(n))}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=ra(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every((e=>e.isSpanHeaderHeight()))&&t.push("ag-header-span-height")):(t.push("ag-header-group-cell-with-group"),e?.wrapHeaderText&&t.push("ag-header-cell-wrap-text")),t.forEach((e=>this.comp.addOrRemoveCssClass(e,!0)))}setupMovingCss(e){const t=this.column.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());t.forEach((t=>{e.addManagedListeners(t,{movingChanged:i})})),i()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const e=this.getRowIndex();this.beans.focusService.setFocusedHeader(e,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(this.expandable&&t&&e.key===co.ENTER){const e=this.column,t=!e.isExpanded();this.beans.columnModel.setColumnGroupOpened(e.getProvidedColumnGroup(),t,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving())return;if(this.removeDragSource(),!e)return;const{beans:t,column:i,displayName:s,gos:r,dragAndDropService:o}=this,{columnModel:n}=t,a=i.getProvidedColumnGroup().getLeafColumns();let l=!r.get("suppressDragLeaveHidesColumns");const d=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",dragItemName:s,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{l=!r.get("suppressDragLeaveHidesColumns"),Na(a,!0)},onDragStopped:()=>Na(a,!1),onDragCancelled:()=>Na(a,!1),onGridEnter:e=>{if(l){const{columns:t=[],visibleState:i}=e??{},s=t.filter((e=>!e.getColDef().lockVisible&&(!i||i[e.getColId()])));n.setColsVisible(s,!0,"uiColumnMoved")}},onGridExit:e=>{if(l){const t=e?.columns?.filter((e=>!e.getColDef().lockVisible))||[];n.setColsVisible(t,!1,"uiColumnMoved")}}};o.addDragSource(d,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach((e=>i[e.getId()]=e.isVisible()));const s=[];this.beans.visibleColsService.getAllCols().forEach((e=>{t.indexOf(e)>=0&&(s.push(e),fi(t,e))})),t.forEach((e=>s.push(e)));const r=[],o=e.getLeafColumns();for(const e of s)-1!==o.indexOf(e)&&r.push(e);return{columns:s,columnsInSplit:r,visibleState:i}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach((t=>{(t.getColDef().suppressMovable||t.getColDef().lockPosition)&&(e=!0)})),e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},Ua=0,ja=class extends Ai{constructor(e,t,i){super(),this.instanceId=Ua++,this.rowIndex=e,this.pinned=t,this.type=i;const s="group"==i?"ag-header-row-column-group":"filter"==i?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${s}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=It(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return!!this.comp&&this.getHeaderCellCtrls().every((e=>null!=e.getGui()))}setComp(e,t,i=!0){this.comp=e,t=Os(this,this.beans.context,t),i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",(e=>this.isEnsureDomOrder=e.currentValue)),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return Dt(this.headerCellCtrls).find((t=>t.getColumnGroupChild()===e))}onDisplayedColumnsChanged(){this.isPrintLayout=It(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleColsService:e}=this.beans;return this.isPrintLayout?null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans,i=[],s=e.getGroupRowsHeight(),r=e.getColumnHeaderRowHeight();i.push(...s),i.push(r),t?.hasFloatingFilters()&&i.push(e.getFloatingFiltersHeight());let o=0;for(let e=0;e<this.rowIndex;e++)o+=i[e];return{topOffset:o,rowHeight:i[this.rowIndex]}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const i of t)this.recycleAndCreateHeaderCtrls(i,e);const i=e=>{const{focusService:t,visibleColsService:i}=this.beans;return!!t.isHeaderWrapperFocused(e)&&i.isVisible(e.getColumnGroupChild())};if(e)for(const[t,s]of e)i(s)?this.headerCellCtrls.set(t,s):this.destroyBean(s);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls)return;if(e.isEmptyGroup())return;const i=e.getUniqueId();let s;if(t&&(s=t.get(i),t.delete(i)),s&&s.getColumnGroupChild()!=e&&(this.destroyBean(s),s=void 0),null==s)switch(this.type){case"filter":s=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break;case"group":s=this.createBean(new za(e,this.beans,this));break;default:s=this.createBean(new $a(e,this.beans,this))}this.headerCellCtrls.set(i,s)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(null!=this.pinned)return[];let e=[];const t=this.getActualDepth(),{columnViewportService:i}=this.beans;return["left",null,"right"].forEach((s=>{const r=i.getHeadersToRender(s,t);e=e.concat(r)})),e}getActualDepth(){return"filter"==this.type?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;const t=this.getHeaderCellCtrls();let i;return i="function"==typeof e?t.find(e):t.find((t=>t.getColumnGroupChild()==e)),i}focusHeader(e,t){const i=this.findHeaderCellCtrl(e);return!!i&&i.focus(t)}destroy(){this.headerCellCtrls?.forEach((e=>{this.destroyBean(e)})),this.headerCellCtrls=void 0,super.destroy()}},qa=class extends Ai{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);const i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:i,advancedFilterEnabledChanged:i});const s=`${"string"==typeof this.pinned?this.pinned:"center"}Header`;this.ctrlsService.register(s,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const t=new Wr,i=this.focusService.getFocusHeaderToUseAfterRefresh();(()=>{const e=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let i=0;i<e;i++){const e=this.createBean(new ja(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(e)}})(),(()=>{const i=t.next(),s=!(this.hidden||null!=this.columnsRowCtrl&&e&&this.columnsRowCtrl.getRowIndex()===i);(s||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),s&&(this.columnsRowCtrl=this.createBean(new ja(i,this.pinned,"column")))})(),(()=>{this.includeFloatingFilter=!!this.filterManager?.hasFloatingFilters()&&!this.hidden;const i=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void i();const s=t.next();if(this.filtersRowCtrl){const t=this.filtersRowCtrl.getRowIndex()!==s;e&&!t||i()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new ja(s,this.pinned,"filter")))})();const s=this.getAllCtrls();this.comp.setCtrls(s),this.restoreFocusOnHeader(i)}getHeaderCtrlForColumn(e){if(Zi(e))return this.columnsRowCtrl?.getHeaderCellCtrl(e);if(0!==this.groupsRowCtrls.length)for(let t=0;t<this.groupsRowCtrls.length;t++){const i=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const t=this.getAllCtrls()[e];return t?t.getType():void 0}focusHeader(e,t,i){const s=this.getAllCtrls()[e];return!!s&&s.focusHeader(t,i)}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){const t=new Ba(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;const{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const e=this.filterManager?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new Ta((e=>this.comp.setCenterWidth(`${e}px`)),!0))}setupPinnedWidth(){if(null==this.pinned)return;const e="left"===this.pinned,t="right"===this.pinned;this.hidden=!0;const i=()=>{const i=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(null==i)return;const s=0==i,r=this.hidden!==s,o=this.gos.get("enableRtl"),n=this.scrollVisibleService.getScrollbarWidth(),a=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&e||!o&&t)?i+n:i;this.comp.setPinnedContainerWidth(`${a}px`),this.comp.setDisplayed(!s),r&&(this.hidden=s,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}},Ka=class extends Ai{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e},i=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,t)}getDomLayout(){const e=this.gos.get("domLayout")??"normal";return-1===["normal","print","autoHeight"].indexOf(e)?(ct(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},Ya=class extends Kr{constructor(){super('\n            <div class="ag-overlay" role="presentation">\n                <div class="ag-overlay-panel" role="presentation">\n                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>\n                </div>\n            </div>'),this.eOverlayWrapper=qr,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==co.TAB||e.defaultPrevented||Fi(e))return;if(this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let t=!1;t=e.shiftKey?this.focusService.focusGridView(pi(this.visibleColsService.getAllCols()),!0,!1):this.focusService.focusNextGridCoreContainer(!1),t&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new Ka(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,s){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.focusService.isGridFocused()){const e=zt(this.gos);e&&!Ut(this.gos)&&(this.elToFocusAfter=e)}e.then((t=>{if(this.activePromise!==e)return void(this.activeOverlay!==t&&(this.destroyBean(t),t=null));if(this.activePromise=null,!t)return;if(this.activeOverlay!==t&&(this.eOverlayWrapper.appendChild(t.getGui()),this.activeOverlay=t,s)){const e=t;this.updateListenerDestroyFunc=this.addManagedPropertyListener(s,(({currentValue:t})=>{e.refresh?.(this.gos.addGridCommonParams({...t??{}}))}))}const r=this.focusService;i&&r.isGridFocused()&&r.focusInto(this.eOverlayWrapper)}))}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.focusService.isGridFocused()&&(t=null);const i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),Tr(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},Qa=class extends Kr{constructor(e,t){super(),this.direction=t,this.eViewport=qr,this.eContainer=qr,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",cr()||ur())}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=mr(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame((()=>this.setScrollVisible()))}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(null!==this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout((()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null}),400)}})}attemptSettingScrollPosition(e){const t=this.getViewportElement();!function(e,t,i=100,s){const r=(new Date).getTime();let o=null,n=!1;const a=()=>{const a=(new Date).getTime()-r>i;(e()||a)&&(t(),n=!0,null!=o&&(window.clearInterval(o),o=null),a&&s&&ct(s))};a(),n||(o=window.setInterval(a,10))}((()=>kr(t)),(()=>this.setScrollPosition(e)),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},Ja=class extends Qa{constructor(){super('<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>\n        </div>',"horizontal"),this.eLeftSpacer=qr,this.eRightSpacer=qr}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new Ta((e=>this.eContainer.style.width=`${e}px`))),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.visibleColsService.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,s=this.scrollVisibleService.getScrollbarWidth();i&&(t+=s),Nr(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=s);let r=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(r+=s),Nr(this.eLeftSpacer,r),this.eLeftSpacer.classList.toggle("ag-scroller-corner",r<=s)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),s=e&&this.scrollVisibleService.getScrollbarWidth()||0,r=i?0:0===s&&t?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Gr(this.getGui(),r),Gr(this.eViewport,r),Gr(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return Dr(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){kr(this.getViewportElement())||this.attemptSettingScrollPosition(e),Ar(this.getViewportElement(),e,this.enableRtl)}},Xa=class extends Ai{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=null!=e?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},Za=class extends Qa{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super('<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>\n            </div>\n        </div>',"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new Xa(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.scrollVisibleService.getScrollbarWidth()||0,s=0===i&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Nr(this.getGui(),s),Nr(this.eViewport,s),Nr(this.eContainer,s),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,t=e.getGridBodyCtrl().getBodyViewportElement(),i=this.getScrollPosition(),s=t.scrollTop;i!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,t){t||kr(this.getViewportElement())||this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}},el=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(el||{}),tl=class extends Ai{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=ft((()=>this.lastScrollSource[1]=null),500),this.resetLastVScrollDebounced=ft((()=>this.lastScrollSource[0]=null),500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,(e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()}))}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(const e of Object.values(el)){const t=this.ctrlsService.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsService.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?ft(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),s=t?ft(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,s)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){null==this.centerRowsCtrl||(void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...Object.values(el),"Viewport"])this.lastScrollSource[1]!==t&&Ar(this.getViewportForSource(t),e,this.enableRtl)}getViewportForSource(e){return"Viewport"===e?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(0===t?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const s=Dr(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(Math.round(s)),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;t="Viewport"===e?this.eBodyViewport.scrollTop:this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0)||(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,"Viewport"===e?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:1===e?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout((()=>{this.eventService.dispatchEvent({...t,type:"bodyScrollEnd"})}),100)}shouldBlockScrollUpdate(e,t,i=!1){return!(i&&!ur())&&(0===e?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){const t=br(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&xr()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){const i=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(e=this.enableRtl&&xr()?e>0?0:i:Math.min(Math.max(e,0),i)),Ar(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const i=this.rowModel.getRowCount();let s=-1;for(let t=0;t<i;t++){const i=this.rowModel.getRow(t);if("function"==typeof e){if(i&&e(i)){s=t;break}}else if(e===i||e===i.data){s=t;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t){if(It(this.gos,"print"))return;const i=this.rowModel.getRowCount();if("number"!=typeof e||e<0||e>=i)return void ct("Invalid row index for ensureIndexVisible: "+e);const s=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming((()=>{s||this.paginationService?.goToPageWithIndex(e);const i=this.ctrlsService.getGridBodyCtrl(),r=i.getStickyTopHeight(),o=i.getStickyBottomHeight(),n=this.rowModel.getRow(e);let a;do{const e=n.rowTop,i=n.rowHeight,s=this.pageBoundsService.getPixelOffset(),l=n.rowTop-s,d=l+n.rowHeight,c=this.getVScrollPosition(),u=this.heightScaler.getDivStretchOffset(),h=c.top+u,p=c.bottom+u,g=p-h,m=this.heightScaler.getScrollPositionForPixel(l),f=this.heightScaler.getScrollPositionForPixel(d-g),v=Math.min((m+f)/2,l);let C=null;"top"===t?C=m:"bottom"===t?C=f:"middle"===t?C=v:h+r>l?C=m-r:p-o<d&&(C=f+o),null!==C&&(this.setVerticalScrollPosition(C),this.rowRenderer.redraw({afterScroll:!0})),a=e!==n.rowTop||i!==n.rowHeight}while(a);this.animationFrameService.flushAllFrames()}))}ensureColumnVisible(e,t="auto"){const i=this.columnModel.getCol(e);if(!i)return;if(i.isPinned())return;if(!this.visibleColsService.isColDisplayed(i))return;const s=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming((()=>{null!==s&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}))}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming((()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()}))}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(e),r=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),n=this.enableRtl;let a=(n?i:s)||r,l=n?s:i;"auto"!==t&&(a="start"===t,l="end"===t);const d="middle"===t;if(a||l||d){const{colLeft:t,colMiddle:i,colRight:s}=this.getColumnBounds(e);return d?i-o/2:a?n?s:t:n?t-o:s-o}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:s,colRight:r}=this.getColumnBounds(e),o=this.enableRtl;return{columnBeforeStart:o?t>r:i<r,columnAfterEnd:o?i<s:t>s}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleColsService.getBodyContainerWidth(),s=e.getActualWidth(),r=e.getLeft(),o=t?-1:1,n=t?i-r:r;return{colLeft:n,colMiddle:n+s/2*o,colRight:n+s*o}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}},il=class extends Ai{wireBeans(e){this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()})),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],(()=>{this.checkViewportAndScrolls()}))}listenForResize(){const e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=Rr(this.gridBodyCtrl.getBodyViewportElement());if(e<=50)return;let t=this.getPinnedColumnsOverflowingViewport(e-50);const i=this.gos.getCallback("processUnpinnedColumns");t.length&&(i&&(t=i({columns:t,viewportWidth:e})),this.columnModel.setColsPinned(t,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth()+this.pinnedWidthService.getPinnedLeftWidth();if(t<e)return[];const i=[...this.visibleColsService.getLeftCols()],s=[...this.visibleColsService.getRightCols()];let r=0,o=0;const n=[];let a=t-0-e;for(;(o<i.length||r<s.length)&&a>0;){if(r<s.length){const e=s[r++];a-=e.getActualWidth(),n.push(e)}if(o<i.length&&a>0){const e=i[o++];a-=e.getActualWidth(),n.push(e)}}return n}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=br(this.gridBodyCtrl.getBodyViewportElement());this.bodyHeight!==e&&(this.bodyHeight=e,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},sl=class extends Ai{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){this.rangeService&&(this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],(()=>{si(this.gos)?this.enableFeature():this.disableFeature()})),this.addDestroyFunc((()=>this.disableFeature())),si(this.gos)&&this.enableFeature())}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},rl=class extends Kr{constructor(){super('\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[mo]),this.eCheckbox=qr}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=or(e,t),[s,r]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],o=e(s,r);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${o} (${i})`)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:e=>Ei(e),click:e=>{Ei(e);const t="filteredDescendants"===ci(this.gos),i=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(i,t)?0===this.onClicked(!0,t,e||{})&&this.onClicked(!1,t,e):i?this.onClicked(!1,t,e):this.onClicked(!0,t,e||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),ai(this.gos)||"function"==typeof this.getIsVisible()){const e=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(void 0===this.eCheckbox.getPreviousValue()||void 0===e)&&Tt(this.gos)}showOrHideSelect(){let e=this.rowNode.selectable;const t=this.getIsVisible();if(e)if("function"==typeof t){const i=this.overrides?.callbackParams;if(this.column){const s=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t({...i,...s})}else e=t({...i,node:this.rowNode,data:this.rowNode.data})}else e=t??!1;const i=this.gos.get("rowSelection");var s;if(i&&"string"!=typeof i?(s=i,!s?.hideDisabledCheckboxes):this.column?.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!e),this.setVisible(!0),void this.setDisplayed(!0);this.overrides?.removeHidden?this.setDisplayed(e):this.setVisible(e)}getIsVisible(){if(this.overrides)return this.overrides.isVisible;const e=this.gos.get("rowSelection");return e&&"string"!=typeof e?ti(e):this.column?.getColDef()?.checkboxSelection}},ol=class extends Kr{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(Jr("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",(e=>{e.stopPropagation()})),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);t?t(this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e})):(()=>{try{const t=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",t),e.dataTransfer.setData("text/plain",t)}catch(e){}})()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},nl=class extends Ai{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,(e=>this.cellComp.addOrRemoveCssClass(e,!0)),(e=>this.cellComp.addOrRemoveCssClass(e,!1))),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if("function"==typeof e.cellStyle){const i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex});t=(0,e.cellStyle)(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach((e=>this.cellComp.addOrRemoveCssClass(e,!1))),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach((e=>this.cellComp.addOrRemoveCssClass(e,!0)))}destroy(){super.destroy()}},al=class extends Ai{constructor(e,t,i,s,r){super(),this.cellCtrl=e,this.beans=t,this.rowNode=s,this.rowCtrl=r}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case co.ENTER:this.onEnterKeyDown(e);break;case co.F2:this.onF2KeyDown(e);break;case co.ESCAPE:this.onEscapeKeyDown(e);break;case co.TAB:this.onTabKeyDown(e);break;case co.BACKSPACE:case co.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case co.DOWN:case co.UP:case co.RIGHT:case co.LEFT:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:s,rowNode:r}=this,{gos:o,rangeService:n,eventService:a}=s;if(!i.isEditing()){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),function(e,t=!1){return e===co.DELETE||!t&&e===co.BACKSPACE&&cr()}(e,o.get("enableCellEditingOnBackspace"))){if(n&&si(o))n.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const e=i.getColumn(),t=this.beans.valueService.getDeleteValue(e,r);r.setDataValue(e,t,"cellClear")}}else i.startRowOrCellEdit(e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const t=e.shiftKey?co.UP:co.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(co.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(co.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const t=e.key;" "===t?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(t,e)&&e.preventDefault()}onSpaceKeyDown(e){const{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&kt(t)){const i=this.rowNode.isSelected(),s=!i,r="filteredDescendants"===ci(t),o=this.rowNode.setSelectedParams({newValue:s,rangeSelect:e.shiftKey,groupSelectsFiltered:r,event:e,source:"spaceKey"});void 0===i&&0===o&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:r,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},ll=class extends Ai{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!Fi(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(e),void e.preventDefault();const{eventService:t,rangeService:i,gos:s}=this.beans,r=e.ctrlKey||e.metaKey;i&&r&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const o=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(o);const n=this.column.getColDef();n.onCellClicked&&window.setTimeout((()=>{this.beans.frameworkOverrides.wrapOutgoing((()=>{n.onCellClicked(o)}))}),0),!s.get("singleClickEdit")&&!n.singleClickEdit||s.get("suppressClickEdit")||e.shiftKey&&0!=i?.getCellRanges().length||this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!ur()||Pi("dblclick"))return!1;const e=(new Date).getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:s}=this,{eventService:r,frameworkOverrides:o,gos:n}=i,a=t.getColDef(),l=s.createEvent(e,"cellDoubleClicked");r.dispatchEvent(l),"function"==typeof a.onCellDoubleClicked&&window.setTimeout((()=>{o.wrapOutgoing((()=>{a.onCellDoubleClicked(l)}))}),0),!n.get("singleClickEdit")&&!n.get("suppressClickEdit")&&s.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:s}=e,r=e.target,{cellCtrl:o,beans:n}=this,{eventService:a,rangeService:l,focusService:d,gos:c}=n;if(this.isRightClickInExistingRange(e))return;const u=l&&0!=l.getCellRanges().length;if(!s||!u){const t=c.get("enableCellTextSelection")&&e.defaultPrevented,i=(nr()||t)&&!o.isEditing()&&!vr(r);o.focusCell(i)}if(s&&u&&!d.isCellFocused(o.getCellPosition())){e.preventDefault();const t=d.getFocusedCell();if(t){const{column:e,rowIndex:i,rowPinned:s}=t,r=n.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:s}),o=r?.getCellCtrl(e);o?.isEditing()&&o.stopEditing(),d.setFocusedCell({column:e,rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(r)){if(l){const e=this.cellCtrl.getCellPosition();if(s)l.extendLatestRangeToCell(e);else{const s=t||i;l.setRangeToCell(e,s)}}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),s=2===e.button||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&s)return!0}return!1}containsWidget(e){return wr(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),i=t.contains(e.target),s=t.contains(e.relatedTarget);return i&&s}destroy(){super.destroy()}},dl=class extends Ai{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();gi(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce(((e,t)=>e+t.getActualWidth()),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(1===e)t.push(this.column);else{let i=this.column;const s=this.column.getPinned();for(let r=0;i&&r<e&&(t.push(i),i=this.beans.visibleColsService.getColAfter(i),i&&!wt(i))&&s===i.getPinned();r++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gos.get("enableRtl")&&this.colsSpanning?pi(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||"left"===this.column.getPinned())return e;const t=this.beans.visibleColsService.getColsLeftWidth();return"right"===this.column.getPinned()?t+this.beans.visibleColsService.getBodyContainerWidth()+(e||0):t+(e||0)}applyRowSpan(e){if(1===this.rowSpan&&!e)return;const t=Gt(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${t}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},cl="ag-cell-range-selected",ul=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(cl,0!==this.rangeCount),this.cellComp.addOrRemoveCssClass(`${cl}-1`,1===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${cl}-2`,2===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${cl}-3`,3===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${cl}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),rr(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,s=!t&&e.right,r=!t&&e.bottom,o=!t&&e.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",i),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",s),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",r),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",o)}isSingleCell(){const{rangeService:e}=this.beans;return 1===this.rangeCount&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every((e=>yi([1,0],e.type)))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,i=!1,s=!1,r=!1;const o=this.cellCtrl.getCellPosition().column,n=this.beans.visibleColsService;let a,l;e?(a=n.getColAfter(o),l=n.getColBefore(o)):(a=n.getColBefore(o),l=n.getColAfter(o));const d=this.rangeService.getCellRanges().filter((e=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),e)));a||(r=!0),l||(i=!0);for(let e=0;e<d.length&&!(t&&i&&s&&r);e++){const o=d[e],n=this.rangeService.getRangeStartRow(o),c=this.rangeService.getRangeEndRow(o);!t&&this.beans.rowPositionUtils.sameRow(n,this.cellCtrl.getCellPosition())&&(t=!0),!s&&this.beans.rowPositionUtils.sameRow(c,this.cellCtrl.getCellPosition())&&(s=!0),!r&&a&&o.columns.indexOf(a)<0&&(r=!0),!i&&l&&o.columns.indexOf(l)<0&&(i=!0)}return{top:t,right:i,bottom:s,left:r}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeService.getCellRanges(),i=t.length;if(this.rangeCount<1||i<1)return!1;const s=pi(t),r=this.cellCtrl.getCellPosition(),o=ri(e)&&!this.cellCtrl.isSuppressFillHandle(),n=function(e){const t=e.get("cellSelection");return void 0!==t?"boolean"!=typeof t&&"range"===t.handle?.mode:e.get("enableRangeHandle")}(e);let a=1===i&&!this.cellCtrl.isEditing()&&(o||n);if(this.hasChartRange){const e=1===t[0].type&&this.rangeService.isCellInSpecificRange(r,t[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",e),a=0===s.type}return a&&null!=s.endRow&&this.rangeService.isContiguousRange(s)&&this.rangeService.isBottomRightCell(s,r)}addSelectionHandle(){const e=pi(this.rangeService.getCellRanges()).type,t=ri(this.beans.gos)&&wt(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(t)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},hl=0,pl=class e extends Ai{constructor(e,t,i,s){super(),this.column=e,this.rowNode=t,this.beans=i,this.rowCtrl=s,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=e.getId()+"-"+hl++,this.colIdSanitised=fs(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new dl(this,this.beans),this.cellCustomStyleFeature=new nl(this,this.beans),this.cellMouseListenerFeature=new ll(this,this.beans,this.column),this.cellKeyboardListenerFeature=new al(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature(),this.beans.rangeService&&si(this.beans.gos)&&(this.cellRangeFeature=new ul(this.beans,this))}removeFeatures(){const e=this.beans.context;this.cellPositionFeature=e.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=e.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=e.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=e.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=e.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){const i="whenTruncated"===this.beans.gos.get("tooltipShowMode");t||!i||this.isCellRenderer()||(t=()=>{const e=this.getGui(),t=0===e.children.length?e:e.querySelector(".ag-cell-value");return!t||t.scrollWidth>t.clientWidth});const s={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:null!=e?()=>e:()=>{const e=this.column.getColDef(),t=this.rowNode.data;if(e.tooltipField&&yt(t))return Ki(t,e.tooltipField,this.column.isTooltipFieldContainsDots());const i=e.tooltipValueGetter;return i?i(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:t};this.tooltipFeature=new Ur(s,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(e,t,i,s,r,o){this.cellComp=e,this.eGui=t,this.printLayout=s,o??(o=this),this.addDomData(o),this.addFeatures(),o.addDestroyFunc((()=>this.removeFeatures())),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,o),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.cellPositionFeature?.setComp(t),this.cellCustomStyleFeature?.setComp(e),this.tooltipFeature?.refreshToolTip(),this.cellKeyboardListenerFeature?.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,t),r&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach((e=>e())),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e,t){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!e)return;const i=e.parentElement,s=Nt(this.beans.gos,this.rowNode).height,r=o=>{if(this.editing)return;if(!this.isAlive()||!t.isAlive())return;const{paddingTop:n,paddingBottom:a,borderBottomWidth:l,borderTopWidth:d}=Sr(i),c=n+a+l+d,u=e.offsetHeight+c;if(o<5){const t=$t(this.beans.gos);if(!t||!t.contains(e)||0==u)return void window.setTimeout((()=>r(o+1)),0)}const h=Math.max(u,s);this.rowNode.setRowAutoHeight(h,this.column)},o=()=>r(0);o();const n=this.beans.resizeObserverService.observeResize(e,o);t.addDestroyFunc((()=>{n(),this.rowNode.setRowAutoHeight(void 0,this.column)}))}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return null!=e.cellRenderer||null!=e.cellRendererSelector}getValueToDisplay(){return this.valueFormatted??this.value}showValue(e=!1){const t=this.getValueToDisplay();let i;if(this.rowNode.stub&&null==this.rowNode.groupData?.[this.column.getId()]){const e=this.createCellRendererParams();i=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),e)}else if(this.isCellRenderer()){const e=this.createCellRendererParams();i=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),e)}this.cellComp.setRenderDetails(i,t,e),this.cellRangeFeature?.refreshHandle()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e)),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return!(null!=this.rowNode.rowPinned||"function"!=typeof e&&!0!==e)}isCheckboxSelection(e){const{rowSelection:t}=this.beans.gridOptions;return e.checkboxSelection||Vi(this.column)&&t&&"string"!=typeof t&&ti(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e)),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),s=this.includeDndSource!=this.isIncludeControl(e.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return t||i||s||r}startEditing(e=null,t=!1,i=null){const{editService:s}=this.beans;return!(this.isCellEditable()&&!this.editing&&s)||(this.cellComp?s.startEditing(this,e,t,i):(this.onCellCompAttachedFuncs.push((()=>{this.startEditing(e,t,i)})),!0))}setEditing(e,t){this.editCompDetails=t,this.editing!==e&&(this.editing=e,this.cellRangeFeature?.refreshHandle())}stopRowOrCellEdit(e=!1){"fullRow"===this.beans.gos.get("editType")?this.rowCtrl.stopEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(e=!1){this.onCellEditorAttachedFuncs=[];const{editService:t}=this.beans;return!(!this.editing||!t)&&t.stopEditing(this,e)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:e=>this.beans.valueService.setValue(this.rowNode,this.column,e),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(e,t,i,s)=>this.registerRowDragger(e,t,s),setTooltip:(e,t)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),this.tooltipFeature?.refreshToolTip()}})}setFocusOutOnEditor(){this.editing&&this.beans.editService?.setFocusOutOnEditor(this)}setFocusInOnEditor(){this.editing&&this.beans.editService?.setFocusInOnEditor(this)}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e)}refreshCell(e){if(this.suppressRefreshCell||this.editing)return;const t=this.column.getColDef(),i=null!=e&&!!e.newData,s=null!=e&&!!e.suppressFlash||!!t.suppressCellFlash,r=null==t.field&&null==t.valueGetter&&null==t.showRowGroup,o=e&&e.forceRefresh||r||i,n=!!this.cellComp,a=this.updateAndFormatValue(n);if(n){if(o||a){this.showValue(i);const e=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!s&&!e&&(this.beans.gos.get("enableCellChangeFlash")||t.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature?.applyUserStyles(),this.cellCustomStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshToolTip(),this.cellCustomStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(e=!1,t=!1){this.beans.editService?.stopEditingAndFocus(this,e,t)}flashCell(e){const t=e?.flashDuration??e?.flashDelay,i=e?.fadeDuration??e?.fadeDelay;this.animateCell("data-changed",t,i)}animateCell(e,t,i){if(!this.cellComp)return;const{gos:s}=this.beans;if(t||(t=s.get("cellFlashDuration")),0===t)return;yt(i)||(i=s.get("cellFadeDuration"));const r=`ag-cell-${e}`,o=`ag-cell-${e}-animation`;this.cellComp.addOrRemoveCssClass(r,!0),this.cellComp.addOrRemoveCssClass(o,!1),this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.cellComp.addOrRemoveCssClass(o,!0),this.eGui.style.transition=`background-color ${i}ms`,window.setTimeout((()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.eGui.style.transition="")}),i))}),t)}))}onFlashCells(e){if(!this.cellComp)return;const t=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[t]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,i=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),!e||!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}getComp(){return this.cellComp}getValue(){return this.value}addDomData(t){const i=this.getGui();Ht(this.beans.gos,i,e.DOM_DATA_KEY_CELL_CTRL,this),t.addDestroyFunc((()=>Ht(this.beans.gos,i,e.DOM_DATA_KEY_CELL_CTRL,null)))}createEvent(e,t){return this.beans.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex})}processCharacter(e){this.cellKeyboardListenerFeature?.processCharacter(e)}onKeyDown(e){this.cellKeyboardListenerFeature?.onKeyDown(e)}onMouseEvent(e,t){this.cellMouseListenerFeature?.onMouseEvent(e,t)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){this.cellComp&&this.cellPositionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:e,column:t,beans:i}=this;oa(e,t,i.visibleColsService)}refreshAriaColIndex(){const e=this.beans.visibleColsService.getAriaColIndex(this.column);sr(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){return this.cellPositionFeature?.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e,t=null){return this.cellComp?"fullRow"===this.beans.gos.get("editType")?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,t):(this.onCellCompAttachedFuncs.push((()=>{this.startRowOrCellEdit(e,t)})),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return null!=this.cellRangeFeature}focusCell(e=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(e){this.eGui&&Hr(this.eGui,"tabindex",e?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;const e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",e)}onCellFocused(e){if(this.beans.focusService.isCellFocusSuppressed())return;const t=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp)return void(t&&e?.forceBrowserFocus&&(this.focusEventToRestore=e));if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass("ag-cell-focus",t),t&&e&&e.forceBrowserFocus){let t=this.cellComp.getFocusableElement();if(this.editing){const e=this.beans.focusService.findFocusableElements(t,null,!0);e.length&&(t=e[0])}t.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}const i="fullRow"===this.beans.gos.get("editType");t||i||!this.editing||this.stopRowOrCellEdit(),t&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Ct(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);const e=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",e),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!e)}onColumnHover(){if(!this.cellComp)return;if(!this.beans.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",e)}onColDefChanged(){this.cellComp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editService?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0}))}setWrapText(){const e=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu");this.beans.eventService.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout((()=>{this.beans.frameworkOverrides.wrapOutgoing((()=>{t.onCellContextMenu(i)}))}),0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const e=new rl;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=new ol(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(e,t);const s=this.createRowDragComp(e,t,i);s&&(this.customRowDragComp=s,this.addDestroyFunc((()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null})))}createRowDragComp(e,t,i){const s=this.beans.gos.get("pagination"),r=this.beans.gos.get("rowDragManaged"),o=Tt(this.beans.gos);if(r){if(!o)return void ct("managed row dragging is only allowed in the Client Side Row Model");if(s)return void ct("managed row dragging is not possible when doing pagination")}const n=new an((()=>this.value),this.rowNode,this.column,e,t,i);return this.beans.context.createBean(n),n}setSuppressRefreshCell(e){this.suppressRefreshCell=e}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(e){this.onCellEditorAttachedFuncs.push(e)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach((e=>e())),this.onCellEditorAttachedFuncs=[]}};pl.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var gl=pl,ml=0,fl=class e extends Ai{constructor(e,t,i,s,r){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=t,this.gos=t.gos,this.rowNode=e,this.paginationPage=t.paginationService?.getCurrentPage()??0,this.useAnimationFrameForCreate=s,this.printLayout=r,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+ml++,this.rowId=fs(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=t.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!=typeof this.businessKeyForNodeFunc)return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=fs(e)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(e,t){"left"===e?this.leftGui=t:"right"===e?this.rightGui=t:"fullWidth"===e?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i,s){const r={rowComp:e,element:t,containerType:i,compBean:s=Os(this,this.beans.context,s)};this.allRowGuis.push(r),this.updateGui(i,r),this.initialiseRowComp(r),"FullWidthLoading"===this.rowType||this.rowNode.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter((t=>t.containerType!==e)),this.updateGui(e,void 0)}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach((e=>e.element.style.display=t))}initialiseRowComp(t){const i=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),kt(i)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const s=t.rowComp;this.getInitialRowClasses(t.containerType).forEach((e=>s.addOrRemoveCssClass(e,!0))),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&ir(t.element,1==this.rowNode.expanded),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),Ht(i,t.element,e.DOM_DATA_KEY_ROW_CTRL,this),t.compBean.addDestroyFunc((()=>Ht(i,t.element,e.DOM_DATA_KEY_ROW_CTRL,null))),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask((()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)})),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){null!=this.businessKeySanitised&&e.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(e){this.rowId=fs(this.rowNode.id),null!=this.rowId&&e.setRowId(this.rowId)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(mt((()=>{this.onTopChanged()})),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(mt((()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)})),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){if(si(this.gos))return void ct("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");const t=this.beans.localeService.getLocaleTextFunc(),i=new an((()=>`1 ${t("rowDragRow","row")}`),this.rowNode,void 0,e.element,void 0,!0),s=this.createBean(i,this.beans.context);this.rowDragComps.push(s),e.compBean.addDestroyFunc((()=>{this.rowDragComps=this.rowDragComps.filter((e=>e!==s)),this.destroyBean(s,this.beans.context)}))}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType);if("FullWidthDetail"==this.rowType&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;const i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map((e=>e?.rowComp?.getFullWidthCellRenderer())):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}getCellElement(e){const t=this.getCellCtrl(e);return t?t.getGui():null}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");e&&this.areAllContainersReady()&&e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const e=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),t=!!this.centerGui,i=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return e&&t&&i}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this.rowNode})}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,s=this.beans.columnModel.isPivotMode(),r=!!this.rowNode.group&&!this.rowNode.footer&&Zt(this.gos,s);this.rowType=e?"FullWidthLoading":i?"FullWidthDetail":t?"FullWidth":r?"FullWidthGroup":"Normal"}updateColumnLists(e=!1,t=!1){this.isFullWidth()||(e||this.gos.get("suppressAnimationFrame")||this.printLayout?this.updateColumnListsImpl(t):this.updateColumnListsPending||(this.beans.animationFrameService.createTask((()=>{this.active&&this.updateColumnListsImpl(!0)}),this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0))}createCellCtrls(e,t,i=null){const s={list:[],map:{}},r=(e,t)=>{s.list.push(t),s.map[e]=t};return t.forEach((t=>{const i=t.getInstanceId();let s=e.map[i];s||(s=new gl(t,this.rowNode,this.beans,this)),r(i,s)})),e.list.forEach((e=>{const t=e.getColumn().getInstanceId();null==s.map[t]&&(this.isCellEligibleToBeRemoved(e,i)?e.destroy():r(t,e))})),s}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach((t=>{const i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)}))}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.columnViewportService,t=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const s=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");const r=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(e,t){const i=!0;if(e.getColumn().getPinned()!=t)return i;const s=e.isEditing(),r=this.beans.focusService.isCellFocused(e.getCellPosition());if(s||r){const t=e.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(t)>=0)&&i}return i}getDomOrder(){return this.gos.get("ensureDomOrder")||It(this.gos,"print")}listenOnDomOrder(e){e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],(()=>{e.rowComp.setDomOrder(this.getDomOrder())}))}setAnimateFlags(e){if(this.isSticky()||!e)return;const t=yt(this.rowNode.oldRowTop),i=this.beans.visibleColsService.isPinningLeft(),s=this.beans.visibleColsService.isPinningRight();if(t){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(this.slideInAnimation.fullWidth=!0);this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=s}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(this.fadeInAnimation.fullWidth=!0);this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=s}}isEditing(){return this.editingRow}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){const e=(e,t)=>!e||e.rowComp.refreshFullWidth((()=>this.createFullWidthCompDetails(e.element,t).params)),t=e(this.fullWidthGui,null),i=e(this.centerGui,null),s=e(this.leftGui,"left"),r=e(this.rightGui,"right");return t&&i&&s&&r}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc((()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))})),this.addManagedPropertyListeners(["rowDragEntireRow"],(()=>{this.gos.get("rowDragEntireRow")?this.allRowGuis.forEach((e=>{this.addRowDraggerToRow(e)})):this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)})),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onRowIndexChanged()))},cellChanged:e=>{this.getAllCellCtrls().forEach((t=>t.onCellChanged(e)))}})}onRowNodeDataChanged(e){this.isFullWidth()!==!!this.isNodeFullWidthCell()?this.beans.rowRenderer.redrawRow(this.rowNode):this.isFullWidth()?this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode):(this.getAllCellCtrls().forEach((t=>t.refreshCell({suppressFlash:!e.update,newData:!e.update}))),this.allRowGuis.forEach((e=>{this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp)})),this.onRowSelected(),this.postProcessCss())}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach((t=>{const i=0===e,s=1===e;t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)}))}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",e)))}updateExpandedCss(){const e=this.rowNode.isExpandable(),t=1==this.rowNode.expanded;this.allRowGuis.forEach((i=>{i.rowComp.addOrRemoveCssClass("ag-row-group",e),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&t),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!t),ir(i.element,e&&t)}))}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Ct(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(e){return this.allRowGuis.find((t=>t.element.contains(e)))}onKeyboardNavigate(e){const t=this.findFullWidthRowGui(e.target);if((t?t.element:null)!==e.target)return;const i=this.rowNode,s=this.beans.focusService.getFocusedCell(),r={rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:s?.column??this.getColumnForFullWidth(t)};this.beans.navigationService.navigateToNextCell(e,e.key,r,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||Fi(e))return;const t=this.allRowGuis.find((t=>t.element.contains(e.target))),i=t?t.element:null,s=i===e.target,r=zt(this.gos);let o=!1;i&&r&&(o=i.contains(r)&&r.classList.contains("ag-cell"));let n=null;s||o||(n=this.beans.focusService.findNextFocusableElement(i,!1,e.shiftKey)),(this.isFullWidth()&&s||!n)&&this.beans.navigationService.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const e=this.allRowGuis.find((e=>kr(e.element)))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:-1;this.allRowGuis.forEach((e=>{Hr(e.element,"tabindex",t)}))}onFullWidthRowFocused(e){const t=this.rowNode,i=!!e&&this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned,s=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;s&&(s.classList.toggle("ag-full-width-focus",i),i&&e?.forceBrowserFocus&&s.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};return e.list.forEach((e=>{e!==t&&(i.list.push(e),i.map[e.getColumn().getInstanceId()]=e)})),i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(e,t){return this.gos.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:t})}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){Fi(e)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",e))}getColumnForFullWidth(e){const{visibleColsService:t}=this.beans;switch(e?.containerType){case"center":return t.getCenterCols()[0];case"left":return t.getLeftCols()[0];case"right":return t.getRightCols()[0];default:return t.getAllCols()[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=wr(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();const i=this.findFullWidthRowGui(e.target),s=i?.element,r=e.target;let o=!0;s&&s.contains(r)&&vr(r)&&(o=!1),this.beans.focusService.setFocusedCell({rowIndex:t.rowIndex,column:this.getColumnForFullWidth(i),rowPinned:t.rowPinned,forceBrowserFocus:o})}onRowClick(e){if(Fi(e)||this.lastMouseDownOnDragger)return;const{gos:t}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",e));const i=e.ctrlKey||e.metaKey,s=e.shiftKey,r=this.rowNode.isSelected();if(ui(t)&&this.rowNode.group||this.isRowSelectionBlocked()||!function(e){const t=oi(e);return!0===t||"enableSelection"===t}(t)&&!r||!ni(t)&&r)return;const o=function(e){const t=e.get("rowSelection");return"string"==typeof t?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}(t),n=ni(t),a="rowClicked";if(r)o?this.rowNode.setSelectedParams({newValue:!1,event:e,source:a}):i?n&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:a}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!s,rangeSelect:s,event:e,source:a});else{const t=!o&&!i;this.rowNode.setSelectedParams({newValue:!0,clearSelection:t,rangeSelect:s,event:e,source:a})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!kt(this.gos)}setupDetailRowAutoHeight(e){if("FullWidthDetail"!==this.rowType)return;if(!this.gos.get("detailRowAutoHeight"))return;const t=()=>{const t=e.clientHeight;if(null!=t&&t>0){const e=()=>{this.rowNode.setRowHeight(t),(Tt(this.gos)||Mt(this.gos))&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(e,0)}},i=this.beans.resizeObserverService.observeResize(e,t);this.addDestroyFunc(i),t()}createFullWidthCompDetails(e,t){const{gos:i,rowNode:s}=this,r=i.addGridCommonParams({fullWidth:!0,data:s.data,node:s,value:s.key,valueFormatted:s.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,i,s)=>this.addFullWidthRowDragging(e,t,i,s),setTooltip:(e,t)=>this.refreshRowTooltip(e,t)}),o=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return o.getFullWidthDetailCellRendererDetails(r);case"FullWidthGroup":return o.getFullWidthGroupCellRendererDetails(r);case"FullWidthLoading":return o.getFullWidthLoadingCellRendererDetails(r);default:return o.getFullWidthCellRendererDetails(r)}}refreshRowTooltip(e,t){if(!this.fullWidthGui)return;const i={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>e,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:t};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Ur(i,this.beans))}addFullWidthRowDragging(e,t,i="",s){if(!this.isFullWidth())return;const r=new an((()=>i),this.rowNode,void 0,e,t,s);this.createBean(r,this.beans.context),this.addDestroyFunc((()=>{this.destroyBean(r,this.beans.context)}))}onUiLevelChanged(){const e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach((e=>{e.rowComp.addOrRemoveCssClass(t,!0),e.rowComp.addOrRemoveCssClass(i,!1)}))}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-first",e)))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-row-last",t))))}stopEditing(e=!1){this.stoppingRowEdit||this.beans.rowEditService?.stopEditing(this,e)}setInlineEditingCss(){const e=this.editingRow||this.getAllCellCtrls().some((e=>e.isEditing()));this.allRowGuis.forEach((t=>{t.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),t.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)}))}setEditingRow(e){this.editingRow=e}startRowEditing(e=null,t=null,i=null){return!!this.editingRow||(this.beans.rowEditService?.startEditing(this,e,t,i)??!0)}getAllCellCtrls(){return 0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);e&&e.length&&e.forEach((e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}))}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}),(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!1)))}))}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,(e=>e.rowComp.setUserStyles(this.rowStyles)))}getPinnedForContainer(e){return"left"===e||"right"===e?e:null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2==0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:t};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)}processStylesFromGridOptions(){const e=this.gos.get("rowStyle");if(e&&"function"==typeof e)return void ct("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");const t=this.gos.getCallback("getRowStyle");let i;return t&&(i=t({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex})),i||e?Object.assign({},e,i):this.emptyStyle}onRowSelected(e){const t=!!this.rowNode.isSelected();this.forEachGui(e,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-selected",t),rr(e.element,t),!e.element.contains(zt(this.gos))||e!==this.centerGui&&e!==this.fullWidthGui||this.announceDescription()}))}announceDescription(){if(this.isRowSelectionBlocked())return;const e=this.rowNode.isSelected();if(e&&!ni(this.gos))return;const t=this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(t,"rowSelection")}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:i}=e,{rowNode:s,beans:r,gos:o}=this;i.addManagedListeners(t,{mouseenter:()=>s.onMouseEnter(),mouseleave:()=>s.onMouseLeave()}),i.addManagedListeners(s,{mouseEnter:()=>{r.dragService.isDragging()||o.get("suppressRowHoverHighlight")||(t.classList.add("ag-row-hover"),s.setHovered(!0))},mouseLeave:()=>{t.classList.remove("ag-row-hover"),s.setHovered(!1)}})}roundRowTopToBounds(e){const t=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,s=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(i,e),s)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}onRowHeightChanged(e){if(null==this.rowNode.rowHeight)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),s=Ot(this.gos)?Nt(this.gos,this.rowNode).height:void 0,r=s?Math.min(i,s)-2+"px":void 0;this.forEachGui(e,(e=>{e.element.style.height=`${t}px`,r&&e.element.style.setProperty("--ag-line-height",r)}))}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}destroyFirstPass(e=!1){if(this.active=!1,!e&&jt(this.gos)&&!this.isSticky())if(null!=this.rowNode.rowTop){const e=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(e)}else this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)));this.rowNode.setHovered(!1);const t=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(t),this.beans.eventService.dispatchEvent(t),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const e=e=>(e.list.forEach((e=>e.destroy())),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),e.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)}))}onCellFocusChanged(){const e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const e=this.beans.paginationService?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){return this.rowNode.isRowPinned()||this.rowNode.sticky?e:e+this.beans.pageBoundsService.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&yt(e)){const t=this.applyPaginationOffset(e),i=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeightService.getRealPixelPosition(t)}px`;this.setRowTopStyle(i)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let i;if(this.isSticky())i=t.stickyRowTop;else{const s=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,r=this.applyPaginationOffset(s);i=t.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return i+"px"}setRowTopStyle(e){this.allRowGuis.forEach((t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)))}getRowNode(){return this.rowNode}getCellCtrl(e){let t=null;return this.getAllCellCtrls().forEach((i=>{i.getColumn()==e&&(t=i)})),null!=t||this.getAllCellCtrls().forEach((i=>{i.getColSpanningList().indexOf(e)>=0&&(t=i)})),t}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(e){const t=this.rowNode.getRowIndexString();if(null===t)return;const i=this.beans.headerNavigationService.getHeaderRowCount()+(this.beans.filterManager?.getHeaderRowCount()??0),s=this.rowNode.rowIndex%2==0,r=i+this.rowNode.rowIndex+1;this.forEachGui(e,(e=>{e.rowComp.setRowIndex(t),e.rowComp.addOrRemoveCssClass("ag-row-even",s),e.rowComp.addOrRemoveCssClass("ag-row-odd",!s),Ks(e.element,"rowindex",r)}))}setStoppingRowEdit(e){this.stoppingRowEdit=e}};fl.DOM_DATA_KEY_ROW_CTRL="renderedRow";var vl=fl,Cl=class extends Ai{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",Pi("touchstart")?"touchstart":"mousedown"].forEach((e=>{const t=this.processMouseEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}))}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||Fi(t))return;const i=this.getRowForEvent(t),s=this.mouseEventService.getRenderedCellForEvent(t);"contextmenu"===e?this.handleContextMenuMouseEvent(t,void 0,i,s):(s&&s.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!ur())return;const e=new eo(this.element);this.addManagedListeners(e,{longTap:e=>{const t=this.getRowForEvent(e.touchEvent),i=this.mouseEventService.getRenderedCellForEvent(e.touchEvent);this.handleContextMenuMouseEvent(void 0,e.touchEvent,t,i)}}),this.addDestroyFunc((()=>e.destroy()))}getRowForEvent(e){let t=e.target;for(;t;){const e=Vt(this.gos,t,vl.DOM_DATA_KEY_ROW_CTRL);if(e)return e;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,s){const r=i?i.getRowNode():null,o=s?s.getColumn():null;let n=null;if(o){const i=e||t;s.dispatchCellContextMenuEvent(i??null),n=this.valueService.getValue(o,r)}const a=this.ctrlsService.getGridBodyCtrl(),l=s?s.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:r,column:o,value:n,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:xi(this.gos,e,gl.DOM_DATA_KEY_CELL_CTRL),rowCtrl:xi(this.gos,e,vl.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,t))}processCellKeyboardEvent(e,t,i){const s=e.getRowNode(),r=e.getColumn(),o=e.isEditing();Ln(this.gos,i,s,r,o)||"keydown"!==t||(!o&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),kn(i)&&e.processCharacter(i)),"keydown"===t&&this.eventService.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const s=e.getRowNode(),r=this.focusService.getFocusedCell(),o=r&&r.column;if(!Ln(this.gos,i,s,o,!1)){const s=i.key;if("keydown"===t)switch(s){case co.PAGE_HOME:case co.PAGE_END:case co.PAGE_UP:case co.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case co.UP:case co.DOWN:e.onKeyboardNavigate(i);break;case co.TAB:e.onTabKeyDown(i)}}"keydown"===t&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey)return;if(t)return;if(!this.mouseEventService.isEventFromThisGrid(e))return;const i=function(e){const{keyCode:t}=e;let i;switch(t){case 65:i=co.A;break;case 67:i=co.C;break;case 86:i=co.V;break;case 68:i=co.D;break;case 90:i=co.Z;break;case 89:i=co.Y;break;default:i=e.code}return i}(e);return i===co.A?this.onCtrlAndA(e):i===co.C?this.onCtrlAndC(e):i===co.D?this.onCtrlAndD(e):i===co.V?this.onCtrlAndV(e):i===co.X?this.onCtrlAndX(e):i===co.Y?this.onCtrlAndY():i===co.Z?this.onCtrlAndZ(e):void 0}onCtrlAndA(e){const{pinnedRowModel:t,rowModel:i,rangeService:s}=this;if(s&&i.isRowsToRender()){const[e,r]=[t.isEmpty("top"),t.isEmpty("bottom")],o=e?null:"top";let n,a;r?(n=null,a=i.getRowCount()-1):(n="bottom",a=t.getPinnedBottomRowCount()-1);const l=this.visibleColsService.getAllCols();if(St(l))return;s.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:a,rowEndPinned:n,columnStart:l[0],columnEnd:pi(l)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){this.gos.get("undoRedoCellEditing")&&this.undoRedoService&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService?.redo("ui")}},yl=class extends Ai{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Cr(this.element,t),Nr(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},wl=class extends Ai{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Cr(this.element,t),Nr(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},Sl=e=>e.getTopRowCtrls(),bl=e=>e.getStickyTopRowCtrls(),Rl=e=>e.getStickyBottomRowCtrls(),El=e=>e.getBottomRowCtrls(),Fl=e=>e.getCentreRowCtrls(),Pl={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:Fl},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:Fl},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:Fl},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:Fl},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:Sl},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Sl},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Sl},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:Sl},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:bl},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:bl},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:bl},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:bl},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:Rl},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Rl},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Rl},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:Rl},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:El},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:El},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:El},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:El}};function xl(e){return Pl[e]}var Dl=["center","left","right","fullWidth"],Al=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],Tl=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],Ml=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],Il=["stickyTopCenter","stickyTopLeft","stickyTopRight"],kl=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],Ll=[...Il,"stickyTopFullWidth",...kl,"stickyBottomFullWidth"],Ol=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right",...Il,...kl],Nl=class extends Ai{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=xl(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],(()=>{this.viewportSizeFeature=this.createManagedBean(new il(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})}))}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new Cl(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const s=()=>this.onPinnedWidthChanged();this.forContainers(Tl,(()=>{this.pinnedWidthFeature=this.createManagedBean(new yl(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:s})})),this.forContainers(Ml,(()=>{this.pinnedWidthFeature=this.createManagedBean(new wl(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:s})})),this.forContainers(Dl,(()=>this.createManagedBean(new Xa(this.eContainer,"center"===this.name?i:void 0)))),this.forContainers(Ol,(()=>this.createManagedBean(new sl(this.eContainer)))),this.forContainers(Al,(()=>this.createManagedBean(new Ta((e=>this.comp.setContainerWidth(`${e}px`)))))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(Ll.indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const e=()=>{const e=this.gos.get("ensureDomOrder"),t=It(this.gos,"print");this.comp.setDomOrder(e||t)};this.addManagedPropertyListener("domLayout",e),e()}onDisplayedColumnsChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}addPreventScrollWhileDragging(){const e=e=>{this.dragService.isDragging()&&e.cancelable&&e.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc((()=>this.eContainer.removeEventListener("touchmove",e)))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return Rr(this.eViewport)}getCenterViewportScrollLeft(){return Dr(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc((()=>t()))}isViewportInTheDOMTree(){return Ir(this.eViewport)}getViewportScrollLeft(){return Dr(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||(e=this.eViewport).clientWidth<e.scrollWidth;var e}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Ar(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(null!=this.options.pinnedType)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||0===t.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const i=It(this.gos,"print"),s=this.gos.get("embedFullWidthRows")||i,r=t.filter((e=>{const t=e.isFullWidth();return this.options.fullWidth?!s&&t:s||!t}));this.comp.setRowCtrls({rowCtrls:r,useFlushSync:e})}},Gl=class extends Ai{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,s,r,o,n){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=s,this.eBottom=r,this.eStickyTop=o,this.eStickyBottom=n,this.eCenterColsViewport=i.querySelector(`.${xl("center").viewport}`),this.eFullWidthContainer=i.querySelector(`.${xl("fullWidth").container}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${xl("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=n.querySelector(`.${xl("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",(e=>this.setCellTextSelection(e.currentValue))),this.createManagedBean(new Ka(this.comp)),this.bodyScrollFeature=this.createManagedBean(new tl(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,i,r,o,n]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvancedFilterHeaderComp(s),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){const e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach((e=>{this.addManagedElementListeners(e,{focusin:t=>{const{target:i}=t,s=wr(i,"ag-root",e);e.classList.toggle("ag-has-focus",!s)},focusout:t=>{const{target:i,relatedTarget:s}=t,r=e.contains(s),o=wr(s,"ag-root",e);wr(i,"ag-root",e)||r&&!o||e.classList.remove("ag-has-focus")}})}))}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss("ag-selectable",e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const t=`calc(100% + ${(e&&this.scrollVisibleService.getScrollbarWidth()||0)+(mr()?16:0)}px)`;this.animationFrameService.requestAnimationFrame((()=>this.comp.setBodyViewportWidth(t))),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){const e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=e=>{const i=e.relatedTarget;if(null===pr(i))return void this.rowRenderer.stopEditing();let s=t.some((e=>e.contains(i)))&&this.mouseEventService.isElementInThisGrid(i);if(!s){const e=this.popupService;s=e.getActivePopups().some((e=>e.contains(i)))||e.isElementWithinCustomPopup(i)}s||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach((t=>this.addManagedElementListeners(t,{focusout:e})))}updateRowCount(){const e=this.headerNavigationService.getHeaderRowCount()+(this.filterManager?.getHeaderRowCount()??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=-1===t?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?"ag-force-vertical-scroll":null,i=It(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&(s=this.eBodyViewport).clientHeight<s.scrollHeight;var s}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes();const t=()=>{const t=e&&jt(this.gos)&&!this.rowContainerHeightService.isStretching(),i=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,t)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e;(s||Math.abs(t)>Math.abs(i))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e,r=s||Math.abs(t)>Math.abs(i),o=e.target;r?(this.eStickyTopFullWidthContainer.contains(o)||this.eStickyBottomFullWidthContainer.contains(o))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(i))}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:s}=e||t;s!==this.eBodyViewport&&s!==this.ctrlsService.get("center").getViewportElement()||this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!ur())return;const t=new eo(this.eBodyViewport);this.addManagedListeners(t,{longTap:t=>{e(void 0,t.touchStart,t.touchEvent)}}),this.addDestroyFunc((()=>t.destroy()))}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new on(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc((()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature)))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){const{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(e){const e=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const e=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(this.filterManager?.getHeaderHeight()??0),t=this.pinnedRowModel.getPinnedTopTotalHeight();let i=0;e>0&&(i+=e),t>0&&(i+=t),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight()+(this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0);this.comp.setStickyBottomBottom(`${e}px`)}sizeColumnsToFit(e,t){const i=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,s=Rr(this.eGridBody)-i;s>0?this.columnSizeService.sizeColumnsToFit(s,"sizeColumnsToFit",!1,e):void 0===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,100)}),0):100===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,500)}),100):500===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,-1)}),500):ct("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}};function Bl(e){return e.map((e=>`<ag-row-container name="${e}"></ag-row-container>`)).join("")}Bl(["topLeft","topCenter","topRight","topFullWidth"]),Bl(["left","center","right","fullWidth"]),Bl(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]),Bl(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]),Bl(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]);var Vl=class extends Ai{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn((()=>{this.columnAnimationService.executeLaterVMTurn((()=>this.updateScrollVisibleImpl()))})):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsService.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(null==this.scrollbarWidth){const e=this.gos.get("scrollbarWidth"),t="number"==typeof e&&e>=0?e:(null==_s&&gr(),_s);null!=t&&(this.scrollbarWidth=t,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},Hl="__ag_grid_instance",$l=class e extends Ai{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=e.gridInstanceSequence.next()}wireBeans(e){this.ctrlsService=e.ctrlsService}stampTopLevelGridCompWithGridInstance(e){e[Hl]=this.gridInstanceId}getRenderedCellForEvent(e){return xi(this.gos,e.target,gl.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(e){return this.isElementInThisGrid(e.target)}isElementInThisGrid(e){let t=e;for(;t;){const e=t[Hl];if(yt(e))return e===this.gridInstanceId;t=t.parentElement}return!1}getCellPositionForEvent(e){const t=this.getRenderedCellForEvent(e);return t?t.getCellPosition():null}getNormalisedPosition(e){const t=It(this.gos,"normal"),i=e;let s,r;if(null!=i.clientX||null!=i.clientY?(s=i.clientX,r=i.clientY):(s=i.x,r=i.y),t){const e=this.ctrlsService.getGridBodyCtrl(),t=e.getScrollFeature().getVScrollPosition();s+=e.getScrollFeature().getHScrollPosition().left,r+=t.top}return{x:s,y:r}}};$l.gridInstanceSequence=new Wr;var Wl=$l,_l=class extends Ai{constructor(){super(),this.beanName="navigationService",this.onPageDown=vt(this.onPageDown,100),this.onPageUp=vt(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}))}handlePageScrollingKey(e,t=!1){const i=e.key,s=e.altKey,r=e.ctrlKey||e.metaKey,o=!!this.rangeService&&e.shiftKey,n=this.mouseEventService.getCellPositionForEvent(e);let a=!1;switch(i){case co.PAGE_HOME:case co.PAGE_END:r||s||(this.onHomeOrEndKey(i),a=!0);break;case co.LEFT:case co.RIGHT:case co.UP:case co.DOWN:if(!n)return!1;!r||s||o||(this.onCtrlUpDownLeftRight(i,n),a=!0);break;case co.PAGE_DOWN:case co.PAGE_UP:r||s||(a=this.handlePageUpDown(i,n,t))}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),!!t&&(e===co.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo(e){const{scrollIndex:t,scrollType:i,scrollColumn:s,focusIndex:r,focusColumn:o}=e;yt(s)&&!s.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(s),yt(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(r),this.focusService.setFocusedCell({rowIndex:r,column:o,rowPinned:null,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:r,rowPinned:null,column:o})}onPageDown(e){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.getViewportHeight(),s=this.pageBoundsService.getPixelOffset(),r=t.top+i,o=this.rowModel.getRowIndexAtPixel(r+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o):this.navigateToNextPage(e,o)}onPageUp(e){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.pageBoundsService.getPixelOffset(),s=t.top,r=this.rowModel.getRowIndexAtPixel(s+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,r,!0):this.navigateToNextPage(e,r,!0)}navigateToNextPage(e,t,i=!1){const s=this.getViewportHeight(),r=this.pageBoundsService.getFirstRow(),o=this.pageBoundsService.getLastRow(),n=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRow(e.rowIndex),l=i?a?.rowHeight-s-n:s-n,d=a?.rowTop+l;let c,u=this.rowModel.getRowIndexAtPixel(d+n);if(u===e.rowIndex){const s=i?-1:1;t=u=e.rowIndex+s}i?(c="bottom",u<r&&(u=r),t<r&&(t=r)):(c="top",u>o&&(u=o),t>o&&(t=o)),this.isRowTallerThanView(u)&&(t=u,c="top"),this.navigateTo({scrollIndex:t,scrollType:c,scrollColumn:null,focusIndex:u,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout((()=>{const s=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})}),50)}getNextFocusIndexForAutoHeight(e,t=!1){const i=t?-1:1,s=this.getViewportHeight(),r=this.pageBoundsService.getLastRow();let o=0,n=e.rowIndex;for(;n>=0&&n<=r;){const e=this.rowModel.getRow(n);if(e){const t=e.rowHeight??0;if(o+t>s)break;o+=t}n+=i}return Math.max(0,Math.min(n,r))}getViewportHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.scrollVisibleService.getScrollbarWidth();let i=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(i-=t),i}isRowTallerThanView(e){const t=this.rowModel.getRow(e);if(!t)return!1;const i=t.rowHeight;return"number"==typeof i&&i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:s}=i,r=i.column;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:r,focusIndex:s,focusColumn:r})}onHomeOrEndKey(e){const t=e===co.PAGE_HOME,i=this.visibleColsService.getAllCols(),s=t?i[0]:pi(i),r=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:s,focusIndex:r,focusColumn:s})}onTabKeyDown(e,t){const i=t.shiftKey,s=this.tabToNextCellCommon(e,i,t);if(!1===s)if(i){const{rowIndex:i,rowPinned:s}=e.getRowPosition();(s?0===i:i===this.pageBoundsService.getFirstRow())&&(0===this.gos.get("headerHeight")||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof gl&&e.focusCell(!0),(!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i))&&t.preventDefault();else s?t.preventDefault():null===s&&this.focusService.allowFocusForNextGridCoreContainer(i)}tabToNextCell(e,t){const i=this.focusService.getFocusedCell();if(!i)return!1;let s=this.getCellByPosition(i);return!!(s||(s=this.rowRenderer.getRowByPosition(i),s&&s.isFullWidth()))&&!!this.tabToNextCellCommon(s,e,t)}tabToNextCellCommon(e,t,i){let s,r=e.isEditing();if(!r&&e instanceof gl){const t=e.getRowCtrl();t&&(r=t.isEditing())}return s=r?"fullRow"===this.gos.get("editType")?this.moveToNextEditingRow(e,t,i):this.moveToNextEditingCell(e,t,i):this.moveToNextCellNotEditing(e,t),null===s?s:s||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,i=null){const s=e.getCellPosition();e.getGui().focus(),e.stopEditing();const r=this.findNextCellToFocusOn(s,t,!0);return!1===r?null:null!=r&&(r.startEditing(null,!0,i),r.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){const s=e.getCellPosition(),r=this.findNextCellToFocusOn(s,t,!0);if(!1===r)return null;if(null==r)return!1;const o=r.getCellPosition(),n=this.isCellEditable(s),a=this.isCellEditable(o),l=o&&s.rowIndex===o.rowIndex&&s.rowPinned===o.rowPinned;return n&&e.setFocusOutOnEditor(),l||(e.getRowCtrl().stopEditing(),r.getRowCtrl().startRowEditing(void 0,void 0,i)),a?(r.setFocusInOnEditor(),r.focusCell()):r.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.visibleColsService.getAllCols();let s;s=e instanceof vl?{...e.getRowPosition(),column:t?i[0]:pi(i)}:e.getCellPosition();const r=this.findNextCellToFocusOn(s,t,!1);if(!1===r)return null;if(r instanceof gl)r.focusCell(!0);else if(r)return this.tryToFocusFullWidthRow(r.getRowPosition(),t);return yt(r)}findNextCellToFocusOn(e,t,i){let s=e;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextTabbedCell(s,t);const r=this.gos.getCallback("tabToNextCell");if(yt(r)){const o=r({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:s||null});if(!0===o||null===o)null===o&&ct("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),s=e;else{if(!1===o)return!1;s={rowIndex:o.rowIndex,column:o.column,rowPinned:o.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const e=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:e+s.rowIndex,column:s.column},fromCell:!0}),null}const o="fullRow"===this.gos.get("editType");if(i&&!o&&!this.isCellEditable(s))continue;this.ensureCellVisible(s);const n=this.getCellByPosition(s);if(!n){const e=this.rowRenderer.getRowByPosition(s);if(!e||!e.isFullWidth()||i)continue;return e}if(!n.isSuppressNavigable())return this.rangeService?.setRangeToCell(s),n}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return"top"===e.rowPinned?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):"bottom"===e.rowPinned?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,i,s){let r=i,o=!1;for(;r&&(r===i||!this.isValidNavigateCell(r));)this.gos.get("enableRtl")?t===co.LEFT&&(r=this.getLastCellOfColSpan(r)):t===co.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextCellToFocus(t,r),o=wt(r);if(o&&e&&e.key===co.UP&&(r={rowIndex:-1,rowPinned:null,column:i.column}),s){const s=this.gos.getCallback("navigateToNextCell");if(yt(s)){const o=s({key:t,previousCellPosition:i,nextCellPosition:r||null,event:e});r=yt(o)?{rowPinned:o.rowPinned,rowIndex:o.rowIndex,column:o.column}:null}}if(!r)return;if(r.rowIndex<0){const t=this.headerNavigationService.getHeaderRowCount();return void this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:t+r.rowIndex,column:i.column},event:e||void 0,fromCell:!0})}const n=this.getNormalisedPosition(r);n?this.focusPosition(n):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const i=this.visibleColsService.getAllCols(),s=this.rowRenderer.getRowByPosition(e);if(!s||!s.isFullWidth())return!1;const r=this.focusService.getFocusedCell(),o={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?pi(i):i[0])};this.focusPosition(o);const n=null==t?null!=r&&this.rowPositionUtils.before(o,r):t;return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:o.column,isFullWidthCell:!0,fromBelow:n}),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const i=t.getColSpanningList();return 1===i.length?e:{rowIndex:e.rowIndex,column:pi(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=qt(this.gos),i=this.rowModel.getRow(e.rowIndex);!(t&&i?.sticky)&&wt(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},zl=class extends Ai{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},Ul=class extends Ai{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,(s=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:s})}),i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let s=-1,r="left";const o=this.menuService.isLegacyMenuEnabled();!o&&this.gos.get("enableRtl")&&(s=1,r="right");const n=o?void 0:4*s,a=o?void 0:4;this.showPopup(e,(s=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:s,nudgeX:n,nudgeY:a,alignSide:r,keepWithinBounds:!0,position:"under",column:e})}),i,t,o)}showPopup(e,t,i,s,r){const o=e?this.createBean(new gn(e,"COLUMN_MENU")):void 0;if(this.activeMenu=o,!o?.hasFilter()||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const n=document.createElement("div");let a;Js(n,"presentation"),n.classList.add("ag-menu"),r||n.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(n,{keydown:e=>this.trapFocusWithin(e,n)}),n.appendChild(o?.getGui());const l=this.menuService.isColumnMenuAnchoringEnabled()?s??this.ctrlsService.getGridBodyCtrl().getGui():void 0,d=this.localeService.getLocaleTextFunc(),c=r&&"columnFilter"!==i?d("ariaLabelColumnMenu","Column Menu"):d("ariaLabelColumnFilter","Column Filter"),u=this.popupService.addPopup({modal:!0,eChild:n,closeOnEsc:!0,closedCallback:t=>{e.setMenuVisible(!1,"contextMenu");const r=t instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),r&&s&&kr(s)){const e=this.focusService.findTabbableParent(s);e&&e.focus()}o?.afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e)},positionCallback:()=>t(n),anchorToElement:l,ariaLabel:c});u&&(this.hidePopup=a=u.hideFunc),o.afterInit().then((()=>{t(n),o.afterGuiAttached({container:i,hidePopup:a})})),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==co.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},jl=class extends Ai{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,t){const i=Wt(this.gos).ResizeObserver,s=i?new i(t):null;return s?.observe(e),()=>s?.disconnect()}},ql=class extends Ai{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){const t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&0===e){const e=this.paginationService?.getCurrentPage()??0;e!==this.lastPage&&(this.lastPage=e,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){!1===this.useAnimationFrame&&ct(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);const s={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],s),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort(((e,i)=>e.index!==i.index?t*(i.index-e.index):i.createOrder-e.createOrder)),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,s=this.createTasksP2,r=s.list,o=this.destroyTasks,n=(new Date).getTime();let a=(new Date).getTime()-n;const l=e<=0,d=this.ctrlsService.getGridBodyCtrl();for(;l||a<e;){if(!d.getScrollFeature().scrollGridIfNeeded()){let e;if(i.length)this.sortTaskList(t),e=i.pop().task;else if(r.length)this.sortTaskList(s),e=r.pop().task;else{if(!o.length){this.cancelledTasks.clear();break}e=o.pop()}this.cancelledTasks.has(e)||e()}a=(new Date).getTime()-n}i.length||r.length||o.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=Wt(this.gos);t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{this.isOn()?t||(t=!0,this.addDestroyTask((()=>{t=!1,e()}))):window.setTimeout(e,0)}}},Kl=class extends Ai{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=Tt(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode((e=>{e.id&&t.has(e.id)&&(e.expanded=!0)})),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode((({expanded:t,id:i})=>{t&&i&&e.push(i)})),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i,s){e&&(i&&e.parent&&-1!==e.parent.level&&this.setRowNodeExpanded(e.parent,t,i,s),e.setExpanded(t,void 0,s))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},Yl=class extends Ai{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}getContextMenuPosition(e,t){const i=this.getRowCtrl(e),s=this.getCellGui(i,t);if(!s)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};const r=s.getBoundingClientRect();return{x:r.x+r.width/2,y:r.y+r.height/2}}showContextMenu(e){const{rowNode:t}=e,i=e.column;let{anchorToElement:s,value:r}=e;t&&i&&null==r&&(r=this.valueService.getValueForDisplay(i,t)),null==s&&(s=this.getContextMenuAnchorElement(t,i)),this.contextMenuFactory?.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,i??null,r,s)}showColumnChooser(e){this.columnChooserFactory?.showColumnChooser(e)}hidePopupMenu(){this.contextMenuFactory?.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){this.columnChooserFactory?.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(i??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){const t=e&&Zi(e)?e.getColDef():e?.getColGroupDef();return!t?.suppressHeaderContextMenu&&"new"===this.getColumnMenuType()}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(ur()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!(!this.filterManager?.isFilterAllowed(e)||this.isLegacyMenuEnabled()||this.isFilterMenuInHeaderEnabled(e)||this.isFloatingFilterButtonDisplayed(e))}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return"new"===this.getColumnMenuType()}isLegacyMenuEnabled(){return"legacy"===this.getColumnMenuType()}isFloatingFilterButtonEnabled(e){const t=e.getColDef(),i=t.floatingFilterComponentParams?.suppressFilterButton;return null!=i&&ct("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),null==t.suppressFloatingFilterButton?!i:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?!!this.gos.exists("suppressMenuHide")&&e:e}showColumnMenuCommon(e,t,i,s){const{positionBy:r}=t,o=t.column;if("button"===r){const{buttonElement:r}=t;e.showMenuAfterButtonClick(o,r,i,s)}else if("mouse"===r){const{mouseEvent:r}=t;e.showMenuAfterMouseEvent(o,r,i,s)}else o&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(o,"auto"),this.animationFrameService.requestAnimationFrame((()=>{const t=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned())?.getHeaderCtrlForColumn(o);t&&e.showMenuAfterButtonClick(o,t.getAnchorElementForMenu(s),i,!0)})))}getRowCtrl(e){const{rowIndex:t,rowPinned:i}=e||{};if(null!=t)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){if(!e||!t)return;const i=e.getCellCtrl(t);return i?.getGui()||void 0}getContextMenuAnchorElement(e,t){const i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),s=this.getRowCtrl(e);if(!s)return i;return this.getCellGui(s,t)||(s.isFullWidth()?s.getFullWidthElement():i)}},Ql={selector:"AG-INPUT-TEXT-AREA",component:class extends po{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}},Jl=class extends bo{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){Ht(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params;this.addManagedElementListeners(e,{keydown:e=>{Ln(this.gos,e,t.node,t.column,!0)||t.onKeyDown(e)}})}},Xl=class extends bo{constructor(e){super(`\n            <div class="ag-cell-edit-wrapper">\n                ${e.getTemplate()}\n            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=qr}init(e){this.params=e;const{cellStartedEdit:t,eventKey:i,suppressPreventDefault:s}=e,r=this.eInput;let o;this.cellEditorInput.init(r,e);let n=!0;t?(this.focusAfterAttached=!0,i===co.BACKSPACE||i===co.DELETE?o="":i&&1===i.length?s?n=!1:o=i:(o=this.cellEditorInput.getStartValue(),i!==co.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,o=this.cellEditorInput.getStartValue()),n&&null!=o&&r.setStartValue(o),this.addManagedElementListeners(r.getGui(),{keydown:e=>{const{key:t}=e;t!==co.PAGE_UP&&t!==co.PAGE_DOWN||e.preventDefault()}})}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;nr()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():this.cellEditorInput.setCaret?.()}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},Zl=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[Nn]}init(e,t){this.eInput=e,this.params=t,null!=t.maxLength&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return yt(e)||yt(this.params.value)?this.params.parseValue(e):this.params.value}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=yt(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},ed=class extends Xl{constructor(){super(new Zl)}},td=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[Bn]}init(e,t){this.eInput=e,this.params=t,null!=t.max&&e.setMax(t.max),null!=t.min&&e.setMin(t.min),null!=t.precision&&e.setPrecision(t.precision),null!=t.step&&e.setStep(t.step);const i=e.getInputElement();t.preventStepping?e.addManagedElementListeners(i,{keydown:this.preventStepping}):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){e.key!==co.UP&&e.key!==co.DOWN||e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!yt(e)&&!yt(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(null==t)return t;if("string"==typeof t){if(""===t)return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}setCaret(){nr()&&this.eInput.getInputElement().focus({preventScroll:!0})}},id={selector:"AG-INPUT-DATE-FIELD",component:class extends On{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=nr();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){zt(this.gos)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?Yn(e??null,!1)??void 0:e;return this.min===t||(this.min=t,Hr(this.eInput,"min",t)),this}setMax(e){const t=e instanceof Date?Yn(e??null,!1)??void 0:e;return this.max===t||(this.max=t,Hr(this.eInput,"max",t)),this}setStep(e){return this.step===e||(this.step=e,Hr(this.eInput,"step",e)),this}getDate(){if(this.eInput.validity.valid)return Xn(this.getValue())??void 0}setDate(e,t){this.setValue(Yn(e??null,!1),t)}}},sd=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[id]}init(e,t){this.eInput=e,this.params=t,null!=t.min&&e.setMin(t.min),null!=t.max&&e.setMax(t.max),null!=t.step&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return yt(e)||yt(this.params.value)?e??null:this.params.value}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Yn(e,!1)}},rd=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[id]}init(e,t){this.eInput=e,this.params=t,null!=t.min&&e.setMin(t.min),null!=t.max&&e.setMax(t.max),null!=t.step&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return yt(e)||yt(this.params.value)?this.params.parseValue(e??""):this.params.value}getStartValue(){return Yn(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Xn(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Yn(e??null,!1)??void 0}},od=class{constructor(e){this.cellValueChanges=e}},nd=class extends od{constructor(e,t,i,s){super(e),this.initialRange=t,this.finalRange=i,this.ranges=s}},ad=class{constructor(e){this.actionStack=[],this.maxStackSize=e||10,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};function ld(e,t,i="auto"){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,i)),"ensureVisible")}function dd(e,t,i){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,i)),"ensureVisible")}var cd={version:ca,moduleName:"@ag-grid-community/edit-core",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,i=!1,s=null){const r=this.createCellEditorParams(e,t,i),o=e.getColumn().getColDef(),n=this.userComponentFactory.getCellEditorDetails(o,r),a=null!=n?.popupFromSelector?n.popupFromSelector:!!o.cellEditorPopup,l=null!=n?.popupPositionFromSelector?n.popupPositionFromSelector:o.cellEditorPopupPosition;return e.setEditing(!0,n),e.getComp().setEditDetails(n,a,l,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(s,"cellEditingStarted")),!n?.params?.suppressPreventDefault}stopEditing(e,t){const i=e.getComp(),{newValue:s,newValueExists:r}=this.takeValueFromCellEditor(t,i),o=e.getRowNode(),n=e.getColumn(),a=this.valueService.getValueForDisplay(n,o);let l=!1;return r&&(l=this.saveNewValue(e,a,s,o,n)),e.setEditing(!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent({...e.createEvent(null,"cellEditingStopped"),oldValue:a,newValue:s,valueChanged:l}),l}handleColDefChanged(e){const t=e.getCellEditor();if(t?.refresh){const{eventKey:i,cellStartedEdit:s}=e.getEditCompDetails().params,r=this.createCellEditorParams(e,i,s),o=e.getColumn().getColDef(),n=this.userComponentFactory.getCellEditorDetails(o,r);t.refresh(n.params)}}setFocusOutOnEditor(e){const t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){const t=e.getComp(),i=t.getCellEditor();i?.focusIn?i.focusIn():(e.focusCell(!0),e.onCellEditorAttached((()=>t.getCellEditor()?.focusIn?.())))}stopEditingAndFocus(e,t=!1,i=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(i,e.getCellPosition())}createPopupEditorWrapper(e){return new Jl(e)}takeValueFromCellEditor(e,t){const i={newValueExists:!1};if(e)return i;const s=t.getCellEditor();return s?s.isCancelAfterEnd&&s.isCancelAfterEnd()?i:{newValue:s.getValue(),newValueExists:!0}:i}saveNewValue(e,t,i,s,r){if(i===t)return!1;e.setSuppressRefreshCell(!0);const o=s.setDataValue(r,i,"edit");return e.setSuppressRefreshCell(!1),o}createCellEditorParams(e,t,i){const s=e.getColumn(),r=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(s,r),eventKey:t,column:s,colDef:s.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:r,data:r.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:t=>this.valueService.parseValue(s,r,t,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const i=e?co.UP:co.DOWN;this.navigationService.navigateToNextCell(null,i,t,!1)}}}]},ud={version:ca,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:function(e){e.undoRedoService?.undo("api")},redoCellEditing:function(e){e.undoRedoService?.redo("api")},getCellEditorInstances:function(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(Qo)},getEditingCells:function(e){return e.rowRenderer.getEditingCells()},stopEditing:function(e,t=!1){e.rowRenderer.stopEditing(t)},startEditingCell:function(e,t){const i=e.columnModel.getCol(t.colKey);if(!i)return void ct(`no column found for ${t.colKey}`);const s={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};null==t.rowPinned&&dd(e,t.rowIndex),ld(e,t.colKey);const r=e.navigationService.getCellByPosition(s);if(!r)return;const{focusService:o,gos:n}=e,a=n.get("stopEditingWhenCellsLoseFocus")&&(()=>{const e=zt(n),t=r.getGui();return e!==t&&t.contains(e)})();!a&&o.isCellFocused(s)||o.setFocusedCell({...s,forceBrowserFocus:a,preventScrollOnBrowserFocus:!0}),r.startRowOrCellEdit(t.key)},getCurrentUndoSize:function(e){return e.undoRedoService?.getCurrentUndoStackSize()??0},getCurrentRedoSize:function(e){return e.undoRedoService?.getCurrentRedoStackSize()??0}},dependantModules:[cd]},hd={version:ca,moduleName:"@ag-grid-community/undo-redo-edit",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=null!==this.activeCellEdit&&this.cellPositionUtils.equals(this.activeCellEdit,t),s=null!==this.activeRowEdit&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||s||this.isPasting||this.isRangeInAction))return;const{rowPinned:r,rowIndex:o,column:n,oldValue:a,value:l}=e,d={rowPinned:r,rowIndex:o,columnId:n.getColId(),newValue:l,oldValue:a};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new ad(e),this.redoStack=new ad(e),this.addListeners();const t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:e=>{e.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});const t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:t})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});const t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:t})}undoRedo(e,t,i,s,r){if(!e)return!1;const o=e.pop();return!(!o||!o.cellValueChanges||(this.processAction(o,(e=>e[s]),r),o instanceof nd?this.processRange(this.rangeService,o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),0))}processAction(e,t,i){e.cellValueChanges.forEach((e=>{const{rowIndex:s,rowPinned:r,columnId:o}=e,n={rowIndex:s,rowPinned:r},a=this.rowPositionUtils.getRowNode(n);a.displayed&&a.setDataValue(o,t(e),i)}))}processRange(e,t){let i;e.removeAllCellRanges(!0),t.forEach(((s,r)=>{if(!s)return;const o=s.startRow,n=s.endRow;r===t.length-1&&(i={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(i));const a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:n.rowIndex,rowEndPinned:n.rowPinned,columnStart:s.startColumn,columns:s.columns};e.addCellRange(a)}))}processCell(e){const t=e[0],{rowIndex:i,rowPinned:s}=t,r={rowIndex:i,rowPinned:s},o=this.rowPositionUtils.getRowNode(r),n={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(n,this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:i,columnId:s,rowPinned:r}=e,o=this.gridBodyCtrl.getScrollFeature(),n=this.columnModel.getCol(s);if(!n)return;o.ensureIndexVisible(i),o.ensureColumnVisible(n);const a={rowIndex:i,column:n,rowPinned:r};this.focusService.setFocusedCell({...a,forceBrowserFocus:!0}),t?.setRangeToCell(a)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new od(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const e=new od(this.cellValueChanges);this.pushActionsToUndoStack(e)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new od(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new nd(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;e=this.rangeService&&si(this.gos)?new nd(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):new od(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}}],dependantModules:[cd]},pd={version:ca,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:ed}],dependantModules:[cd]},gd={version:ca,moduleName:"@ag-grid-community/editing",dependantModules:[cd,hd,{version:ca,moduleName:"@ag-grid-community/full-row-edit",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,i=null,s=null){let r=!0;return e.getAllCellCtrls().reduce(((e,o)=>{const n=o===i;return n?r=o.startEditing(t,n,s):o.startEditing(null,n,s),!!e||o.isEditing()}),!1)&&this.setEditing(e,!0),r}stopEditing(e,t=!1){const i=e.getAllCellCtrls(),s=e.isEditing();e.setStoppingRowEdit(!0);let r=!1;for(const e of i){const i=e.stopEditing(t);s&&!t&&!r&&i&&(r=!0)}r&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),s&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,(e=>e.rowComp.addOrRemoveCssClass("ag-row-editing",t)));const i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(i)}}],dependantModules:[cd]},{version:ca,moduleName:"@ag-grid-community/all-editors",dependantModules:[pd,{version:ca,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:ed},{name:"agNumberCellEditor",classImp:class extends Xl{constructor(){super(new td)}},params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:class extends Xl{constructor(){super(new sd)}}},{name:"agDateStringCellEditor",classImp:class extends Xl{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new rd((()=>this.dataTypeService)))}}},{name:"agCheckboxCellEditor",classImp:class extends bo{constructor(){super('\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[mo]),this.eCheckbox=qr}init(e){this.params=e;const t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:e=>this.setAriaLabel(e.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),i=or(t,e),s=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}}}],dependantModules:[pd]},{version:ca,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:class extends bo{constructor(){super('<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>\n            </div>',[An]),this.eSelect=qr,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueService:i,gos:s}=this,{values:r,value:o,eventKey:n}=e;if(wt(r))return void ct("no values found for select cellEditor");this.startedByEnter=null!=n&&n===co.ENTER;let a=!1;r.forEach((s=>{const r={value:s},n=i.formatValue(e.column,null,s),l=null!=n;r.text=l?n:s,t.addOption(r),a=a||o===s})),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:d,valueListMaxHeight:c}=e;null!=l&&t.setPickerGap(l),null!=c&&t.setPickerMaxHeight(c),null!=d&&t.setPickerMaxWidth(d),"fullRow"!==s.get("editType")&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout((()=>{this.isAlive()&&this.eSelect.showPicker()}))}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}}}],dependantModules:[cd]},{version:ca,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:class extends bo{constructor(){super('<div class="ag-large-text">\n        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',[Ql]),this.eTextArea=qr}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),yt(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===co.LEFT||t===co.UP||t===co.RIGHT||t===co.DOWN||e.shiftKey&&t===co.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return yt(e)||yt(this.params.value)?this.params.parseValue(e):this.params.value}}}],dependantModules:[cd]}]},ud]},md=class extends Ai{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.centerRowContainerCtrl=e.center}))}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const s=this.rowRenderer.getAllCellsForColumn(e);return t||s.push(i),this.addElementsToContainerAndGetWidth(s)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();e.forEach((e=>this.cloneItemIntoDummy(e,t))),i.appendChild(t);const s=t.offsetWidth;return i.removeChild(t),s+this.getAutoSizePadding()}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach((i=>{const s=i.getHtmlElementForColumnHeader(e);null!=s&&(t=s)})),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const s=document.createElement("div"),r=s.classList;["ag-header-cell","ag-header-group-cell"].some((e=>i.classList.contains(e)))?(r.add("ag-header","ag-header-row"),s.style.position="static"):r.add("ag-row");let o=e.parentElement;for(;o;){if(["ag-header-row","ag-row"].some((e=>o.classList.contains(e)))){for(let e=0;e<o.classList.length;e++){const t=o.classList[e];"ag-row-position-absolute"!=t&&r.add(t)}break}o=o.parentElement}s.appendChild(i),t.appendChild(s)}},fd=class extends Ai{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=Tt(this.gos),this.ctrlsService.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl})),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){let t=e.childStore?.getStoreBounds();return e.footer&&(t=e.sibling.childStore?.getStoreBounds()),(t?.heightPx??0)+(t?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&0===e.rowIndex)return Number.MAX_SAFE_INTEGER;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){let t=e.footer?e.sibling:e;for(;t.isExpandable()&&t.expanded;)if(t.master)t=t.detailNode;else if(t.childrenAfterSort){if(0===t.childrenAfterSort.length)break;t=pi(t.childrenAfterSort)}return t.rowTop+t.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const t="top"===e;let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);const s=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,r=new Set,o=e=>{if(r.add(e),t){const t=this.getLastPixelOfGroup(e),r=s+i+e.rowHeight;e.stickyRowTop=t<r?i+(t-r):i}else{const t=this.getFirstPixelOfGroup(e),r=s-(i+e.rowHeight);e.stickyRowTop=t>r?i-(t-r):i}i=0,r.forEach((e=>{const t=e.stickyRowTop+e.rowHeight;i<t&&(i=t)}))},n=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=t=>{if(!t.displayed)return!1;if(t.footer){if(!0===n)return!1;if("grand"===n&&-1===t.level)return!1;if("group"===n&&t.level>-1)return!1;const i=!!t.sibling.rowIndex&&t.sibling.rowIndex+1===t.rowIndex;return("bottom"!==e||!i)&&!r.has(t)}return!!t.isExpandable()&&(!0!==a&&("bottom"!==e&&(!r.has(t)&&t.expanded)))};for(let e=0;e<100;e++){let e=s+i;t||(e=s-i);const r=this.rowModel.getRowIndexAtPixel(e),n=this.rowModel.getRow(r);if(null==n)break;const a=this.getStickyAncestors(n).find((e=>(t?e.rowIndex<r:e.rowIndex>r)&&l(e)));if(a)o(a);else{if(!(t?n.rowTop<e:n.rowTop+n.rowHeight>e)||!l(n))break;o(n)}}return t||r.forEach((e=>{e.stickyRowTop=i-(e.stickyRowTop+e.rowHeight)})),this.refreshNodesAndContainerHeight(e,r,i)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(!0===e)return!0;const t=!!this.gos.get("groupIncludeFooter")||"group"===e,i=!!this.gos.get("groupIncludeTotalFooter")||"grand"===e;return!(!t||!i)||(i?"grand":!!t&&"group")}canRowsBeSticky(){const e=qt(this.gos),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){const t=[];let i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some((t=>t.getRowNode()===e))){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const s=this.stickyTopRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows()}else{for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const s=this.stickyBottomRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}}refreshNodesAndContainerHeight(e,t,i){const s="top"===e,r=s?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,o={},n=[];for(let e=0;e<r.length;e++){const i=r[e].getRowNode();t.has(i)?n.push(r[e]):(o[i.id]=r[e],i.sticky=!1)}const a=new Set;for(let e=0;e<n.length;e++)a.add(n[e].getRowNode());const l=[];t.forEach((e=>{a.has(e)||(e.sticky=!0,l.push(this.createRowCon(e,!1,!1)))}));let d=!!l.length||n.length!==r.length;s?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),d=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),d=!0),this.destroyRowCtrls(o,!1);const c=[...n,...l];c.sort(((e,t)=>t.getRowNode().rowIndex-e.getRowNode().rowIndex)),s||c.reverse(),c.forEach((e=>e.setRowTop(e.getRowNode().stickyRowTop)));let u=0;return s?(t.forEach((e=>{e.rowIndex<this.pageBoundsService.getFirstRow()&&(u+=e.rowHeight)})),u>this.topContainerHeight&&(u=this.topContainerHeight),this.setOffsetTop(u)):(t.forEach((e=>{e.rowIndex>this.pageBoundsService.getLastRow()&&(u+=e.rowHeight)})),u>this.bottomContainerHeight&&(u=this.bottomContainerHeight),this.setOffsetBottom(u)),!!d&&(s?this.stickyTopRowCtrls=c:this.stickyBottomRowCtrls=c,!0)}ensureRowHeightsValid(){let e=!1;const t=t=>{const i=t.getRowNode();if(i.rowHeightEstimated){const t=Nt(this.gos,i);i.setRowHeight(t.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},vd=class extends Ai{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach((e=>e.onCellSelectionChanged()))},t=()=>{this.getAllCellCtrls().forEach((e=>e.updateRangeBordersIfRangeCount()))},i=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},s=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc((()=>s())),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],(()=>{si(this.gos)?i():s()})),si(this.gos)&&i()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()}))}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],(()=>this.onDomLayoutChanged())),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],(()=>this.redraw())),this.addManagedPropertyListener("suppressCellFocus",(e=>this.onSuppressCellFocusChanged(e.currentValue))),this.addManagedPropertyListeners(["getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],(()=>this.redrawRows())),qt(this.gos)&&(Tt(this.gos)||Mt(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new fd(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=It(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=null!=e?e:3;this.cachedRowCtrls=new Cd(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=ji(this.rowCtrlsByRowIndex),t=ji(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach((t=>t.onCellFocused(e))),this.getFullWidthRowCtrls().forEach((t=>t.onFullWidthRowFocused(e)))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach((t=>t.onSuppressCellFocusChanged(e))),this.getFullWidthRowCtrls().forEach((t=>t.onSuppressCellFocusChanged(e)))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach((t=>t.onFlashCells(e)))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onColumnHover()))},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onDisplayedColumnsChanged()))},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach((e=>e.onLeftChanged()))}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach((e=>e())),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach((e=>{const t=t=>{this.getAllCellCtrls().forEach((i=>{i.getColumn()===e&&t(i)}))},i=()=>{t((e=>e.onLeftChanged()))},s=()=>{t((e=>e.onWidthChanged()))},r=()=>{t((e=>e.onFirstRightPinnedChanged()))},o=()=>{t((e=>e.onLastLeftPinnedChanged()))},n=()=>{t((e=>e.onColDefChanged()))};e.addEventListener("leftChanged",i),e.addEventListener("widthChanged",s),e.addEventListener("firstRightPinnedChanged",r),e.addEventListener("lastLeftPinnedChanged",o),e.addEventListener("colDefChanged",n),this.destroyFuncsForColumnListeners.push((()=>{e.removeEventListener("leftChanged",i),e.removeEventListener("widthChanged",s),e.removeEventListener("firstRightPinnedChanged",r),e.removeEventListener("lastLeftPinnedChanged",o),e.removeEventListener("colDefChanged",n)}))}))}onDomLayoutChanged(){const e=It(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach((i=>{const s=i.getCellElement(e);s&&t.push(s)})),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){const{pinnedRowModel:i,beans:s,printLayout:r}=this,o=Object.fromEntries(e.map((e=>[e.getRowNode().id,e])));i.forEachPinnedRow(t,((n,a)=>{const l=e[a];l&&void 0===i.getPinnedRowById(l.getRowNode().id,t)&&(l.destroyFirstPass(),l.destroySecondPass()),n.id in o?(e[a]=o[n.id],delete o[n.id]):e[a]=new vl(n,s,!1,!1,r)}));const n="top"===t?i.getPinnedTopRowCount():i.getPinnedBottomRowCount();e.length=n}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else{if(this.cachedRowCtrls?.has(e))return void this.cachedRowCtrls.removeRow(e);{const t=t=>{const i=t[e.rowIndex];i&&i.getRowNode()===e&&(i.destroyFirstPass(),i.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(null!=e)return e?.forEach((e=>this.redrawRow(e,!0))),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==t)return null;const i=zt(this.gos),s=Vt(this.gos,i,gl.DOM_DATA_KEY_CELL_CTRL),r=Vt(this.gos,i,vl.DOM_DATA_KEY_ROW_CTRL);return s||r?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,s=e.animate&&jt(this.gos),r=i?this.getRowsToRecycle():null;if(i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();const e=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();e&&this.updateContainerHeights(e)}this.recycleRows(r,s),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=t&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout)return void this.rowContainerHeightService.setModelHeight(null);let t=this.pageBoundsService.getCurrentPageHeight();0===t&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,this.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,(()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}))}stopEditing(e=!1){this.getAllRowCtrls().forEach((t=>{t.stopEditing(e)}))}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let s=0;s<i;s++){const i=t[s].getAllCellCtrls(),r=i.length;for(let t=0;t<r;t++)e.push(i[t])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(const e in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[e]);return i}addRenderedRowListener(e,t,i){const s=this.rowCtrlsByRowIndex[t];s&&s.addEventListener(e,i)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach((t=>t.flashCell(e)))}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&hr()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const t of this.getRowCtrls(e))t.isFullWidth()&&(t.refreshFullWidth()||this.redrawRow(t.getRowNode(),!0));this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){const t=this.getCellCtrls(e.rowNodes,e.columns).map((e=>e.getCellRenderer())).filter((e=>null!=e));if(e.columns?.length)return t;const i=[],s=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach((e=>{if(s&&!this.isRowInMap(e.getRowNode(),s))return;if(!e.isFullWidth())return;const t=e.getFullWidthCellRenderers();for(let e=0;e<t.length;e++){const s=t[e];null!=s&&i.push(s)}})),[...i,...t]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach((e=>{const i=e.getCellEditor();i&&t.push(i)})),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach((t=>{if(t.isEditing()){const i=t.getCellPosition();e.push(i)}})),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach((e=>{const i=e.id;switch(e.rowPinned){case"top":t.top[i]=e;break;case"bottom":t.bottom[i]=e;break;default:t.normal[i]=e}})),t}isRowInMap(e,t){const i=e.id;switch(e.rowPinned){case"top":return null!=t.top[i];case"bottom":return null!=t.bottom[i];default:return null!=t.normal[i]}}getRowCtrls(e){const t=this.mapRowNodes(e),i=this.getAllRowCtrls();return e&&t?i.filter((e=>{const i=e.getRowNode();return this.isRowInMap(i,t)})):i}getCellCtrls(e,t){let i;yt(t)&&(i={},t.forEach((e=>{const t=this.columnModel.getCol(e);yt(t)&&(i[t.getId()]=!0)})));const s=[];return this.getRowCtrls(e).forEach((e=>{e.getAllCellCtrls().forEach((e=>{const t=e.getColumn().getId();i&&!i[t]||s.push(e)}))})),s}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];_i(this.rowCtrlsByRowIndex,((t,i)=>{null==i.getRowNode().id&&e.push(t)})),this.removeRowCtrls(e);const t={};return _i(this.rowCtrlsByRowIndex,((e,i)=>{const s=i.getRowNode();t[s.id]=i})),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach((e=>{const i=this.rowCtrlsByRowIndex[e];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[e]}))}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let i;this.stickyRowFeature&&hr()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const s=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let o=!1;if(this.stickyRowFeature){o=this.stickyRowFeature.checkStickyRows();const e=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();e&&this.updateContainerHeights(e)}const n=this.firstRenderedRow!==s||this.lastRenderedRow!==r;if((!t||o||n)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!o),null!=i)){const e=this.getCellToRestoreFocusToAfterRefresh();null!=i&&null==e&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach((e=>i[e]=!0));const s=Object.keys(this.rowCtrlsByRowIndex).filter((e=>!i[e]));this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){const t=function(e,t){const i=[];for(let s=e;s<=t;s++)i.push(s);return i}(this.firstRenderedRow,this.lastRenderedRow),i=(e,i)=>{const s=i.getRowNode().rowIndex;null!=s&&(s<this.firstRenderedRow||s>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(i)&&t.push(s)};_i(this.rowCtrlsByRowIndex,i),_i(e,i),t.sort(((e,t)=>e-t));const s=[];for(let e=0;e<t.length;e++){const i=t[e],r=this.rowModel.getRow(i);r&&!r.sticky&&s.push(i)}return s}recycleRows(e,t=!1,i=!1){const s=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(s,!t);const r=[];s.forEach((s=>{const o=this.createOrUpdateRowCtrl(s,e,t,i);yt(o)&&r.push(o)})),e&&(!i||this.gos.get("suppressAnimationFrame")||this.printLayout?this.destroyRowCtrls(e,t):this.beans.animationFrameService.addDestroyTask((()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}))),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach((t=>{const i=t.getRowNode().rowIndex;e.push(i.toString())})),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter((e=>{if(!e.isFullWidth())return!1;const i=e.getRowNode();return!(null!=t&&!this.isRowInMap(i,t))}))}createOrUpdateRowCtrl(e,t,i,s){let r,o=this.rowCtrlsByRowIndex[e];if(o||(r=this.rowModel.getRow(e),yt(r)&&yt(t)&&t[r.id]&&r.alreadyRendered&&(o=t[r.id],t[r.id]=null)),!o){if(r||(r=this.rowModel.getRow(e)),!yt(r))return;o=this.createRowCon(r,i,s)}return r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){const i=[];_i(e,((e,s)=>{if(s)if(this.cachedRowCtrls&&s.isCacheable())this.cachedRowCtrls.addRow(s);else if(s.destroyFirstPass(!t),t){const e=s.instanceId;this.zombieRowCtrls[e]=s,i.push((()=>{s.destroySecondPass(),delete this.zombieRowCtrls[e]}))}else s.destroySecondPass()})),t&&(i.push((()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})),function(e,t=0){e.length>0&&window.setTimeout((()=>e.forEach((e=>e()))),t)}(i,400))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*Gt(this.gos)}workOutFirstAndLastRowsToRender(){let e,t;if(this.rowContainerHeightService.updateOffset(),this.rowModel.isRowsToRender())if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{const i=this.getRowBufferInPixels(),s=this.ctrlsService.getGridBodyCtrl(),r=this.gos.get("suppressRowVirtualisation");let o,n,a=!1;do{const e=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:t,pageLastPixel:l}=this.pageBoundsService.getCurrentPagePixelRange(),d=this.rowContainerHeightService.getDivStretchOffset(),c=s.getScrollFeature().getVScrollPosition(),u=c.top,h=c.bottom;r?(o=t+d,n=l+d):(o=Math.max(u+e-i,t)+d,n=Math.min(h+e+i,l)+d),this.firstVisibleVPixel=Math.max(u+e,t)+d,this.lastVisibleVPixel=Math.min(h+e,l)+d,a=this.ensureAllRowsInRangeHaveHeightsCalculated(o,n)}while(a);let l=this.rowModel.getRowIndexAtPixel(o),d=this.rowModel.getRowIndexAtPixel(n);const c=this.pageBoundsService.getFirstRow(),u=this.pageBoundsService.getLastRow();l<c&&(l=c),d>u&&(d=u),e=l,t=d}else e=0,t=-1;const i=It(this.gos,"normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),r=Math.max(this.getRowBuffer(),500);i&&!s&&t-e>r&&(t=e+r);const o=e!==this.firstRenderedRow,n=t!==this.lastRenderedRow;(o||n)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame((()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})})))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const i=this.pinnedRowModel?.ensureRowHeightsValid(),s=this.stickyRowFeature?.ensureRowHeightsValid(),r=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(r||s)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),!!(s||r||i)&&(this.updateContainerHeights(),!0)}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const t=!1,i=e.getRowNode(),s=this.focusService.isRowNodeFocused(i),r=e.isEditing(),o=i.detail;return(s||r||o)&&!!this.isRowPresent(i)||t}isRowPresent(e){return!!this.rowModel.isRowPresent(e)&&(!this.paginationService||this.paginationService.isRowPresent(e))}createRowCon(e,t,i){const s=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(s)return s;const r=this.gos.get("suppressAnimationFrame"),o=i&&!r&&!this.printLayout;return new vl(e,this.beans,t,o,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map((e=>e.getRowNode()))}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find((e=>e.getRowNode().rowIndex===i))||null,t||(t=this.getStickyBottomRowCtrls().find((e=>e.getRowNode().rowIndex===i))||null))}return t}isRangeInRenderedViewport(e,t){if(null==e||null==t)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow||i)}},Cd=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(null==e||null==e.id)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],fi(this.entriesList,i)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],fi(this.entriesList,e)}getEntries(){return this.entriesList}},yd=class extends Ai{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new wd,this.pinnedBottomRows=new wd}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",(e=>this.setPinnedRowData(e.currentValue,"top"))),this.addManagedPropertyListener("pinnedBottomRowData",(e=>this.setPinnedRowData(e.currentValue,"bottom"))),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return("top"===e?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){const e=e=>{e.setRowHeight(e.rowHeight,!0)};this.pinnedBottomRows.forEach(e),this.pinnedTopRows.forEach(e)}}ensureRowHeightsValid(){let e=!1,t=0;const i=i=>{if(i.rowHeightEstimated){const s=Nt(this.gos,i);i.setRowTop(t),i.setRowHeight(s.height),t+=s.height,e=!0}};return this.pinnedBottomRows?.forEach(i),t=0,this.pinnedTopRows?.forEach(i),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i="top"===t?this.pinnedTopRows:this.pinnedBottomRows;if(void 0===e)return void i.clear();const s=ei(this.gos),r="top"===t?pn.ID_PREFIX_TOP_PINNED:pn.ID_PREFIX_BOTTOM_PINNED,o=i.getIds(),n=[],a=new Set;let l=0,d=-1;for(const c of e){const e=s?.({data:c,level:0,rowPinned:t})??r+this.nextId++;if(a.has(e)){ct("Duplicate ID",e,"found for pinned row with data",c,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}d++,a.add(e),n.push(e);const u=i.getById(e);if(void 0!==u)u.data!==c&&u.setData(c),l+=this.setRowTopAndRowIndex(u,l,d),o.delete(e);else{const s=new pn(this.beans);s.id=e,s.data=c,s.rowPinned=t,l+=this.setRowTopAndRowIndex(s,l,d),i.push(s)}}o.forEach((e=>{i.getById(e)?.clearRowTopAndRowIndex()})),i.removeAllById(o),i.setOrder(n)}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(Nt(this.gos,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,t){return"top"===t?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,t){return"top"===e?this.pinnedTopRows.forEach(t):this.pinnedBottomRows.forEach(t)}getTotalHeight(e){const t=e.getSize();if(0===t)return 0;const i=e.getByIndex(t-1);return void 0===i?0:i.rowTop+i.rowHeight}},wd=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){const t=this.ordering[e];return this.cache[t]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(const t of e)delete this.cache[t];this.ordering=this.ordering.filter((t=>!e.has(t)))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach(((t,i)=>{const s=this.cache[t];s&&e(s,i)}))}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return 0===this.ordering.length}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}},Sd=class extends Ai{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){const t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},bd={version:ca,moduleName:"@ag-grid-community/row-node-block",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=ft(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");return null==e?2:e<=0?void 0:e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){fi(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),0==this.activeBlockLoadsCount&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void(this.gos.get("debug")&&dt("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded"));const e=this.getAvailableLoadingCount(),t=this.blocks.filter((e=>"needsLoading"===e.getState())).slice(0,e);this.registerLoads(t.length),t.forEach((e=>e.load())),this.printCacheStatus()}getBlockState(){if(Mt(this.gos))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach((t=>{const{id:i,state:s}=t.getBlockStateJson();e[i]=s})),e}printCacheStatus(){this.gos.get("debug")&&dt(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return void 0!==this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}}]},Rd=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(0===this.cachedRange.length){const e=this.getRoot(),t=this.getEnd();if(null==e||null==t)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return null!==this.root&&this.getRange().some((t=>t.id===e.id))}getRoot(){return this.root&&null===this.root?.key&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){return this.end&&null===this.end?.key&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){const t=this.getRange();if(0===t.length)return{keep:[],discard:[]};const i=t[0].id===this.root.id,s=t.findIndex((t=>t.id===e.id));if(s>-1){const r=t.slice(0,s),o=t.slice(s+1);return this.setEndRange(e),i?{keep:r,discard:o}:{keep:o,discard:r}}return{keep:t,discard:[]}}extend(e,t=!1){const i=this.getRoot();if(null==i){const i=this.getRange().slice();return t&&e.depthFirstSearch((e=>!e.group&&i.push(e))),i.push(e),this.setRoot(e),{keep:i,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(i,e).find((e=>e.id===this.end?.id)))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const t=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:t}}}},Ed=class extends Ai{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,i,s){this.processClassRules(void 0,e.cellClassRules,t,i,s),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,s,r){if(null==t&&null==e)return;const o={},n={},a=(e,t)=>{e.split(" ").forEach((e=>{""!=e.trim()&&t(e)}))};if(t){const e=Object.keys(t);for(let s=0;s<e.length;s++){const r=e[s],l=t[r];let d;"string"==typeof l?d=this.expressionService.evaluate(l,i):"function"==typeof l&&(d=l(i)),a(r,(e=>{d?o[e]=!0:n[e]=!0}))}}e&&r&&Object.keys(e).forEach((e=>a(e,(e=>{o[e]||(n[e]=!0)})))),r&&Object.keys(n).forEach(r),Object.keys(o).forEach(s)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let s;return s="function"==typeof i?i(t):i,"string"==typeof s&&(s=[s]),s||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach((e=>{i(e)}))}},Fd=(e=>(e.TAB_GUARD="ag-tab-guard",e.TAB_GUARD_TOP="ag-tab-guard-top",e.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",e))(Fd||{}),Pd=class extends Ai{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:s,focusTrapActive:r,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:n,focusInnerElement:a,onFocusIn:l,onFocusOut:d,shouldStopEventPropagation:c,onTabKeyDown:u,handleKeyDown:h,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=s,this.providedFocusInnerElement=a,this.eFocusableElement=p,this.focusTrapActive=!!r,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!n,this.providedFocusIn=l,this.providedFocusOut=d,this.providedShouldStopEventPropagation=c,this.providedOnTabKeyDown=u,this.providedHandleKeyDown=h}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new wn(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach((e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty&&0===this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){const t=$t(this.gos),i=this.focusService.findFocusableElements(t.body,null,!0),s=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===s)return;let r,o;e?(r=0,o=s):(r=s+1,o=i.length);const n=i.slice(r,o),a=this.gos.get("tabIndex");n.sort(((e,t)=>{const i=parseInt(e.getAttribute("tabindex")||"0"),s=parseInt(t.getAttribute("tabindex")||"0");return s===a?1:i===a?-1:0===i?1:0===s?-1:i-s})),n[e?n.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive)return;if(e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout((()=>this.activateTabGuards()),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout((()=>{this.forcingFocusOut=!1,this.activateTabGuards()}))}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},xd=class extends Ai{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:s}=this,r=[t,i],o={setTabIndex:e=>{r.forEach((t=>null!=e?t.setAttribute("tabindex",e):t.removeAttribute("tabindex")))}};this.addTabGuards(t,i);const{focusTrapActive:n=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:d,handleKeyDown:c,onTabKeyDown:u,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}=e;this.tabGuardCtrl=this.createManagedBean(new Pd({comp:o,focusTrapActive:n,eTopGuard:t,eBottomGuard:i,eFocusableElement:s,onFocusIn:a,onFocusOut:l,focusInnerElement:d,handleKeyDown:c,onTabKeyDown:u,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=$t(this.gos).createElement("div"),i="top"===e?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",i),Js(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];Tr(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){Vr(t)||(t=t.getGui());const{eBottomGuard:s}=this;s?s.insertAdjacentElement("beforebegin",t):e(t,i)}},Dd=class extends Kr{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new xd(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},Ad=0,Td=class extends Ai{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridCtrl=e.gridCtrl})),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){return this.gos.get("popupParent")||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i}=e,s=this.getPopupIndex(i);-1!==s&&(this.popupList[s].alignedToElement=t);const r=t.getBoundingClientRect(),o=this.getParentRect(),n=this.keepXYWithinBounds(i,r.top-o.top,0),a=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${a}px`;const l=o.right-o.left-a;let d;function c(){return r.right-o.left-2}function u(){return r.left-o.left-a}this.gos.get("enableRtl")?(d=u(),d<0&&(d=c(),this.setAlignedStyles(i,"left")),d>l&&(d=0,this.setAlignedStyles(i,"right"))):(d=c(),d>l&&(d=u(),this.setAlignedStyles(i,"right")),d<0&&(d=0,this.setAlignedStyles(i,"left"))),i.style.left=`${d}px`,i.style.top=`${n}px`}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:s,skipObserver:r}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:r,eventSource:o,alignSide:n="left",position:a="over",column:l,rowNode:d,type:c}=e,u=o.getBoundingClientRect(),h=this.getParentRect(),p=this.getPopupIndex(t);-1!==p&&(this.popupList[p].alignedToElement=o),this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:r,updatePosition:()=>{let i,r=u.left-h.left;return"right"===n&&(r-=t.offsetWidth-u.width),"over"===a?(i=u.top-h.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),i="under"===this.shouldRenderUnderOrAbove(t,u,h,e.nudgeY||0)?u.top-h.top+u.height:u.top-t.offsetHeight-2*(s||0)-h.top),{x:r,y:i}},postProcessCallback:()=>this.callPostProcessPopup(c,t,o,null,l,d)})}shouldRenderUnderOrAbove(e,t,i,s){const r=i.bottom-t.bottom,o=t.top-i.top,n=e.offsetHeight+s;return r>n?"under":o>n||o>r?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const s=this.popupList[i],{alignedToElement:r}=s;r&&(["right","left","over","above","under"].forEach((t=>{r.classList.remove(`ag-has-popup-positioned-${t}`),e.classList.remove(`ag-popup-positioned-${t}`)})),t&&(r.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`)))}callPostProcessPopup(e,t,i,s,r,o){const n=this.gos.getCallback("postProcessPopup");n&&n({column:r,rowNode:o,ePopup:t,type:e,eventSource:i,mouseEvent:s})}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:s,nudgeY:r,skipObserver:o,updatePosition:n}=e,a={width:0,height:0},l=(o=!1)=>{let{x:l,y:d}=n();o&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,s&&(l+=s),r&&(d+=r),i&&(l=this.keepXYWithinBounds(t,l,1),d=this.keepXYWithinBounds(t,d,0)),t.style.left=`${l}px`,t.style.top=`${d}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!o){const e=this.resizeObserverService.observeResize(t,(()=>l(!0)));setTimeout((()=>e()),200)}}getActivePopups(){return this.popupList.map((e=>e.element))}getPopupList(){return this.popupList}getParentRect(){const e=$t(this.gos);let t=this.getPopupParent();return t===e.body?t=e.documentElement:"static"===getComputedStyle(t).position&&(t=t.offsetParent),Pr(t)}keepXYWithinBounds(e,t,i){const s=0===i,r=s?"clientHeight":"clientWidth",o=s?"top":"left",n=s?"height":"width",a=s?"scrollTop":"scrollLeft",l=$t(this.gos),d=l.documentElement,c=this.getPopupParent(),u=e.getBoundingClientRect(),h=c.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),g=c===l.body,m=Math.ceil(u[n]);let f=g?(s?Er:Fr)(d)+d[a]:c[r];g&&(f-=Math.abs(p[o]-h[o]));const v=f-m;return Math.min(Math.max(t,0),Math.abs(v))}addPopup(e){const t=$t(this.gos),{eChild:i,ariaLabel:s,alwaysOnTop:r,positionCallback:o,anchorToElement:n}=e;if(!t)return ct("could not find the document, document is empty"),{hideFunc:()=>{}};const a=this.getPopupIndex(i);if(-1!==a)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(i);const l=this.createPopupWrapper(i,s,!!r),d=this.addEventListenersToPopup({...e,wrapperEl:l});return o&&o(),this.addPopupToPopupList(i,l,d,n),{hideFunc:d}}initialisePopupPosition(e){const t=this.getPopupParent().getBoundingClientRect();yt(e.style.top)||(e.style.top=-1*t.top+"px"),yt(e.style.left)||(e.style.left=-1*t.left+"px")}createPopupWrapper(e,t,i){const s=this.getPopupParent(),r=document.createElement("div");return this.environment.applyThemeClasses(r),r.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Js(e,"dialog"),Xs(e,t),r.appendChild(e),s.appendChild(r),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),r}handleThemeChange(e){if(e.themeChanged)for(const e of this.popupList)this.environment.applyThemeClasses(e.wrapper)}addEventListenersToPopup(e){const t=$t(this.gos),i=this.getPopupParent(),{wrapperEl:s,eChild:r,closedCallback:o,afterGuiAttached:n,closeOnEsc:a,modal:l}=e;let d=!1;const c=e=>{s.contains(zt(this.gos))&&(e.key!==co.ESCAPE||Fi(e)||p({keyboardEvent:e}))},u=e=>p({mouseEvent:e}),h=e=>p({touchEvent:e}),p=(e={})=>{const{mouseEvent:n,touchEvent:a,keyboardEvent:l,forceHide:p}=e;(p||!this.isEventFromCurrentPopup({mouseEvent:n,touchEvent:a},r)&&!d)&&(d=!0,i.removeChild(s),t.removeEventListener("keydown",c),t.removeEventListener("mousedown",u),t.removeEventListener("touchstart",h),t.removeEventListener("contextmenu",u),this.eventService.removeEventListener("dragStarted",u),o&&o(n||a||l),this.removePopupFromPopupList(r))};return n&&n({hidePopup:p}),window.setTimeout((()=>{a&&t.addEventListener("keydown",c),l&&(t.addEventListener("mousedown",u),this.eventService.addEventListener("dragStarted",u),t.addEventListener("touchstart",h),t.addEventListener("contextmenu",u))}),0),p}addPopupToPopupList(e,t,i,s){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:Ad++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(e,s)}getPopupIndex(e){return this.popupList.findIndex((t=>t.element===e))}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const s=this.popupList[i];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then((e=>e&&e())),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!t)return;const r=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:s.hideFunc});return s.stopAnchoringPromise=r,s.isAnchored=!0,r}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter((t=>t.element!==e))}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:s,ePopup:r}=e,o=s.getBoundingClientRect(),n=e=>parseInt(e.substring(0,e.length-1),10),a=(e,t)=>{const s=i[e]-o[e],a=n(r.style[e]);return{initialDiff:s,lastDiff:s,initial:a,last:a,direction:t}},l=a("top",0),d=a("left",1),c=this.getFrameworkOverrides();return new xo((i=>{c.wrapIncoming((()=>{c.setInterval((()=>{const i=t.getBoundingClientRect(),o=s.getBoundingClientRect();if(0==o.top&&0==o.left&&0==o.height&&0==o.width)return void e.hidePopup();const a=(e,t)=>{const s=n(r.style[t]);e.last!==s&&(e.initial=s,e.last=s);const a=i[t]-o[t];if(a!=e.lastDiff){const i=this.keepXYWithinBounds(r,e.initial+e.initialDiff-a,e.direction);r.style[t]=`${i}px`,e.last=i}e.lastDiff=a};a(l,"top"),a(d,"left")}),200).then((e=>{i((()=>{null!=e&&window.clearInterval(e)}))}))}),"popupPositioning")}))}hasAnchoredPopup(){return this.popupList.some((e=>e.isAnchored))}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:s}=e,r=i||s;if(!r)return!1;const o=this.getPopupIndex(t);if(-1===o)return!1;for(let e=o;e<this.popupList.length;e++)if(Di(this.popupList[e].element,r))return!0;return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(e){const t=$t(this.gos);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),s=i.length,r=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),o=r.length,n=this.getWrapper(e);if(!n||s<=1||!t.contains(e))return!1;const a=i.indexOf(n),l=n.querySelectorAll("div"),d=[];l.forEach((e=>{0!==e.scrollTop&&d.push([e,e.scrollTop])}));let c=!1;for(o?n.classList.contains("ag-always-on-top")?a!==s-1&&(pi(r).insertAdjacentElement("afterend",n),c=!0):a!==s-o-1&&(r[0].insertAdjacentElement("beforebegin",n),c=!0):a!==s-1&&(pi(i).insertAdjacentElement("afterend",n),c=!0);d.length;){const e=d.pop();e[0].scrollTop=e[1]}return c}},Md=["touchstart","touchend","touchmove","touchcancel"],Id=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e()}setInterval(e,t){return new xo((i=>{i(window.setInterval(e,t))}))}addEventListener(e,t,i,s){const r=yi(Md,t);e.addEventListener(t,i,{capture:!!s,passive:r})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${"solid"===this.frameworkName?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},kd=class extends Ai{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===co.UP,s=e===co.DOWN,r=e===co.LEFT;let o,n;if(i||s)n=i?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),o=t.column;else{const e=this.visibleColsService.getAllCols(),i=this.gos.get("enableRtl");n=t.rowIndex,o=r!==i?e[0]:pi(e)}return{rowIndex:n,rowPinned:null,column:o}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,s=!1;for(;!s;){switch(e){case co.UP:i=this.getCellAbove(i);break;case co.DOWN:i=this.getCellBelow(i);break;case co.RIGHT:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case co.LEFT:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,ct("unknown key for navigation ",e)}s=!i||this.isCellGoodToFocusOn(i)}return i}isCellGoodToFocusOn(e){const t=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex)}return!!i&&!t.isSuppressNavigable(i)}getCellToLeft(e){if(!e)return null;const t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;let s=!1;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else i&&(s=!0);const r=this.rowModel.getRow(e.rowIndex);return(s?void 0:this.getNextStickyPosition(r))||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!qt(this.gos)||!e||!e.sticky)return;let i=[];i=this.rowRenderer.getStickyTopRowCtrls().some((t=>t.getRowNode().rowIndex===e.rowIndex))?[...this.rowRenderer.getStickyTopRowCtrls()].sort(((e,t)=>e.getRowNode().rowIndex-t.getRowNode().rowIndex)):[...this.rowRenderer.getStickyBottomRowCtrls()].sort(((e,t)=>t.getRowNode().rowIndex-e.getRowNode().rowIndex));const s=t?-1:1,r=i.findIndex((t=>t.getRowNode().rowIndex===e.rowIndex)),o=i[r+s];return o?{rowIndex:o.getRowNode().rowIndex,rowPinned:null}:void 0}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex;return"top"===t?this.pinnedRowModel.getPinnedTopRowCount()-1<=i:"bottom"===t?this.pinnedRowModel.getPinnedBottomRowCount()-1<=i:this.pageBoundsService.getLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned;let s=!1;if(i?0===t:t===this.pageBoundsService.getFirstRow())return"top"===i?null:i&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;i&&(s=!0);const r=this.rowModel.getRow(e.rowIndex);return(s?void 0:this.getNextStickyPosition(r,!0))||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,r=this.visibleColsService.getColAfter(e.column);if(!r){r=t[0];const o=this.getRowBelow(e);if(wt(o))return null;if(!o.rowPinned&&!(this.paginationService?.isRowInPage(o)??1))return null;i=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:i,column:r,rowPinned:s}}getNextTabbedCellBackwards(e){const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,r=this.visibleColsService.getColBefore(e.column);if(!r){r=pi(t);const o=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(wt(o))return null;if(!o.rowPinned&&!(this.paginationService?.isRowInPage(o)??1))return null;i=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:i,column:r,rowPinned:s}}},Ld=(e,t)=>{for(const i in t)t[i]=e;return t},Od={...Ld("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...Ld("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...Ld("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0}),...Ld("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...Ld("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...Ld("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...Ld("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...Ld("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...Ld("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...Ld("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0}),...Ld("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...Ld("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...Ld("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...Ld("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...Ld("@ag-grid-enterprise/status-bar",{getStatusPanel:0})},Nd={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},Gd=(e,t)=>e.eventService.dispatchEvent(t),Bd=class{};Reflect.defineProperty(Bd,"name",{value:"GridApi"});var Vd=class extends Ai{constructor(){super(),this.beanName="apiFunctionService",this.api=new Bd,this.fns={...Nd,dispatchEvent:Gd},this.beans=null,this.preDestroyLink="";const{api:e}=this;for(const t in Od)e[t]=this.makeApi(t)[t]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:i,beans:s}=this;i!==Nd&&(i[e]=s?.validationService?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{const{beans:i,fns:{[e]:s}}=this;return s?s(i,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:s}=this;if(t){const t=Od[e];i.assertModuleRegistered(t,`api.${e}`)&&ct(`API function '${e}' not registered to module '${t}'`)}else ct(`Grid API function ${e}() cannot be called as the grid has been destroyed.\nEither clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\nTo run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${s}`)}destroy(){super.destroy(),this.fns=Nd,this.beans=null}};function Hd(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var $d=class extends Ai{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,i){const s=[],r={};return e.forEach((e=>{let o=!0,n=this.createDefFromColumn(e,t,i),a=e.getOriginalParent(),l=null;for(;a;){let e=null;if(a.isPadding()){a=a.getOriginalParent();continue}const t=r[a.getGroupId()];if(t){t.children.push(n),o=!1;break}if(e=this.createDefFromGroup(a),e&&(e.children=[n],r[e.groupId]=e,n=e,a=a.getOriginalParent()),null!=a&&l===a){o=!1;break}l=a}o&&s.push(n)})),s}createDefFromGroup(e){const t=Ui(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const s=Ui(e.getColDef());return s.colId=e.getColId(),s.width=e.getActualWidth(),s.rowGroup=e.isRowGroupActive(),s.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,s.pivot=e.isPivotActive(),s.pivotIndex=e.isPivotActive()?i.indexOf(e):null,s.aggFunc=e.isValueActive()?e.getAggFunc():null,s.hide=!e.isVisible()||void 0,s.pinned=e.isPinned()?e.getPinned():null,s.sort=e.getSort()?e.getSort():null,s.sortIndex=null!=e.getSortIndex()?e.getSortIndex():null,s}},Wd=class extends Ai{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:1===e.length?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,t){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:1===e.length?e[0]:null,source:t})}genericColumnEvent(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:1===t.length?t[0]:null,source:i})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){const{movedColumns:t,source:i,toIndex:s,finished:r}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:t,column:t&&1===t.length?t[0]:null,toIndex:s,finished:r,source:i})}columnPinned(e,t){if(!e.length)return;const i=1===e.length?e[0]:null,s=this.getCommonValue(e,(e=>e.getPinned()));this.eventService.dispatchEvent({type:"columnPinned",pinned:null!=s?s:null,columns:e,column:i,source:t})}columnVisible(e,t){if(!e.length)return;const i=1===e.length?e[0]:null,s=this.getCommonValue(e,(e=>e.isVisible()));this.eventService.dispatchEvent({type:"columnVisible",visible:s,columns:e,column:i,source:t})}getCommonValue(e,t){if(!e||0==e.length)return;const i=t(e[0]);for(let s=1;s<e.length;s++)if(i!==t(e[s]))return;return i}columnChanged(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t&&1==t.length?t[0]:null,source:i})}columnResized(e,t,i,s=null){e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:1===e.length?e[0]:null,flexColumns:s,finished:t,source:i})}},_d=class extends Ai{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){if(wt(this.columnModel.getColDefCols())||!this.columnModel.isAlive())return[];const e=this.columnModel.getAllCols().map((e=>this.createStateItemFromColumn(e)));return this.orderColumnStateList(e),e}createStateItemFromColumn(e){const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns(),s=e.isRowGroupActive()?t.indexOf(e):null,r=e.isPivotActive()?i.indexOf(e):null,o=e.isValueActive()?e.getAggFunc():null,n=null!=e.getSort()?e.getSort():null,a=null!=e.getSortIndex()?e.getSortIndex():null,l=null!=e.getFlex()&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:n,sortIndex:a,aggFunc:o,rowGroup:e.isRowGroupActive(),rowGroupIndex:s,pivot:e.isPivotActive(),pivotIndex:r,flex:l}}orderColumnStateList(e){const t=this.columnModel.getCols(),i=new Map(t.map(((e,t)=>[e.getColId(),t])));e.sort(((e,t)=>(i.has(e.colId)?i.get(e.colId):-1)-(i.has(t.colId)?i.get(t.colId):-1)))}},zd=class extends Ai{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){const e=[];return rs(null,this.columnModel.getColTree(),(t=>{Ti(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})})),e}resetColumnGroupState(e){const t=this.columnModel.getColDefColTree();if(!t)return;const i=[];rs(null,t,(e=>{if(Ti(e)){const t=e.getColGroupDef(),s={groupId:e.getGroupId(),open:t?t.openByDefault:void 0};i.push(s)}})),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();const i=[];e.forEach((e=>{const t=e.groupId,s=e.open,r=this.columnModel.getProvidedColGroup(t);r&&r.isExpanded()!==s&&(r.setExpanded(s),i.push(r))})),this.visibleColsService.refresh(t,!0),i.length&&this.eventDispatcher.groupOpened(i),this.columnAnimationService.finish()}},Ud=class extends Ai{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){const s=this.visibleColsService.isBodyWidthDirty();if(e!==this.scrollWidth||t!==this.scrollPosition||s){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){const e=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=e-this.scrollPosition-this.scrollWidth,this.viewportRight=e-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t]}return i||[]}extractViewportColumns(){const e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return!(!e.isAutoHeaderHeight()&&!this.isAnyParentAutoHeaderHeight(e))||this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),s=this.viewportLeft-200,r=this.viewportRight+200;return!(t<s&&i<s||t>r&&i>r)}getViewportColumns(){const e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;const t=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),i=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,i,t,(e=>{const t=e.getLeft();return yt(t)&&t>this.viewportLeft}))}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};const e={},t=this.visibleColsService.getLeftCols(),i=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(i).forEach((t=>e[t.getId()]=!0));const s=(t,i,r)=>{let o=!1;for(let n=0;n<t.length;n++){const a=t[n];let l=!1;if(Zi(a))l=!0===e[a.getId()];else{const e=a.getDisplayedChildren();e&&(l=s(e,i,r+1))}l&&(o=!0,i[r]||(i[r]=[]),i[r].push(a))}return o};s(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),s(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),s(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){this.extractViewportColumns();const e=this.getViewportColumns().map((e=>`${e.getId()}-${e.getPinned()||"normal"}`)).join("#"),t=this.colsWithinViewportHash!==e;return t&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),t}},jd=class extends Ai{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){return class{refresh(){return!1}getGui(){return this.eGui}init(t){const i=e(t),s=typeof i;this.eGui="string"!==s&&"number"!==s&&"boolean"!==s?null!=i?i:Lr("<span></span>"):Lr("<span>"+i+"</span>")}}}doesImplementIComponent(e){return!!e&&e.prototype&&"getGui"in e.prototype}},qd=class extends Ai{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},Kd=Object.fromEntries(["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"].map(((e,t)=>[e,t])));function Yd(e,t){return((e.beanName?Kd[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER)-((t.beanName?Kd[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER)}function Qd(e,t){return"gridDestroyService"===e?.beanName?-1:0}var Jd=class extends Ai{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){const i=this.registry[e];if(null!=i)return new i(...t)}},Xd=class extends Ai{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){this.runReadyCallbacksAsync=e.frameworkOverrides.runWhenReadyAsync?.()??!1}postConstruct(){this.addEventListener("ready",(()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach((e=>e(this.params))),this.readyCallbacks.length=0)}),this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every((e=>e?.isAlive()??!1))}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc((()=>{const e=this.readyCallbacks.indexOf(t);e>=0&&this.readyCallbacks.splice(e,1)}))}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc((()=>{this.updateReady()}))}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},Zd=class extends Ai{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){const{rowIndex:t,rowPinned:i,column:s}=e;return this.createIdFromValues({rowIndex:t,column:s,rowPinned:i})}createIdFromValues(e){const{rowIndex:t,rowPinned:i,column:s}=e;return`${t}.${null==i?"null":i}.${s.getId()}`}equals(e,t){const i=e.column===t.column,s=e.rowPinned===t.rowPinned,r=e.rowIndex===t.rowIndex;return i&&s&&r}},ec=class extends Ai{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){Tt(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(null==this.clientSideRowModel)return void this.eventService.dispatchEvent(e);this.events.push(e);const i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach((e=>this.eventService.dispatchEvent(e))),this.events=[]};t?i():(null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}},tc=class extends Ai{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e,t=0;return this.pinnedRowModel.getPinnedTopRowCount()?e="top":this.rowModel.getRowCount()?(e=null,t=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(e="bottom"),void 0===e?null:{rowIndex:t,rowPinned:e}}getLastRow(){let e,t=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),s=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):s&&(t="top",e=s-1),void 0===e?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t||!(e&&!t||!e&&t)&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if(yt(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex}},ic={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},sc={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},rc={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},oc=class extends Ai{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",(()=>this.handleThemeGridOptionChange())),this.handleThemeGridOptionChange(),this.addDestroyFunc((()=>this.stopUsingTheme())),this.addManagedPropertyListener("rowHeight",(()=>this.refreshRowHeightVariable())),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(ic),this.getSizeEl(sc),this.getSizeEl(rc)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(ic)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(sc)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(rc)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){return this.gridTheme?.getCssClass()||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){const t=this.getThemeClasses();for(const i of Array.from(e.classList))i.startsWith("ag-theme-")&&!t.includes(i)&&e.classList.remove(i);e.classList.add(...t)}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(null==t||isNaN(t)||!isFinite(t))return null!==e&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):""!=e?parseFloat(e):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(null!=t)return t;const i=this.measureSizeEl(e);return"detached"===i||"no-styles"===i?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(null==t.offsetParent)return"detached";const i=t.offsetWidth;return i===ac?"no-styles":(this.sizesMeasured=!0,i)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let i=this.eMeasurementContainer;i||(i=this.eMeasurementContainer=document.createElement("div"),i.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(i),this.eGridDiv.appendChild(i)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${ac}px)`,i.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);"no-styles"===s&&ct(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);const r=this.resizeObserverService.observeResize(t,(()=>{const t=this.measureSizeEl(e);"detached"!==t&&"no-styles"!==t&&(this.lastKnownValues.set(e,t),t!==s&&(s=t,this.fireGridStylesChangedEvent(e.changeKey)))}));return this.addDestroyFunc((()=>r())),t}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){const e=new MutationObserver((()=>{const e=this.readAncestorThemeClasses();nc(e,this.ancestorThemeClasses)||(this.ancestorThemeClasses=e,this.fireGridStylesChangedEvent("themeChanged"))}));let t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement;this.addDestroyFunc((()=>e.disconnect()))}readAncestorThemeClasses(){let e=this.eGridDiv;const t=[];for(;e;){const i=Array.from(e.classList).filter((e=>e.startsWith("ag-theme-")));for(const e of i)t.includes(e)||t.unshift(e);e=e.parentElement}return Object.freeze(t)}handleThemeGridOptionChange(){const{gos:e,eMeasurementContainer:t,gridTheme:i}=this,s=e.get("theme")||null;s!==i&&(i?.stopUse(),this.gridTheme=s,s?.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),t&&this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){this.gridTheme?.stopUse(),this.gridTheme=null}},nc=(e,t)=>e.length===t.length&&-1===e.findIndex(((i,s)=>e[s]!==t[s])),ac=15538,lc=class extends Ai{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new ot}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){const e=Lt(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},dc=class e extends Ai{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(e){this.eGridDiv=e.eGridDiv,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.headerNavigationService=e.headerNavigationService,this.headerPositionUtils=e.headerPositionUtils,this.rowRenderer=e.rowRenderer,this.rowPositionUtils=e.rowPositionUtils,this.cellPositionUtils=e.cellPositionUtils,this.navigationService=e.navigationService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.rangeService=e.rangeService,this.advancedFilterService=e.advancedFilterService,this.overlayService=e.overlayService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",e.toggleKeyboardMode),t.addEventListener("mousedown",e.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.removeEventListener("keydown",e.toggleKeyboardMode),t.removeEventListener("mousedown",e.toggleKeyboardMode))}static toggleKeyboardMode(t){const i=e.keyboardModeActive,s="keydown"===t.type;s&&(t.ctrlKey||t.metaKey||t.altKey)||i!==s&&(e.keyboardModeActive=s)}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,(e=>{this.gridCtrl=e.gridCtrl}))}registerKeyboardFocusEvents(){const t=$t(this.gos);e.addKeyboardModeEvents(t),e.instanceCount++,this.addDestroyFunc((()=>{e.instanceCount--,e.removeKeyboardModeEvents(t)}))}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const e=this.focusedCellPosition.column,t=this.columnModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}isKeyboardMode(){return e.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(zt(this.gos),vl.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(zt(this.gos),la.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(e,t){let i=e;for(;i;){if(Vt(this.gos,i,t))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(e){return!!this.isCellRestoreFocused(e)&&(setTimeout((()=>{this.restoredFocusedCellPosition=null}),0),!0)}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(e,t){this.awaitRestoreFocusedCell=!0,setTimeout((()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(e),t())}))}isCellRestoreFocused(e){return null!=this.restoredFocusedCellPosition&&this.cellPositionUtils.equals(e,this.restoredFocusedCellPosition)}setRestoreFocusedCell(e){"react"===this.getFrameworkOverrides().renderingEngine&&(this.restoredFocusedCellPosition=e)}getFocusEventParams(e){const{rowIndex:t,rowPinned:i,column:s}=e,r={rowIndex:t,rowPinned:i,column:s,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return o&&(r.isFullWidthCell=o.isFullWidth()),r}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,null==this.focusedCellPosition)return;const e=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){const{column:t,rowIndex:i,rowPinned:s,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:o=!1}=e,n=this.columnModel.getCol(t);n?(this.focusedCellPosition={rowIndex:i,rowPinned:Ct(s),column:n},this.eventService.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCellPosition),forceBrowserFocus:r,preventScrollOnBrowserFocus:o})):this.focusedCellPosition=null}isCellFocused(e){return null!=this.focusedCellPosition&&this.cellPositionUtils.equals(e,this.focusedCellPosition)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(null==this.focusedHeaderPosition)return!1;const t=e.getColumnGroupChild(),i=e.getRowIndex(),s=e.getPinned(),{column:r,headerRowIndex:o}=this.focusedHeaderPosition;return t===r&&i===o&&s==r.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(e,t){this.focusedHeaderPosition={headerRowIndex:e,column:t}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(e){if(this.isHeaderFocusSuppressed())return!1;const{direction:t,fromTab:i,allowUserOverride:s,event:r,fromCell:o,rowWithoutSpanValue:n}=e;let{headerPosition:a}=e;if(o&&this.filterManager?.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(s){const e=this.getFocusedHeader(),s=this.headerNavigationService.getHeaderRowCount();if(i){const i=this.gos.getCallback("tabToNextHeader");i&&(a=this.getHeaderPositionFromUserFunc({userFunc:i,direction:t,currentPosition:e,headerPosition:a,headerRowCount:s}))}else{const t=this.gos.getCallback("navigateToNextHeader");t&&r&&(a=t({key:r.key,previousHeaderPosition:e,nextHeaderPosition:a,headerRowCount:s,event:r}))}}return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:t,event:r,fromCell:o,rowWithoutSpanValue:n})}focusHeaderPositionFromUserFunc(e){if(this.isHeaderFocusSuppressed())return!1;const{userFunc:t,headerPosition:i,direction:s,event:r}=e,o=this.getFocusedHeader(),n=this.headerNavigationService.getHeaderRowCount(),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:s,currentPosition:o,headerPosition:i,headerRowCount:n});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:s,event:r})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:i,currentPosition:s,headerPosition:r,headerRowCount:o}=e,n=t({backwards:"Before"===i,previousHeaderPosition:s,nextHeaderPosition:r,headerRowCount:o});return!0===n||null===n?(null===n&&ct("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),s):!1===n?null:n}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:i,fromCell:s,rowWithoutSpanValue:r,event:o}=e,{column:n,headerRowIndex:a}=t;if(-1===a)return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView(n);this.headerNavigationService.scrollToColumn(n,i);const l=this.ctrlsService.getHeaderRowContainerCtrl(n.getPinned()),d=l?.focusHeader(t.headerRowIndex,n,o)||!1;return d&&(null!=r||s)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(r??-1),d}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let e=this.visibleColsService.getAllCols()[0];if(!e)return!1;e.getParent()&&(e=this.visibleColsService.getColGroupAtLevel(e,0));const t=this.headerPositionUtils.getHeaderIndexToFocus(e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;const t=this.headerNavigationService.getHeaderRowCount()-1,i=pi(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(e,t){return null!=this.focusedCellPosition&&this.focusedCellPosition.rowIndex===e&&this.focusedCellPosition.rowPinned===Ct(t)}findFocusableElements(e,t,i=!1){let s=fr;t&&(s+=", "+t),i&&(s+=', [tabindex="-1"]');const r=Array.prototype.slice.apply(e.querySelectorAll("[tabindex], input, select, button, textarea, [href]")).filter((e=>kr(e))),o=Array.prototype.slice.apply(e.querySelectorAll(s));return o.length?((e,t)=>e.filter((e=>-1===t.indexOf(e))))(r,o):r}focusInto(e,t=!1,i=!1){const s=this.findFocusableElements(e,null,i),r=t?pi(s):s[0];return!!r&&(r.focus({preventScroll:!0}),!0)}findFocusableElementBeforeTabGuard(e,t){if(!t)return null;const i=this.findFocusableElements(e),s=i.indexOf(t);if(-1===s)return null;let r=-1;for(let e=s-1;e>=0;e--)if(i[e].classList.contains("ag-tab-guard-top")){r=e;break}return r<=0?null:i[r-1]}findNextFocusableElement(e=this.eGridDiv,t,i){const s=this.findFocusableElements(e,t?':not([tabindex="-1"])':null),r=zt(this.gos);let o;o=t?s.findIndex((e=>e.contains(r))):s.indexOf(r);const n=o+(i?-1:1);return n<0||n>=s.length?null:s[n]}isTargetUnderManagedComponent(e,t){if(!t)return!1;const i=e.querySelectorAll(`.${wn.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let e=0;e<i.length;e++)if(i[e].contains(t))return!0;return!1}findTabbableParent(e,t=5){let i=0;for(;e&&null===pr(e)&&++i<=t;)e=e.parentElement;return null===pr(e)?null:e}focusOverlay(e){const t=this.overlayService.isVisible()&&this.overlayService.getOverlayWrapper()?.getGui();return!!t&&this.focusInto(t,e)}focusGridViewFailed(e,t){return t&&this.focusOverlay(e)||e&&this.focusLastHeader()}focusGridView(e,t=!1,i=!0){if(this.overlayService.isExclusive())return i&&this.focusOverlay(t);if(this.isCellFocusSuppressed())return t&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():!(!i||!this.focusOverlay(t))||this.focusNextGridCoreContainer(!1);const s=t?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(s){const{rowIndex:i,rowPinned:r}=s;if(e??(e=this.getFocusedHeader()?.column),e&&null!=i){if(this.navigationService.ensureCellVisible({rowIndex:i,column:e,rowPinned:r}),t){const e=this.rowRenderer.getRowByPosition(s);if(e?.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(s,t))return!0}return this.setFocusedCell({rowIndex:i,column:e,rowPinned:Ct(r),forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:i,rowPinned:r,column:e}),!0}}return!(!i||!this.focusOverlay(t))||!(!t||!this.focusLastHeader())}isGridFocused(){const e=zt(this.gos);return!!e&&this.eGridDiv.contains(e)}focusNextGridCoreContainer(e,t=!1){return!(t||!this.gridCtrl.focusNextInnerContainer(e))||((t||!e&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(e),!1)}focusAdvancedFilter(e){return this.advancedFilterFocusColumn=e?.column,this.advancedFilterService?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){const i=(t?void 0:this.advancedFilterFocusColumn)??this.visibleColsService.getAllCols()?.[0];return e?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(i)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(e){this.gridCtrl.addFocusableContainer(e)}removeFocusableContainer(e){this.gridCtrl.removeFocusableContainer(e)}focusGridInnerElement(e){return this.gridCtrl.focusInnerElement(e)}allowFocusForNextGridCoreContainer(e){this.gridCtrl.allowFocusForNextCoreContainer(e)}};dc.keyboardModeActive=!1,dc.instanceCount=0;var cc=dc,uc=class extends Ai{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=It(this.gos,"print"),t=e?0:this.visibleColsService.getColsLeftWidth(),i=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},hc=class extends Ai{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDropService:s,mouseEventService:r,ctrlsService:o,resizeObserverService:n}=this.beans,a={getContainer:()=>this.eGui,isInterestedIn:e=>1===e||0===e,getIconName:()=>"notAllowed"};s.addDropTarget(a),this.addDestroyFunc((()=>s.removeDropTarget(a))),r.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new Ka(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});const l=n.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc((()=>l())),o.register("gridCtrl",this)}isDetailGrid(){const e=this.focusService.findTabbableParent(this.getGui());return e?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const e=this.beans;return{paginationSelector:e.paginationService?.getPaginationSelector(),gridHeaderDropZonesSelector:e.columnDropZonesService?.getDropZoneSelector(),sideBarSelector:e.sideBarService?.getSideBarSelector(),statusBarSelector:e.statusBarService?.getStatusPanelSelector(),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:s}=this.getNextFocusableIndex(t,e);if(s<0||s>=t.length)return!1;if(0===s){if(i>0){const e=pi(this.visibleColsService.getAllCols());if(this.focusService.focusGridView(e,!0))return!0}return!1}return this.focusContainer(t[s],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),s=this.visibleColsService.getAllCols();if(e){if(i.length>1)return this.focusContainer(pi(i),!0);const e=pi(s);if(this.focusService.focusGridView(e,!0))return!0}if(0===this.gos.get("headerHeight")||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(s[0]))return!0;for(let e=1;e<i.length;e++)if(this.focusService.focusInto(i[e].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:s}=this.getNextFocusableIndex(t,e);if(-1===s||i<0||i>=t.length)return;const r=t[i];r.setAllowFocus?.(!0),setTimeout((()=>{r.setAllowFocus?.(!1)}))}getNextFocusableIndex(e,t){const i=zt(this.gos),s=e.findIndex((e=>e.getGui().contains(i)));return{indexWithFocus:s,nextIndex:s+(t?-1:1)}}focusContainer(e,t){e.setAllowFocus?.(!0);const i=this.focusService.focusInto(e.getGui(),t);return e.setAllowFocus?.(!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){const e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},pc={version:ca,moduleName:"@ag-grid-community/aligned-grid",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t="function"==typeof e;"function"==typeof e&&(e=e());const i=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map((e=>{if(!e)return ut("alignedGrids contains an undefined option."),t||ut('You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"'),void ut(i());if(this.isGridApi(e))return e;const s=e;return"current"in s?s.current?.api:(s.api||ut(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${i()}`),s.api)})).filter((e=>!!e&&!e.isDestroyed()))}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:e})=>this.onColumnEvent(e),alignedGridScroll:({event:e})=>this.onScrollEvent(e)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach((t=>{t.isDestroyed()||t.dispatchEvent(e)}))}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){"horizontal"===e.direction&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent((()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)}))}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach((e=>{i.push(t(e))})):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,(e=>e))}getColumnIds(e){return this.extractDataFromEvent(e,(e=>e.getColId()))}onColumnEvent(e){this.onEvent((()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":this.processColumnEvent(e);break;case"columnGroupOpened":this.processGroupOpenedEvent(e);break;case"columnPivotChanged":ct("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}}))}processGroupOpenedEvent(e){const{columnModel:t}=this;e.columnGroups.forEach((e=>{let i=null;e&&(i=t.getProvidedColGroup(e.getGroupId())),e&&!i||t.setColumnGroupOpened(i,e.isExpanded(),"alignedGridChanged")}))}processColumnEvent(e){const t=e.column;let i=null;if(t&&(i=this.columnModel.getColDefCol(t.getColId())),t&&!i)return;const s=this.getMasterColumns(e),{columnApplyStateService:r,columnSizeService:o,ctrlsService:n}=this;switch(e.type){case"columnMoved":{const t=e.api.getColumnState().map((e=>({colId:e.colId})));r.applyColumnState({state:t,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const t=e.api.getColumnState().map((e=>({colId:e.colId,hide:e.hide})));r.applyColumnState({state:t},"alignedGridChanged")}break;case"columnPinned":{const t=e.api.getColumnState().map((e=>({colId:e.colId,pinned:e.pinned})));r.applyColumnState({state:t},"alignedGridChanged")}break;case"columnResized":{const t=e,i={};s.forEach((e=>{i[e.getId()]={key:e.getColId(),newWidth:e.getActualWidth()}})),t.flexColumns?.forEach((e=>{i[e.getId()]&&delete i[e.getId()]})),o.setColumnWidths(Object.values(i),!1,t.finished,"alignedGridChanged");break}}const a=n.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach((e=>{e.setGridOption("alwaysShowVerticalScroll",a)}))}}]},gc={version:ca,moduleName:"@ag-grid-community/data-type",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",(()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")})),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",(e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(ns(e.source))}))}processDataTypeDefinitions(){const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};const t=e=>t=>{const{column:i,node:s,value:r}=t;let o=i.getColDef().valueFormatter;return o===e.groupSafeValueFormatter&&(o=e.valueFormatter),this.valueService.formatValue(i,s,r,o)};Object.entries(e).forEach((([e,i])=>{const s={...i,groupSafeValueFormatter:this.createGroupSafeValueFormatter(i)};this.dataTypeDefinitions[e]=s,this.formatValueFuncs[e]=t(s)}));const i=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(i).forEach((([s,r])=>{const o=this.processDataTypeDefinition(r,i,[s],e);o&&(this.dataTypeDefinitions[s]=o,r.dataTypeMatcher&&(this.dataTypeMatchers[s]=r.dataTypeMatcher),this.formatValueFuncs[s]=t(o))})),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach((t=>{const i=this.dataTypeMatchers[t];i&&delete this.dataTypeMatchers[t],this.dataTypeMatchers[t]=i??e[t].dataTypeMatcher}))}mergeDataTypeDefinitions(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...Hi(e.columnTypes),...Hi(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,s){let r;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let i=s[o];const n=t[o];if(i&&n&&(i=n),!this.validateDataTypeDefinition(e,i,o))return;r=this.mergeDataTypeDefinitions(i,e)}else{if(i.includes(o))return void ct('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');const n=t[o];if(!this.validateDataTypeDefinition(e,n,o))return;const a=this.processDataTypeDefinition(n,t,[...i,o],s);if(!a)return;r=this.mergeDataTypeDefinitions(a,e)}return{...r,groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)}}validateDataTypeDefinition(e,t,i){return t?t.baseDataType===e.baseDataType||(ct('The "baseDataType" property of a data type definition must match that of its parent.'),!1):(ct(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{if(t.node?.group){const i=(t.colDef.pivotValueColumn??t.column).getAggFunc();if(i){if("first"===i||"last"===i)return e.valueFormatter(t);if("number"===e.baseDataType&&"count"!==i){if("number"==typeof t.value)return e.valueFormatter(t);if("object"==typeof t.value){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter({...t,value:t.value.toNumber()});if("value"in t.value)return e.valueFormatter({...t,value:t.value.value})}}return}if((this.gos.get("suppressGroupMaintainValueType")||"groupRows"===this.gos.get("groupDisplayType"))&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()&&"string"==typeof t.value&&!e.dataTypeMatcher?.(t.value))return;return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:s}=t;const{field:r}=t;if(void 0===s&&(s=e.cellDataType),null!=s&&!0!==s||(s=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(r,i)),!s)return void(e.cellDataType=!1);const o=this.dataTypeDefinitions[s];if(o)return e.cellDataType=s,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,s,o,i),o.columnTypes;ct(`Missing data type definition - "${s}"`)}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=e=>{t.add(e.key)};e.addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push((()=>e.removeEventListener("columnStateUpdated",i)))}canInferCellDataType(e,t){if(!Tt(this.gos))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,i))return!1;const s=null===t.type?e.type:t.type;if(s){const e=this.gos.get("columnTypes")??{};if(Hi(s).some((t=>{const s=e[t.trim()];return s&&this.doColDefPropsPreventInference(s,i)})))return!1}return!this.doColDefPropsPreventInference(e,i)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some((([i,s])=>this.doesColDefPropPreventInference(e,t,i,s)))}doesColDefPropPreventInference(e,t,i,s){if(!t[i])return!1;const r=e[i];return null===r?(t[i]=!1,!1):void 0===s?!!r:r===s}inferCellDataType(e,t){if(!e)return;let i;const s=this.getInitialData();if(s){const t=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=Ki(s,e,t)}else this.initWaitForRowData(t);if(null==i)return;const[r]=Object.entries(this.dataTypeMatchers).find((([e,t])=>t(i)))??["object"];return r}getInitialData(){const e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const e=this.rowModel.getRootNode().allLeafChildren;if(e?.length)return e[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const[i]=this.addManagedEventListeners({rowDataUpdateStarted:e=>{const{firstRowData:s}=e;s&&(i?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const s={},r={};Object.entries(this.columnStateUpdatesPendingInference).forEach((([e,o])=>{const n=this.columnModel.getCol(e);if(!n)return;const a=n.getColDef();if(!this.columnModel.resetColDefIntoCol(n,"cellDataTypeInferred"))return;const l=n.getColDef();if(t&&l.type&&l.type!==a.type){const t=this.getUpdatedColumnState(n,o);t.rowGroup&&null==t.rowGroupIndex&&(s[e]=t),t.pivot&&null==t.pivotIndex&&(r[e]=t),i.push(t)}})),t&&i.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(s,r)),i.length&&this.columnApplyStateService.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const i=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach((e=>{delete i[e],"rowGroup"===e?delete i.rowGroupIndex:"pivot"===e&&delete i.pivotIndex})),i}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(null==t)return!0;const i=this.getDataTypeDefinition(e)?.dataTypeMatcher;return!i||i(t)}validateColDef(e){const t=e=>ct(`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`);"object"===e.cellDataType&&(e.valueFormatter!==this.dataTypeDefinitions.object.groupSafeValueFormatter||this.hasObjectValueFormatter||t("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&t("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,i,s){const r=this.formatValueFuncs[t];switch(i.baseDataType){case"number":e.cellEditor="agNumberCellEditor";break;case"boolean":e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=e=>!!e.colDef.editable&&e.event.key===co.SPACE;break;case"date":e.cellEditor="agDateCellEditor",e.keyCreator=r;break;case"dateString":e.cellEditor="agDateStringCellEditor",e.keyCreator=r;break;case"object":e.cellEditorParams={useFormatter:!0},e.comparator=(e,t)=>{const i=this.columnModel.getColDefCol(s),o=i?.getColDef();if(!i||!o)return 0;const n=null==e?"":r({column:i,node:null,value:e}),a=null==t?"":r({column:i,node:null,value:t});return n===a?0:n>a?1:-1},e.keyCreator=r}this.filterManager?.setColDefPropertiesForDataType(e,i,r)}getDefaultDataTypes(){const e=e=>!!e.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>""===e.newValue?.trim?.()?null:Number(e.newValue),valueFormatter:e=>null==e.value?"":"number"!=typeof e.value||isNaN(e.value)?t("invalidNumber","Invalid Number"):String(e.value),dataTypeMatcher:e=>"number"==typeof e},text:{baseDataType:"text",valueParser:e=>""===e.newValue?null:bt(e.newValue),dataTypeMatcher:e=>"string"==typeof e},boolean:{baseDataType:"boolean",valueParser:e=>null==e.newValue?e.newValue:""===e.newValue?.trim?.()?null:"true"===String(e.newValue).toLowerCase(),valueFormatter:e=>null==e.value?"":String(e.value),dataTypeMatcher:e=>"boolean"==typeof e},date:{baseDataType:"date",valueParser:e=>Xn(null==e.newValue?null:String(e.newValue)),valueFormatter:e=>null==e.value?"":e.value instanceof Date&&!isNaN(e.value.getTime())?Yn(e.value,!1)??"":t("invalidDate","Invalid Date"),dataTypeMatcher:e=>e instanceof Date},dateString:{baseDataType:"dateString",dateParser:e=>Xn(e)??void 0,dateFormatter:e=>Yn(e??null,!1)??void 0,valueParser:t=>e(String(t.newValue))?t.newValue:null,valueFormatter:t=>e(String(t.value))?t.value:"",dataTypeMatcher:t=>"string"==typeof t&&e(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>bt(e.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach((e=>e())),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}}]},mc={version:ca,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:function(e,t){const i=e.columnModel.getColDefCol(t);return i?i.getColDef():null},getColumnDefs:function(e){return e.columnModel.getColumnDefs()},sizeColumnsToFit:function(e,t){"number"==typeof t?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)},setColumnGroupOpened:function(e,t,i){e.columnModel.setColumnGroupOpened(t,i,"api")},getColumnGroup:function(e,t,i){return e.visibleColsService.getColumnGroup(t,i)},getProvidedColumnGroup:function(e,t){return e.columnModel.getProvidedColGroup(t)},getDisplayNameForColumn:function(e,t,i){return e.columnNameService.getDisplayNameForColumn(t,i)||""},getDisplayNameForColumnGroup:function(e,t,i){return e.columnNameService.getDisplayNameForColumnGroup(t,i)||""},getColumn:function(e,t){return e.columnModel.getColDefCol(t)},getColumns:function(e){return e.columnModel.getColDefCols()},applyColumnState:function(e,t){return e.columnApplyStateService.applyColumnState(t,"api")},getColumnState:function(e){return e.columnGetStateService.getColumnState()},resetColumnState:function(e){e.columnApplyStateService.resetColumnState("api")},getColumnGroupState:function(e){return e.columnGroupStateService.getColumnGroupState()},setColumnGroupState:function(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")},resetColumnGroupState:function(e){e.columnGroupStateService.resetColumnGroupState("api")},isPinning:function(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()},isPinningLeft:function(e){return e.visibleColsService.isPinningLeft()},isPinningRight:function(e){return e.visibleColsService.isPinningRight()},getDisplayedColAfter:function(e,t){return e.visibleColsService.getColAfter(t)},getDisplayedColBefore:function(e,t){return e.visibleColsService.getColBefore(t)},setColumnVisible:function(e,t,i){e.columnModel.setColsVisible([t],i,"api")},setColumnsVisible:function(e,t,i){e.columnModel.setColsVisible(t,i,"api")},setColumnPinned:function(e,t,i){e.columnModel.setColsPinned([t],i,"api")},setColumnsPinned:function(e,t,i){e.columnModel.setColsPinned(t,i,"api")},getAllGridColumns:function(e){return e.columnModel.getCols()},getDisplayedLeftColumns:function(e){return e.visibleColsService.getLeftCols()},getDisplayedCenterColumns:function(e){return e.visibleColsService.getCenterCols()},getDisplayedRightColumns:function(e){return e.visibleColsService.getRightCols()},getAllDisplayedColumns:function(e){return e.visibleColsService.getAllCols()},getAllDisplayedVirtualColumns:function(e){return e.columnViewportService.getViewportColumns()},moveColumn:function(e,t,i){e.columnMoveService.moveColumns([t],i,"api")},moveColumnByIndex:function(e,t,i){e.columnMoveService.moveColumnByIndex(t,i,"api")},moveColumns:function(e,t,i){e.columnMoveService.moveColumns(t,i,"api")},setColumnWidth:function(e,t,i,s=!0,r="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:i}],!1,s,r)},setColumnWidths:function(e,t,i=!0,s="api"){e.columnSizeService.setColumnWidths(t,!1,i,s)},getLeftDisplayedColumnGroups:function(e){return e.visibleColsService.getTreeLeft()},getCenterDisplayedColumnGroups:function(e){return e.visibleColsService.getTreeCenter()},getRightDisplayedColumnGroups:function(e){return e.visibleColsService.getTreeRight()},getAllDisplayedColumnGroups:function(e){return e.visibleColsService.getAllTrees()},autoSizeColumn:function(e,t,i){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:i,source:"api"})},autoSizeColumns:function(e,t,i){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})},autoSizeAllColumns:function(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}}},fc={version:ca,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:function(e,t,i){if(!t)return;const s=e.ctrlsService.getGridBodyCtrl().getGui(),r=`aria-${t}`;null===i?s.removeAttribute(r):s.setAttribute(r,i)},refreshCells:function(e,t={}){e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.refreshCells(t)))},flashCells:function(e,t={}){const i=e=>ct(`Since v31.1 api.flashCells parameter '${e}Delay' is deprecated. Please use '${e}Duration' instead.`);yt(t.fadeDelay)&&i("fade"),yt(t.flashDelay)&&i("flash"),e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.flashCells(t)))},refreshHeader:function(e){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach((e=>e.refresh()))))},isAnimationFrameQueueEmpty:function(e){return e.animationFrameService.isQueueEmpty()},flushAllAnimationFrames:function(e){e.animationFrameService.flushAllFrames()},getSizesForCurrentTheme:function(e){return{rowHeight:Gt(e.gos),headerHeight:e.columnModel.getHeaderHeight()}},getCellRendererInstances:function(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(Qo)}}};function vc(e,t){const{colKey:i,rowNode:s,useFormatter:r}=t,o=e.columnModel.getColDefCol(i)??e.columnModel.getCol(i);if(wt(o))return null;const n=e.valueService.getValueForDisplay(o,s);return r?e.valueService.formatValue(o,s,n)??fs(n,!0):n}function Cc(e,t){e.gos.updateGridOptions({options:t})}function yc(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function wc(e){return e.rowRenderer.getLastVirtualRenderedRow()}var Sc={version:ca,moduleName:"@ag-grid-community/api",dependantModules:[{version:ca,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:function(e){return e.context.getGridId()},destroy:function(e){e.gridDestroyService.destroy()},isDestroyed:function(e){return e.gridDestroyService.isDestroyCalled()},getGridOption:function(e,t){return e.gos.get(t)},setGridOption:function(e,t,i){Cc(e,{[t]:i})},updateGridOptions:Cc}},{version:ca,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:function(e){return e.pinnedRowModel.getPinnedTopRowCount()},getPinnedBottomRowCount:function(e){return e.pinnedRowModel.getPinnedBottomRowCount()},getPinnedTopRow:function(e,t){return e.pinnedRowModel.getPinnedTopRow(t)},getPinnedBottomRow:function(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}}},{version:ca,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:function(e,t){if(!t.nodes.every((e=>e.rowPinned?(ct("cannot select pinned rows"),!1):void 0!==e.id||(ct("cannot select node until id for node is known"),!1))))return;const{nodes:i,source:s,newValue:r}=t,o=i;e.selectionService.setNodesSelected({nodes:o,source:s??"api",newValue:r})},selectAll:function(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})},deselectAll:function(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})},selectAllFiltered:function(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})},deselectAllFiltered:function(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})},selectAllOnCurrentPage:function(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})},deselectAllOnCurrentPage:function(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})},getSelectedNodes:function(e){return e.selectionService.getSelectedNodes()},getSelectedRows:function(e){return e.selectionService.getSelectedRows()}}},mc,{version:ca,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:function(e,t={}){const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.redrawRows(i)))},setRowNodeExpanded:function(e,t,i,s,r){e.expansionService.setRowNodeExpanded(t,i,s,r)},getRowNode:function(e,t){return e.rowModel.getRowNode(t)},addRenderedRowListener:function(e,t,i,s){e.rowRenderer.addRenderedRowListener(t,i,s)},getRenderedNodes:function(e){return e.rowRenderer.getRenderedNodes()},forEachNode:function(e,t,i){e.rowModel.forEachNode(t,i)},getFirstDisplayedRow:function(e){return yc(e)},getFirstDisplayedRowIndex:yc,getLastDisplayedRow:function(e){return wc(e)},getLastDisplayedRowIndex:wc,getDisplayedRowAtIndex:function(e,t){return e.rowModel.getRow(t)},getDisplayedRowCount:function(e){return e.rowModel.getRowCount()},getModel:function(e){return e.rowModel}}},{version:ca,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:function(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)},removeRowDropZone:function(e,t){const i=e.dragAndDropService.findExternalZone(t);i&&e.dragAndDropService.removeDropTarget(i)},getRowDropZoneParams:function(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}}},{version:ca,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:function(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()},getHorizontalPixelRange:function(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()},ensureColumnVisible:ld,ensureIndexVisible:dd,ensureNodeVisible:function(e,t,i=null){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,i)),"ensureVisible")}}},{version:ca,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:function(e){e.overlayService.showLoadingOverlay()},showNoRowsOverlay:function(e){e.overlayService.showNoRowsOverlay()},hideOverlay:function(e){e.overlayService.hideOverlay()}}},{version:ca,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:function(e){return e.focusService.getFocusedCell()},clearFocusedCell:function(e){return e.focusService.clearFocusedCell()},setFocusedCell:function(e,t,i,s){e.focusService.setFocusedCell({rowIndex:t,column:i,rowPinned:s,forceBrowserFocus:!0})},setFocusedHeader:function(e,t,i=!1){const s=e.headerNavigationService.getHeaderPositionForColumn(t,i);s&&e.focusService.focusHeaderPosition({headerPosition:s})},tabToNextCell:function(e,t){return e.navigationService.tabToNextCell(!1,t)},tabToPreviousCell:function(e,t){return e.navigationService.tabToNextCell(!0,t)}}},{version:ca,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:function(e,t,i){e.apiEventService.addEventListener(t,i)},addGlobalListener:function(e,t){e.apiEventService.addGlobalListener(t)},removeEventListener:function(e,t,i){e.apiEventService.removeEventListener(t,i)},removeGlobalListener:function(e,t){e.apiEventService.removeGlobalListener(t)}}},fc,{version:ca,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:function(e){e.valueCache.expire()},getValue:function(e,t,i){return vc(e,{colKey:t,rowNode:i})},getCellValue:vc}},{version:ca,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:function(e,t,i){const s=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:s,buttonElement:i,positionBy:"button"})},showColumnMenuAfterMouseClick:function(e,t,i){let s=e.columnModel.getCol(t);s||(s=e.columnModel.getColDefCol(t)),s?e.menuService.showColumnMenu({column:s,mouseEvent:i,positionBy:"mouse"}):ut(`column '${t}' not found`)},showColumnMenu:function(e,t){const i=e.columnModel.getCol(t);i?e.menuService.showColumnMenu({column:i,positionBy:"auto"}):ut(`column '${t}' not found`)},hidePopupMenu:function(e){e.menuService.hidePopupMenu()}}},{version:ca,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:function(e){e.sortController.onSortChanged("api")}}}]};var bc={version:ca,moduleName:"@ag-grid-community/state-core",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=ft((()=>this.dispatchQueuedStateUpdateEvents()),0),this.onRowGroupOpenedDebounced=ft((()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),0),this.onRowSelectedDebounced=ft((()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())}),0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=Tt(this.gos),this.cachedState=this.getInitialState(),this.ctrlsService.whenReady(this,(()=>this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnGridReady()))));const[e,t,i]=this.addManagedEventListeners({newColumnsLoaded:({source:t})=>{"gridInitializing"===t&&(e(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnColumnsInitialised())))},rowCountReady:()=>{t?.(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnRowCountReady()))},firstDataRendered:()=>{i?.(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnFirstDataRendered()))}})}getInitialState(){return(e=this.gos.get("initialState")??{}).version||(e.version="32.1.0"),"32.1.0"===e.version&&(e=function(e){return e.cellSelection=function(e){if(e&&"object"==typeof e)return e.rangeSelection}(e),e}(e)),e;var e}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());const e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const t=e=>()=>this.updateColumnState([e]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:s}=this.getInitialState(),r=this.gos.get("advancedFilterModel");(e||r)&&this.setFilterState(e,r),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),s&&this.setPaginationState(s),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());const o=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:o,columnRowGroupChanged:o,rowDataUpdated:()=>{0!==this.gos.get("groupDefaultExpanded")&&setTimeout((()=>{o()}))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:e=>{(e.newPage||e.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:t,focusedCell:i,columnOrder:s}=this.getInitialState();i&&this.setFocusedCellState(i),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!s?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());const r=this.getRangeSelectionState();this.updateCachedState("rangeSelection",r),this.updateCachedState("cellSelection",r),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:e=>{if(e.finished){const e=this.getRangeSelectionState();this.updateCachedState("rangeSelection",e),this.updateCachedState("cellSelection",e)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],i=[],s=[],r=[],o=[],n=[],a=[],l=[],d=[];let c=0;const u=this.columnGetStateService.getColumnState();for(let e=0;e<u.length;e++){const{colId:h,sort:p,sortIndex:g,rowGroup:m,rowGroupIndex:f,aggFunc:v,pivot:C,pivotIndex:y,pinned:w,hide:S,width:b,flex:R}=u[e];d.push(h),p&&(t[g??c++]={colId:h,sort:p}),m&&(i[f??0]=h),"string"==typeof v&&s.push({colId:h,aggFunc:v}),C&&(r[y??0]=h),w&&("right"===w?n:o).push(h),S&&a.push(h),(R||b)&&l.push({colId:h,flex:R??void 0,width:b})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:r.length||e?{pivotMode:e,pivotColIds:r}:void 0,columnPinning:o.length||n.length?{leftColIds:o,rightColIds:n}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:d.length?{orderedColIds:d}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:s,pivot:r,columnPinning:o,columnVisibility:n,columnSizing:a,columnOrder:l,partialColumnState:d}=e,c={},u=e=>{let t=c[e];return t||(t={colId:e},c[e]=t,t)},h=d?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach((({colId:e,sort:t},i)=>{const s=u(e);s.sort=t,s.sortIndex=i})),h.sort=null,h.sortIndex=null),i&&(i.groupColIds.forEach(((e,t)=>{const i=u(e);i.rowGroup=!0,i.rowGroupIndex=t})),h.rowGroup=null,h.rowGroupIndex=null),s&&(s.aggregationModel.forEach((({colId:e,aggFunc:t})=>{u(e).aggFunc=t})),h.aggFunc=null),r&&(r.pivotColIds.forEach(((e,t)=>{const i=u(e);i.pivot=!0,i.pivotIndex=t})),this.gos.updateGridOptions({options:{pivotMode:r.pivotMode},source:"gridInitializing"}),h.pivot=null,h.pivotIndex=null),o&&(o.leftColIds.forEach((e=>{u(e).pinned="left"})),o.rightColIds.forEach((e=>{u(e).pinned="right"})),h.pinned=null),n&&(n.hiddenColIds.forEach((e=>{u(e).hide=!0})),h.hide=null),a&&(a.columnSizingModel.forEach((({colId:e,flex:t,width:i})=>{const s=u(e);s.flex=t??null,s.width=i})),h.flex=null);const p=l?.orderedColIds,g=!!p?.length,m=g?p.map((e=>u(e))):Object.values(c);m.length&&(this.columnStates=m,this.columnApplyStateService.applyColumnState({state:m,applyOrder:g,defaultState:h},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;if(this.columnGroupStates=void 0,this.pivotResultColsService.isPivotResultColsPresent()){if(t){const i=[];for(const e of t)this.pivotResultColsService.getPivotResultCol(e.colId)&&i.push(e);this.columnApplyStateService.applyColumnState({state:i,applyOrder:e},"gridInitializing")}i&&this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach((({groupId:e,open:i})=>{i&&t.push(e)})),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const t=new Set(e.columnGroup?.openColumnGroupIds),i=this.columnGroupStateService.getColumnGroupState().map((({groupId:e})=>{const i=t.has(e);return i&&t.delete(e),{groupId:e,open:i}}));t.forEach((e=>{i.push({groupId:e,open:!0})})),i.length&&(this.columnGroupStates=i),this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}getFilterState(){let e=this.filterManager?.getFilterModel();e&&0===Object.keys(e).length&&(e=void 0);const t=this.filterManager?.getAdvancedFilterModel()??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){const{filterModel:i,advancedFilterModel:s}=e??{advancedFilterModel:t};i&&this.filterManager?.setFilterModel(i,"columnFilter"),s&&this.filterManager?.setAdvancedFilterModel(s)}getRangeSelectionState(){const e=this.rangeService?.getCellRanges().map((e=>{const{id:t,type:i,startRow:s,endRow:r,columns:o,startColumn:n}=e;return{id:t,type:i,startRow:s,endRow:r,colIds:o.map((e=>e.getColId())),startColId:n.getColId()}}));return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeService:i,columnModel:s,visibleColsService:r}=this;if(!si(t)||!i)return;const o=[];if(e.cellRanges.forEach((e=>{const t=[];if(e.colIds.forEach((e=>{const i=s.getCol(e);i&&t.push(i)})),!t.length)return;let i=s.getCol(e.startColId);if(!i){const e=r.getAllCols(),s=new Set(t);i=e.find((e=>s.has(e)))}o.push({...e,columns:t,startColumn:i})})),function(e){return void 0!==e.get("cellSelection")}(t)&&function(e){const t=e.get("cellSelection");return void 0!==t?"boolean"!=typeof t&&(t?.suppressMultiRanges??!1):e.get("suppressMultiRangeSelection")}(t)&&o.length>1)return ct("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");i.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.ctrlsService.getGridBodyCtrl()?.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:i}=e?.getVScrollPosition()??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:i}=e;this.ctrlsService.getGridBodyCtrl()?.getScrollFeature().setScrollPosition(t,i)}getSideBarState(){return this.sideBarService?.getSideBarComp()?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:s}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:s}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:s}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;const e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();return e||t?{page:e,pageSize:t}:void 0}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),"number"==typeof e.page&&this.paginationService.setPage(e.page))}getRowSelectionState(){const e=this.selectionService.getSelectionState();return e&&(Array.isArray(e)||!1!==e.selectAll&&!1!==e.selectAllChildren||e?.toggledNodes?.length)?e:void 0}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;Object.entries(t).forEach((([e,t])=>{Pt(t,this.cachedState[e])||(i=!0)})),this.cachedState={...this.cachedState,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),Pt(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){this.staleStateKeys.forEach((e=>{"rowSelection"===e&&this.setCachedStateValue(e,this.getRowSelectionState())})),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach((e=>this.queuedUpdateSources.add(e))),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout((()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))}))}}]},Rc={version:ca,moduleName:"@ag-grid-community/state",dependantModules:[bc,{version:ca,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:function(e){return e.stateService?.getState()??{}}},dependantModules:[bc]}]},Ec="paginationPageSizeSelector",Fc={selector:"AG-PAGE-SIZE-SELECTOR",component:class extends Kr{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(Ec,(()=>{this.onPageSizeSelectorValuesChange()})),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){Tr(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&!1!==this.gos.get(Ec)}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),i=!t||!e.includes(t);if(i){const i=this.gos.exists("paginationPageSize"),s=!0!==this.gos.get(Ec);ct(`'paginationPageSize=${t}'${i?"":" (default value)"}, but ${t} is not included in${s?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),s||ct(`Either set '${Ec}' to an array that includes ${t} or to 'false' to disable the page size selector.`),e.unshift("")}const s=String(i?"":t);this.selectPageSizeComp?(gi(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(s,!0)):this.createPageSizeSelectorComp(e,s),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map((e=>({value:String(e)})))}createPageSizeSelectorComp(e,t){const i=this.localeService.getLocaleTextFunc(),s=i("pageSizeSelectorLabel","Page Size:"),r=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new Dn).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(r).setLabel(s).onValueChange((()=>this.handlePageSizeItemSelected())),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=this.gos.get(Ec);return!Array.isArray(e)||St(e)?[20,50,100]:[...e].sort(((e,t)=>e-t))}destroy(){this.toggleSelectDisplay(!1),super.destroy()}}},Pc={selector:"AG-PAGINATION",component:class extends Dd{constructor(){super(),this.btFirst=qr,this.btPrevious=qr,this.btNext=qr,this.btLast=qr,this.lbRecordCount=qr,this.lbFirstRowOnPage=qr,this.lbLastRowOnPage=qr,this.lbCurrent=qr,this.lbTotal=qr,this.pageSizeComp=qr,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[Fc]);const{btFirst:t,btPrevious:i,btNext:s,btLast:r}=this;this.activateTabIndex([t,i,s,r]),t.insertAdjacentElement("afterbegin",Jr(e?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",Jr(e?"next":"previous",this.gos)),s.insertAdjacentElement("afterbegin",Jr(e?"previous":"next",this.gos)),r.insertAdjacentElement("afterbegin",Jr(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],(()=>this.onPageSizeRelatedOptionsChange())),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(e):this.focusService.focusGridInnerElement(e)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){var e,t;this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach((e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:e=>{e.key!==co.ENTER&&e.key!==co.SPACE||(e.preventDefault(),i())}})})),e=this.getGui(),t=this.focusService,this.addManagedElementListeners(e,{keydown:i=>{if(!i.defaultPrevented&&i.key===co.TAB){const s=i.shiftKey;t.findNextFocusableElement(e,!1,s)||t.focusNextGridCoreContainer(s)&&i.preventDefault()}}}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});const i=this.localeService.getLocaleTextFunc();return function(e,t,i){return"number"!=typeof e?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}(e,i("thousandSeparator",","),i("decimalSeparator","."))}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),s=e("of","of"),r=e("firstPage","First Page"),o=e("previousPage","Previous Page"),n=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">\n                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>\n                <span class="ag-paging-row-summary-panel">\n                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${l}-to">${i}</span>\n                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${l}-of">${s}</span>\n                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>\n                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>\n                    <span class="ag-paging-description">\n                        <span id="ag-${l}-start-page">${t}</span>\n                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-${l}-of-page">${s}</span>\n                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>\n                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>\n                </span>\n            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){const e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay(),r=e===i-1;this.nextButtonDisabled=r||s,this.lastButtonDisabled=!t||s||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){!function(e,t){qs(e,"disabled",t)}(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&0===t}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),i=this.paginationService.getMasterRowCount(),s=e?i:null;if(1===s){const e=this.rowModel.getRow(0);if(e&&e.group&&!e.groupData&&!e.aggData)return void this.setTotalLabelsToZero()}const r=this.paginationService.getCurrentPage(),o=this.paginationService.getPageSize();let n,a;this.isZeroPagesToDisplay()?n=a=0:(n=o*r+1,a=n+o-1,e&&a>s&&(a=s));const l=!e&&i<n+o-1,d=this.formatNumber(n);let c;this.lbFirstRowOnPage.textContent=d;const u=this.localeService.getLocaleTextFunc();c=l?u("pageLastRowUnknown","?"):this.formatNumber(a),this.lbLastRowOnPage.textContent=c;const h=t>0?r+1:0,p=this.formatNumber(h);let g,m;if(this.lbCurrent.textContent=p,e)g=this.formatNumber(t),m=this.formatNumber(s);else{const e=u("more","more");g=e,m=e}this.lbTotal.textContent=g,this.lbRecordCount.textContent=m,this.announceAriaStatus(d,c,m,p,g)}announceAriaStatus(e,t,i,s,r){const o=this.localeService.getLocaleTextFunc(),n=o("page","Page"),a=o("to","to"),l=o("of","of"),d=`${e} ${a} ${t} ${l} ${i}`,c=`${n} ${s} ${l} ${r}`;d!==this.ariaRowStatus&&(this.ariaRowStatus=d,this.ariaAnnouncementService.announceValue(d,"paginationRow")),c!==this.ariaPageStatus&&(this.ariaPageStatus=c,this.ariaAnnouncementService.announceValue(c,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}}},xc={version:ca,moduleName:"@ag-grid-community/pagination-core",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return Pc}isPaginateChildRows(){return!(!this.gos.get("groupRemoveSingleChildren")&&!this.gos.get("groupRemoveLowestSingleChildren"))||this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){this.active&&this.currentPage!==e&&"number"==typeof this.currentPage&&(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return!this.active||this.getPageForIndex(e.rowIndex)===this.currentPage}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return yt(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:yt(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:yt(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:yt(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(void 0===this.pageSizeAutoCalculated)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const e=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=e-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),0===this.masterRowCount)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:s=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:s,keepRenderedRows:t})}},class extends Ai{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()}))}notActive(){return!this.gos.get("paginationAutoPageSize")||null==this.centerRowsCtrl}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const t=Math.max(Gt(this.gos),1),i=Math.floor(e/t);this.paginationService.setPageSize(i,"autoCalculated")};this.isBodyRendered?ft((()=>t()),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}}]},Dc={version:ca,moduleName:"@ag-grid-community/pagination",dependantModules:[xc,{version:ca,moduleName:"@ag-grid-community/pagination-api",dependantModules:[xc],apiFunctions:{paginationIsLastPageFound:function(e){return e.rowModel.isLastRowIndexKnown()},paginationGetPageSize:function(e){return e.paginationService?.getPageSize()??100},paginationGetCurrentPage:function(e){return e.paginationService?.getCurrentPage()??0},paginationGetTotalPages:function(e){return e.paginationService?.getTotalPages()??1},paginationGetRowCount:function(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()},paginationGoToNextPage:function(e){e.paginationService?.goToNextPage()},paginationGoToPreviousPage:function(e){e.paginationService?.goToPreviousPage()},paginationGoToFirstPage:function(e){e.paginationService?.goToFirstPage()},paginationGoToLastPage:function(e){e.paginationService?.goToLastPage()},paginationGoToPage:function(e,t){e.paginationService?.goToPage(t)}}}]},Ac="clientSide",Tc="serverSide",Mc="infinite",Ic={onGroupExpandedOrCollapsed:[Ac],refreshClientSideRowModel:[Ac],isRowDataEmpty:[Ac],forEachLeafNode:[Ac],forEachNodeAfterFilter:[Ac],forEachNodeAfterFilterAndSort:[Ac],resetRowHeights:[Ac],applyTransaction:[Ac],applyTransactionAsync:[Ac],flushAsyncTransactions:[Ac],getBestCostNodeSelection:[Ac],getServerSideSelectionState:[Tc],setServerSideSelectionState:[Tc],applyServerSideTransaction:[Tc],applyServerSideTransactionAsync:[Tc],applyServerSideRowData:[Tc],retryServerSideLoads:[Tc],flushServerSideAsyncTransactions:[Tc],refreshServerSide:[Tc],getServerSideGroupLevelState:[Tc],refreshInfiniteCache:[Mc],purgeInfiniteCache:[Mc],getInfiniteRowCount:[Mc],isLastRowIndexKnown:[Mc,Tc],expandAll:[Ac,Tc],collapseAll:[Ac,Tc],onRowHeightChanged:[Ac,Tc],setRowCount:[Mc,Tc],getCacheBlockState:[Mc,Tc]},kc={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}},Lc=(e,t)=>"clientSide"===(t.rowModelType??"clientSide")?{module:"@ag-grid-enterprise/row-grouping"}:null,Oc={enableRowGroup:Lc,rowGroup:Lc,rowGroupIndex:Lc,enablePivot:Lc,enableValue:Lc,pivot:Lc,pivotIndex:Lc,aggFunc:Lc,cellEditor:e=>"agRichSelect"===e.cellEditor||"agRichSelectCellEditor"===e.cellEditor?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{const t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some((e=>t.includes(e)))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>"multiple"===t?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>"multiple"===t?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>"multiple"===t?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Nc},Nc={objectName:"colDef",allProperties:Object.keys({headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0}),docsUrl:"column-properties/",deprecations:{columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},validations:Oc},Gc={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},Bc={version:ca,moduleName:"@ag-grid-community/core"},Vc={version:ca,moduleName:"@ag-grid-community/core-validations",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,{objectName:"gridOptions",allProperties:[...Ms.ALL_PROPERTIES,...ks.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:{advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}},validations:{sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{const t=e.rowModelType??"clientSide";switch(t){case"clientSide":{const i=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:i}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":{const t="groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll";return e.suppressServerSideInfiniteScroll?t:null}}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return"boolean"==typeof t||null==t||t.length?null:"'paginationPageSizeSelector' cannot be an empty array.\n                    If you want to hide the page size selector, set paginationPageSizeSelector to false."}},rowSelection:{validate:({rowSelection:e})=>e&&"string"==typeof e?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':null},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>Nc,defaultColDef:()=>Nc,defaultColGroupDef:()=>Nc,autoGroupColumnDef:()=>Nc,selectionColumnDef:()=>Nc}})}validateApiFunction(e,t){return function(e,t,i){const s=kc[e];if(s){const{version:i,new:r,old:o,message:n}=s,a=o??e;return(...e)=>(ct(`Since ${i} api.${a} is deprecated. ${r?`Please use ${r} instead. `:""}${n??""}`),t.apply(t,e))}const r=Ic[e];return r?(...s)=>{const o=i.rowModel.getType();if(r.includes(o))return t.apply(t,s);ut(`api.${e} can only be called when gridOptions.rowModelType is ${r.join(" or ")}`)}:t}(e,t,this.beans)}processOptions(e,t){const{validations:i,deprecations:s,allProperties:r,propertyExceptions:o,objectName:n,docsUrl:a}=t;r&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(e,[...o??[],...Object.keys(s)],r,n,a);const l=new Set;Object.keys(e).forEach((t=>{const r=s[t];if(r)if("renamed"in r){const{renamed:i,version:s}=r;l.add(`As of v${s}, ${String(t)} is deprecated. Please use ${String(i)} instead.`),e[i]=e[t]}else{const{message:e,version:i}=r;l.add(`As of v${i}, ${String(t)} is deprecated. ${e??""}`)}const o=e[t];if(null==o||!1===o)return;const n=i[t];let a;if(!n)return;if("function"==typeof n){const i=n(e,this.gridOptions);if(!i)return;if("objectName"in i){const s=e[t];return Array.isArray(s)?void s.forEach((e=>{this.processOptions(e,i)})):void this.processOptions(e[t],i)}a=i}else a=n;const{module:d,dependencies:c,validate:u,supportedRowModels:h}=a;if(h){const e=this.gridOptions.rowModelType??"clientSide";if(!h.includes(e))return void l.add(`${String(t)} is not supported with the '${e}' row model.`)}if(d){const e=Array.isArray(d)?d:[d];let i=!0;if(e.forEach((e=>{this.gos.assertModuleRegistered(e,String(t))||(i=!1,l.add(`${String(t)} is only available when ${e} is loaded.`))})),!i)return}if(c){const i=this.checkForRequiredDependencies(t,c,e);if(i)return void l.add(i)}if(u){const t=u(e,this.gridOptions);if(t)return void l.add(t)}})),l.size>0&&l.forEach((e=>{ct(e)}))}checkForRequiredDependencies(e,t,i){const s=Object.entries(t).find((([e,t])=>{const s=i[e];return!t.includes(s)}));if(!s)return null;const[r,o]=s;return o.length>1?`'${String(e)}' requires '${r}' to be one of [${o.join(", ")}].`:`'${String(e)}' requires '${r}' to be ${o[0]}.`}checkProperties(e,t,i,s,r){const o=function(e,t,i){const s={},r=e.filter((e=>!t.some((t=>t===e))));return r.length>0&&r.forEach((e=>s[e]=Eo(e,i).values)),s}(Object.getOwnPropertyNames(e),["__ob__","__v_skip","__metadata__",...t,...i],i);if(_i(o,((e,t)=>{let r=`invalid ${s} property '${e}' did you mean any of these: ${t.slice(0,8).join(", ")}.`;i.includes("context")&&(r+=`\nIf you are trying to annotate ${s} with application data, use the '${s}.context' property instead.`),ct(r)})),Object.keys(o).length>0&&r){const e=this.getFrameworkOverrides().getDocLink(r);ct(`to see all the valid ${s} properties please check: ${e}`)}}}]},Hc={version:ca,moduleName:"@ag-grid-community/core-community-features",dependantModules:[Bc,Vc,gd,Pa,Rc,gc,pc,Dc,Sc]},$c=class extends Ai{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:this.beans.stateService?.getState()??{}}),this.destroyCalled=!0,this.beans.ctrlsService.get("gridCtrl")?.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},Wc=new Set(["gridPreDestroyed","fillStart","pasteStart"]),_c=new Map([...Ms.BOOLEAN_PROPERTIES.map((e=>[e,Ft])),...Ms.NUMBER_PROPERTIES.map((e=>[e,jn])),["groupAggFiltering",e=>"function"==typeof e?e:Ft(e)],["pageSize",qn(1)],["autoSizePadding",qn(0)],["keepDetailRowsCount",qn(1)],["rowBuffer",qn(0)],["infiniteInitialRowCount",qn(1)],["cacheOverflowSize",qn(1)],["cacheBlockSize",qn(1)],["serverSideInitialRowCount",qn(1)],["viewportRowModelPageSize",qn(1)],["viewportRowModelBufferSize",qn(0)]]);function zc(e,t){const i=_c.get(e);return i?i(t):t}var Uc=class e extends Ai{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new ot,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;const s=Wc.has(t);if(s&&!e||!s&&e)return;const r=ks.getCallbackForEvent(t),o=this.gridOptions[r];"function"==typeof o&&this.frameworkOverrides.wrapOutgoing((()=>{o(i)}))}}wireBeans(e){this.gridOptions=e.gridOptions,this.eGridDiv=e.eGridDiv,this.validationService=e.validationService,this.environment=e.environment,this.api=e.gridApi,this.gridId=e.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){const e=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"gridOptionsUpdated"})}})}get(e){return this.gridOptions[e]??Gc[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return yt(this.gridOptions[e])}mergeGridCommonParams(e){return e?t=>{const i=t;return i.api=this.api,i.context=this.gridOptionsContext,e(i)}:e}updateGridOptions({options:t,force:i,source:s="api"}){const r={id:e.changeSetId++,properties:[]},o=[];Object.entries(t).forEach((([e,t])=>{"api"===s&&As[e]&&ct(`${e} is an initial property and cannot be updated.`);const n=zc(e,t),a=i||"object"==typeof n&&"api"===s,l=this.gridOptions[e];if(a||l!==n){this.gridOptions[e]=n;const t={type:e,currentValue:n,previousValue:l,changeSet:r,source:s};o.push(t)}})),this.validationService?.processGridOptions(this.gridOptions),r.properties=o.map((e=>e.type)),o.forEach((e=>{this.gridOptions.debug&&dt(`Updated property ${e.type} from`,e.previousValue," to ",e.currentValue),this.propertyEventService.dispatchEvent(e)}))}addPropertyEventListener(e,t){this.propertyEventService.addEventListener(e,t)}removePropertyEventListener(e,t){this.propertyEventService.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(e){const t=e;return t.api=this.api,t.context=this.gridOptionsContext,t}assertModuleRegistered(e,t){return Xo.__assertRegistered(e,t,this.gridId)}isModuleRegistered(e){return Xo.__isRegistered(e,this.gridId)}};Uc.changeSetId=0;var jc=Uc,qc=class extends Ai{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let i,s;if(Ss(e.column)?i=this.visibleColsService.getGroupAtDirection(e.column,t):(s=`getCol${t}`,i=this.visibleColsService[s](e.column)),!i)return;const{headerRowIndex:r}=e;if("filter"!==this.getHeaderRowType(r)){const e=[i];for(;i.getParent();)i=i.getParent(),e.push(i);i=e[e.length-1-r]}const{column:o,headerRowIndex:n}=this.getHeaderIndexToFocus(i,r);return{column:o,headerRowIndex:n}}getHeaderIndexToFocus(e,t){let i;if(Ss(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const s=e;i=s.getLeafColumns()[0];let r=i;for(;r!==s;)t++,r=r.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return!!e&&e.getLeafColumns().some((e=>e.isSpanHeaderHeight()))}getColumnVisibleParent(e,t){const i=this.getHeaderRowType(t),s="column"===i;let r="filter"===i?e:e.getParent(),o=t-1,n=o;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;r&&r.isPadding();)r=r.getParent(),o--;n=o,o<0&&(r=e,o=t,n=void 0)}return{column:r,headerRowIndex:o,headerRowIndexWithoutSpan:n}}getColumnVisibleChild(e,t,i="After"){let s=e,r=t+1;const o=r;if("group"===this.getHeaderRowType(t)){const t=e.getDisplayedLeafColumns(),o="After"===i?t[0]:pi(t),n=[];let a=o;for(;a.getParent()!==e;)a=a.getParent(),n.push(a);if(s=o,o.isSpanHeaderHeight())for(let e=n.length-1;e>=0;e--){const t=n[e];if(!t.isPadding()){s=t;break}r++}else s=pi(n),s||(s=o)}return{column:s,headerRowIndex:r,headerRowIndexWithoutSpan:o}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const i=this.visibleColsService.getAllCols(),s=i["start"===t?0:i.length-1];if(!s)return;const r=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()),o=r?.getRowType(e);return"group"==o?{headerRowIndex:e,column:this.visibleColsService.getColGroupAtLevel(s,e)}:{headerRowIndex:null==o?-1:e,column:s}}},Kc=class extends Ai{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(t,i,s)=>e({key:t,defaultValue:i,variableValues:s});const t=this.gos.get("localeText");return(e,i,s)=>{let r=t&&t[e];if(r&&s&&s.length){let e=0;for(;!(e>=s.length)&&-1!==r.indexOf("${variable}");)r=r.replace("${variable}",s[e++])}return r??i}}},Yc=class extends Ai{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new $i(this.getFrameworkOverrides())}addEventListener(e,t){const i=this.frameworkEventWrappingService.wrap(t),s=Lt(this.gos)&&!Wc.has(e),r=s?this.asyncEventListeners:this.syncEventListeners;r.has(e)||r.set(e,new Set),r.get(e).add(i),this.eventService.addEventListener(e,i,s)}removeEventListener(e,t){const i=this.frameworkEventWrappingService.unwrap(t),s=this.asyncEventListeners.get(e),r=!!s?.delete(i);r||this.syncEventListeners.get(e)?.delete(i),this.eventService.removeEventListener(e,i,r)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(Lt(this.gos)){const i=(e,i)=>{Wc.has(e)&&t(e,i)},s=(e,i)=>{Wc.has(e)||t(e,i)};this.globalEventListenerPairs.set(e,{syncListener:i,asyncListener:s}),this.eventService.addGlobalListener(i,!1),this.eventService.addGlobalListener(s,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:i,asyncListener:s}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(i,!1),this.eventService.removeGlobalListener(s,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach(((e,i)=>{e.forEach((e=>this.eventService.removeEventListener(i,e,t))),e.clear()})),e.clear()}destroyGlobalListeners(e,t){e.forEach((e=>this.eventService.removeGlobalListener(e,t))),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach((({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)})),this.globalEventListenerPairs.clear()}},Qc=class extends Ai{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},Jc=class extends Ai{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return wt(this.topRowBounds)||wt(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=yt(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},Xc=class extends Ai{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=ft(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){const e=$t(this.gos),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),er(t,"polite"),qs(t,"relevant","additions text"),qs(t,"atomic",!0),this.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout((()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)}),50)}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(Tr(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},Zc=class extends Ai{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,(e=>this.gridBodyCtrl=e.gridBodyCtrl))}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush((()=>this.activeNext=!1),(()=>this.active=!1))}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push((()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)}))}flush(e,t){if(0===this.executeNextFuncs.length&&0===this.executeLaterFuncs.length)return e(),void t();const i=e=>{for(;e.length;){const t=e.pop();t&&t()}};this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>{e(),i(this.executeNextFuncs)}),0),window.setTimeout((()=>{t(),i(this.executeLaterFuncs)}),200)}))}},eu=class extends Ai{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},tu=class extends Ai{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=Tt(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return 0!==this.state&&!!this.overlayWrapperComp}isExclusive(){return 1===this.state&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos.get("loading");(e||void 0===e&&!this.gos.get("suppressLoadingOverlay"))&&this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")?ct("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead."):this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp)return void(this.state=0);let e=this.gos.get("loading");this.showInitialOverlay&&void 0===e&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?1!==this.state&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?2!==this.state&&this.doShowNoRowsOverlay():0!==this.state&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){const s=e.newAgStackInstance();this.overlayWrapperComp?.showOverlay(s,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;if(2===this.state){const t=this.ctrlsService.get("gridHeaderCtrl");e=t?.getHeaderHeight()||0}else 0!==this.wrapperPadding&&(e=0);this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},iu=class extends Ai{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){const t=[];return yt(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),wi(t,this.processClassesFromGridOptions(e.rowNode)),wi(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&("left"===e.pinned&&t.push("ag-cell-last-left-pinned"),"right"===e.pinned&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],i=e=>{"string"==typeof e?t.push(e):Array.isArray(e)&&e.forEach((e=>t.push(e)))},s=this.gos.get("rowClass");if(s){if("function"==typeof s)return ct("rowClass should not be a function, please use getRowClass instead"),[];i(s)}const r=this.gos.getCallback("getRowClass");return r&&i(r({data:e.data,node:e,rowIndex:e.rowIndex})),t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,(e=>{t.push(e)}),(()=>{})),t}processRowClassRules(e,t,i){const s=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),s,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},su=class extends Ai{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=function(){if(void 0!==zs)return zs;if(!document.body)return-1;let e=1e6;const t=dr()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const s=2*e;if(i.style.height=s+"px",s>t||i.clientHeight!==s)break;e=s}return document.body.removeChild(i),zs=e,e}(),this.gos.get("debug")&&dt("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&dt(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t="number"==typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=e/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*t}},ru=class extends Ai{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=Kt(this.gos),this.addManagedPropertyListener("accentedSort",(e=>this.isAccentedSort=e.currentValue)),this.addManagedPropertyListener("autoGroupColumnDef",(()=>this.primaryColumnsSortGroups=Kt(this.gos)))}doFullSort(e,t){const i=e.map(((e,t)=>({currentPos:t,rowNode:e})));return i.sort(this.compareRowNodes.bind(this,t)),i.map((e=>e.rowNode))}compareRowNodes(e,t,i){const s=t.rowNode,r=i.rowNode;for(let t=0,i=e.length;t<i;t++){const i=e[t],o="desc"===i.sort,n=this.getValue(s,i.column),a=this.getValue(r,i.column);let l;const d=this.getComparator(i,s);if(l=d?d(n,a,s,r,o):xt(n,a,this.isAccentedSort),!isNaN(l)&&0!==l)return"asc"===i.sort?l:-1*l}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,s=i.getColDef().comparator;if(null!=s)return s;if(!i.getColDef().showRowGroup)return;const r=!t.group&&i.getColDef().field;if(!r)return;const o=this.columnModel.getColDefCol(r);return o?o.getColDef().comparator:void 0}getValue(e,t){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(Zt(this.gos,this.columnModel.isPivotActive())){const i=e.allLeafChildren?.[0];return i?this.valueService.getValue(t,i,!1,!1):void 0}const i=this.showRowGroupColsService?.getShowRowGroupCol(t.getId());if(!i)return;return e.groupData?.[i.getId()]}return e.group&&t.getColDef().showRowGroup?void 0:this.valueService.getValue(t,e,!1,!1)}},ou=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let s=0;s<e.childrenAfterGroup.length;s++){const r=e.childrenAfterGroup[s];r.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[s],t,i):i&&t(r)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const e={rowNode:t,children:null};this.mapToItems[t.id]=e,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach((e=>this.nodeIdsToColumns[i.id][e.getId()]=!0)),i=i.parent}linkPathItems(e,t){let i=e;for(let e=0;e<t;e++){const e=this.mapToItems[i.id],t=this.mapToItems[i.parent.id];t.children||(t.children=[]),t.children.push(e),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>i[e.getId()]))}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>!i[e.getId()]))}},nu=class extends Ai{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new Rd,this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){const{gos:e,rowModel:t,onRowSelected:i}=this;this.selectionCtx.init(t),this.rowSelectionMode=li(e),this.groupSelectsChildren=ui(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],(()=>{const t=ui(e),i=li(e);t===this.groupSelectsChildren&&i===this.rowSelectionMode||(this.groupSelectsChildren=t,this.rowSelectionMode=i,this.deselectAllRowNodes({source:"api"}))})),this.addManagedEventListeners({rowSelected:i.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return"multiRow"===this.rowSelectionMode}overrideSelectionValue(e,t){if(!(e=>"checkboxSelected"===e||"rowClicked"===e||"spaceKey"===e||"uiSelectAll"===e||"uiSelectAllCurrentPage"===e||"uiSelectAllFiltered"===e)(t))return e;const i=this.selectionCtx.getRoot();return!i||(i.isSelected()??!1)}setNodesSelected(e){const{newValue:t,clearSelection:i,suppressFinishActions:s,rangeSelect:r,nodes:o,event:n,source:a}=e;if(0===o.length)return 0;if(o.length>1&&!this.isMultiSelect())return ct("cannot multi select unless selection mode is 'multiRow'"),0;const l=this.groupSelectsChildren&&!0===e.groupSelectsFiltered,d=o.map((e=>e.footer?e.sibling:e));if(r){if(d.length>1)return ct("cannot range select while selecting multiple rows"),0;const e=d[0],i=this.overrideSelectionValue(t,a);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(e)){const t=this.selectionCtx.truncate(e);return i&&this.selectRange(t.discard,!1,a),this.selectRange(t.keep,i,a)}if(this.selectionCtx.getRoot()!==e){const t=this.selectionCtx.extend(e,this.groupSelectsChildren);return i&&this.selectRange(t.discard,!1,a),this.selectRange(t.keep,i,a)}}}s||this.selectionCtx.setRoot(d[0]);let c=0;for(let e=0;e<d.length;e++){const i=d[e];l&&i.group||i.selectThisNode(t,n,a)&&c++,this.groupSelectsChildren&&i.childrenAfterGroup?.length&&(c+=this.selectChildren(i,t,l,a))}return s||(t&&(i||!this.isMultiSelect())&&(c+=this.clearOtherNodes(d[0],a)),c>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))),c}selectRange(e,t,i){let s=0;return e.forEach((e=>{e.group&&this.groupSelectsChildren||e.selectThisNode(t,void 0,i)&&s++})),s>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),s}selectChildren(e,t,i,s){const r=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return wt(r)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:s,nodes:r})}getSelectedNodes(){const e=[];return this.selectedNodes.forEach((t=>{t&&e.push(t)})),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach((t=>{t&&t.data&&e.push(t.data)})),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach(((i,s)=>{i&&e(i)&&t.set(s,i)})),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren)return!1;if(!Tt(this.gos))return!1;const i=this.rowModel.getRootNode();t||(t=new ou(!0,i)).setInactive();let s=!1;return t.forEachChangedNodeDepthFirst((t=>{if(t!==i){const i=t.calculateSelectedFromChildren();s=t.selectThisNode(null!==i&&i,void 0,e)||s}})),s}clearOtherNodes(e,t){const i=new Map;let s=0;return this.selectedNodes.forEach((r=>{if(r&&r.id!==e.id){const e=this.selectedNodes.get(r.id);s+=e.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&r.parent&&i.set(r.parent.id,r.parent)}})),i.forEach((e=>{const i=e.calculateSelectedFromChildren();e.selectThisNode(null!==i&&i,void 0,t)})),s}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(yt(t)&&e.id!==t.id&&t){const i=t.id;this.selectedNodes.get(i)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes?.clear()}getBestCostNodeSelection(){if(!Tt(this.gos))return;const e=this.rowModel.getTopLevelNodes();if(null===e)return;const t=[];return function e(i){for(let s=0,r=i.length;s<r;s++){const r=i[s];if(r.isSelected())t.push(r);else{const t=r;t.group&&t.children&&e(t.children)}}}(e),t}isEmpty(){let e=0;return this.selectedNodes.forEach((t=>{t&&e++})),0===e}deselectAllRowNodes(e){const t=e=>e.selectThisNode(!1,void 0,s),i=Tt(this.gos),{source:s,justFiltered:r,justCurrentPage:o}=e;if(o||r){if(!i)return void ut("selecting just filtered only works when gridOptions.rowModelType='clientSide'");this.getNodesToSelect(r,o).forEach(t)}else this.selectedNodes.forEach((e=>{e&&t(e)})),this.reset(s);this.selectionCtx.reset(),i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s),this.dispatchSelectionChanged(s)}getSelectedCounts(e,t){let i=0,s=0;return this.getNodesToSelect(e,t).forEach((e=>{this.groupSelectsChildren&&e.group||(e.isSelected()?i++:e.selectable&&s++)})),{selectedCount:i,notSelectedCount:s}}getSelectAllState(e,t){const{selectedCount:i,notSelectedCount:s}=this.getSelectedCounts(e,t);return(0!==i||0!==s)&&(i>0&&s>0?null:i>0)}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter((e=>e.selectable)).length>0}getNodesToSelect(e=!1,t=!1){this.validateSelectAllType();const i=[];if(t)return this.forEachNodeOnPage((e=>{if(e.group)if(e.expanded)this.groupSelectsChildren||i.push(e);else{const t=e=>{i.push(e),e.childrenAfterFilter?.length&&e.childrenAfterFilter.forEach(t)};t(e)}else i.push(e)})),i;const s=this.rowModel;return e?(s.forEachNodeAfterFilter((e=>{i.push(e)})),i):(s.forEachNode((e=>{i.push(e)})),i)}forEachNodeOnPage(e){const t=this.pageBoundsService.getFirstRow(),i=this.pageBoundsService.getLastRow();for(let s=t;s<=i;s++){const t=this.rowModel.getRow(s);t&&e(t)}}selectAllRowNodes(e){if("string"!=typeof this.gos.get("rowSelection")&&!di(this.gos))return ct("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();const{source:t,justFiltered:i,justCurrentPage:s}=e,r=this.getNodesToSelect(i,s);r.forEach((e=>e.selectThisNode(!0,void 0,t))),this.selectionCtx.setRoot(r[0]??null),this.selectionCtx.setEndRange(pi(r)??null),Tt(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){const e=[];return this.selectedNodes.forEach((t=>{t?.id&&e.push(t.id)})),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return ut("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");const i=new Set(e),s=[];this.rowModel.forEachNode((e=>{i.has(e.id)&&s.push(e)})),this.setNodesSelected({newValue:!0,nodes:s,source:t})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!Tt(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},au=class extends Ai{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListener("isRowSelectable",(()=>this.updateSelectable()))}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){const{gos:t}=this,i=kt(t),s=ai(t);if(!i||!s)return;const r=ui(t),o=Tt(t)&&r,n=[],a=t=>{if(e&&!t.group)return;if(o&&t.group){const e=t.childrenAfterGroup.some((e=>!0===e.selectable));return void t.setRowSelectable(e,!0)}const i=s?.(t)??!0;t.setRowSelectable(i,!0),!i&&t.isSelected()&&n.push(t)};if(o){const e=this.rowModel;new ou(!1,e.getRootNode()).forEachChangedNodeDepthFirst(a,!0,!0)}else this.rowModel.forEachNode(a);n.length&&this.selectionService.setNodesSelected({nodes:n,newValue:!1,source:"selectableChanged"}),o&&this.selectionService instanceof nu&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},lu=["asc","desc",null],du=class extends Ai{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,i){const s=this.getNextSortDirection(e);this.setSortForColumn(e,s,t,i)}setSortForColumn(e,t,i,s){"asc"!==t&&"desc"!==t&&(t=null);let r=[e];if(Kt(this.gos)&&e.getColDef().showRowGroup){const t=this.funcColsService.getSourceColumnsForGroupColumn(e),i=t?.filter((e=>e.isSortable()));i&&(r=[e,...i])}r.forEach((e=>e.setSort(t,s)));const o=[];if(!i&&!this.gos.get("alwaysMultiSort")||this.gos.get("suppressMultiSort")){const e=this.clearSortBarTheseColumns(r,s);o.push(...e)}this.updateSortIndex(e),o.push(...r),this.dispatchSortChangedEvents(s,o)}updateSortIndex(e){const t=Kt(this.gos),i=this.showRowGroupColsService?.getShowRowGroupCol(e.getId()),s=t&&i||e,r=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach((e=>e.setSortIndex(null)));const o=r.filter((e=>!(t&&e.getColDef().showRowGroup||e===s)));(s.getSort()?[...o,s]:o).forEach(((e,t)=>{e.setSortIndex(t)}))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const e=this.columnModel.getAllCols().filter((e=>!!e.getSort()));return e&&e.length>0}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.columnModel.getAllCols().forEach((s=>{e.includes(s)||(s.getSort()&&i.push(s),s.setSort(void 0,t))})),i}getNextSortDirection(e){let t;if(t=e.getColDef().sortingOrder?e.getColDef().sortingOrder:this.gos.get("sortingOrder")?this.gos.get("sortingOrder"):lu,!Array.isArray(t)||t.length<=0)return ct(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;const i=t.indexOf(e.getSort()),s=i<0,r=i==t.length-1;let o;return o=s||r?t[0]:t[i+1],lu.indexOf(o)<0?(ct("invalid sort type ",o),null):o}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter((e=>!!e.getSort()));if(this.columnModel.isPivotMode()){const t=Kt(this.gos);e=e.filter((e=>{const i=!!e.getAggFunc(),s=!e.isPrimary(),r=t?this.showRowGroupColsService?.getShowRowGroupCol(e.getId()):e.getColDef().showRowGroup;return i||s||r}))}const t=this.funcColsService.getRowGroupColumns().filter((e=>!!e.getSort())),i={};e.forEach(((e,t)=>i[e.getId()]=t)),e.sort(((e,t)=>{const s=e.getSortIndex(),r=t.getSortIndex();return null!=s&&null!=r?s-r:null==s&&null==r?i[e.getId()]>i[t.getId()]?1:-1:null==r?-1:1}));const s=Kt(this.gos)&&!!t.length;s&&(e=[...new Set(e.map((e=>this.showRowGroupColsService?.getShowRowGroupCol(e.getId())??e)))]);const r=new Map;return e.forEach(((e,t)=>r.set(e,t))),s&&t.forEach((e=>{const t=this.showRowGroupColsService.getShowRowGroupCol(e.getId());r.set(e,r.get(t))})),r}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort((([e,t],[i,s])=>t-s)).map((([e])=>e))}getSortModel(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),colId:e.getId()})))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),column:e})))}canColumnDisplayMixedSort(e){const t=Kt(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();const i=null!=e.getColDef().field||e.getColDef().valueGetter?[e,...t]:t,s=i[0].getSort();return i.every((e=>e.getSort()==s))?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},cu=class extends Ai{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",(e=>this.setColumnDefs(e)))}start(){this.ctrlsService.whenReady(this,(()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()}))}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});const e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&dt(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t)return this.waitingForColumns?(this.waitingForColumns=!1,void this.setColumnsAndData(t)):void this.columnModel.setColumnDefs(t,ns(e.source))}},uu=class extends Ai{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){Tt(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){"paste"!==e.source&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;const i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const s=this.gos.get("aggregateOnlyChangedColumns"),r=new ou(s,this.clientSideRowModel.getRootNode());r.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(r),r.forEachChangedNodeDepthFirst((e=>{i.push(e)}))}this.rowRenderer.refreshCells({rowNodes:i})}},hu=class extends Ai{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if("string"==typeof e)return this.evaluateExpression(e,t);ut("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return dt("Processing of the expression failed"),dt("Expression = ",e),dt("Params = ",t),dt("Exception = ",i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},pu=class extends Ai{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[t]}},gu=class extends Ai{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=Mt(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=e=>this.callColumnCellValueChangedHandler(e),t=Lt(this.gos);this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc((()=>this.eventService.removeEventListener("cellValueChanged",e,t))),this.addManagedPropertyListener("treeData",(e=>this.isTreeData=e.currentValue))}getValueForDisplay(e,t){const i=t.leafGroup&&this.columnModel.isPivotMode(),s=t.group&&t.expanded&&!t.footer&&!i,r=this.gos.get("groupSuppressBlankHeader");if(!s||r)return this.getValue(e,t);let o=!1;const n=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");o="function"!=typeof n?!!n:!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this});const a=s&&o;return this.getValue(e,t,!1,a)}getValue(e,t,i=!1,s=!1){if(this.initialised||this.init(),!t)return;const r=e.getColDef(),o=r.field,n=e.getColId(),a=t.data;let l;const d=t.groupData&&void 0!==t.groupData[n],c=!s&&t.aggData&&void 0!==t.aggData[n],u=this.isSsrm&&s&&!!e.getColDef().aggFunc,h=this.isSsrm&&t.footer&&t.field&&(!0===e.getColDef().showRowGroup||e.getColDef().showRowGroup===t.field);if(i&&r.filterValueGetter?l=this.executeFilterValueGetter(r.filterValueGetter,a,e,t):this.isTreeData&&c?l=t.aggData[n]:this.isTreeData&&r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,e,t):this.isTreeData&&o&&a?l=Ki(a,o,e.isFieldContainsDots()):d?l=t.groupData[n]:c?l=t.aggData[n]:r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,e,t):h?l=Ki(a,t.field,e.isFieldContainsDots()):o&&a&&!u&&(l=Ki(a,o,e.isFieldContainsDots())),this.cellExpressions&&"string"==typeof l&&0===l.indexOf("=")){const i=l.substring(1);l=this.executeValueGetter(i,a,e,t)}if(null==l){const i=this.getOpenedGroup(t,e);if(null!=i)return i}return l}parseValue(e,t,i,s){const r=e.getColDef(),o=r.valueParser;if(yt(o)){const n=this.gos.addGridCommonParams({node:t,data:t?.data,oldValue:s,newValue:i,colDef:r,column:e});return"function"==typeof o?o(n):this.expressionService.evaluate(o,n)}return i}getDeleteValue(e,t){return yt(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,i,s,r=!0){let o,n=null;const a=e.getColDef();if(s?o=s:r&&(o=a.valueFormatter),o){const s=this.gos.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:a,column:e});n="function"==typeof o?o(s):this.expressionService.evaluate(o,s)}else if(a.refData)return a.refData[i]||"";return null==n&&Array.isArray(i)&&(n=i.join(", ")),n}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup"))return;if(!t.getColDef().showRowGroup)return;const i=t.getColDef().showRowGroup;let s=e.parent;for(;null!=s;){if(s.rowGroupColumn&&(!0===i||i===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}setValue(e,t,i,s){const r=this.columnModel.getColDefCol(t);if(!e||!r)return!1;wt(e.data)&&(e.data={});const{field:o,valueSetter:n}=r.getColDef();if(wt(o)&&wt(n))return ct("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(r,i))return ct("Data type of the new value does not match the cell data type of the column"),!1;const a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(r,e),newValue:i,colDef:r.getColDef(),column:r});let l;if(a.newValue=i,l=yt(n)?"function"==typeof n?n(a):this.expressionService.evaluate(n,a):this.setValueUsingField(e.data,o,i,r.isFieldContainsDots()),void 0===l&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();const d=this.getValue(r,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,colDef:a.colDef,data:e.data,node:e,oldValue:a.oldValue,newValue:d,value:d,source:s}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;"function"==typeof t&&this.getFrameworkOverrides().wrapOutgoing((()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})}))}setValueUsingField(e,t,i,s){if(!t)return!1;let r=!1;if(s){const s=t.split(".");let o=e;for(;s.length>0&&o;){const e=s.shift();0===s.length?(r=o[e]===i,r||(o[e]=i)):o=o[e]}}else r=e[t]===i,r||(e[t]=i);return!r}executeFilterValueGetter(e,t,i,s){const r=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});return"function"==typeof e?e(r):this.expressionService.evaluate(e,r)}executeValueGetter(e,t,i,s){const r=i.getColId(),o=this.valueCache.getValue(s,r);if(void 0!==o)return o;const n=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});let a;return a="function"==typeof e?e(n):this.expressionService.evaluate(e,n),this.valueCache.setValue(s,r,a),a}getValueCallback(e,t){const i=this.columnModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),s=e.getColDef().keyCreator;let r=i;return s&&(r=s(this.gos.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data}))),"string"==typeof r||null==r||(r=String(r),"[object Object]"===r&&ct("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),r}},mu=class e{static applyGlobalGridOptions(t){if(!e.gridOptions)return t;let i={};return qi(i,e.gridOptions,!0,!0),"deep"===e.mergeStrategy?qi(i,t,!0,!0):i={...i,...t},e.gridOptions.context&&(i.context=e.gridOptions.context),t.context&&("deep"===e.mergeStrategy&&i.context&&qi(t.context,i.context,!0,!0),i.context=t.context),i}};mu.gridOptions=void 0,mu.mergeStrategy="shallow";var fu=mu,vu=1,Cu=class{create(e,t,i,s,r){const o=function(e){const t={};return Object.entries(e).forEach((([e,i])=>{const s=zc(e,i);t[e]=s})),t}(fu.applyGlobalGridOptions(t)),n=o.gridId??String(vu++),a=this.getRegisteredModules(r,n),l=this.createBeansList(o.rowModelType,a,n),d=this.createProvidedBeans(e,o,r);if(!l)return void ut("Failed to create grid.");const c=new en({providedBeanInstances:d,beanClasses:l,gridId:n,beanInitComparator:Yd,beanDestroyComparator:Qd,derivedBeans:[Hd]});return this.registerModuleUserComponents(c,a),this.registerControllers(c,a),this.registerModuleApiFunctions(c,a),i(c),c.getBean("syncService").start(),s&&s(c),c.getBean("gridApi")}registerControllers(e,t){const i=e.getBean("ctrlsFactory");t.forEach((e=>{e.controllers&&e.controllers.forEach((e=>i.register(e)))}))}getRegisteredModules(e,t){const i=e?e.modules:null,s=Xo.__getRegisteredModules(t),r=[],o={},n=(e,t,i)=>{var s;o[(s=t).moduleName]||(o[s.moduleName]=!0,r.push(s),Xo.__register(s,e,i)),t.dependantModules&&t.dependantModules.forEach((t=>n(e,t,i)))};return n(!!i?.length||!Xo.__isPackageBased(),Hc,void 0),i&&i.forEach((e=>n(!0,e,t))),s&&s.forEach((e=>n(!Xo.__isPackageBased(),e,void 0))),r}registerModuleUserComponents(e,t){const i=this.extractModuleEntity(t,(e=>e.userComponents?e.userComponents:[])),s=e.getBean("userComponentRegistry");i.forEach((({name:e,classImp:t,params:i})=>{s.registerDefaultComponent(e,t,i)}))}registerModuleApiFunctions(e,t){const i=e.getBean("apiFunctionService");t.forEach((e=>{const t=e.apiFunctions;t&&Object.keys(t).forEach((e=>{i?.addFunction(e,t[e])}))}))}createProvidedBeans(e,t,i){let s=i?i.frameworkOverrides:null;wt(s)&&(s=new Id);const r={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:s};return i&&i.providedBeanInstances&&Object.assign(r,i.providedBeanInstances),r}createBeansList(e="clientSide",t,i){const s=t.filter((t=>!t.rowModel||t.rowModel===e)),r={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!r[e])return void ut("Could not find row model for rowModelType = ",e);if(!Xo.__assertRegistered(r[e],`rowModelType = '${e}'`,i))return;const o=[tc,Zd,qc,$c,Vd,Po,jd,qd,jl,Yo,su,zl,Kc,yd,nn,Es,lc,jc,Td,nu,os,Da,Jc,Qc,vd,hu,ss,_l,pu,gu,md,Ul,sn,cc,Wl,oc,kd,Ed,Vl,du,eu,Zc,au,uu,ql,$d,iu,ru,Xd,uc,ec,Jd,cu,tu,Kl,Yc,Xc,Yl,us,Wd,ps,ds,_d,zd,ys,cs,vs,Ud,Cs,ki],n=this.extractModuleEntity(s,(e=>e.beans?e.beans:[]));o.push(...n);const a=[];return o.forEach((e=>{a.indexOf(e)<0&&a.push(e)})),a}extractModuleEntity(e,t){return[].concat(...e.map(t))}},yu=class extends Ai{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){const e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}},wu={version:ca,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:function(e){e.expansionService.expandAll(!0)},collapseAll:function(e){e.expansionService.expandAll(!1)},onRowHeightChanged:function(e){const t=e.rowModelHelperService?.getClientSideRowModel(),i=e.rowModelHelperService?.getServerSideRowModel();t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}}},Su={version:ca,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:function(e,t,i){const s=e.rowModelHelperService?.getServerSideRowModel();if(s)return e.funcColsService.isRowGroupEmpty()?void s.setRowCount(t,i):void ut("setRowCount cannot be used while using row grouping.");const r=e.rowModelHelperService?.getInfiniteRowModel();r&&r.setRowCount(t,i)},getCacheBlockState:function(e){return e.rowNodeBlockLoader?.getBlockState()??{}},isLastRowIndexKnown:function(e){return e.rowModel.isLastRowIndexKnown()}}},bu=class{wrap(e,t,i=[],s){const r=this.createWrapper(e,s);return t.forEach((e=>{this.createMethod(r,e,!0)})),i.forEach((e=>{this.createMethod(r,e,!1)})),r}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&ct("Framework component is missing the method "+t+"()"),null)}}},Ru=class{};Ru.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"},Ru.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"],Ru.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var Eu="undefined"==typeof global?{}:global;Eu.HTMLElement="undefined"==typeof HTMLElement?{}:HTMLElement,Eu.HTMLButtonElement="undefined"==typeof HTMLButtonElement?{}:HTMLButtonElement,Eu.HTMLSelectElement="undefined"==typeof HTMLSelectElement?{}:HTMLSelectElement,Eu.HTMLInputElement="undefined"==typeof HTMLInputElement?{}:HTMLInputElement,Eu.Node="undefined"==typeof Node?{}:Node,Eu.MouseEvent="undefined"==typeof MouseEvent?{}:MouseEvent;var Fu=class{constructor(e,t,i,s,r,o){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=i,this.funcColsService=s,this.beans=o,this.selectionService=r,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id="ROOT_NODE_ID",this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return zi(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if("string"==typeof e)return void ct("rowData must be an array.");this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const t=this.rootNode,i=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map(((e,t)=>this.createNode(e,this.rootNode,0,t))):(t.allLeafChildren=[],t.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=t.childrenAfterFilter,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenAfterAggFilter=t.childrenAfterAggFilter,i.childrenAfterSort=t.childrenAfterSort,i.childrenMapped=t.childrenMapped,i.allLeafChildren=t.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const t={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[];return this.executeRemove(e,t,i),this.executeUpdate(e,t,i),this.executeAdd(e,t),this.updateSelection(i,"rowDataChanged"),t}updateRowOrderFromRowData(e){const t=this.rootNode.allLeafChildren,i=t?.length??0,s=new Map;let r=-1,o=-1;for(let n=0;n<i;++n){const i=t[n],a=i.data;a!==e[n]&&(o<0&&(r=n),o=n,s.set(a,i))}if(r<0)return!1;for(let i=r;i<=o;++i){const r=s.get(e[i]);void 0!==r&&(t[i]=r,r.sourceRowIndex=i)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}updateSelection(e,t){const i=e.length>0;i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),i&&this.eventService.dispatchEvent({type:"selectionChanged",source:t})}executeAdd(e,t){const i=e.add;if(St(i))return;const s=this.rootNode.allLeafChildren;let r=s.length;if("number"==typeof e.addIndex&&(r=this.sanitizeAddIndex(e.addIndex),r>0)&&this.gos.get("treeData"))for(let e=0;e<s.length;e++){const t=s[e];if(t?.rowIndex==r-1){r=e+1;break}}const o=i.map(((e,t)=>this.createNode(e,this.rootNode,0,r+t)));if(r<s.length){const e=s.slice(0,r),i=s.slice(r,s.length),n=e.length+o.length;for(let e=0,t=i.length;e<t;++e)i[e].sourceRowIndex=n+e;this.rootNode.allLeafChildren=[...e,...o,...i],t.rowsInserted=!0}else this.rootNode.allLeafChildren=s.concat(o);const n=this.rootNode.sibling;n&&(n.allLeafChildren=s),t.rowNodeTransaction.add=o}sanitizeAddIndex(e){const t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}executeRemove(e,{rowNodeTransaction:t},i){const{remove:s}=e;if(St(s))return;const r={};s.forEach((e=>{const s=this.lookupRowNode(e);s&&(s.isSelected()&&i.push(s),s.clearRowTopAndRowIndex(),r[s.id]=!0,delete this.allNodesMap[s.id],t.remove.push(s))})),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren?.filter((e=>!r[e.id]))??null,this.rootNode.allLeafChildren?.forEach(((e,t)=>{e.sourceRowIndex=t}));const o=this.rootNode.sibling;o&&(o.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,{rowNodeTransaction:t},i){const{update:s}=e;St(s)||s.forEach((e=>{const s=this.lookupRowNode(e);s&&(s.updateData(e),!s.selectable&&s.isSelected()&&i.push(s),this.setMasterForRow(s,e,0,!1),t.update.push(s))}))}lookupRowNode(e){const t=ei(this.gos);let i;if(t){const s=t({data:e,level:0});if(i=this.allNodesMap[s],!i)return ut(`could not find row id=${s}, data item was not found for this id`),null}else if(i=this.rootNode.allLeafChildren?.find((t=>t.data===e)),!i)return ut("could not find data item as object was not found",e),ut("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,t,i,s){const r=new pn(this.beans);return r.sourceRowIndex=s,r.group=!1,this.setMasterForRow(r,e,i,!0),t&&(r.parent=t),r.level=i,r.setDataAndId(e,this.nextId.toString()),this.allNodesMap[r.id]&&ct(`duplicate node id '${r.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[r.id]=r,this.nextId++,r}setMasterForRow(e,t,i,s){if(this.gos.get("treeData"))e.setMaster(!1),s&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const i=this.gos.get("isRowMaster");i?e.setMaster(i(t)):e.setMaster(!0)}else e.setMaster(!1);if(s){const t=this.funcColsService.getRowGroupColumns(),s=i+(t?t.length:0);e.expanded=!!e.master&&this.isExpanded(s)}}}isExpanded(e){const t=this.gos.get("groupDefaultExpanded");return-1===t||e<t}},Pu="32.2.1",xu={version:Pu,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=ft(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new pn(this.beans),this.nodeManager=new Fu(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),s=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),r=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),o=new Set(["postSortRows","groupDisplayType","accentedSort"]),n=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...i,...s,...s,...r,...o,...n,...a];this.addManagedPropertyListeners(l,(l=>{const d=l.changeSet?.properties;if(!d)return;const c=e=>d.some((t=>e.has(t)));c(e)?this.setRowData(this.rootNode.allLeafChildren.map((e=>e.data))):c(t)?this.refreshModel({step:"group"}):c(i)?this.refreshModel({step:"filter"}):c(s)?this.refreshModel({step:"pivot"}):c(r)?this.refreshModel({step:"aggregate"}):c(o)?this.refreshModel({step:"sort"}):c(n)?this.refreshModel({step:"filter_aggregates"}):c(a)&&this.refreshModel({step:"map"})})),this.addManagedPropertyListener("rowHeight",(()=>this.resetRowHeights()))}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,s){let r,o=!1;do{r=!1;const n=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(n,i),d=Math.min(a,s);for(let e=l;e<=d;e++){const t=this.getRow(e);if(t.rowHeightEstimated){const e=Nt(this.gos,t);t.setRowHeight(e.height),r=!0,o=!0}}r&&this.setRowTopAndRowIndex()}while(r);return o}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const i=new Set,s=It(this.gos,"normal");for(let r=0;r<this.rowsToDisplay.length;r++){const o=this.rowsToDisplay[r];if(null!=o.id&&i.add(o.id),null==o.rowHeight){const t=Nt(this.gos,o,s,e);o.setRowHeight(t.height,t.estimated)}o.setRowTop(t),o.setRowIndex(r),t+=o.rowHeight}return i}clearRowTopAndRowIndex(e,t){const i=e.isActive(),s=e=>{e&&null!=e.id&&!t.has(e.id)&&e.clearRowTopAndRowIndex()},r=e=>{if(s(e),s(e.detailNode),s(e.sibling),e.hasChildren()&&e.childrenAfterGroup){const t=-1==e.level;i&&!t&&!e.expanded||e.childrenAfterGroup.forEach(r)}};r(this.rootNode)}ensureRowsAtPixel(e,t,i=0){const s=this.getRowIndexAtPixel(t),r=this.getRow(s),o=!this.gos.get("suppressAnimationFrame");if(r===e[0])return!1;const n=this.rootNode.allLeafChildren;return e.forEach((e=>{fi(n,e)})),e.forEach(((e,t)=>{vi(n,e,Math.max(s+i,0)+t)})),e.forEach(((e,t)=>{e.sourceRowIndex=t})),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:o,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,t){const i=null!=t?this.getRowIndexAtPixel(t):null,s=null!=i?this.getRow(i):null;if(!s||!e||s===e||null==t)return void(this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null));const r=this.getHighlightPosition(t,s);this.lastHighlightedRow&&this.lastHighlightedRow!==s&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),s.setHighlighted(r),this.lastHighlightedRow=s}getHighlightPosition(e,t){if(!t){const i=this.getRowIndexAtPixel(e);if(!(t=this.getRow(i||0)))return 1}const{rowTop:i,rowHeight:s}=t;return e-i<s/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(0===this.rowsToDisplay.length)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const e=this.rootNode.childrenAfterAggFilter,t=this.rootNode.sibling?1:0;return(e?e.length:0)+t}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let t=e;if(this.rowsToDisplay[0].footer){if(0===e)return 0;t-=1}const i=this.rowsToDisplay[this.rowsToDisplay.length-1],s=t>=this.rootNode.childrenAfterSort.length;if(i.footer&&s)return i.rowIndex;let r=this.rootNode.childrenAfterSort[t];if(this.gos.get("groupHideOpenParents"))for(;r.expanded&&r.childrenAfterSort&&r.childrenAfterSort.length>0;)r=r.childrenAfterSort[0];return r.rowIndex}getRowBounds(e){if(wt(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=jt(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=jt(this.gos),i=0===e.columns.length||e.columns.some((e=>e.isPrimary()))?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=jt(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=St(e),i=new ou(!1,this.rootNode);return t&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;if(null==e.rowNodeTransactions)return!1;const t=e.rowNodeTransactions.filter((e=>null!=e.add&&e.add.length>0||null!=e.remove&&e.remove.length>0));return null==t||0==t.length}buildRefreshModelParams(e){let t="group";const i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(yt(e)&&(t=i[e]),!wt(t))return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gos.get("suppressAnimationFrame")};ut(`invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`)}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;const t="object"==typeof e&&"step"in e?e:this.buildRefreshModelParams(e);if(!t)return;if(this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,i,!!t.rowNodesOrderChanged,!!t.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(t.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}const s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,s),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){const e=wt(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return wt(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return yt(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,s=!1;const r=[],o=ui(this.gos);return this.forEachNodeAfterFilterAndSort((n=>{if(!s)if(i&&(n===t||n===e)&&(s=!0,n.group&&o))r.push(...n.allLeafChildren);else{if(!i){if(n!==t&&n!==e)return;i=!0}(!n.group||!o)&&r.push(n)}})),r}setDatasource(e){ut("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(pi(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let s=-1,r=-1;for(;;){const o=Math.floor((t+i)/2),n=this.rowsToDisplay[o];if(this.isRowInPixel(n,e))return o;if(n.rowTop<e?t=o+1:n.rowTop>e&&(i=o-1),s===t&&r===i)return o;s=t,r=i}}isRowInPixel(e,t){const i=e.rowTop,s=e.rowTop+e.rowHeight;return i<=t&&s>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(((t,i)=>e(t,i)))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:i,recursionType:s,includeFooterNodes:r}=e;let{index:o}=e;const n=e=>{const s=t[0]?.parent;if(!s)return;const n=r&&Qt(this.gos),a=Jt(this.gos),l=r&&a({node:s});s===this.rootNode?n===e&&(s.createFooter(),i(s.sibling,o++)):l===e&&(s.createFooter(),i(s.sibling,o++))};n("top");for(let e=0;e<t.length;e++){const n=t[e];if(i(n,o++),n.hasChildren()&&!n.footer){let e=null;switch(s){case 0:e=n.childrenAfterGroup;break;case 1:e=n.childrenAfterAggFilter;break;case 2:e=n.childrenAfterSort;break;case 3:e=n.leafGroup?null:n.childrenAfterSort}e&&(o=this.recursivelyWalkNodesAndCallback({nodes:[...e],callback:i,recursionType:s,index:o,includeFooterNodes:r}))}}return n("bottom"),o}doAggregate(e){this.aggregationStage?.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),s=r=>{r&&r.forEach((r=>{const o=()=>{r.expanded=e,s(r.childrenAfterGroup)};t?yt(r.childrenAfterGroup)&&o():i?!r.leafGroup&&o():r.group&&o()}))};this.rootNode&&s(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,s){if(this.groupStage)e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:i,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:s}),ui(this.gos)&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"});else{const e=this.rootNode,t=e.sibling;e.childrenAfterGroup=e.allLeafChildren,t&&(t.childrenAfterGroup=e.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if("string"==typeof e&&0==e.indexOf(pn.ID_PREFIX_ROW_GROUP)){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];const e=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout((()=>{this.isAlive()&&this.executeBatchUpdateRowData()}),e)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],t=[];let i=!1;this.rowDataTransactionBatch?.forEach((s=>{const{rowNodeTransaction:r,rowsInserted:o}=this.nodeManager.updateRowData(s.rowDataTransaction);o&&(i=!0),t.push(r),s.callback&&e.push(s.callback.bind(null,r))})),this.commonUpdateRowData(t,i),e.length>0&&window.setTimeout((()=>{e.forEach((e=>e()))}),0),t.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();const{rowNodeTransaction:t,rowsInserted:i}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([t],i),t}afterImmutableDataChange(e,t){this.commonUpdateRowData([e],t)}commonUpdateRowData(e,t){if(!this.hasStarted)return;const i=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode((t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0})),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}},class extends Ai{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){const t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const i=(t,i)=>{t.hasChildren()?t.childrenAfterFilter=e&&!i?t.childrenAfterGroup.filter((e=>{const t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,i=e.data&&this.filterManager.doesRowPassFilter({rowNode:e});return t||i})):t.childrenAfterGroup:t.childrenAfterFilter=t.childrenAfterGroup,t.sibling&&(t.sibling.childrenAfterFilter=t.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const e=(t,s)=>{if(t.childrenAfterGroup)for(let r=0;r<t.childrenAfterGroup.length;r++){const o=t.childrenAfterGroup[r],n=s||this.filterManager.doesRowPassFilter({rowNode:o});o.childrenAfterGroup?e(t.childrenAfterGroup[r],n):i(o,n)}i(t,s)},s=t=>e(t,!1);t.executeFromRootNode(s)}else{const e=e=>i(e,!1);t.forEachChangedNodeDepthFirst(e,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},class extends Ai{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){const t=this.sortController.getSortOptions(),i=yt(t)&&t.length>0,s=i&&yt(e.rowNodeTransactions)&&this.gos.get("deltaSort"),r=t.some((e=>Kt(this.gos)?e.column.isPrimary()&&e.column.isRowGroupActive():!!e.column.getColDef().showRowGroup));this.sortService.sort(t,i,s,e.rowNodeTransactions,e.changedPath,r)}},class extends Ai{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){const t=e.rowNode,i=[],s=this.columnModel.isPivotMode(),r=s&&t.leafGroup,o=r?[t]:t.childrenAfterSort,n=this.getFlattenDetails();if(this.recursivelyAddToRowsToDisplay(n,o,i,s,0),!r&&i.length>0&&n.grandTotalRow){t.createFooter();const e="top"===n.grandTotalRow;this.addRowNodeToRowsToDisplay(n,t.sibling,i,0,e)}return i}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:Xt(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:Qt(this.gos),groupTotalRow:Jt(this.gos)}}recursivelyAddToRowsToDisplay(e,t,i,s,r){if(!St(t))for(let o=0;o<t.length;o++){const n=t[o],a=n.hasChildren(),l=s&&!a,d=e.groupRemoveSingleChildren&&a&&1===n.childrenAfterGroup.length,c=e.groupRemoveLowestSingleChildren&&a&&n.leafGroup&&1===n.childrenAfterGroup.length,u=s&&n.leafGroup,h=e.hideOpenParents&&n.expanded&&!n.master&&!u;if(!(l||h||d||c)&&this.addRowNodeToRowsToDisplay(e,n,i,r),!s||!n.leafGroup)if(a){const t=d||c;if(n.expanded||t){const o=e.groupTotalRow({node:n});o||n.destroyFooter();const a=t?r:r+1;"top"===o&&(n.createFooter(),this.addRowNodeToRowsToDisplay(e,n.sibling,i,a)),this.recursivelyAddToRowsToDisplay(e,n.childrenAfterSort,i,s,a),"bottom"===o&&(n.createFooter(),this.addRowNodeToRowsToDisplay(e,n.sibling,i,a))}}else if(n.master&&n.expanded){const t=this.createDetailNode(n);this.addRowNodeToRowsToDisplay(e,t,i,r)}}}addRowNodeToRowsToDisplay(e,t,i,s,r){r?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:s)}createDetailNode(e){if(yt(e.detailNode))return e.detailNode;const t=new pn(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,yt(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},class extends Ai{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,i,s,r,o){const n=this.gos.get("groupMaintainOrder"),a=this.columnModel.getCols().some((e=>e.isRowGroupActive()));let l={};i&&s&&(l=this.calculateDirtyNodes(s));const d=this.columnModel.isPivotMode(),c=this.gos.getCallback("postSortRows");r&&r.forEachChangedNodeDepthFirst((s=>{this.pullDownGroupDataForHideOpenParents(s.childrenAfterAggFilter,!0);const u=d&&s.leafGroup;if(n&&a&&!s.leafGroup&&!o){const e=this.funcColsService.getRowGroupColumns()?.[s.level+1],t=null===e?.getSort(),i=s.childrenAfterAggFilter.slice(0);if(s.childrenAfterSort&&!t){const e={};s.childrenAfterSort.forEach(((t,i)=>{e[t.id]=i})),i.sort(((t,i)=>(e[t.id]??0)-(e[i.id]??0)))}s.childrenAfterSort=i}else s.childrenAfterSort=!t||u?s.childrenAfterAggFilter.slice(0):i?this.doDeltaSort(s,l,r,e):this.rowNodeSorter.doFullSort(s.childrenAfterAggFilter,e);if(s.sibling&&(s.sibling.childrenAfterSort=s.childrenAfterSort),this.updateChildIndexes(s),c){const e={nodes:s.childrenAfterSort};c(e)}})),this.updateGroupDataForHideOpenParents(r)}calculateDirtyNodes(e){const t={},i=e=>{e&&e.forEach((e=>t[e.id]=!0))};return e&&e.forEach((e=>{i(e.add),i(e.update),i(e.remove)})),t}doDeltaSort(e,t,i,s){const r=e.childrenAfterAggFilter,o=e.childrenAfterSort;if(!o)return this.rowNodeSorter.doFullSort(r,s);const n={},a=[];r.forEach((e=>{t[e.id]||!i.canSkip(e)?a.push(e):n[e.id]=!0}));const l=o.filter((e=>n[e.id])),d=(e,t)=>({currentPos:t,rowNode:e}),c=a.map(d).sort(((e,t)=>this.rowNodeSorter.compareRowNodes(s,e,t)));return this.mergeSortedArrays(s,c,l.map(d)).map((({rowNode:e})=>e))}mergeSortedArrays(e,t,i){const s=[];let r=0,o=0;for(;r<t.length&&o<i.length;)this.rowNodeSorter.compareRowNodes(e,t[r],i[o])<0?s.push(t[r++]):s.push(i[o++]);for(;r<t.length;)s.push(t[r++]);for(;o<i.length;)s.push(i[o++]);return s}updateChildIndexes(e){if(wt(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const s=t[i],r=0===i,o=i===e.childrenAfterSort.length-1;s.setFirstChild(r),s.setLastChild(o),s.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return ct("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=e=>{this.pullDownGroupDataForHideOpenParents(e.childrenAfterSort,!1),e.childrenAfterSort.forEach((e=>{e.hasChildren()&&t(e)}))};e&&e.executeFromRootNode((e=>t(e)))}pullDownGroupDataForHideOpenParents(e,t){this.gos.get("groupHideOpenParents")&&!wt(e)&&e.forEach((e=>{(this.showRowGroupColsService?.getShowRowGroupCols()??[]).forEach((i=>{const s=i.getColDef().showRowGroup;if("string"!=typeof s)return void ut("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");const r=s,o=this.columnModel.getColDefCol(r);if(o!==e.rowGroupColumn)if(t)e.setGroupValue(i.getId(),void 0);else{const t=this.getFirstChildOfFirstChild(e,o);t&&e.setGroupValue(i.getId(),t.key)}}))}))}getFirstChildOfFirstChild(e,t){let i=e;for(;i;){const e=i.parent;if(!e||!i.firstChild)return null;if(e.rowGroupColumn===t)return e;i=e}return null}},class extends Ai{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){Tt(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",(()=>this.onRowDataUpdated())))}isActive(){const e=this.gos.exists("getRowId");return!this.gos.get("resetRowDataOnUpdate")&&e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const i=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:s,rowsInserted:r}=i.updateRowData(t);let o=!1;this.gos.get("suppressMaintainUnsortedOrder")||(o=i.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(s,o||r)}createTransactionForRowData(e){if(!Tt(this.gos))return ut("ImmutableService only works with ClientSideRowModel"),null;const t=ei(this.gos);if(null==t)return ut("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;const i=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),s=[],r=[],o=[];return yt(e)&&e.forEach((e=>{const s=t({data:e,level:0}),n=i[s];n?(n.data!==e&&r.push(e),i[s]=void 0):o.push(e)})),_i(i,((e,t)=>{t&&s.push(t.data)})),{remove:s,update:r,add:o}}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}}]},Du={version:Pu,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[xu,{version:Pu,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[yu],apiFunctions:{onGroupExpandedOrCollapsed:function(e){e.expansionService.onGroupExpandedOrCollapsed()},refreshClientSideRowModel:function(e,t){e.rowModelHelperService?.getClientSideRowModel()?.refreshModel(t)},isRowDataEmpty:function(e){return e.rowModelHelperService?.getClientSideRowModel()?.isEmpty()??!0},forEachLeafNode:function(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachLeafNode(t)},forEachNodeAfterFilter:function(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilter(t)},forEachNodeAfterFilterAndSort:function(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilterAndSort(t)},resetRowHeights:function(e){e.columnModel.isAutoRowHeightActive()?ct("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height."):e.rowModelHelperService?.getClientSideRowModel()?.resetRowHeights()},applyTransaction:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>e.rowModelHelperService?.getClientSideRowModel()?.updateRowData(t)))},applyTransactionAsync:function(e,t,i){e.frameworkOverrides.wrapIncoming((()=>e.rowModelHelperService?.getClientSideRowModel()?.batchUpdateRowData(t,i)))},flushAsyncTransactions:function(e){e.frameworkOverrides.wrapIncoming((()=>e.rowModelHelperService?.getClientSideRowModel()?.flushAsyncTransactions()))},getBestCostNodeSelection:function(e){return e.selectionService.getBestCostNodeSelection()}},dependantModules:[xu,wu]}]},Au=class extends Ai{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return null!=e&&e.length||(e=this.getDefaultFileName()),-1===e.indexOf(".")?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},Tu=class{constructor(e){this.groupColumns=[];const{columnModel:t,funcColsService:i,columnNameService:s,valueService:r,gos:o,processCellCallback:n,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:d}=e;this.columnModel=t,this.funcColsService=i,this.columnNameService=s,this.valueService=r,this.gos=o,this.processCellCallback=n,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=d}prepare(e){this.groupColumns=e.filter((e=>!!e.getColDef().showRowGroup))}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,s,r){const o=this.gos.get("groupHideOpenParents")&&!r.footer||!this.shouldRenderGroupSummaryCell(r,e,t)?this.valueService.getValue(e,r):this.createValueForGroupNode(e,r);return this.processCell({accumulatedRowIndex:i,rowNode:r,column:e,value:o,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(e,t,i){if(!e||!e.group)return!1;if(-1!==this.groupColumns.indexOf(t)){if(null!=e.groupData?.[t.getId()])return!0;if(Mt(this.gos)&&e.group)return!0;if(e.footer&&-1===e.level){const e=t.getColDef();return null==e||!0===e.showRowGroup||e.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}const s=Zt(this.gos,this.columnModel.isPivotMode());return 0===i&&s}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const i=this.gos.get("treeData"),s=this.gos.get("suppressGroupMaintainValueType"),r=t=>{if(i||s)return t.key;const r=t.groupData?.[e.getId()];return r&&t.rowGroupColumn&&!1!==t.rowGroupColumn.getColDef().useValueFormatterForExport?this.valueService.formatValue(t.rowGroupColumn,t,r)??r:r},o=t.footer,n=[r(t)];if(!Xt(this.gos))for(;t.parent;)t=t.parent,n.push(r(t));const a=n.reverse().join(" -> ");return o?`Total ${a}`:a}processCell(e){const{accumulatedRowIndex:t,rowNode:i,column:s,value:r,processCellCallback:o,type:n}=e;return o?{value:o(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:s,node:i,value:r,type:n,parseValue:e=>this.valueService.parseValue(s,i,e,this.valueService.getValue(s,i)),formatValue:e=>this.valueService.formatValue(s,i,e)??e}))??""}:!1!==s.getColDef().useValueFormatterForExport?{value:r??"",valueFormatted:this.valueService.formatValue(s,i,r)}:{value:r??""}}},Mu=class{static download(e,t){const i=document.defaultView||window;if(!i)return void ct("There is no `window` associated with the current `document`");const s=document.createElement("a"),r=i.URL.createObjectURL(t);s.setAttribute("href",r),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(s),i.setTimeout((()=>{i.URL.revokeObjectURL(r)}),0)}},Iu=class extends Tu{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&("string"==typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach((e=>{this.beginNewLine(),e.forEach(((e,t)=>{0!==t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e.data.value||""),e.mergeAcross&&this.appendEmptyCells(e.mergeAcross)}))})))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,s){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(s)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){0!=t&&(this.result+=this.columnSeparator);const s=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(s.valueFormatted??s.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(null==e)return'""';let t;return"string"==typeof e?t=e:"function"==typeof e.toString?t=e.toString():(ct("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1}},ku="32.2.1",Lu={version:ku,moduleName:"@ag-grid-community/csv-export-core",beans:[class extends Au{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void ct("Export cancelled. Export is not allowed as per your configuration.");const t=this.getMergedParams(e),i=this.getData(t),s=new Blob(["\ufeff",i],{type:"text/plain"}),r="function"==typeof t.fileName?t.fileName(this.gos.getGridCommonParams()):t.fileName;Mu.download(this.getFileName(r),s)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,columnNameService:i,funcColsService:s,valueService:r,gos:o}=this,{processCellCallback:n,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:d,suppressQuotes:c,columnSeparator:u}=e;return new Iu({columnModel:t,columnNameService:i,funcColsService:s,valueService:r,gos:o,processCellCallback:n||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:d||void 0,suppressQuotes:c||!1,columnSeparator:u||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}},class extends Ai{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){const{allColumns:i,columnKeys:s,skipRowGroups:r}=t,o=this.getColumnsToExport(i,r,s),n=function(...e){return t=>e.reduce(((e,t)=>t(e)),t)}(this.prepareSession(o),this.prependContent(t),this.exportColumnGroups(t,o),this.exportHeaders(t,o),this.processPinnedTopRows(t,o),this.processRows(t,o),this.processPinnedBottomRows(t,o),this.appendContent(t));return n(e).parse()}processRow(e,t,i,s){const r=t.shouldRowBeSkipped||(()=>!1),o=this.gos.get("groupRemoveSingleChildren"),n=this.gos.get("groupRemoveLowestSingleChildren"),a=null!=t.rowPositions||!!t.onlySelected,l=this.gos.get("groupHideOpenParents")&&!a,d=this.columnModel.isPivotMode()?s.leafGroup:!s.group,c=!!s.footer,u=n&&s.leafGroup,h=1===s.allChildrenCount&&1===s.childrenAfterGroup?.length&&(o||u);if(!d&&!c&&(t.skipRowGroups||h||l)||t.onlySelected&&!s.isSelected()||t.skipPinnedTop&&"top"===s.rowPinned||t.skipPinnedBottom&&"bottom"===s.rowPinned)return;if(-1===s.level&&!d&&!c)return;if(r(this.gos.addGridCommonParams({node:s})))return;const p=e.onNewBodyRow(s);if(i.forEach(((e,t)=>{p.onColumn(e,t,s)})),t.getCustomContentBelowRow){const i=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:s}));i&&e.addCustomContent(i)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const s=new Rs,r=this.visibleColsService.createGroups({columns:t,idCreator:s,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(r,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const e=i.onNewHeaderRow();t.forEach(((t,i)=>{e.onColumn(t,i,void 0)}))}return i}}processPinnedTopRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter((e=>"top"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>this.pinnedRowModel.getPinnedTopRow(e.rowIndex))).forEach(s):this.pinnedRowModel.forEachPinnedRow("top",s),i}}processRows(e,t){return i=>{const s=this.rowModel,r=Tt(this.gos),o=Mt(this.gos),n=!r&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter((e=>null==e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>s.getRow(e.rowIndex))).forEach(a);else if(this.columnModel.isPivotMode())r?s.forEachPivotNode(a,!0):o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);else if(e.onlySelectedAllPages||n){const e=this.selectionService.getSelectedNodes();this.replicateSortedOrder(e),e.forEach(a)}else"all"===l?s.forEachNode(a):r||o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);return i}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),i=(e,s)=>null!=e.rowIndex&&null!=s.rowIndex?e.rowIndex-s.rowIndex:e.level===s.level?e.parent?.id===s.parent?.id?this.rowNodeSorter.compareRowNodes(t,{rowNode:e,currentPos:e.rowIndex??-1},{rowNode:s,currentPos:s.rowIndex??-1}):i(e.parent,s.parent):e.level>s.level?i(e.parent,s):i(e,s.parent);e.sort(i)}processPinnedBottomRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter((e=>"bottom"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>this.pinnedRowModel.getPinnedBottomRow(e.rowIndex))).forEach(s):this.pinnedRowModel.forEachPinnedRow("bottom",s),i}}getColumnsToExport(e=!1,t=!1,i){const s=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getColsForKeys(i);const r=this.gos.get("treeData");let o=[];return o=e&&!s?this.columnModel.getCols():this.visibleColsService.getAllCols(),t&&!r&&(o=o.filter((e=>Bi(e)||Vi(e)))),o}recursivelyAddHeaderGroups(e,t,i){const s=[];e.forEach((e=>{const t=e;t.getChildren&&t.getChildren().forEach((e=>s.push(e)))})),e.length>0&&Ss(e[0])&&this.doAddHeaderHeader(t,e,i),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,t,i)}doAddHeaderHeader(e,t,i){const s=e.onNewHeaderGroupingRow();let r=0;t.forEach((e=>{const t=e;let o;o=i?i(this.gos.addGridCommonParams({columnGroup:t})):this.columnNameService.getDisplayNameForColumnGroup(t,"header");const n=t.getLeafColumns().reduce(((e,t,i,s)=>{let r=pi(e);return"open"===t.getColumnGroupShow()?r&&null==r[1]||(r=[i],e.push(r)):r&&null==r[1]&&(r[1]=i-1),i===s.length-1&&r&&null==r[1]&&(r[1]=i),e}),[]);s.onColumn(t,o||"",r++,t.getLeafColumns().length-1,n)}))}}]},Ou={version:ku,moduleName:"@ag-grid-community/csv-export",dependantModules:[Lu,{version:ku,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:function(e,t){return e.csvCreator?.getDataAsCsv(t)},exportDataAsCsv:function(e,t){e.csvCreator?.exportDataAsCsv(t)}},dependantModules:[Lu]}]};function Nu(e,t){let i="";for(let s=0;s<t;s++)i+=String.fromCharCode(255&e),e>>>=8;return i}var Gu=e=>e.length?(e=>{if(!e.length)return 0;let t=-1,i=0,s=0,r=0;for(let o=0;o<e.length;o++)i=e[o],s=255&(t^i),r=Bu[s],t=t>>>8^r;return~t})("string"==typeof e?(new TextEncoder).encode(e):e):0,Bu=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),Vu=(e,t,i,s,r,o)=>{const{content:n,path:a,created:l}=e,d=(e=>{let t=e.getHours();return t<<=6,t|=e.getMinutes(),t<<=5,t|=e.getSeconds()/2,t})(l),c=(e=>{let t=e.getFullYear()-1980;return t<<=4,t|=e.getMonth()+1,t<<=5,t|=e.getDate(),t})(l),u=Gu(r),h=void 0!==o?o:s,p=function(e){const t=String.fromCharCode;function i(e,i){return t(e>>i&63|128)}function s(e){if(!(4294967168&e))return t(e);let s="";return 4294965248&e?4294901760&e?4292870144&e||(s=t(e>>18&7|240),s+=i(e,12),s+=i(e,6)):(function(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}(e),s=t(e>>12&15|224),s+=i(e,6)):s=t(e>>6&31|192),s+=t(63&e|128),s}const r=function(e){const t=[];if(!e)return[];const i=e.length;let s,r,o=0;for(;o<i;)s=e.charCodeAt(o++),s>=55296&&s<=56319&&o<i?(r=e.charCodeAt(o++),56320==(64512&r)?t.push(((1023&s)<<10)+(1023&r)+65536):(t.push(s),o--)):t.push(s);return t}(e),o=r.length;let n,a=-1,l="";for(;++a<o;)n=r[a],l+=s(n);return l}(a),g=p!==a;let m="";if(g){const e=Nu(1,1)+Nu(Gu(p),4)+p;m="up"+Nu(e.length,2)+e}const f="\0"+(g?"\0\b":"\0\0")+Nu(t?8:0,2)+Nu(d,2)+Nu(c,2)+Nu(h?u:0,4)+Nu(o??s,4)+Nu(s,4)+Nu(p.length,2)+Nu(m.length,2),v="PK"+f+p+m,C="PK\0"+f+"\0\0\0\0\0\0"+(n?"\0\0\0\0":"\0\0\0")+Nu(i,4)+p+m;return{localFileHeader:Uint8Array.from(v,(e=>e.charCodeAt(0))),centralDirectoryHeader:Uint8Array.from(C,(e=>e.charCodeAt(0)))}},Hu=e=>{let t;if("string"==typeof e){const i=atob(e.split(";base64,")[1]);t=Uint8Array.from(i,(e=>e.charCodeAt(0)))}else t=e;return{size:t.length,content:t}},$u=async(e,t)=>{const{content:i}=e,{size:s,content:r}=i?Hu(i):{size:0,content:Uint8Array.from([])};let o,n,a=!1;if("file"===e.type&&r&&s>0){const e=await(async e=>{const t=new Blob([e]),{size:i,content:s}=await(async e=>{let t=0;const i=[],s=new WritableStream({write:e=>{i.push(e),t+=e.length}}),r=new ReadableStream({start:t=>{const i=new FileReader;i.onload=e=>{e.target?.result&&t.enqueue(e.target.result),t.close()},i.readAsArrayBuffer(e)}}),o=new window.CompressionStream("deflate-raw");return await r.pipeThrough(o).pipeTo(s),{size:t,content:new Blob(i)}})(t);return{size:i,content:new Uint8Array(await s.arrayBuffer())}})(r);o=e.content,n=e.size,a=!0}return{...Vu(e,a,t,s,r,n),content:o||r,isCompressed:a}},Wu=(e,t)=>{const{content:i}=e,{content:s}=i?Hu(i):{content:Uint8Array.from([])};return{...Vu(e,!1,t,s.length,s,void 0),content:s,isCompressed:!1}},_u=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,t,i=!1){this.files.push({path:e,created:new Date,content:i?t:(new TextEncoder).encode(t),isBase64:i,type:"file"})}static async getZipFile(e="application/zip"){const t=await this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})}static getUncompressedZipFile(e="application/zip"){const t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let t=0,i=0;for(const s of e){const{localFileHeader:e,centralDirectoryHeader:r,content:o}=s;t+=e.length+o.length,i+=r.length}const s=new Uint8Array(t),r=new Uint8Array(i);let o=0,n=0;for(const t of e){const{localFileHeader:e,centralDirectoryHeader:i,content:a}=t;s.set(e,o),o+=e.length,s.set(a,o),o+=a.length,r.set(i,n),n+=i.length}const a=((e,t,i)=>{const s="PK\0\0\0\0"+Nu(e,2)+Nu(e,2)+Nu(t,4)+Nu(i,4)+"\0\0";return Uint8Array.from(s,(e=>e.charCodeAt(0)))})(e.length,i,t),l=new Uint8Array(s.length+r.length+a.length);return l.set(s),l.set(r,s.length),l.set(a,s.length+r.length),l}static async buildCompressedFileStream(){const e=[...this.folders,...this.files],t=[];let i=0;for(const s of e){const e=await $u(s,i),{localFileHeader:r,content:o}=e;t.push(e),i+=r.length+o.length}return this.packageFiles(t)}static buildFileStream(){const e=[...this.folders,...this.files],t=[];let i=0;for(const s of e){const e=Wu(s,i),{localFileHeader:r,content:o}=e;t.push(e),i+=r.length+o.length}return this.packageFiles(t)}};_u.folders=[],_u.files=[];var zu=class extends Sd{wireBeans(e){this.beans=e}constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){yt(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();wt(this.params.datasource.getRows)?ct("datasource is missing getRows method"):window.setTimeout((()=>{this.params.datasource.getRows(e)}),0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach(((s,r)=>{this.startRow+r<i&&e(s,t.next())}))}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());const i=e-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,i=new pn(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach(((t,i)=>{const s=e.rowData?e.rowData[i]:void 0;!t.id&&t.alreadyRendered&&s&&(this.rowNodes[i]=new pn(this.beans),this.rowNodes[i].setRowIndex(t.rowIndex),this.rowNodes[i].setRowTop(t.rowTop),this.rowNodes[i].setRowHeight(t.rowHeight),t.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[i],s,this.startRow+i)}));const t=null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach((e=>{e.clearRowTopAndRowIndex()})),super.destroy()}},Uu=class extends Ai{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){const i=Math.floor(e/this.params.blockSize);let s=this.blocks[i];if(!s){if(t)return;s=this.createBlock(i)}return s.getRow(e)}createBlock(e){const t=this.createBean(new zu(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach((e=>e.setStateWaitingToLoad())),this.params.rowNodeBlockLoader.checkBlockToLoad())}destroy(){this.getBlocksInOrder().forEach((e=>this.destroyBlock(e))),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&dt(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter((t=>t!=e));t.sort(((e,t)=>t.getLastAccessed()-e.getLastAccessed()));const i=this.params.maxBlocksInCache>0,s=i?this.params.maxBlocksInCache-1:null;t.forEach(((e,t)=>{if("needsLoading"===e.getState()&&t>=1||i&&t>=s){if(this.isBlockCurrentlyDisplayed(e))return;if(this.isBlockFocused(e))return;this.removeBlockFromCache(e)}}))}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;const i=e.getStartRow(),s=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<s}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if("number"==typeof t&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const t=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<t&&(this.rowCount=t)}}setRowCount(e,t){this.rowCount=e,yt(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize==0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new Wr;this.getBlocksInOrder().forEach((i=>i.forEachNode(e,t,this.rowCount)))}getBlocksInOrder(){const e=ji(this.blocks).sort(((e,t)=>e.getId()-t.getId()));return e}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach((t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)})),e.length>0&&e.forEach((e=>this.destroyBlock(e)))}purgeCache(){this.getBlocksInOrder().forEach((e=>this.removeBlockFromCache(e))),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let s=-1,r=!1;const o=new Wr;let n=!1;return this.getBlocksInOrder().forEach((a=>{n||(r&&s+1!==a.getId()?n=!0:(s=a.getId(),a.forEachNode((s=>{const o=s===e||s===t;(r||o)&&i.push(s),o&&(r=!r)}),o,this.rowCount)))})),n||r?[]:i}},ju="32.2.1",qu={version:ju,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[class extends Ai{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){"infinite"===this.gos.get("rowModelType")&&(this.rowHeight=Gt(this.gos),this.addEventListeners(),this.addDestroyFunc((()=>this.destroyCache())),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&ct("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",(()=>this.setDatasource(this.gos.get("datasource")))),this.addManagedPropertyListener("cacheBlockSize",(()=>this.resetCache())),this.addManagedPropertyListener("rowHeight",(()=>{this.rowHeight=Gt(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()}))}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;e=!this.cacheParams||this.isSortModelDifferent(),e&&this.reset()}isSortModelDifferent(){return!Pt(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){this.datasource&&(null!=ei(this.gos)||this.selectionService.reset("rowDataChanged"),this.resetCache())}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager?.getFilterModel()??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:Gt(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new Wr},this.infiniteCache=this.createBean(new Uu(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode((e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)})),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(0!==this.rowHeight){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}}],dependantModules:[bd]},Ku={version:ju,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[qu,{version:ju,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[yu],apiFunctions:{refreshInfiniteCache:function(e){e.rowModelHelperService?.getInfiniteRowModel()?.refreshCache()},purgeInfiniteCache:function(e){e.rowModelHelperService?.getInfiniteRowModel()?.purgeCache()},getInfiniteRowCount:function(e){return e.rowModelHelperService?.getInfiniteRowModel()?.getRowCount()}},dependantModules:[qu,Su]}]};"object"!=typeof window||!window||"object"!=typeof document||(window.document,document),Xo.__registerModules([Hc,Du,Ku,Ou],!1,void 0);var Yu=s.createContext({}),Qu=(e,t,i,s)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const r=e.newAgStackInstance();if(null==r)return;let o,n,a=!1;return r.then((e=>{a?t.destroyBean(e):(o=e,n=o.getGui(),i.appendChild(n),Ju(s,o))})),()=>{a=!0,o&&(n?.parentElement?.removeChild(n),t.destroyBean(o),s&&Ju(s,void 0))}},Ju=(e,t)=>{e&&(e instanceof Function?e(t):e.current=t)},Xu=(...e)=>{const t=e.filter((e=>null!=e&&""!==e));return t.join(" ")},Zu=class e{constructor(...e){this.classesMap={},e.forEach((e=>{this.classesMap[e]=!0}))}setClass(t,i){if(!!this.classesMap[t]==i)return this;const s=new e;return s.classesMap={...this.classesMap},s.classesMap[t]=i,s}toString(){return Object.keys(this.classesMap).filter((e=>this.classesMap[e])).join(" ")}},eh=e=>"function"==typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"==typeof e&&e.$$typeof===("function"==typeof Symbol&&Symbol.for?Symbol.for("react.memo"):60115),th=s.version?.split(".")[0],ih="16"===th||"17"===th,sh=!1,rh=(e,t)=>{ih||!e||sh?t():j.flushSync(t)};function oh(e,t,i){if(null==t||null==e)return t;if(e===t||0===t.length&&0===e.length)return e;if(i||0===e.length&&t.length>0||e.length>0&&0===t.length)return t;const s=[],r=[],o=new Map,n=new Map;for(let e=0;e<t.length;e++){const i=t[e];n.set(i.instanceId,i)}for(let t=0;t<e.length;t++){const i=e[t];o.set(i.instanceId,i),n.has(i.instanceId)&&s.push(i)}for(let e=0;e<t.length;e++){const i=t[e],s=i.instanceId;o.has(s)||r.push(i)}return s.length===e.length&&0===r.length?e:0===s.length&&r.length===t.length?t:0===s.length?r:0===r.length?s:[...s,...r]}var nh=(0,s.forwardRef)(((e,t)=>{const{ctrlsFactory:i,context:r}=(0,s.useContext)(Yu),o=(0,s.useRef)(null),n=(0,s.useRef)(null),a=(0,s.useRef)(null),l=(0,s.useRef)(null),d=(0,s.useRef)(null),c=(0,s.useRef)(),[u,h]=(0,s.useState)(),[p,g]=(0,s.useState)(),[m,f]=(0,s.useState)(),[v,C]=(0,s.useState)((()=>new Zu)),[y,w]=(0,s.useState)((()=>new Zu("ag-hidden"))),[S,b]=(0,s.useState)((()=>new Zu("ag-hidden"))),[R,E]=(0,s.useState)((()=>new Zu("ag-invisible")));(0,s.useImperativeHandle)(t,(()=>({refresh:()=>!1}))),(0,s.useLayoutEffect)((()=>Qu(u,r,n.current)),[u]);const F=(0,s.useCallback)((t=>{if(o.current=t,!t)return void(c.current=r.destroyBean(c.current));const s={setInnerRenderer:(e,t)=>{h(e),f(t)},setChildCount:e=>g(e),addOrRemoveCssClass:(e,t)=>C((i=>i.setClass(e,t))),setContractedDisplayed:e=>b((t=>t.setClass("ag-hidden",!e))),setExpandedDisplayed:e=>w((t=>t.setClass("ag-hidden",!e))),setCheckboxVisible:e=>E((t=>t.setClass("ag-invisible",!e)))},n=i.getInstance("groupCellRendererCtrl");n&&(c.current=r.createBean(n),c.current.init(s,t,a.current,l.current,d.current,nh,e))}),[]),P=(0,s.useMemo)((()=>`ag-cell-wrapper ${v.toString()}`),[v]),x=(0,s.useMemo)((()=>`ag-group-expanded ${y.toString()}`),[y]),D=(0,s.useMemo)((()=>`ag-group-contracted ${S.toString()}`),[S]),A=(0,s.useMemo)((()=>`ag-group-checkbox ${R.toString()}`),[R]),T=u&&u.componentFromFramework,M=T?u.componentClass:void 0,I=null==u&&null!=m,k=fs(m,!0);return s.createElement("span",{className:P,ref:F,...e.colDef?{}:{role:c.current?.getCellAriaRole()}},s.createElement("span",{className:x,ref:l}),s.createElement("span",{className:D,ref:d}),s.createElement("span",{className:A,ref:a}),s.createElement("span",{className:"ag-group-value",ref:n},I&&s.createElement(s.Fragment,null,k),T&&s.createElement(M,{...u.params})),s.createElement("span",{className:"ag-group-child-count"},p))})),ah=nh,lh=(0,s.createContext)({setMethods:()=>{}}),dh=(0,s.memo)((e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:r,setMethods:o}=e,[{key:n,...a},l]=(0,s.useState)(t);return(0,s.useEffect)((()=>{i((e=>l(e)))}),[]),s.createElement(lh.Provider,{value:{setMethods:o}},s.createElement(r,{key:n,...a}))})),ch=0;function uh(){return"agPortalKey_"+ ++ch}var hh=class{constructor(e,t,i,s){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!s,this.statelessComponent=this.isStateless(this.reactComponent),this.key=uh(),this.portalKey=uh(),this.instanceCreated=this.isStatelessComponent()?xo.resolve(!1):new xo((e=>{this.resolveInstanceCreated=e}))}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&"function"==typeof this.componentInstance.destroy&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(ct('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses())&&(ct('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach((e=>this.eParentElement.classList.add(e))))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return"function"==typeof Symbol&&Symbol.for}isStateless(e){return"function"==typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"==typeof e&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&null!=t[e]||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i)return void setTimeout((()=>this.callMethod(e,t)));const s=i[e];return s?s.apply(i,t):this.fallbackMethodAvailable(e)?this.fallbackMethod(e,t&&t[0]?t[0]:{}):void 0}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new xo((e=>this.createReactComponent(e)))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=e=>{this.componentInstance=e,this.addParentContainerStyleAndClasses(),this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=(0,j.createPortal)(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return(0,s.createElement)(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!(this.isStatelessComponent()||!this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this[`${e}Component`];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){return!this.suppressFallbackMethods&&!!this[`${e}Component`]}};function ph(e,t,i){e.forEach((e=>{const s=t[e];s&&(i[e]=s)}))}var gh=class extends hh{constructor(){super(...arguments),this.awaitUpdateCallback=new xo((e=>{this.resolveUpdateCallback=e})),this.wrapperComponent=dh}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:e=>this.setMethods(e),addUpdateCallback:e=>{this.updateCallback=()=>(e(this.getProps()),new xo((e=>{setTimeout((()=>{e()}))}))),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,ph(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new xo((e=>this.awaitUpdateCallback.then((()=>{this.updateCallback().then((()=>e()))}))))}},mh=class extends gh{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},fh=class extends gh{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},vh=class extends gh{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:i,shake:s}=this;return e.label=t,e.icon=i,e.shake=s,e}},Ch=class extends gh{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1}isFilterActive(){return null!=this.model}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){!1===this.expectingNewMethods&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout((()=>{this.sourceParams.filterChangedCallback()})),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then((()=>this.sourceParams.filterChangedCallback()))}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function yh(e,t){e.parentFilterInstance((i=>{(i.setModel(t)||xo.resolve()).then((()=>{e.filterParams.filterChangedCallback()}))}))}var wh=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=e=>this.updateModel(e)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){ph(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),yh(this.floatingFilterParams,e)}},Sh=class extends gh{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),yh(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},bh=class extends gh{refresh(e){this.sourceParams=e,this.refreshProps()}},Rh=class extends gh{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then((()=>this.sourceParams.onItemActivated()))}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Eh=class extends gh{refresh(e){this.sourceParams=e,this.refreshProps()}},Fh=class extends gh{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Ph=class extends gh{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function xh(){ct("As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.")}var Dh=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||1e3}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter((t=>t!==e)),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout((()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)})),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,i=Date.now()){if(this.destroyed)t(null);else if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout((()=>{this.waitForInstance(e,t,i)}))}}},Ah=(0,s.memo)((({ctrl:e})=>{const t=e.isAlive(),{context:i}=(0,s.useContext)(Yu),r=t?e.getColId():void 0,[o,n]=(0,s.useState)(),a=(0,s.useRef)(),l=(0,s.useRef)(null),d=(0,s.useRef)(null),c=(0,s.useRef)(null),u=(0,s.useRef)(),h=(0,s.useRef)();t&&!h.current&&(h.current=new js((()=>l.current)));const p=(0,s.useCallback)((s=>{if(l.current=s,a.current=s?i.createBean(new Ls):i.destroyBean(a.current),!s||!t)return;const r={setWidth:e=>{l.current&&(l.current.style.width=e)},addOrRemoveCssClass:(e,t)=>h.current.addOrRemoveCssClass(e,t),setAriaSort:e=>{l.current&&(e?function(e,t){Ks(e,"sort",t)}(l.current,e):Ys(l.current,"sort"))},setUserCompDetails:e=>n(e),getUserCompInstance:()=>u.current||void 0};e.setComp(r,s,d.current,c.current,a.current);const o=e.getSelectAllGui();d.current?.insertAdjacentElement("afterend",o),a.current.addDestroyFunc((()=>o.remove()))}),[]);(0,s.useLayoutEffect)((()=>Qu(o,i,c.current,u)),[o]),(0,s.useEffect)((()=>{e.setDragSource(l.current)}),[o]);const g=(0,s.useMemo)((()=>!(!o?.componentFromFramework||!eh(o.componentClass))),[o]),m=o&&o.componentFromFramework,f=o&&o.componentClass;return s.createElement("div",{ref:p,className:"ag-header-cell","col-id":r,role:"columnheader"},s.createElement("div",{ref:d,className:"ag-header-cell-resize",role:"presentation"}),s.createElement("div",{ref:c,className:"ag-header-cell-comp-wrapper",role:"presentation"},m&&g&&s.createElement(f,{...o.params}),m&&!g&&s.createElement(f,{...o.params,ref:u})))})),Th=(0,s.memo)((({ctrl:e})=>{const{context:t,gos:i}=(0,s.useContext)(Yu),[r,o]=(0,s.useState)((()=>new Zu("ag-header-cell","ag-floating-filter"))),[n,a]=(0,s.useState)((()=>new Zu)),[l,d]=(0,s.useState)((()=>new Zu("ag-floating-filter-button","ag-hidden"))),[c,u]=(0,s.useState)("false"),[h,p]=(0,s.useState)(),[,g]=(0,s.useState)(1),m=(0,s.useRef)(),f=(0,s.useRef)(null),v=(0,s.useRef)(null),C=(0,s.useRef)(null),y=(0,s.useRef)(null),w=(0,s.useRef)(),S=(0,s.useRef)(),b=e=>{null!=e&&w.current&&w.current(e)},R=(0,s.useCallback)((i=>{if(f.current=i,m.current=i?t.createBean(new Ls):t.destroyBean(m.current),!i)return;S.current=new xo((e=>{w.current=e}));const s={addOrRemoveCssClass:(e,t)=>o((i=>i.setClass(e,t))),addOrRemoveBodyCssClass:(e,t)=>a((i=>i.setClass(e,t))),setButtonWrapperDisplayed:e=>{d((t=>t.setClass("ag-hidden",!e))),u(e?"false":"true")},setWidth:e=>{f.current&&(f.current.style.width=e)},setCompDetails:e=>p(e),getFloatingFilterComp:()=>S.current?S.current:null,setMenuIcon:e=>y.current?.appendChild(e)};e.setComp(s,i,y.current,v.current,m.current)}),[]);(0,s.useLayoutEffect)((()=>Qu(h,t,v.current,b)),[h]);const E=(0,s.useMemo)((()=>r.toString()),[r]),F=(0,s.useMemo)((()=>n.toString()),[n]),P=(0,s.useMemo)((()=>l.toString()),[l]),x=(0,s.useMemo)((()=>!!(h&&h.componentFromFramework&&eh(h.componentClass))),[h]),D=(0,s.useMemo)((()=>i.get("reactiveCustomComponents")),[]),A=(0,s.useMemo)((()=>{if(h){if(D){const e=new wh(h.params,(()=>g((e=>e+1))));return b(e),e}h.componentFromFramework&&xh()}}),[h]),T=A?.getProps(),M=h&&h.componentFromFramework,I=h&&h.componentClass;return s.createElement("div",{ref:R,className:E,role:"gridcell"},s.createElement("div",{ref:v,className:F,role:"presentation"},M&&!D&&s.createElement(I,{...h.params,ref:x?()=>{}:b}),M&&D&&s.createElement(lh.Provider,{value:{setMethods:e=>A.setMethods(e)}},s.createElement(I,{...T}))),s.createElement("div",{ref:C,"aria-hidden":c,className:P,role:"presentation"},s.createElement("button",{ref:y,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))})),Mh=(0,s.memo)((({ctrl:e})=>{const{context:t}=(0,s.useContext)(Yu),[i,r]=(0,s.useState)((()=>new Zu)),[o,n]=(0,s.useState)((()=>new Zu)),[a,l]=(0,s.useState)("false"),[d,c]=(0,s.useState)(),[u,h]=(0,s.useState)(),p=(0,s.useMemo)((()=>e.getColId()),[]),g=(0,s.useRef)(),m=(0,s.useRef)(null),f=(0,s.useRef)(null),v=(0,s.useRef)(null),C=(0,s.useRef)(),y=(0,s.useCallback)((i=>{if(m.current=i,g.current=i?t.createBean(new Ls):t.destroyBean(g.current),!i)return;const s={setWidth:e=>{m.current&&(m.current.style.width=e)},addOrRemoveCssClass:(e,t)=>r((i=>i.setClass(e,t))),setUserCompDetails:e=>h(e),setResizableDisplayed:e=>{n((t=>t.setClass("ag-hidden",!e))),l(e?"false":"true")},setAriaExpanded:e=>c(e),getUserCompInstance:()=>C.current||void 0};e.setComp(s,i,f.current,v.current,g.current)}),[]);(0,s.useLayoutEffect)((()=>Qu(u,t,v.current)),[u]),(0,s.useEffect)((()=>{m.current&&e.setDragSource(m.current)}),[u]);const w=(0,s.useMemo)((()=>!(!u?.componentFromFramework||!eh(u.componentClass))),[u]),S=(0,s.useMemo)((()=>"ag-header-group-cell "+i.toString()),[i]),b=(0,s.useMemo)((()=>"ag-header-cell-resize "+o.toString()),[o]),R=u&&u.componentFromFramework,E=u&&u.componentClass;return s.createElement("div",{ref:y,className:S,"col-id":p,role:"columnheader","aria-expanded":d},s.createElement("div",{ref:v,className:"ag-header-cell-comp-wrapper",role:"presentation"},R&&w&&s.createElement(E,{...u.params}),R&&!w&&s.createElement(E,{...u.params,ref:C})),s.createElement("div",{ref:f,"aria-hidden":a,className:b}))})),Ih=(0,s.memo)((({ctrl:e})=>{const{context:t}=(0,s.useContext)(Yu),{topOffset:i,rowHeight:r}=(0,s.useMemo)((()=>e.getTopAndHeight()),[]),o=e.getAriaRowIndex(),n=e.getHeaderRowClass(),[a,l]=(0,s.useState)((()=>r+"px")),[d,c]=(0,s.useState)((()=>i+"px")),u=(0,s.useRef)(null),h=(0,s.useRef)(null),[p,g]=(0,s.useState)((()=>e.getHeaderCtrls())),m=(0,s.useRef)(),f=(0,s.useRef)(null),v=(0,s.useCallback)((i=>{if(f.current=i,m.current=i?t.createBean(new Ls):t.destroyBean(m.current),!i)return;const s={setHeight:e=>l(e),setTop:e=>c(e),setHeaderCtrls:(e,t,i)=>{h.current=u.current,u.current=e;const s=oh(h.current,e,t);s!==h.current&&rh(i,(()=>g(s)))},setWidth:e=>{f.current&&(f.current.style.width=e)}};e.setComp(s,m.current,!1)}),[]),C=(0,s.useMemo)((()=>({height:a,top:d})),[a,d]),y=(0,s.useCallback)((t=>{switch(e.getType()){case xa.COLUMN_GROUP:return s.createElement(Mh,{ctrl:t,key:t.instanceId});case xa.FLOATING_FILTER:return s.createElement(Th,{ctrl:t,key:t.instanceId});default:return s.createElement(Ah,{ctrl:t,key:t.instanceId})}}),[]);return s.createElement("div",{ref:v,className:n,role:"row",style:C,"aria-rowindex":o},p.map(y))})),kh=(0,s.memo)((({pinned:e})=>{const[t,i]=(0,s.useState)(!0),[r,o]=(0,s.useState)([]),{context:n}=(0,s.useContext)(Yu),a=(0,s.useRef)(null),l=(0,s.useRef)(null),d=(0,s.useRef)(),c="left"===e,u="right"===e,h=!c&&!u,p=(0,s.useCallback)((t=>{if(a.current=t,d.current=t?n.createBean(new qa(e)):n.destroyBean(d.current),!t)return;const s={setDisplayed:i,setCtrls:e=>o(e),setCenterWidth:e=>{l.current&&(l.current.style.width=e)},setViewportScrollLeft:e=>{a.current&&(a.current.scrollLeft=e)},setPinnedContainerWidth:e=>{a.current&&(a.current.style.width=e,a.current.style.minWidth=e,a.current.style.maxWidth=e)}};d.current.setComp(s,a.current)}),[]),g=t?"":"ag-hidden",m=()=>r.map((e=>s.createElement(Ih,{ctrl:e,key:e.instanceId})));return s.createElement(s.Fragment,null,c&&s.createElement("div",{ref:p,className:"ag-pinned-left-header "+g,"aria-hidden":!t,role:"rowgroup"},m()),u&&s.createElement("div",{ref:p,className:"ag-pinned-right-header "+g,"aria-hidden":!t,role:"rowgroup"},m()),h&&s.createElement("div",{ref:p,className:"ag-header-viewport "+g,role:"presentation"},s.createElement("div",{ref:l,className:"ag-header-container",role:"rowgroup"},m())))})),Lh=(0,s.memo)((()=>{const[e,t]=(0,s.useState)((()=>new Zu)),[i,r]=(0,s.useState)(),{context:o}=(0,s.useContext)(Yu),n=(0,s.useRef)(null),a=(0,s.useRef)(),l=(0,s.useCallback)((e=>{if(n.current=e,a.current=e?o.createBean(new Aa):o.destroyBean(a.current),!e)return;const i={addOrRemoveCssClass:(e,i)=>t((t=>t.setClass(e,i))),setHeightAndMinHeight:e=>r(e)};a.current.setComp(i,e,e)}),[]),d=(0,s.useMemo)((()=>"ag-header "+e.toString()),[e]),c=(0,s.useMemo)((()=>({height:i,minHeight:i})),[i]);return s.createElement("div",{ref:l,className:d,style:c,role:"presentation"},s.createElement(kh,{pinned:"left"}),s.createElement(kh,{pinned:null}),s.createElement(kh,{pinned:"right"}))})),Oh=(e,t)=>{(0,s.useEffect)((()=>{const i=t.current;if(i){const t=i.parentElement;if(t){const s=document.createComment(e);return t.insertBefore(s,i),()=>{t.removeChild(s)}}}}),[e])},Nh=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new xo((e=>{this.resolveInstanceCreated=e})),this.onValueChange=e=>this.updateValue(e),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){ph(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},Gh=(0,s.memo)((e=>{const[t,i]=(0,s.useState)(),{context:r,popupService:o,localeService:n,gos:a,editService:l}=(0,s.useContext)(Yu);return(()=>{const t=(0,s.useRef)((()=>{const{editDetails:t,cellCtrl:s,eParentCell:d}=e,{compDetails:c}=t,u=a.get("stopEditingWhenCellsLoseFocus"),h=r.createBean(l.createPopupEditorWrapper(c.params)),p=h.getGui();if(e.jsChildComp){const t=e.jsChildComp.getGui();t&&p.appendChild(t)}const g={column:s.getColumn(),rowNode:s.getRowNode(),type:"popupCellEditor",eventSource:d,ePopup:p,position:t.popupPosition,keepWithinBounds:!0},m=o.positionPopupByComponent.bind(o,g),f=n.getLocaleTextFunc(),v=o.addPopup({modal:u,eChild:p,closeOnEsc:!0,closedCallback:()=>{s.onPopupEditorClosed()},anchorToElement:d,positionCallback:m,ariaLabel:f("ariaLabelCellEditor","Cell Editor")}),C=v?v.hideFunc:void 0;return i(h),e.jsChildComp?.afterGuiAttached?.(),()=>{C?.(),r.destroyBean(h)}})),d=(0,s.useRef)(),c=(0,s.useRef)(!1),u=(0,s.useRef)(!1),[,h]=(0,s.useState)(0);c.current&&(u.current=!0),(0,s.useEffect)((()=>(c.current||(d.current=t.current(),c.current=!0),h((e=>e+1)),()=>{u.current&&d.current?.()})),[])})(),s.createElement(s.Fragment,null,t&&e.wrappedContent&&(0,j.createPortal)(e.wrappedContent,t.getGui()))})),Bh=(e,t,i)=>{const r=e.compProxy;return s.createElement(s.Fragment,null,r?((e,t,i)=>{const{compProxy:r}=e;i(r);const o=r.getProps(),n=eh(t);return s.createElement(lh.Provider,{value:{setMethods:e=>r.setMethods(e)}},n?s.createElement(t,{...o}):s.createElement(t,{...o,ref:e=>r.setRef(e)}))})(e,t,i):s.createElement(t,{...e.compDetails.params,ref:i}))},Vh=(0,s.memo)((({cellCtrl:e,printLayout:t,editingRow:i})=>{const{context:r}=(0,s.useContext)(Yu),{colIdSanitised:o,instanceId:n}=e,a=(0,s.useRef)(),[l,d]=(0,s.useState)((()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1})),[c,u]=(0,s.useState)(),[h,p]=(0,s.useState)(1),[g,m]=(0,s.useState)(),[f,v]=(0,s.useState)(!1),[C,y]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),[b,R]=(0,s.useState)(),E=(0,s.useMemo)((()=>e.isForceWrapper()),[e]),F=(0,s.useMemo)((()=>e.getCellAriaRole()),[e]),P=(0,s.useRef)(null),x=(0,s.useRef)(null),D=(0,s.useRef)(),A=(0,s.useRef)(),T=(0,s.useRef)(),M=(0,s.useRef)([]),I=(0,s.useRef)(),[k,L]=(0,s.useState)(0),O=(0,s.useCallback)((e=>{I.current=e,L((e=>e+1))}),[]),N=E||null!=l&&(f||w||C),G=(0,s.useCallback)((t=>{if(A.current=t,t){const i=t.isCancelBeforeStart&&t.isCancelBeforeStart();setTimeout((()=>{i?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()}))}}),[e]),B=(0,s.useRef)();B.current||(B.current=new js((()=>P.current))),((e,t,i,r,o,n)=>{const{context:a}=(0,s.useContext)(Yu),l=(0,s.useCallback)((()=>{const e=o.current;if(!e)return;const t=e.getGui();t&&t.parentElement&&t.parentElement.removeChild(t),a.destroyBean(e),o.current=void 0}),[]);(0,s.useEffect)((()=>{const s=null!=e,r=e?.compDetails&&!e.compDetails.componentFromFramework;if(!s||!r||t&&null==i)return void l();const a=e.compDetails;if(o.current){const t=o.current,i=!(null==t.refresh||0!=e.force)&&t.refresh(a.params);if(!0===i||void 0===i)return;l()}const d=a.newAgStackInstance();null!=d&&d.then((e=>{if(!e)return;const s=e.getGui();s&&((t?i:n.current).appendChild(s),o.current=e)}))}),[e,t,r]),(0,s.useEffect)((()=>l),[])})(l,N,I.current,k,D,P);const V=(0,s.useRef)();(0,s.useLayoutEffect)((()=>{const e=V.current,t=l;if(V.current=l,null==e||null==e.compDetails||null==t||null==t.compDetails)return;const i=e.compDetails,s=t.compDetails;i.componentClass==s.componentClass&&null!=x.current?.refresh&&1!=x.current.refresh(s.params)&&p((e=>e+1))}),[l]),(0,s.useLayoutEffect)((()=>{if(!c||c.compDetails.componentFromFramework)return;const e=c.compDetails,t=!0===c.popup,i=e.newAgStackInstance();return i.then((e=>{if(!e)return;const i=e.getGui();if(G(e),!t){const t=(E?T:P).current;t?.appendChild(i),e.afterGuiAttached&&e.afterGuiAttached()}R(e)})),()=>{i.then((e=>{const t=e.getGui();r.destroyBean(e),G(void 0),R(void 0),t?.parentElement?.removeChild(t)}))}}),[c]);const H=(0,s.useCallback)((t=>{if(T.current=t,!t)return M.current.forEach((e=>e())),void(M.current=[]);const i=e=>{if(e){const i=e.getGui();t.insertAdjacentElement("afterbegin",i),M.current.push((()=>{r.destroyBean(e),Mr(i)}))}return e};f&&i(e.createSelectionCheckbox()),w&&i(e.createDndSource()),C&&i(e.createRowDragComp())}),[e,r,w,C,f]),$=(0,s.useCallback)((s=>{if(P.current=s,a.current=s?r.createBean(new Ls):r.destroyBean(a.current),!s||!e)return;const o={addOrRemoveCssClass:(e,t)=>B.current.addOrRemoveCssClass(e,t),setUserStyles:e=>m(e),getFocusableElement:()=>P.current,setIncludeSelection:e=>v(e),setIncludeRowDrag:e=>y(e),setIncludeDndSource:e=>S(e),getCellEditor:()=>A.current||null,getCellRenderer:()=>x.current??D.current,getParentOfValue:()=>I.current??T.current??P.current,setRenderDetails:(e,t,i)=>{d((s=>s?.compDetails!==e||s?.value!==t||s?.force!==i?{value:t,compDetails:e,force:i}:s))},setEditDetails:(e,t,i,s)=>{if(e){let r;s?r=new Nh(e.params,(()=>p((e=>e+1)))):e.componentFromFramework&&xh(),u({compDetails:e,popup:t,popupPosition:i,compProxy:r}),t||d(void 0)}else u((e=>{e?.compProxy&&(A.current=void 0)}))}},n=T.current||void 0;e.setComp(o,s,n,t,i,a.current)}),[]),W=(0,s.useMemo)((()=>!(!l?.compDetails?.componentFromFramework||!eh(l.compDetails.componentClass))),[l]);(0,s.useLayoutEffect)((()=>{P.current&&(B.current.addOrRemoveCssClass("ag-cell-value",!N),B.current.addOrRemoveCssClass("ag-cell-inline-editing",!!c&&!c.popup),B.current.addOrRemoveCssClass("ag-cell-popup-editing",!!c&&!!c.popup),B.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!c||!!c.popup),e.getRowCtrl()?.setInlineEditingCss(),e.shouldRestoreFocus()&&!e.isEditing()&&P.current.focus({preventScroll:!0}))}));const _=()=>s.createElement(s.Fragment,null,null!=l&&((e,t,i,r,o,n,a)=>{const{compDetails:l,value:d}=e,c=!l,u=l&&l.componentFromFramework,h=l&&l.componentClass,p=d?.toString?d.toString():d,g=()=>s.createElement(s.Fragment,null,c&&s.createElement(s.Fragment,null,p),u&&!n&&s.createElement(h,{...l.params,key:t,ref:r}),u&&n&&s.createElement(h,{...l.params,key:t}));return s.createElement(s.Fragment,null,o?s.createElement("span",{role:"presentation",id:`cell-${i}`,className:"ag-cell-value",ref:a},g()):g())})(l,h,n,x,N,W,O),null!=c&&((e,t,i,r,o)=>{const n=e.compDetails,a=n.componentClass,l=n.componentFromFramework&&!e.popup,d=n.componentFromFramework&&e.popup,c=!n.componentFromFramework&&e.popup;return s.createElement(s.Fragment,null,l&&Bh(e,a,t),d&&s.createElement(Gh,{editDetails:e,cellCtrl:r,eParentCell:i,wrappedContent:Bh(e,a,t)}),c&&o&&s.createElement(Gh,{editDetails:e,cellCtrl:r,eParentCell:i,jsChildComp:o}))})(c,G,P.current,e,b)),z=(0,s.useCallback)((()=>e.onFocusOut()),[]);return s.createElement("div",{ref:$,style:g,role:F,"col-id":o,onBlur:z},N?s.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:H},_()):_())})),Hh=(0,s.memo)((({rowCtrl:e,containerType:t})=>{const{context:i,gos:r}=(0,s.useContext)(Yu),o=(0,s.useRef)(),n=(0,s.useRef)(e.getDomOrder()),a=e.isFullWidth(),l=e.getRowNode().displayed,[d,c]=(0,s.useState)((()=>l?e.getRowIndex():null)),[u,h]=(0,s.useState)((()=>e.getRowId())),[p,g]=(0,s.useState)((()=>e.getBusinessKey())),[m,f]=(0,s.useState)((()=>e.getRowStyles())),v=(0,s.useRef)(null),C=(0,s.useRef)(null),[y,w]=(0,s.useState)((()=>null)),[S,b]=(0,s.useState)(),[R,E]=(0,s.useState)((()=>l?e.getInitialRowTop(t):void 0)),[F,P]=(0,s.useState)((()=>l?e.getInitialTransform(t):void 0)),x=(0,s.useRef)(null),D=(0,s.useRef)(),A=(0,s.useRef)(!1),[T,M]=(0,s.useState)(0);(0,s.useEffect)((()=>{if(A.current||!S||T>10)return;const t=x.current?.firstChild;t?(e.setupDetailRowAutoHeight(t),A.current=!0):M((e=>e+1))}),[S,T]);const I=(0,s.useRef)();I.current||(I.current=new js((()=>x.current)));const k=(0,s.useCallback)((s=>{if(x.current=s,o.current=s?i.createBean(new Ls):i.destroyBean(o.current),!s)return void e.unsetComp(t);if(!e.isAlive())return;const r={setTop:E,setTransform:P,addOrRemoveCssClass:(e,t)=>I.current.addOrRemoveCssClass(e,t),setDomOrder:e=>n.current=e,setRowIndex:c,setRowId:h,setRowBusinessKey:g,setUserStyles:f,setCellCtrls:(e,t)=>{C.current=v.current,v.current=e;const i=oh(C.current,e,n.current);i!==C.current&&rh(t,(()=>w(i)))},showFullWidth:e=>b(e),getFullWidthCellRenderer:()=>D.current,refreshFullWidth:e=>B.current?(b((t=>({...t,params:e()}))),!0):!(!D.current||!D.current.refresh)&&D.current.refresh(e())};e.setComp(r,s,t,o.current)}),[]);(0,s.useLayoutEffect)((()=>Qu(S,i,x.current,D)),[S]);const L=(0,s.useMemo)((()=>{const e={top:R,transform:F};return Object.assign(e,m),e}),[R,F,m]),O=a&&S?.componentFromFramework,N=!a&&null!=y,G=(0,s.useMemo)((()=>!(!S?.componentFromFramework||!eh(S.componentClass))),[S]),B=(0,s.useRef)(!1);return(0,s.useEffect)((()=>{B.current=G&&!!S&&!!r.get("reactiveCustomComponents")}),[G,S]),s.createElement("div",{ref:k,role:"row",style:L,"row-index":d,"row-id":u,"row-business-key":p},N&&y?.map((t=>s.createElement(Vh,{cellCtrl:t,editingRow:e.isEditing(),printLayout:e.isPrintLayout(),key:t.instanceId}))),O&&(()=>{const e=S.componentClass;return s.createElement(s.Fragment,null,G?s.createElement(e,{...S.params}):s.createElement(e,{...S.params,ref:D}))})())})),$h=(0,s.memo)((({name:e})=>{const{context:t}=(0,s.useContext)(Yu),i=(0,s.useMemo)((()=>xl(e)),[e]),r=(0,s.useRef)(null),o=(0,s.useRef)(null),n=(0,s.useRef)([]),a=(0,s.useRef)([]),[l,d]=(0,s.useState)((()=>[])),c=(0,s.useRef)(!1),u=(0,s.useRef)(),h=(0,s.useMemo)((()=>Xu(i.viewport)),[i]),p=(0,s.useMemo)((()=>Xu(i.container)),[i]),g="center"===i.type;Oh(" AG Row Container "+e+" ",g?r:o);const m=(0,s.useCallback)((()=>g?null!=r.current&&null!=o.current:null!=o.current),[]),f=(0,s.useCallback)((()=>g?null==r.current&&null==o.current:null==o.current),[]),v=(0,s.useCallback)((()=>{if(f()&&(u.current=t.destroyBean(u.current)),m()){const i=e=>{const t=oh(a.current,n.current,c.current);t!==a.current&&(a.current=t,rh(e,(()=>d(t))))},s={setHorizontalScroll:e=>{r.current&&(r.current.scrollLeft=e)},setViewportHeight:e=>{r.current&&(r.current.style.height=e)},setRowCtrls:({rowCtrls:e,useFlushSync:t})=>{const s=!!t&&n.current.length>0&&e.length>0;n.current=e,i(s)},setDomOrder:e=>{c.current!=e&&(c.current=e,i(!1))},setContainerWidth:e=>{o.current&&(o.current.style.width=e)},setOffsetTop:e=>{o.current&&(o.current.style.transform=`translateY(${e})`)}};u.current=t.createBean(new Nl(e)),u.current.setComp(s,o.current,r.current)}}),[m,f]),C=(0,s.useCallback)((e=>{o.current=e,v()}),[v]),y=(0,s.useCallback)((e=>{r.current=e,v()}),[v]),w=()=>s.createElement("div",{className:p,ref:C,role:"rowgroup"},l.map((e=>s.createElement(Hh,{rowCtrl:e,containerType:i.type,key:e.instanceId}))));return s.createElement(s.Fragment,null,g?s.createElement("div",{className:h,ref:y,role:"presentation"},w()):w())})),Wh=(0,s.memo)((()=>{const{context:e,resizeObserverService:t}=(0,s.useContext)(Yu),[i,r]=(0,s.useState)(""),[o,n]=(0,s.useState)(0),[a,l]=(0,s.useState)(0),[d,c]=(0,s.useState)("0px"),[u,h]=(0,s.useState)("0px"),[p,g]=(0,s.useState)("100%"),[m,f]=(0,s.useState)("0px"),[v,C]=(0,s.useState)("0px"),[y,w]=(0,s.useState)("100%"),[S,b]=(0,s.useState)(""),[R,E]=(0,s.useState)(""),[F,P]=(0,s.useState)(null),[x,D]=(0,s.useState)(""),[A,T]=(0,s.useState)(null),[M,I]=(0,s.useState)("ag-layout-normal"),k=(0,s.useRef)();k.current||(k.current=new js((()=>L.current)));const L=(0,s.useRef)(null),O=(0,s.useRef)(null),N=(0,s.useRef)(null),G=(0,s.useRef)(null),B=(0,s.useRef)(null),V=(0,s.useRef)(null),H=(0,s.useRef)(null),$=(0,s.useRef)([]),W=(0,s.useRef)([]);Oh(" AG Grid Body ",L),Oh(" AG Pinned Top ",O),Oh(" AG Sticky Top ",N),Oh(" AG Middle ",V),Oh(" AG Pinned Bottom ",H);const _=(0,s.useCallback)((i=>{if(L.current=i,!i)return $.current=e.destroyBeans($.current),W.current.forEach((e=>e())),void(W.current=[]);if(!e)return;const s=(e,t)=>{e.appendChild(t),W.current.push((()=>e.removeChild(t)))},o=(t,i,r)=>{s(t,document.createComment(r)),s(t,(t=>{const i=e.createBean(new t);return $.current.push(i),i})(i).getGui())};o(i,Ja," AG Fake Horizontal Scroll "),o(i,Ya," AG Overlay Wrapper "),B.current&&o(B.current,Za," AG Fake Vertical Scroll ");const a={setRowAnimationCssOnBodyViewport:r,setColumnCount:e=>{L.current&&Ks(L.current,"colcount",e)},setRowCount:e=>{L.current&&Ks(L.current,"rowcount",e)},setTopHeight:n,setBottomHeight:l,setStickyTopHeight:c,setStickyTopTop:h,setStickyTopWidth:g,setTopDisplay:b,setBottomDisplay:E,setColumnMovingCss:(e,t)=>k.current.addOrRemoveCssClass(e,t),updateLayoutClasses:I,setAlwaysVerticalScrollClass:P,setPinnedTopBottomOverflowY:D,setCellSelectableCss:(e,t)=>T(t?e:null),setBodyViewportWidth:e=>{V.current&&(V.current.style.width=e)},registerBodyViewportResizeListener:e=>{if(V.current){const i=t.observeResize(V.current,e);W.current.push((()=>i()))}},setStickyBottomHeight:f,setStickyBottomBottom:C,setStickyBottomWidth:w},d=e.createBean(new Gl);$.current.push(d),d.setComp(a,i,V.current,O.current,H.current,N.current,G.current)}),[]),z=(0,s.useMemo)((()=>Xu("ag-root","ag-unselectable",M)),[M]),U=(0,s.useMemo)((()=>Xu("ag-body-viewport",i,M,F,A)),[i,M,F,A]),j=(0,s.useMemo)((()=>Xu("ag-body",M)),[M]),q=(0,s.useMemo)((()=>Xu("ag-floating-top",A)),[A]),K=(0,s.useMemo)((()=>Xu("ag-sticky-top",A)),[A]),Y=(0,s.useMemo)((()=>Xu("ag-sticky-bottom","0px"===m?"ag-hidden":null,A)),[A,m]),Q=(0,s.useMemo)((()=>Xu("ag-floating-bottom",A)),[A]),J=(0,s.useMemo)((()=>({height:o,minHeight:o,display:S,overflowY:x})),[o,S,x]),X=(0,s.useMemo)((()=>({height:d,top:u,width:p})),[d,u,p]),Z=(0,s.useMemo)((()=>({height:m,bottom:v,width:y})),[m,v,y]),ee=(0,s.useMemo)((()=>({height:a,minHeight:a,display:R,overflowY:x})),[a,R,x]),te=e=>s.createElement($h,{name:e,key:`${e}-container`}),ie=({section:e,children:t,className:i,style:r})=>s.createElement("div",{ref:e,className:i,role:"presentation",style:r},t.map(te));return s.createElement("div",{ref:_,className:z,role:"treegrid"},s.createElement(Lh,null),ie({section:O,className:q,style:J,children:["topLeft","topCenter","topRight","topFullWidth"]}),s.createElement("div",{className:j,ref:B,role:"presentation"},ie({section:V,className:U,children:["left","center","right","fullWidth"]})),ie({section:N,className:K,style:X,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),ie({section:G,className:Y,style:Z,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),ie({section:H,className:Q,style:ee,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))})),_h=(0,s.forwardRef)(((e,t)=>{const{children:i,eFocusableElement:r,onTabKeyDown:o,gridCtrl:n,forceFocusOutWhenTabGuardsAreEmpty:a}=e,{context:l}=(0,s.useContext)(Yu),d=(0,s.useRef)(null),c=(0,s.useRef)(null),u=(0,s.useRef)(),h=e=>{const t=null==e?void 0:parseInt(e,10).toString();[d,c].forEach((e=>{void 0===t?e.current?.removeAttribute("tabindex"):e.current?.setAttribute("tabindex",t)}))};(0,s.useImperativeHandle)(t,(()=>({forceFocusOutOfContainer(e){u.current?.forceFocusOutOfContainer(e)}})));const p=(0,s.useCallback)((()=>{const e=d.current,t=c.current;if(e||t){if(e&&t){const i={setTabIndex:h};u.current=l.createBean(new Pd({comp:i,eTopGuard:e,eBottomGuard:t,eFocusableElement:r,onTabKeyDown:o,forceFocusOutWhenTabGuardsAreEmpty:a,focusInnerElement:e=>n.focusInnerElement(e)}))}}else u.current=l.destroyBean(u.current)}),[]),g=(0,s.useCallback)((e=>{d.current=e,p()}),[p]),m=(0,s.useCallback)((e=>{c.current=e,p()}),[p]),f=e=>{const t="top"===e?Fd.TAB_GUARD_TOP:Fd.TAB_GUARD_BOTTOM;return s.createElement("div",{className:`${Fd.TAB_GUARD} ${t}`,role:"presentation",ref:"top"===e?g:m})};return s.createElement(s.Fragment,null,f("top"),i,f("bottom"))})),zh=(0,s.memo)(_h),Uh=(0,s.memo)((({context:e})=>{const[t,i]=(0,s.useState)(""),[r,o]=(0,s.useState)(""),[n,a]=(0,s.useState)(""),[l,d]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[h,p]=(0,s.useState)(!1),[g,m]=(0,s.useState)(),f=(0,s.useRef)(),v=(0,s.useRef)(null),C=(0,s.useRef)(),[y,w]=(0,s.useState)(null),S=(0,s.useRef)((()=>{})),b=(0,s.useRef)(),R=(0,s.useRef)([]),E=(0,s.useCallback)((()=>{}),[]),F=(0,s.useMemo)((()=>e.isDestroyed()?null:e.getBeans()),[e]);Oh(" AG Grid ",v);const P=(0,s.useCallback)((t=>{if(v.current=t,f.current=t?e.createBean(new hc):e.destroyBean(f.current),!t||e.isDestroyed())return;const s=f.current;S.current=s.focusInnerElement.bind(s);const r={destroyGridUi:()=>{},setRtlClass:i,setGridThemeClass:o,forceFocusOutOfContainer:e=>{e||!b.current?.isDisplayed()?C.current?.forceFocusOutOfContainer(e):b.current.forceFocusOutOfContainer(e)},updateLayoutClasses:a,getFocusableContainers:()=>{const e=[],t=v.current?.querySelector(".ag-root");return t&&e.push({getGui:()=>t}),R.current.forEach((t=>{t.isDisplayed()&&e.push(t)})),e},setCursor:d,setUserSelect:u};s.setComp(r,t,t),p(!0)}),[]);(0,s.useEffect)((()=>{const t=f.current,i=v.current;if(!(g&&F&&t&&y&&i))return;const s=[],{watermarkSelector:r,paginationSelector:o,sideBarSelector:n,statusBarSelector:a,gridHeaderDropZonesSelector:l}=t.getOptionalSelectors(),d=[];if(l){const t=e.createBean(new l.component),r=t.getGui();i.insertAdjacentElement("afterbegin",r),d.push(r),s.push(t)}if(n){const t=e.createBean(new n.component),i=t.getGui(),r=y.querySelector(".ag-tab-guard-bottom");r&&(r.insertAdjacentElement("beforebegin",i),d.push(i)),s.push(t),R.current.push(t)}const c=t=>{const r=e.createBean(new t),o=r.getGui();return i.insertAdjacentElement("beforeend",o),d.push(o),s.push(r),r};if(a&&c(a.component),o){const e=c(o.component);b.current=e,R.current.push(e)}return r&&c(r.component),()=>{e.destroyBeans(s),d.forEach((e=>{e.parentElement?.removeChild(e)}))}}),[g,y,F]);const x=(0,s.useMemo)((()=>Xu("ag-root-wrapper",t,r,n)),[t,r,n]),D=(0,s.useMemo)((()=>Xu("ag-root-wrapper-body","ag-focus-managed",n)),[n]),A=(0,s.useMemo)((()=>({userSelect:null!=c?c:"",WebkitUserSelect:null!=c?c:"",cursor:null!=l?l:""})),[c,l]),T=(0,s.useCallback)((e=>{C.current=e,m(null!==e)}),[]);return s.createElement("div",{ref:P,className:x,style:A,role:"presentation"},s.createElement("div",{className:D,ref:w,role:"presentation"},h&&y&&F&&s.createElement(Yu.Provider,{value:F},s.createElement(zh,{ref:T,eFocusableElement:y,onTabKeyDown:E,gridCtrl:f.current,forceFocusOutWhenTabGuardsAreEmpty:!0},s.createElement(Wh,null)))))})),jh=class extends Ai{wireBeans(e){this.ctrlsService=e.ctrlsService}areHeaderCellsRendered(){return this.ctrlsService.getHeaderRowContainerCtrls().every((e=>e.getAllCtrls().every((e=>e.areCellsRendered()))))}},qh=e=>{const t=(0,s.useRef)(),i=(0,s.useRef)(null),r=(0,s.useRef)(null),o=(0,s.useRef)([]),n=(0,s.useRef)([]),a=(0,s.useRef)(e),l=(0,s.useRef)(),d=(0,s.useRef)(),c=(0,s.useRef)(!1),[u,h]=(0,s.useState)(void 0),[,p]=(0,s.useState)(0),g=(0,s.useCallback)((s=>{if(i.current=s,!s)return o.current.forEach((e=>e())),void(o.current.length=0);const a=e.modules||[];r.current||(r.current=new Dh((()=>p((e=>e+1))),e.componentWrappingElement,e.maxComponentCreationTimeMs),o.current.push((()=>{r.current?.destroy(),r.current=null})));const u=function(e,t){"object"!=typeof e&&(e={});const i={...e};return ks.ALL_PROPERTIES_AND_CALLBACKS.forEach((e=>{const s=t[e];void 0!==s&&s!==ks.VUE_OMITTED_PROPERTY&&(i[e]=s)})),i}(e.gridOptions,e),g=new Qh((()=>{if(c.current){const e=()=>l.current?.shouldQueueUpdates()?void 0:n.current.shift();let t=e();for(;t;)t(),t=e()}}));l.current=g;const m=new jh,f={providedBeanInstances:{frameworkComponentWrapper:new Kh(r.current,u.reactiveCustomComponents??fu.gridOptions?.reactiveCustomComponents??!0),renderStatusService:m},modules:a,frameworkOverrides:g};const v=new Cu;u.gridId??(u.gridId=d.current),t.current=v.create(s,u,(i=>{h(i),i.createBean(m),o.current.push((()=>{i.destroy()})),i.getBean("ctrlsService").whenReady({addDestroyFunc:e=>{o.current.push(e)}},(()=>{if(i.isDestroyed())return;const s=t.current;s&&e.setGridApi?.(s)}))}),(e=>{e.getBean("ctrlsService").whenReady({addDestroyFunc:e=>{o.current.push(e)}},(()=>{n.current.forEach((e=>e())),n.current.length=0,c.current=!0}))}),f),o.current.push((()=>{t.current=void 0})),d.current=t.current.getGridId()}),[]),m=(0,s.useMemo)((()=>({height:"100%",...e.containerStyle||{}})),[e.containerStyle]),f=(0,s.useCallback)((e=>{c.current&&!l.current?.shouldQueueUpdates()?e():n.current.push(e)}),[]);return(0,s.useEffect)((()=>{const i=function(e,t){const i={};return Object.keys(t).forEach((s=>{const r=t[s];e[s]!==r&&(i[s]=r)})),i}(a.current,e);a.current=e,f((()=>{t.current&&function(e,t){if(!e)return;const i={};let s=!1;if(Object.keys(e).filter((e=>ks.ALL_PROPERTIES_AND_CALLBACKS_SET.has(e))).forEach((t=>{i[t]=e[t],s=!0})),!s)return;const r={type:"gridOptionsChanged",options:i};t.dispatchEvent(r);const o={type:"componentStateChanged"};_i(i,((e,t)=>{o[e]=t})),t.dispatchEvent(o)}(i,t.current)}))}),[e]),s.createElement("div",{style:m,className:e.className,ref:g},u&&!u.isDestroyed()?s.createElement(Uh,{context:u}):null,r.current?.getPortals()??null)},Kh=class extends bu{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const i=(e=>{switch(e){case"filter":return Ch;case"floatingFilterComponent":return Sh;case"dateComponent":return fh;case"dragAndDropImageComponent":return vh;case"loadingOverlayComponent":return bh;case"noRowsOverlayComponent":return Eh;case"statusPanel":return Fh;case"toolPanel":return Ph;case"menuItem":return Rh;case"cellRenderer":return mh}})(t.propertyName);if(i)return new i(e,this.parent,t)}else switch(t.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":xh()}const i=!t.cellRenderer&&"toolPanel"!==t.propertyName;return new hh(e,this.parent,t,i)}},Yh=(0,s.forwardRef)(((e,t)=>{const{ctrlsFactory:i,context:r,gos:o,resizeObserverService:n,rowModel:a}=(0,s.useContext)(Yu),[l,d]=(0,s.useState)((()=>new Zu)),[c,u]=(0,s.useState)((()=>new Zu)),[h,p]=(0,s.useState)(),[g,m]=(0,s.useState)(),f=(0,s.useRef)(),v=(0,s.useRef)(null),C=(0,s.useRef)(),y=(0,s.useMemo)((()=>Xo.__getGridRegisteredModules(e.api.getGridId())),[e]),w=(0,s.useMemo)((()=>l.toString()+" ag-details-row"),[l]),S=(0,s.useMemo)((()=>c.toString()+" ag-details-grid"),[c]);t&&(0,s.useImperativeHandle)(t,(()=>({refresh:()=>f.current?.refresh()??!1}))),e.template&&ct("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const b=(0,s.useCallback)((t=>{if(v.current=t,!t)return f.current=r.destroyBean(f.current),void C.current?.();const s={addOrRemoveCssClass:(e,t)=>d((i=>i.setClass(e,t))),addOrRemoveDetailGridCssClass:(e,t)=>u((i=>i.setClass(e,t))),setDetailGrid:e=>p(e),setRowData:e=>m(e),getGui:()=>v.current},l=i.getInstance("detailCellRenderer");if(l&&(r.createBean(l),l.init(s,e),f.current=l,o.get("detailRowAutoHeight"))){const i=()=>{if(null==v.current)return;const t=v.current.clientHeight;null!=t&&t>0&&setTimeout((()=>{e.node.setRowHeight(t),(Tt(o)||Mt(o))&&a.onRowHeightChanged()}),0)};C.current=n.observeResize(t,i),i()}}),[]),R=(0,s.useCallback)((e=>{f.current?.registerDetailWithMaster(e)}),[]);return s.createElement("div",{className:w,ref:b},h&&s.createElement(qh,{className:S,...h,modules:y,rowData:g,setGridApi:R}))})),Qh=class extends Id{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:ah,agGroupRowRenderer:ah,agDetailCellRenderer:Yh},this.wrapIncoming=(e,t)=>{return"ensureVisible"===t?(i=e,sh||setTimeout((()=>sh=!1),0),sh=!0,i()):e();var i},this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return"19"===th}},Jh=class extends s.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach((t=>t(e)))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return s.createElement(qh,{...this.props,setGridApi:this.setGridApi})}},Xh=i(73135),Zh=i(49544);const ep="-1";var tp;!function(e){e.Small="small",e.Middle="middle"}(tp||(tp={}));var ip=i(93103);const sp=(0,y.I4)(me.W1.Item)`
  display: flex;
  align-items: center;
`,rp=y.I4.span`
  width: 20px;
`,op=({colId:e,api:t,pinnedLeft:i,pinnedRight:r,invisibleColumns:o,isMain:n,onVisibleChange:a})=>{var l;const d=(0,s.useCallback)((i=>{t.setColumnsPinned([e],i)}),[t,e]),c=o.length>0&&(0,h.FD)(me.W1.SubMenu,{title:(0,h.FD)(h.FK,{children:[(0,h.Y)(fe.A.EyeOutlined,{iconSize:"m"}),(0,w.t)("Unhide")]}),children:[o.length>1&&(0,h.Y)(me.W1.Item,{onClick:()=>{t.setColumnsVisible(o,!0)},children:(0,h.Y)("b",{children:(0,w.t)("All %s hidden columns",o.length)})}),o.map((e=>(0,h.Y)(me.W1.Item,{onClick:()=>{t.setColumnsVisible([e.getColId()],!0)},children:e.getColDef().headerName},e.getColId())))]});return n?(0,h.Y)(ip.ms,{placement:"bottomLeft",trigger:["click"],onVisibleChange:a,overlay:(0,h.FD)(me.W1,{style:{width:250},mode:"vertical",children:[(0,h.FD)(sp,{onClick:()=>{(0,Xh.A)((()=>new Promise(((i,s)=>{const r=t.getDataAsCsv({columnKeys:t.getAllDisplayedColumns().map((e=>e.getColId())).filter((t=>t!==e)),suppressQuotes:!0,columnSeparator:"\t"});r?i(r):s()}))))},children:[(0,h.Y)(fe.A.CopyOutlined,{iconSize:"m"})," ",(0,w.t)("Copy the current data")]}),(0,h.FD)(sp,{onClick:()=>{t.exportDataAsCsv({columnKeys:t.getAllDisplayedColumns().map((e=>e.getColId())).filter((t=>t!==e))})},children:[(0,h.Y)(fe.A.DownloadOutlined,{iconSize:"m"})," ",(0,w.t)("Download to CSV")]}),(0,h.Y)(me.W1.Divider,{}),(0,h.FD)(sp,{onClick:()=>{t.autoSizeAllColumns()},children:[(0,h.Y)(fe.A.ColumnWidthOutlined,{iconSize:"m"}),(0,w.t)("Autosize all columns")]}),c,(0,h.Y)(me.W1.Divider,{}),(0,h.FD)(sp,{onClick:()=>{t.setColumnsVisible(o,!0);const e=t.getColumns();if(e){const i=e.filter((e=>e.getColId()!==ep&&e.isPinned()));t.setColumnsPinned(i,null),t.moveColumns(e,0);const s=e.find((e=>e.getColId()!==ep));s&&t.ensureColumnVisible(s,"start")}},children:[(0,h.Y)(rp,{className:"anticon"}),(0,w.t)("Reset columns")]})]})}):(0,h.Y)(ip.ms,{placement:"bottomRight",trigger:["click"],onVisibleChange:a,overlay:(0,h.FD)(me.W1,{style:{width:180},mode:"vertical",children:[(0,h.FD)(sp,{onClick:()=>{(0,Xh.A)((()=>new Promise(((i,s)=>{const r=t.getDataAsCsv({columnKeys:[e],suppressQuotes:!0});r?i(r):s()}))))},children:[(0,h.Y)(fe.A.CopyOutlined,{iconSize:"m"})," ",(0,w.t)("Copy")]}),(i||r)&&(0,h.FD)(sp,{onClick:()=>d(null),children:[(0,h.Y)(fe.A.UnlockOutlined,{iconSize:"m"})," ",(0,w.t)("Unpin")]}),!i&&(0,h.FD)(sp,{onClick:()=>d("left"),children:[(0,h.Y)(fe.A.VerticalRightOutlined,{iconSize:"m"}),(0,w.t)("Pin Left")]}),!r&&(0,h.FD)(sp,{onClick:()=>d("right"),children:[(0,h.Y)(fe.A.VerticalLeftOutlined,{iconSize:"m"}),(0,w.t)("Pin Right")]}),(0,h.Y)(me.W1.Divider,{}),(0,h.FD)(sp,{onClick:()=>{t.autoSizeColumns([e])},children:[(0,h.Y)(fe.A.ColumnWidthOutlined,{iconSize:"m"}),(0,w.t)("Autosize Column")]}),(0,h.FD)(sp,{onClick:()=>{t.setColumnsVisible([e],!1)},disabled:(null==(l=t.getColumns())?void 0:l.length)===o.length+1,children:[(0,h.Y)(fe.A.EyeInvisibleOutlined,{iconSize:"m"}),(0,w.t)("Hide Column")]}),c]})})},np=[null,"asc","desc"],ap=y.I4.div`
  display: flex;
  flex: 1;
  &[role='button'] {
    cursor: pointer;
  }
`,lp=y.I4.div`
  position: relative;
  display: inline-flex;
  align-items: center;
`,dp=y.I4.span`
  position: absolute;
  right: 0;
`,cp=y.I4.div`
  display: none;
  position: absolute;
  right: ${({theme:e})=>3*e.gridUnit}px;
  &.main {
    margin: 0 auto;
    left: 0;
    right: 0;
    width: 20px;
  }
  & .ant-dropdown-trigger {
    cursor: context-menu;
    padding: ${({theme:e})=>2*e.gridUnit}px;
    background-color: var(--ag-background-color);
    box-shadow: 0 0 2px var(--ag-chip-border-color);
    border-radius: 50%;
    &:hover {
      box-shadow: 0 0 4px ${({theme:e})=>e.colors.grayscale.light1};
    }
  }
`,up=y.I4.div`
  position: absolute;
  top: 0;
`,hp={agColumnHeader:({enableFilterButton:e,enableSorting:t,displayName:i,setSort:r,column:o,api:n})=>{const a=(0,y.DP)(),l=o.getColId(),d=o.isPinnedLeft(),c=o.isPinnedRight(),u=(0,s.useRef)(0),[p,g]=(0,s.useState)([]),[m,f]=(0,s.useState)(null),[v,C]=(0,s.useState)(),S=(0,s.useCallback)((e=>{u.current=(u.current+1)%np.length;const t=np[u.current];r(t,e.shiftKey),f(t)}),[r]),b=(0,s.useCallback)((e=>{var t;e&&g((null==(t=n.getColumns())?void 0:t.filter((e=>!e.isVisible())))||[])}),[n]),R=(0,s.useCallback)((()=>{var e,t;const i=-1!==n.getAllDisplayedColumns().findIndex((e=>e.getSortIndex())),s=o.getSortIndex();u.current=np.indexOf(null!=(e=o.getSort())?e:null),f(null!=(t=o.getSort())?t:null),C(i?s:null)}),[n,o]);return(0,s.useEffect)((()=>(n.addEventListener("sortChanged",R),()=>{n.isDestroyed()||n.removeEventListener("sortChanged",R)})),[n,R]),(0,h.FD)(h.FK,{children:[l!==ep&&(0,h.FD)(ap,{tabIndex:0,className:"ag-header-cell-label",...t&&{role:"button",onClick:S,title:(0,w.t)("To enable multiple column sorting, hold down the ⇧ Shift key while clicking the column header.")},children:[(0,h.Y)("div",{className:"ag-header-cell-text",children:i}),t&&(0,h.FD)(lp,{children:[(0,h.Y)(fe.A.Sort,{iconSize:"xxl"}),(0,h.FD)(up,{children:["asc"===m&&(0,h.Y)(fe.A.SortAsc,{iconSize:"xxl",iconColor:a.colors.primary.base}),"desc"===m&&(0,h.Y)(fe.A.SortDesc,{iconSize:"xxl",iconColor:a.colors.primary.base})]}),"number"==typeof v&&(0,h.Y)(dp,{children:v+1})]})]}),e&&l&&n&&(0,h.Y)(cp,{className:"customHeaderAction"+(l===ep?" main":""),children:l&&(0,h.Y)(op,{colId:l,api:n,pinnedLeft:d,pinnedRight:c,invisibleColumns:p,isMain:l===ep,onVisibleChange:b})})]})}},pp=({api:e})=>e.refreshCells(),gp=function({data:e,columns:t,sortable:i=!0,columnReorderable:r,height:n,externalFilter:a,showRowNumber:l,enableActions:d,size:c=tp.Middle,striped:u}){const p=(0,y.DP)(),g=(0,s.useCallback)((()=>Boolean(a)),[a]),m=`${e.length}}`.length,f=(0,s.useCallback)((({event:e,column:t,data:i,value:s,api:r})=>{var o;if((null==document.getSelection||null==(o=document.getSelection())||null==o.toString||!o.toString())&&e&&"c"===e.key&&(e.ctrlKey||e.metaKey)){const e=t.getColId()===ep?r.getAllDisplayedColumns().filter((e=>e.getColId()!==ep)):[t],o=t.getColId()===ep?[e.map((e=>e.getColId())).join("\t"),e.map((e=>null==i?void 0:i[e.getColId()])).join("\t")].join("\n"):String(s);(0,Xh.A)((()=>Promise.resolve(o)))}}),[]),v=(0,s.useMemo)((()=>[{field:ep,valueGetter:"node.rowIndex+1",cellClass:"locked-col",width:20+6*m,suppressNavigable:!0,resizable:!1,pinned:"left",sortable:!1,...r&&{suppressMovable:!0}},...t.map((({label:e,headerName:s,width:r,render:o,comparator:n},a)=>({field:e,headerName:s,cellRenderer:o,sortable:i,comparator:n,...a===t.length-1&&{flex:1,width:r,minWidth:150}})))].slice(l?0:1)),[m,r,t,l,i]),C={...!r&&{suppressMovable:!0},resizable:!0,sortable:i,filter:Boolean(d)},w=p.gridUnit*(c===tp.Middle?9:7);return(0,h.FD)(Zh.A,{children:[(0,h.Y)(o.mL,{styles:()=>o.AH`
          #grid-table.ag-theme-quartz {
            --ag-icon-font-family: agGridMaterial;
            --ag-grid-size: ${p.gridUnit}px;
            --ag-font-size: ${p.typography.sizes[c===tp.Middle?"m":"s"]}px;
            --ag-font-family: ${p.typography.families.sansSerif};
            --ag-row-height: ${w}px;
            ${!u&&`--ag-odd-row-background-color: ${p.colors.grayscale.light5};`}
            --ag-border-color: ${p.colors.grayscale.light2};
            --ag-row-border-color: ${p.colors.grayscale.light2};
            --ag-header-background-color: ${p.colors.grayscale.light4};
          }
          #grid-table .ag-cell {
            -webkit-font-smoothing: antialiased;
          }
          .locked-col {
            background: var(--ag-row-border-color);
            padding: 0;
            text-align: center;
            font-size: calc(var(--ag-font-size) * 0.9);
            color: var(--ag-disabled-foreground-color);
          }
          .ag-row-hover .locked-col {
            background: var(--ag-row-hover-color);
          }
          .ag-header-cell {
            overflow: hidden;
          }
          & [role='columnheader']:hover .customHeaderAction {
            display: block;
          }
        `}),(0,h.Y)("div",{id:"grid-table",className:"ag-theme-quartz",css:o.AH`
          width: 100%;
          height: ${n}px;
        `,children:(0,h.Y)(Jh,{rowData:e,columnDefs:v,defaultColDef:C,onSortChanged:pp,isExternalFilterPresent:g,doesExternalFilterPass:a,components:hp,gridOptions:{enableCellTextSelection:!0,ensureDomOrder:!0,suppressFieldDotNotation:!0,headerHeight:w,rowSelection:"multiple",rowHeight:w},onCellKeyDown:f})})]})},mp=/^(NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity))$/,fp=y.I4.div`
  height: 100%;
  overflow: hidden;
`,vp=e=>"string"==typeof e&&mp.test(e)?parseFloat(e):e,Cp=(e,t)=>{const i=vp(e),s=vp(t);return i===s?0:null===i?1:null===s||i<s?-1:1},yp=({orderedColumnKeys:e,data:t,height:i,filterText:r="",expandedColumns:o=[],allowHTML:n=!0,striped:a})=>{const l=function({columnKeys:e,expandedColumns:t}){const i=(0,s.useMemo)((()=>e.reduce(((e,i)=>({...e,[i]:null==t?void 0:t.some((e=>e.startsWith(`${i}.`)))})),{})),[t,e]);return(0,s.useCallback)((({cellData:e,columnKey:t})=>{if(null===e)return Ye;const s=String(e),r=s.substring(0,1);let o;return o="["===r?"[…]":"{"===r?"{…}":"",i[t]?o:s}),[i])}({columnKeys:e,expandedColumns:o}),d=(0,s.useMemo)((()=>e.map((e=>({key:e,label:e,fieldName:e,headerName:e,comparator:Cp,render:({value:e,colDef:t})=>(({cellData:e,getCellContent:t,columnKey:i,allowHTML:s=!0})=>{var r;const o=null!=(r=null==t?void 0:t({cellData:e,columnKey:i}))?r:String(e);if(null===e)return(0,h.Y)("i",{className:"text-muted",children:Ye});const n=function(e){if("object"==typeof e)return e;if("string"!=typeof e||-1===["{","["].indexOf(e.substring(0,1)))return null;try{const t=Je()({storeAsString:!0}).parse(e);return t&&"object"==typeof t?t:null}catch(e){return null}}(e);return n?(0,h.Y)(st,{modalTitle:(0,w.t)("Cell content"),jsonObject:n,jsonValue:e}):s&&"string"==typeof e?(0,rt.nn)(o):o})({cellData:e,columnKey:t.field,allowHTML:n,getCellContent:l})})))),[e,n,l]),c=(0,s.useRef)(r);c.current=r;const u=(0,s.useCallback)((e=>!c.current||!e.data||((e,t)=>{const i=[];Object.keys(t).forEach((e=>{if(t.hasOwnProperty(e)){const s=t[e];"string"==typeof s?i.push(s.toLowerCase()):null!==s&&"function"==typeof s.toString&&i.push(s.toString())}}));const s=e.toLowerCase();return i.some((e=>e.includes(s)))})(c.current,e.data)),[]);return(0,h.Y)(fp,{className:"filterable-table-container",children:(0,h.Y)(gp,{size:tp.Small,height:i,usePagination:!1,columns:d,data:t,externalFilter:u,showRowNumber:!0,striped:a,enableActions:!0,columnReorderable:!0})})};var wp=i(84666),Sp=i(93641);const bp=({table:e,schema:t,dbId:i,templateParams:s})=>{const o=(0,r.d4)((e=>e.sqlLab.errorMessage)),n=(0,r.wA)(),a={table_name:e,schema:t,database_id:i,template_params:s};return(0,h.FD)(de.A,{buttonSize:"small",onClick:()=>{n((0,c.createCtasDatasource)(a)).then((e=>{const t={datasource:`${e.table_id}__table`,metrics:["count"],groupby:[],viz_type:Sp.Y.Table,since:"100 years ago",all_columns:[],row_limit:1e3};n((0,c.addInfoToast)((0,w.t)("Creating a data source and creating a new tab"))),(0,je.Cq)(t)})).catch((()=>{n((0,c.addDangerToast)(o||(0,w.t)("An error occurred")))}))},tooltip:(0,w.t)("Explore the result set in the data exploration view"),children:[(0,h.Y)(we.W,{icon:"line-chart",placement:"top",label:(0,w.t)("explore")})," ",(0,w.t)("Explore")]})},Rp=({database:e,onClick:t})=>{var i;const s=null!=(i=null==e?void 0:e.allows_subquery)&&i;return(0,h.FD)(de.A,{buttonSize:"small",onClick:t,disabled:!s,tooltip:(0,w.t)("Explore the result set in the data exploration view"),children:[(0,h.Y)(we.W,{icon:"line-chart",placement:"top",label:(0,w.t)("explore")})," ",(0,w.t)("Create Chart")]})};var Ep=i(45738),Fp=i(78360),Pp=i(10286);Ep.A.registerLanguage("sql",Fp.A);const xp=(e,t,i)=>{let s=(e||"").split("\n");return s.length>=t&&(s=s.slice(0,t),s.push("{...}")),s.map((e=>e.length>i?`${e.slice(0,i)}{...}`:e)).join("\n")};function Dp({shrink:e,sql:t,maxLines:i,maxWidth:s}){return(0,h.Y)(Ep.A,{language:"sql",style:Pp.A,children:e?xp(t,i,s):t})}function Ap({rawSql:e,sql:t}){return(0,h.FD)("div",{children:[(0,h.Y)("h4",{children:(0,w.t)("Source SQL")}),(0,h.Y)(Ep.A,{language:"sql",style:Pp.A,children:t}),e&&e!==t&&(0,h.FD)("div",{children:[(0,h.Y)("h4",{children:(0,w.t)("Executed SQL")}),(0,h.Y)(Ep.A,{language:"sql",style:Pp.A,children:e})]})]})}const Tp=function({sql:e,rawSql:t,maxWidth:i=50,maxLines:s=5,shrink:r=!1}){return(0,h.Y)(be.A,{modalTitle:(0,w.t)("SQL"),modalBody:(0,h.Y)(Ap,{rawSql:t,sql:e}),triggerNode:(0,h.Y)(Dp,{shrink:r,sql:e,maxLines:s,maxWidth:i})})},Mp=(0,y.I4)(Te.Ay)`
  margin-right: ${({theme:e})=>e.gridUnit}px;
`;function Ip({query:e}){return(0,h.Y)(Mp,{type:S.sA[e.state],children:S.K8[e.state]})}var kp;!function(e){e.Query="QUERY",e.QueryAndDropdown="QUERY_AND_DROPDOWN",e.Dropdown="DROPDOWN",e.NotLimited="NOT_LIMITED"}(kp||(kp={}));const Lp=y.I4.div`
  display: flex;
  flex-direction: column;
  row-gap: ${({theme:e})=>2*e.gridUnit}px;
`,Op=y.I4.div`
  position: relative;
  min-height: ${({theme:e})=>25*e.gridUnit}px;
  [role='alert'] {
    margin-top: ${({theme:e})=>2*e.gridUnit}px;
  }
  .sql-result-track-job {
    margin-top: ${({theme:e})=>2*e.gridUnit}px;
  }
`,Np=y.I4.div`
  font-family: ${({theme:e})=>e.typography.families.monospace};
  white-space: pre;
  word-break: break-word;
  overflow-x: auto;
  white-space: pre-wrap;
`,Gp=y.I4.div`
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  line-height: 1;
`,Bp=y.I4.div`
  display: flex;
  justify-content: space-between;
`,Vp=y.I4.div`
  display: grid;
  grid-auto-flow: column;
  padding-right: ${({theme:e})=>2*e.gridUnit}px;
`,Hp=(0,ae.a)(),$p=({cache:e=!1,csv:t=!0,database:i={},displayLimit:n,height:a,queryId:l,search:d=!0,showSql:p=!1,showSqlInline:g=!1,visualize:m=!0,defaultQueryLimit:v})=>{var C,S,b,E;const P=(0,r.d4)((({user:e})=>e),r.bN),x=(0,r.d4)((({sqlLab:{queries:e}})=>F()(e[l],["id","errorMessage","cached","results","resultsKey","dbId","tab","sql","sqlEditorId","templateParams","schema","rows","queryLimit","limitingFactor","trackingUrl","state","errors","link","ctas","ctas_method","tempSchema","tempTable","isDataPreview","progress","extra"])),r.bN),D=null!=(C=Hp.get("sqleditor.extension.resultTable"))?C:yp,M=(0,y.DP)(),[I,k]=(0,s.useState)(""),[L,O]=(0,s.useState)([]),[N,G]=(0,s.useState)(!1),[B,V]=(0,s.useState)(!1),H=(0,f.W6)(),$=(0,r.wA)(),W=ye({queryId:l,sqlEditorId:x.sqlEditorId}),_=(0,s.useCallback)((()=>{x.errorMessage&&x.errorMessage.indexOf("session timed out")>0&&$((0,c.reRunQuery)(x))}),[]);(0,s.useEffect)((()=>{_()}),[_]);const z=(e,t)=>{$((0,c.fetchQueryResults)(e,n,t))},U=(0,He.Z)(x);(0,s.useEffect)((()=>{var t,i;e&&x.cached&&(null==x||null==(t=x.results)||null==(i=t.data)?void 0:i.length)>0&&(O(x.results.data),$((0,c.clearQueryResults)(x))),x.resultsKey&&x.resultsKey!==(null==U?void 0:U.resultsKey)&&z(x)}),[x,e]);const j=e=>{V(!!e)},q=e=>{k(e.target.value)},K=async e=>{const{results:t}=x,i=e.metaKey;if(W(R.PV,{}),null!=t&&t.query_id){const e=await(0,qe.T3)(t.query_id,"query",{...Ue.V0,datasource:`${t.query_id}__query`,all_columns:t.columns.map((e=>e.column_name))}),s=(0,je.eX)(null,{[Ee.vX.formDataKey.name]:e});i?window.open(s,"_blank","noreferrer"):H.push(s)}else(0,u.iB)((0,w.t)("Unable to create chart without a query id."))},Y=()=>{if(d||m||t){var s;const{results:o,queryLimit:n,limitingFactor:a,rows:l}=x,c=n||o.query.limit,u=Math.min(l||0,(null==o||null==(s=o.data)?void 0:s.length)||0);let{data:p}=x.results;e&&x.cached&&(p=L);const{columns:g}=x.results,f={columns:x.results.columns,name:(null==x?void 0:x.tab)||"Untitled",dbId:null==x?void 0:x.dbId,sql:null==x?void 0:x.sql,templateParams:null==x?void 0:x.templateParams,schema:null==x?void 0:x.schema},v=(0,wp.L)("can_export_csv","SQLLab",null==P?void 0:P.roles);return(0,h.FD)(Bp,{children:[(0,h.Y)(ze.D,{visible:N,onHide:()=>G(!1),buttonTextOnSave:(0,w.t)("Save & Explore"),buttonTextOnOverwrite:(0,w.t)("Overwrite & Explore"),modalDescription:(0,w.t)("Save this query as a virtual dataset to continue exploring"),datasource:f}),(0,h.FD)(Vp,{children:[m&&(null==i?void 0:i.allows_virtual_table_explore)&&(0,h.Y)(Rp,{database:i,onClick:K}),t&&v&&(0,h.FD)(de.A,{buttonSize:"small",href:(r=x.id,`/api/v1/sqllab/export/${r}/`),onClick:()=>{W(R.ft,{}),a===kp.Dropdown&&c===u&&le.Ay.warning({title:(0,w.t)("Download is on the way"),content:(0,w.t)("Downloading %(rows)s rows based on the LIMIT configuration. If you want the entire result set, you need to adjust the LIMIT.",{rows:u.toLocaleString()})})},children:[(0,h.Y)("i",{className:"fa fa-file-text-o"})," ",(0,w.t)("Download to CSV")]}),v&&(0,h.Y)(et.A,{text:(0,T.L)(p,g),wrapped:!1,copyNode:(0,h.FD)(de.A,{buttonSize:"small",children:[(0,h.Y)("i",{className:"fa fa-clipboard"})," ",(0,w.t)("Copy to Clipboard")]}),hideTooltip:!0,onCopyEnd:()=>W(R.AI,{})})]}),d&&(0,h.Y)("input",{type:"text",onChange:q,value:I,className:"form-control input-sm",placeholder:(0,w.t)("Filter results")})]})}var r;return(0,h.Y)("div",{})},Q=e=>{var i,s;const{results:r,rows:n,queryLimit:a,limitingFactor:l}=x;let d="";const c=null==r?void 0:r.displayLimitReached,u=a||r.query.limit,p=!(null==P||null==(i=P.roles)||!i.Admin),m=Math.min(n||0,(null==r||null==(s=r.data)?void 0:s.length)||0),f={withAdmin:(0,w.t)("The number of results displayed is limited to %(rows)d by the configuration DISPLAY_MAX_ROW. Please add additional limits/filters or download to csv to see more rows up to the %(limit)d limit.",{rows:m,limit:u}),withoutAdmin:(0,w.t)("The number of results displayed is limited to %(rows)d. Please add additional limits/filters, download to csv, or contact an admin to see more rows up to the %(limit)d limit.",{rows:m,limit:u})},C=u===v&&l===kp.Dropdown;l===kp.Query&&t?d=(0,w.t)("The number of rows displayed is limited to %(rows)d by the query",{rows:n}):l!==kp.Dropdown||C?l===kp.QueryAndDropdown&&(d=(0,w.t)("The number of rows displayed is limited to %(rows)d by the query and limit dropdown.",{rows:n})):d=(0,w.t)("The number of rows displayed is limited to %(rows)d by the limit dropdown.",{rows:n});const y=(0,$e.gV)()(n),S=`${(0,w.t)("%(rows)d rows returned",{rows:n})}. ${d}`;if(e)return(0,h.FD)(h.FK,{children:[!c&&C&&(0,h.Y)("div",{ref:j,children:(0,h.Y)(Ce.A,{type:"warning",onClose:()=>V(!1),message:(0,w.t)("The number of rows displayed is limited to %(rows)d by the dropdown.",{rows:n})})}),c&&(0,h.Y)("div",{ref:j,children:(0,h.Y)(Ce.A,{type:"warning",onClose:()=>V(!1),message:p?f.withAdmin:f.withoutAdmin})})]});const b=g||!c&&!C;return(0,h.Y)(h.FK,{children:b&&(0,h.Y)(Gp,{children:(0,h.Y)(A.m_,{id:"sqllab-rowcount-tooltip",title:S,placement:"left",children:(0,h.FD)(Te.Ay,{css:o.AH`
                  line-height: ${M.typography.sizes.l}px;
                `,children:[d&&(0,h.Y)(fe.A.ExclamationCircleOutlined,{css:o.AH`
                      font-size: ${M.typography.sizes.m}px;
                      margin-right: ${M.gridUnit}px;
                    `}),(0,w.tn)("%s row","%s rows",n,y)]})})})})},J=null==x||null==(S=x.results)?void 0:S.displayLimitReached;let X,Z,ee,te=x.dbId;if(null!=i&&i.explore_database_id&&(te=i.explore_database_id),x.trackingUrl&&x.state!==We.kZ.Success&&x.state!==We.kZ.Fetching&&(Z=(0,h.Y)(de.A,{className:"sql-result-track-job",buttonSize:"small",href:x.trackingUrl,target:"_blank",children:x.state===We.kZ.Running?(0,w.t)("Track job"):(0,w.t)("See query details")})),p&&(X=(0,h.Y)(Tp,{sql:x.sql,...g&&{maxLines:1,maxWidth:60}})),x.state===We.kZ.Stopped)return(0,h.Y)(Ce.A,{type:"warning",message:(0,w.t)("Query was stopped")});if(x.state===We.kZ.Failed){var ie;const e=[...(null==(ie=x.extra)?void 0:ie.errors)||[],...x.errors||[]];return(0,h.FD)(Op,{children:[e.map(((e,t)=>(0,h.Y)(_e.A,{title:(0,w.t)("Database error"),error:e,subtitle:(0,h.Y)(Np,{children:e.message}),copyText:e.message||void 0,link:x.link,source:"sqllab"},t))),e.some((e=>(null==e?void 0:e.error_type)===We.eK.FRONTEND_TIMEOUT_ERROR))?(0,h.Y)(de.A,{className:"sql-result-track-job",buttonSize:"small",onClick:()=>z(x,0),children:(0,w.t)("Retry fetching results")}):Z]})}if(x.state===We.kZ.Success&&x.ctas){const{tempSchema:e,tempTable:t}=x;let i="Table";return x.ctas_method===c.CtasEnum.View&&(i="View"),(0,h.Y)("div",{children:(0,h.Y)(Ce.A,{type:"info",message:(0,h.FD)(h.FK,{children:[(0,w.t)(i)," [",(0,h.FD)("strong",{children:[e?`${e}.`:"",t]}),"] ",(0,w.t)("was created"),"  ",(0,h.FD)(Ve,{children:[(0,h.Y)(de.A,{buttonSize:"small",css:(0,o.AH)({marginRight:M.gridUnit},"",""),onClick:()=>((e,t)=>{const i={id:(0,Ae.Ak)(11),name:t,autorun:!1,dbId:x.dbId,sql:`SELECT * FROM ${e?`${e}.`:""}${t}`};$((0,c.addQueryEditor)(i))})(e,t),children:(0,w.t)("Query in a new tab")}),(0,h.Y)(bp,{table:t,schema:e,dbId:te})]})]})})})}if(x.state===We.kZ.Success&&x.results){const{results:t}=x,i=B?a-70:a-(J?0:32);let s;if(e&&x.cached?s=L:null!=t&&t.data&&({data:s}=t),s&&s.length>0){const e=t.expanded_columns?t.expanded_columns.map((e=>e.column_name)):[],r=(0,ve.Gq)(ve.Hh.SqllabIsRenderHtmlEnabled,!0);return(0,h.FD)(Lp,{children:[Y(),p&&g?(0,h.FD)(h.FK,{children:[(0,h.FD)("div",{css:o.AH`
                  display: flex;
                  justify-content: space-between;
                  gap: ${8}px;
                `,children:[(0,h.Y)(Le.A,{css:[o.AH`
                      height: 28px;
                      width: calc(100% - ${108}px);
                      code {
                        width: 100%;
                        overflow: hidden;
                        white-space: nowrap !important;
                        text-overflow: ellipsis;
                        display: block;
                      }
                    `,"",""],children:X}),Q(!1)]}),Q(!0)]}):(0,h.FD)(h.FK,{children:[Q(!1),Q(!0),X]}),(0,h.Y)(D,{data:s,queryId:x.id,orderedColumnKeys:t.columns.map((e=>e.column_name)),height:i,filterText:I,expandedColumns:e,allowHTML:r})]})}if(s&&0===s.length)return(0,h.Y)(Ce.A,{type:"warning",message:(0,w.t)("The query returned no data")})}if(x.cached||x.state===We.kZ.Success&&!x.results){if(x.isDataPreview)return(0,h.Y)(de.A,{buttonSize:"small",buttonStyle:"primary",onClick:()=>$((0,c.reFetchQueryResults)({...x,isDataPreview:!0})),children:(0,w.t)("Fetch data preview")});if(x.resultsKey)return(0,h.Y)(de.A,{buttonSize:"small",buttonStyle:"primary",onClick:()=>z(x),children:(0,w.t)("Refetch results")})}x.progress>0&&(ee=(0,h.Y)(Ne,{percent:parseInt(x.progress.toFixed(0),10),striped:!0}));const se=null!=(b=null==x||null==(E=x.extra)?void 0:E.progress)?b:null;return(0,h.FD)(Op,{children:[(0,h.Y)("div",{children:!ee&&(0,h.Y)(Ke.A,{position:"normal"})}),(0,h.Y)("div",{children:100===x.progress&&(0,h.Y)(Ke.A,{position:"normal"})}),(0,h.Y)(Ip,{query:x}),(0,h.Y)("div",{children:se&&(0,h.Y)(Ce.A,{type:"success",message:se})}),(0,h.Y)("div",{children:100!==x.progress&&ee}),Z&&(0,h.Y)("div",{children:Z})]})},Wp=(0,s.memo)($p),_p=y.I4.span`
  color: ${({theme:e})=>e.colors.primary.dark1};
  &: hover {
    color: ${({theme:e})=>e.colors.primary.dark2};
  }
`,zp=({children:e=null,className:t="",onClick:i=()=>{},placement:s="top",style:r={},tooltip:o=null})=>{const n=(0,h.Y)(_p,{onClick:i,style:r,className:`IconTooltip ${t}`,children:e});return o?(0,h.Y)(A.m_,{id:"tooltip",title:o,placement:s,mouseEnterDelay:.3,mouseLeaveDelay:.15,children:n}):n},Up=o.AH`
  position: static;
`,jp=o.AH`
  vertical-align: 0em;
  svg {
    height: 0.9em;
  }
`,qp=(0,y.I4)(zp)`
  padding-right: ${({theme:e})=>2*e.gridUnit}px;
  span {
    color: ${({theme:e})=>e.colors.grayscale.base};
    &: hover {
      color: ${({theme:e})=>e.colors.primary.base};
    }
  }
`,Kp=({columns:e=["started","duration","rows"],queries:t=[],onUserClicked:i=()=>{},onDbClicked:o=()=>{},displayLimit:n,latestQueryId:a})=>{const l=(0,y.DP)(),d=(0,r.wA)(),u={state:(0,w.t)("State"),started:(0,w.t)("Started"),duration:(0,w.t)("Duration"),progress:(0,w.t)("Progress"),rows:(0,w.t)("Rows"),sql:(0,w.t)("SQL"),results:(0,w.t)("Results"),actions:(0,w.t)("Actions")},p=e=>"sql"===e?e.toUpperCase():e.charAt(0).toUpperCase().concat(e.slice(1)),g=(0,s.useMemo)((()=>e.map((e=>({accessor:e,Header:u[e]||p(e),disableSortBy:!0})))),[e]),m=(0,r.d4)((e=>e.user)),f=(0,s.useMemo)((()=>{const e={success:{config:{icon:(0,h.Y)(fe.A.CheckOutlined,{iconColor:l.colors.success.base,iconSize:"m"}),label:(0,w.t)("Success")}},failed:{config:{icon:(0,h.Y)(fe.A.CloseOutlined,{iconColor:l.colors.error.base,iconSize:"m"}),label:(0,w.t)("Failed")}},stopped:{config:{icon:(0,h.Y)(fe.A.CloseOutlined,{iconColor:l.colors.error.base,iconSize:"m"}),label:(0,w.t)("Failed")}},running:{config:{icon:(0,h.Y)(fe.A.LoadingOutlined,{iconColor:l.colors.primary.base,iconSize:"m"}),label:(0,w.t)("Running")}},fetching:{config:{icon:(0,h.Y)(fe.A.LoadingOutlined,{iconColor:l.colors.primary.base,iconSize:"m"}),label:(0,w.t)("Fetching")}},timed_out:{config:{icon:(0,h.Y)(fe.A.Clock,{iconColor:l.colors.error.base,iconSize:"m"}),label:(0,w.t)("Offline")}},scheduled:{config:{icon:(0,h.Y)(fe.A.LoadingOutlined,{iconColor:l.colors.warning.base,iconSize:"m"}),label:(0,w.t)("Scheduled")}},pending:{config:{icon:(0,h.Y)(fe.A.LoadingOutlined,{iconColor:l.colors.warning.base,iconSize:"m"}),label:(0,w.t)("Scheduled")}},error:{config:{icon:(0,h.Y)(fe.A.Error,{iconColor:l.colors.error.base,iconSize:"m"}),label:(0,w.t)("Unknown Status")}},started:{config:{icon:(0,h.Y)(fe.A.LoadingOutlined,{iconColor:l.colors.primary.base,iconSize:"m"}),label:(0,w.t)("Started")}}};return t.map((t=>{const{state:s,sql:r,progress:l,...u}=t,p=u,g=e[s]||e.error;return p.endDttm&&(p.duration=(0,h.Y)(Te.Ay,{monospace:!0,children:(0,Be.RW)(p.startDttm,p.endDttm)})),p.user=(0,h.Y)(de.A,{buttonSize:"small",buttonStyle:"link",onClick:()=>i(p.userId),children:p.user}),p.db=(0,h.Y)(de.A,{buttonSize:"small",buttonStyle:"link",onClick:()=>o(p.dbId),children:p.db}),p.started=(0,h.Y)(Te.Ay,{monospace:!0,children:(0,Be.XV)(p.startDttm).format("L HH:mm:ss")}),p.querylink=(0,h.FD)(de.A,{buttonSize:"small",buttonStyle:"link",onClick:()=>(e=>{const t=`/sqllab?queryId=${e}`;window.open(t)})(p.queryId),children:[(0,h.Y)("i",{className:"fa fa-external-link m-r-3"}),(0,w.t)("Edit")]}),p.sql=(0,h.Y)(Le.A,{css:[Up,"",""],children:(0,h.Y)(Tp,{sql:r,rawSql:p.executedSql,shrink:!0,maxWidth:60})}),p.resultsKey?p.results=(0,h.Y)(be.A,{className:"ResultsModal",triggerNode:(0,h.Y)(de.A,{buttonSize:"xsmall",buttonStyle:"tertiary",children:(0,w.t)("View")}),modalTitle:(0,w.t)("Data preview"),beforeOpen:()=>((e,t)=>{d((0,c.fetchQueryResults)(e,t))})(t,n),onExit:()=>d((0,c.clearQueryResults)(t)),modalBody:(0,h.Y)(Wp,{showSql:!0,queryId:t.id,height:400,displayLimit:n,defaultQueryLimit:1e3}),responsive:!0}):p.results=(0,h.Y)(h.FK,{}),p.progress="success"===s?(0,h.Y)(Ne,{percent:parseInt(l.toFixed(0),10),striped:!0,showInfo:!1}):(0,h.Y)(Ne,{percent:parseInt(l.toFixed(0),10),striped:!0}),p.state=(0,h.Y)(A.m_,{title:g.config.label,children:g.config.icon}),p.actions=(0,h.FD)("div",{children:[(0,h.Y)(qp,{onClick:()=>(e=>{d((0,c.queryEditorSetSql)({id:e.sqlEditorId},e.sql,e.id))})(t),tooltip:(0,w.t)("Overwrite text in the editor with a query on this table"),placement:"top",className:"pointer",children:(0,h.Y)(fe.A.Edit,{iconSize:"xl"})}),(0,h.Y)(qp,{onClick:()=>(e=>{d((0,c.cloneQueryToNewTab)(e,!0))})(t),tooltip:(0,w.t)("Run query in a new tab"),placement:"top",className:"pointer",children:(0,h.Y)(fe.A.PlusCircleOutlined,{iconSize:"xl",css:jp})}),p.id!==a&&(0,h.Y)(qp,{tooltip:(0,w.t)("Remove query from log"),onClick:()=>d((0,c.removeQuery)(t)),className:"pointer",children:(0,h.Y)(fe.A.Trash,{iconSize:"xl"})})]}),p})).reverse()}),[t,i,o,m,n]);return(0,h.Y)("div",{className:"QueryTable",children:(0,h.Y)(Ge.A,{columns:g,data:f,className:"table-condensed",pageSize:50})})},Yp=e=>({queryId:e.id,id:e.client_id,dbId:e.database.id,db:e.database,executedSql:e.executed_sql,errorMessage:e.error_message,queryLimit:e.limit,ctas:e.select_as_cta,limitingFactor:e.limiting_factor,progress:e.progress,rows:e.rows,schema:e.schema,sql:e.sql,sqlEditorId:e.sql_editor_id,state:e.status,tab:e.tab_name,startDttm:Number(e.start_time),endDttm:Number(e.end_time),tempTable:e.tmp_table_name||"",trackingUrl:e.tracking_url,resultsKey:e.results_key,userId:e.user.id,cached:!1,extra:{progress:null},isDataPreview:!1,user:e.user}),Qp=a.F.injectEndpoints({endpoints:e=>({editorQueries:e.query({providesTags:["EditorQueries"],query:({editorId:e,pageIndex:t=0,pageSize:i=25})=>({method:"GET",endpoint:"/api/v1/query/",urlParams:{keys:["none"],columns:["id","client_id","changed_on","database.id","database.database_name","executed_sql","error_message","limit","limiting_factor","progress","rows","select_as_cta","schema","sql","sql_editor_id","status","tab_name","user.first_name","user.id","user.last_name","start_time","end_time","tmp_table_name","tmp_schema_name","tracking_url","results_key"],order_column:"start_time",order_direction:"desc",page:t,page_size:i,filters:[{col:"sql_editor_id",opr:"eq",value:e}]},headers:{"Content-Type":"application/json"},transformResponse:({json:e})=>({...e,result:e.result.map(Yp)})}),serializeQueryArgs:({queryArgs:{editorId:e}})=>({editorId:e}),forceRefetch:({currentArg:e,previousArg:t})=>e!==t,merge:(e,t)=>{e.result.push(...t.result)}})})}),{useEditorQueriesQuery:Jp}=Qp,Xp=y.I4.div`
  height: 100%;
  .antd5-empty-image img {
    margin-right: 28px;
  }

  p {
    margin-right: 28px;
  }
`,Zp=(e,t)=>Object.values(e).filter((({sqlEditorId:e})=>String(e)===String(t))),eg=({queryEditorId:e,displayLimit:t,latestQueryId:i})=>{const[a,l]=(0,ke.Wx)({threshold:0}),[d,c]=(0,s.useState)(0),u=(0,r.d4)((({sqlLab:{queries:e}})=>e),r.bN),{currentData:p,isLoading:g,isFetching:m}=Jp({editorId:`${e}`,pageIndex:d},{skip:!(0,n.G7)(n.TO.SqllabBackendPersistence)}),f=(0,s.useMemo)((()=>p?Zp(Ie()(u,p.result.map((({id:e})=>e))),e).concat(p.result).reverse():Zp(u,e)),[u,p,e]),v=(0,$.A)((()=>{c(d+1)})),C=(null==p?void 0:p.result.length)||0,y=(null==p?void 0:p.count)||0;return(0,s.useEffect)((()=>{l&&C<y&&v()}),[l,v,C,y]),!f.length&&g?(0,h.Y)(he.EA,{active:!0}):f.length>0?(0,h.FD)(h.FK,{children:[(0,h.Y)(Kp,{columns:["state","started","duration","progress","rows","sql","results","actions"],queries:f,displayLimit:t,latestQueryId:i}),p&&C<y&&(0,h.Y)("div",{ref:a,css:o.AH`
            position: relative;
            top: -150px;
          `}),m&&(0,h.Y)(he.EA,{active:!0})]}):(0,h.Y)(Xp,{children:(0,h.Y)(M.p,{title:(0,w.t)("Run a query to display query history"),size:"medium",image:"document.svg"})})},tg=y.I4.div`
  height: 100%;
  .antd5-empty-image img {
    margin-right: 28px;
  }

  p {
    margin-right: 28px;
  }
`,ig=({latestQueryId:e,height:t,displayLimit:i,defaultQueryLimit:s})=>{const o=(0,r.d4)((({sqlLab:{databases:e}})=>e),r.bN),a=(0,r.d4)((({sqlLab:{queries:t}})=>t[e||""]),r.bN);return!a||Date.now()-a.startDttm>S.Ml?(0,h.Y)(tg,{children:(0,h.Y)(M.p,{title:(0,w.t)("Run a query to display results"),image:"document.svg"})}):!(0,n.G7)(n.TO.SqllabBackendPersistence)||"success"!==a.state||a.resultsKey||a.results?(0,h.Y)(Wp,{search:!0,queryId:a.id,height:t+8,database:o[a.dbId],displayLimit:i,defaultQueryLimit:s,showSql:!0,showSqlInline:!0}):(0,h.Y)(Ce.A,{type:"warning",message:(0,w.t)("No stored results found, you need to re-run your query")})};var sg=i(16784),rg=i(70713),og=i(71478);function ng({tooltipText:e,title:t,sql:i,triggerNode:s}){return(0,h.Y)(be.A,{modalTitle:t,triggerNode:s||(0,h.Y)(zp,{className:"fa fa-eye pull-left m-l-2",tooltip:e}),modalBody:(0,h.Y)("div",{children:(0,h.Y)(Ep.A,{language:"sql",style:Pp.A,children:i})})})}Ep.A.registerLanguage("sql",Fp.A);const ag=(0,ae.a)(),lg=["column_name","column_type","keys","comment"],dg=[{key:"refresh-table",label:(0,w.t)("Refresh table schema"),icon:(0,h.Y)("i",{"aria-hidden":!0,className:"fa fa-refresh"})},{key:"copy-select-statement",label:(0,w.t)("Copy SELECT statement"),icon:(0,h.Y)("i",{"aria-hidden":!0,className:"fa fa-clipboard m-l-2"})},{key:"show-create-view-statement",label:(0,w.t)("Show CREATE VIEW statement"),icon:(0,h.Y)("i",{"aria-hidden":!0,className:"fa fa-eye"})}],cg=y.I4.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  column-gap: ${({theme:e})=>e.gridUnit}px;
  font-size: ${({theme:e})=>e.typography.sizes.l}px;
  font-weight: ${({theme:e})=>e.typography.weights.bold};
`,ug=e=>{if(!e)return null;const{partitionQuery:t}=e;let i;if(t){const e=(0,w.t)("Copy partition query to clipboard");i=(0,h.Y)(et.A,{text:t,shouldShowText:!1,tooltipText:e,copyNode:(0,h.Y)("i",{className:"fa fa-clipboard"})})}const s=Object.entries(e.latest||[]).map((([e,t])=>`${e}=${t}`)).join("/");return(0,h.Y)(Le.A,{size:"small",children:(0,h.FD)("div",{children:[(0,h.FD)("small",{children:[(0,w.t)("latest partition:")," ",s]})," ",i]})})},hg=({dbId:e,catalog:t,schema:i,tableName:n})=>{var a,l;const d=(0,r.wA)(),[u,p,g]=(0,r.d4)((({sqlLab:{databases:t}})=>{var i,s,r;return[null==(i=t[e])?void 0:i.database_name,null==(s=t[e])?void 0:s.backend,null==(r=t[e])?void 0:r.disable_data_preview]}),r.bN),m=(0,s.useRef)(null),f=(0,s.useRef)(null),[v,C]=(0,s.useState)(),{currentData:y,isLoading:S,isFetching:b,isError:R,error:E}=(0,og.rq)({dbId:e,catalog:t,schema:null!=i?i:"",table:null!=n?n:""},{skip:!e||!i||!n}),{currentData:F,error:x}=(0,og.ii)({dbId:e,catalog:t,schema:null!=i?i:"",table:null!=n?n:""},{skip:!e||!i||!n}),D=(0,s.useMemo)((()=>{var e;return(null!=(e=null==y?void 0:y.columns.length)?e:0)>0?null==y?void 0:y.columns.map((({name:e,type:t,longType:i,keys:s,comment:r})=>({column_name:e,column_type:i||t,keys:s,comment:r}))):void 0}),[y]),A=(0,s.useMemo)((()=>null==D?void 0:D.some((({keys:e})=>Boolean(null==e?void 0:e.length)))),[D]),T=(0,s.useMemo)((()=>A?lg:lg.filter((e=>"keys"!==e))),[A]),M={dataPreviewQueryId:v,...y,...F},I=null!=(a=ag.get("sqleditor.extension.resultTable"))?a:yp,k=null!=(l=ag.get("sqleditor.extension.tablePreview"))?l:[],L=(0,s.useCallback)((s=>{if("sample"===s&&!v){const s=(0,Ae.Ak)(11);d((0,c.runTablePreviewQuery)({previewQueryId:s,dbId:e,catalog:t,schema:i,name:n,selectStar:M.selectStar},!0)),C(s)}}),[v,e,t,i,n,M.selectStar,d]),O=(0,s.useMemo)((()=>{let e=[...dg];return M.selectStar||(e=e.filter((({key:e})=>"copy-select-statement"!==e))),M.view||(e=e.filter((({key:e})=>"show-create-view-statement"!==e))),e}),[M.view,M.selectStar]);return S?(0,h.Y)(he.EA,{active:!0}):R||x?(0,h.Y)(Ce.A,{type:"warning",message:null==(N=E||x)?void 0:N.error}):D?(0,h.FD)("div",{css:o.AH`
        height: 100%;
        display: flex;
        flex-direction: column;
      `,children:[(0,h.FD)(he.BD,{separator:">",children:[(0,h.Y)(he.BD.Item,{children:p}),(0,h.Y)(he.BD.Item,{children:u}),t&&(0,h.Y)(he.BD.Item,{children:t}),i&&(0,h.Y)(he.BD.Item,{children:i}),(0,h.Y)(he.BD.Item,{children:" "})]}),(0,h.FD)("div",{style:{display:"none"},children:[(0,h.Y)(et.A,{copyNode:(0,h.Y)("button",{type:"button",ref:m,children:"invisible button"}),text:M.selectStar,shouldShowText:!1}),M.view&&(0,h.Y)(ng,{sql:M.view,tooltipText:(0,w.t)("Show CREATE VIEW statement"),title:(0,w.t)("CREATE VIEW statement"),triggerNode:(0,h.Y)("button",{type:"button",ref:f,children:"invisible button"})})]}),(0,h.FD)(cg,{children:[(0,h.Y)(fe.A.Table,{iconSize:"l"}),n,(0,h.Y)(he.rM,{overlay:(0,h.Y)(me.W1,{onClick:({key:e})=>{var t,i;"refresh-table"===e&&d(og.z7.invalidateTags([{type:"TableMetadatas",id:n}])),"copy-select-statement"===e&&(null==(t=m.current)||t.click()),"show-create-view-statement"===e&&(null==(i=f.current)||i.click())},items:O}),trigger:["click"],children:(0,h.Y)(fe.A.DownSquareOutlined,{iconSize:"m",style:{marginTop:2,marginLeft:4},"aria-label":(0,w.t)("Table actions")})})]}),b?(0,h.Y)(he.EA,{active:!0}):(0,h.FD)(h.FK,{children:[M.comment&&(0,h.Y)(sg.A,{source:M.comment}),ug(M.partitions),(0,h.Y)("div",{css:o.AH`
              flex: 1 1 auto;
            `,children:(0,h.Y)(rg.Ay,{disableWidth:!0,children:({height:t})=>(0,h.FD)(P.Ay,{fullWidth:!1,onTabClick:L,css:o.AH`
                    height: ${t}px;
                  `,children:[(0,h.Y)(P.Ay.TabPane,{tab:(0,w.t)("Columns (%s)",D.length),children:(0,h.Y)(I,{queryId:"table-columns",height:t-80,data:D,orderedColumnKeys:T})},"columns"),(null==M?void 0:M.selectStar)&&!g&&(0,h.Y)(P.Ay.TabPane,{tab:(0,w.t)("Data preview"),children:v&&(0,h.Y)(Wp,{queryId:v,visualize:!1,csv:!1,cache:!0,height:t-80-30,displayLimit:100,defaultQueryLimit:100})},"sample"),(null==M?void 0:M.indexes)&&M.indexes.length>0&&(0,h.Y)(P.Ay.TabPane,{tab:(0,w.t)("Indexes (%s)",M.indexes.length),children:M.indexes.map(((e,t)=>(0,h.Y)("pre",{className:"code",children:JSON.stringify(e,null,"  ")},t)))},"indexes"),(null==M?void 0:M.metadata)&&(0,h.Y)(P.Ay.TabPane,{tab:(0,w.t)("Metadata"),children:(0,h.Y)(I,{queryId:"table-metadata",height:t-80,data:Object.entries(M.metadata).map((([e,t])=>({name:e,value:t}))),orderedColumnKeys:["name","value"]})},"metadata"),k.map((([t,s])=>(0,h.Y)(P.Ay.TabPane,{tab:t,children:(0,h.Y)(s,{dbId:Number(e),schema:null!=i?i:"",tableName:n})},t)))]})})})]})]}):(0,h.Y)(Ce.A,{type:"warning",message:(0,w.t)("Cannot find the table (%s) metadata.",n),closable:!1});var N},pg=y.I4.div`
  width: 100%;
  height: ${e=>e.height}px;
  .ant-tabs .ant-tabs-content-holder {
    overflow: visible;
  }
  .SouthPaneTabs {
    height: 100%;
    display: flex;
    flex-direction: column;
    .scrollable {
      overflow-y: auto;
    }
  }
  .ant-tabs-tabpane {
    .scrollable {
      overflow-y: auto;
    }
  }
  .tab-content {
    .alert {
      margin-top: ${({theme:e})=>2*e.gridUnit}px;
    }

    button.fetch {
      margin-top: ${({theme:e})=>2*e.gridUnit}px;
    }
  }
`,gg=({queryEditorId:e,latestQueryId:t,height:i,displayLimit:n,defaultQueryLimit:a})=>{var l;const d=(0,r.wA)(),{offline:u,tables:p}=(0,r.d4)((({sqlLab:{offline:e,tables:t}})=>({offline:e,tables:t})),r.bN),g=null!=(l=(0,r.d4)((e=>e.sqlLab.activeSouthPaneTab)))?l:"Results",m=(0,s.useMemo)((()=>p.filter((({queryEditorId:t})=>String(e)===t))),[e,p]),f=(0,s.useMemo)((()=>Object.fromEntries(m.map((({id:e,dbId:t,catalog:i,schema:s,name:r})=>[e,[t,i,s,r].join(":")])))),[m]),v=i-130,C=(0,s.createRef)(),y=(0,s.useCallback)(((e,t)=>{if("remove"===t){const t=m.find((({dbId:t,catalog:i,schema:s,name:r})=>[t,i,s,r].join(":")===e));d((0,c.removeTables)([t]))}}),[d,m]);return u?(0,h.Y)(Te.Ay,{className:"m-r-3",type:S.sA[S.yZ.offline],children:S.W8.offline}):(0,h.Y)(pg,{className:"SouthPane",height:i,ref:C,children:(0,h.FD)(P.Ay,{type:"editable-card",activeKey:f[g]||g,className:"SouthPaneTabs",onChange:e=>{d((0,c.setActiveSouthPaneTab)(e))},id:(0,Ae.Ak)(11),fullWidth:!1,animated:!1,onEdit:y,hideAdd:!0,children:[(0,h.Y)(P.Ay.TabPane,{tab:(0,w.t)("Results"),closable:!1,children:(0,h.Y)(ig,{height:v,latestQueryId:t,displayLimit:n,defaultQueryLimit:a})},"Results"),(0,h.Y)(P.Ay.TabPane,{tab:(0,w.t)("Query history"),closable:!1,children:(0,h.Y)(eg,{queryEditorId:e,displayLimit:n,latestQueryId:t})},"History"),m.map((({id:e,dbId:t,catalog:i,schema:s,name:r})=>(0,h.Y)(P.Ay.TabPane,{tab:(0,h.FD)(h.FK,{children:[(0,h.Y)(fe.A.Table,{iconSize:"s",css:o.AH`
                    margin-bottom: 2px;
                    margin-right: 4px;
                  `}),`${s}.${decodeURIComponent(r)}`]}),children:(0,h.Y)(hg,{dbId:t,catalog:i,schema:s,tableName:r})},f[e])))]})})};var mg=i(40563),fg=i(99551);const vg=({setShowSave:e,overlayMenu:t})=>{const i=(0,y.DP)(),s=(0,y.I4)(fg.g)`
    &.ant-dropdown-button button.ant-btn.ant-btn-default {
      font-weight: ${150*i.gridUnit};
      background-color: ${i.colors.primary.light4};
      color: ${i.colors.primary.dark1};
      &:nth-of-type(2) {
        &:before,
        &:hover:before {
          border-left: 2px solid ${i.colors.primary.dark2};
        }
      }
    }
    span[name='caret-down'] {
      margin-left: ${1*i.gridUnit}px;
      color: ${i.colors.primary.dark2};
    }
  `;return t?(0,h.Y)(s,{onClick:()=>e(!0),overlay:t,icon:(0,h.Y)(fe.A.CaretDown,{iconColor:i.colors.grayscale.light5,name:"caret-down"}),trigger:["click"],children:(0,w.t)("Save")}):(0,h.Y)(de.A,{onClick:()=>e(!0),buttonStyle:"primary",children:(0,w.t)("Save")})};var Cg=i(9066);const yg=y.I4.span`
  span[role='img'] {
    display: flex;
    margin: 0;
    color: ${({theme:e})=>e.colors.grayscale.base};
    svg {
      vertical-align: -${({theme:e})=>1.25*e.gridUnit}px;
      margin: 0;
    }
  }
`,wg=({queryEditorId:e,onSave:t=()=>{},onUpdate:i,saveQueryWarning:r,database:o,columns:n})=>{const a=Fe(e,["autorun","name","description","remoteId","dbId","latestQueryId","queryLimit","catalog","schema","selectedText","sql","templateParams"]),l=(0,s.useMemo)((()=>({...a,columns:n})),[a,n]),d=ye({queryEditorId:e}),c=l.name||l.description||(0,w.t)("Undefined"),[u,p]=(0,s.useState)(l.description||""),[g,m]=(0,s.useState)(c),[f,v]=(0,s.useState)(!1),[C,y]=(0,s.useState)(!1),S=!!l.remoteId,b=!(null==o||!o.allows_virtual_table_explore),E=void 0!==(null==o?void 0:o.allows_virtual_table_explore),F=(0,h.Y)(me.W1,{children:(0,h.Y)(me.W1.Item,{onClick:()=>{d(R.PV,{}),y(!0)},children:(0,w.t)("Save dataset")})}),P=()=>{var e;return{name:g,description:u,dbId:null!=(e=l.dbId)?e:0,sql:l.sql,catalog:l.catalog,schema:l.schema,templateParams:l.templateParams,remoteId:(null==l?void 0:l.remoteId)||void 0}};(0,s.useEffect)((()=>{S||m(c)}),[c]);const x=()=>v(!1),D=()=>{d(R.AP,{}),t(P(),l.id),x()};return(0,h.FD)(yg,{className:"SaveQuery",children:[E&&(0,h.Y)(vg,{setShowSave:v,overlayMenu:b?F:null}),(0,h.Y)(ze.D,{visible:C,onHide:()=>y(!1),buttonTextOnSave:(0,w.t)("Save & Explore"),buttonTextOnOverwrite:(0,w.t)("Overwrite & Explore"),datasource:(0,Cg.l)(l)}),(0,h.Y)(le.Ay,{className:"save-query-modal",onHandledPrimaryAction:D,onHide:x,primaryButtonName:S?(0,w.t)("Save"):(0,w.t)("Save as"),width:"620px",show:f,title:(0,h.Y)("h4",{children:(0,w.t)("Save query")}),footer:(0,h.FD)(h.FK,{children:[(0,h.Y)(de.A,{onClick:x,cta:!0,children:(0,w.t)("Cancel")}),(0,h.Y)(de.A,{buttonStyle:S?void 0:"primary",onClick:D,className:"m-r-3",cta:!0,children:S?(0,w.t)("Save as new"):(0,w.t)("Save")}),S&&(0,h.Y)(de.A,{buttonStyle:"primary",onClick:()=>{i(P(),l.id),x()},className:"m-r-3",cta:!0,children:(0,w.t)("Update")})]}),children:(0,h.FD)(mg.lV,{layout:"vertical",children:[(0,h.Y)(he.fI,{children:(0,h.Y)(he.fv,{xs:24,children:(0,h.Y)(mg.eI,{label:(0,w.t)("Name"),children:(0,h.Y)(ge.pd,{type:"text",value:g,onChange:e=>{m(e.target.value)}})})})}),(0,h.Y)("br",{}),(0,h.Y)(he.fI,{children:(0,h.Y)(he.fv,{xs:24,children:(0,h.Y)(mg.eI,{label:(0,w.t)("Description"),children:(0,h.Y)(ge.fs,{rows:4,value:u,onChange:e=>{p(e.target.value)}})})})}),r&&(0,h.FD)(h.FK,{children:[(0,h.Y)("br",{}),(0,h.FD)("div",{children:[(0,h.Y)(he.fI,{children:(0,h.Y)(he.fv,{xs:24,children:(0,h.Y)("small",{children:r})})}),(0,h.Y)("br",{})]})]})]})})]})};var Sg=i(74848);function bg(e){return!("object"!=typeof e||null===e||"number"==typeof e.lastModified&&"undefined"!=typeof File&&e instanceof File||"function"==typeof e.getMonth&&"undefined"!=typeof Date&&e instanceof Date||Array.isArray(e))}function Rg(e){if(""===e)return;if(null===e)return null;if(/\.$/.test(e))return e;if(/\.0$/.test(e))return e;if(/\.\d*0$/.test(e))return e;const t=Number(e);return"number"!=typeof t||Number.isNaN(t)?e:t}const Eg="__additional_property",Fg="additionalProperties",Pg="allOf",xg="anyOf",Dg="const",Ag="dependencies",Tg="__errors",Mg="$id",Ig="items",kg="$name",Lg="oneOf",Og="properties",Ng="submitButtonOptions",Gg="$ref",Bg="__rjsf_additionalProperties",Vg="__rjsf_rootSchema",Hg="ui:widget",$g="ui:options";function Wg(e={},t={}){return Object.keys(e).filter((e=>0===e.indexOf("ui:"))).reduce(((t,i)=>{const s=e[i];return i===Hg&&bg(s)?(console.error("Setting options via ui:widget object is no longer supported, use ui:options instead"),t):i===$g&&bg(s)?{...t,...s}:{...t,[i.substring(3)]:s}}),{...t})}function _g(e,t={},i){if(!e.additionalProperties)return!1;const{expandable:s=!0}=Wg(t);return!1===s?s:void 0===e.maxProperties||!i||Object.keys(i).length<e.maxProperties}var zg=i(11331),Ug=i.n(zg);function jg(e){const t={[Tg]:[],addError(e){this[Tg].push(e)}};if(Array.isArray(e))return e.reduce(((e,t,i)=>({...e,[i]:jg(t)})),t);if(Ug()(e)){const i=e;return Object.keys(i).reduce(((e,t)=>({...e,[t]:jg(i[t])})),t)}return t}var qg=i(29132),Kg=i.n(qg);function Yg(e,t){return Kg()(e,t,((e,t)=>{if("function"==typeof e&&"function"==typeof t)return!0}))}var Qg=i(58156),Jg=i.n(Qg),Xg=i(56239);function Zg(e,t){const i=t[e];return[Ie()(t,[e]),i]}function em(e,t={},i=[]){const s=e||"";let r;if(!s.startsWith("#"))throw new Error(`Could not find a definition for ${e}.`);r=decodeURIComponent(s.substring(1));const o=Xg.get(t,r);if(void 0===o)throw new Error(`Could not find a definition for ${e}.`);const n=o[Gg];if(n){if(i.includes(n)){if(1===i.length)throw new Error(`Definition for ${e} is a circular reference`);const[t,...r]=i,o=[...r,s,t].join(" -> ");throw new Error(`Definition for ${t} contains a circular reference through ${o}`)}const[r,a]=Zg(Gg,o),l=em(a,t,[...i,s]);return Object.keys(r).length>0?{...r,...l}:l}return o}function tm(e,t={}){return em(e,t,[])}var im=i(61448),sm=i.n(im),rm=i(98023),om=i.n(rm),nm=i(23805),am=i.n(nm),lm=i(85015),dm=i.n(lm),cm=i(40860),um=i.n(cm),hm=i(6638),pm=i.n(hm);function gm(e,t,i){var s;if(e&&i){const r=Jg()(e,i);if(void 0===r)return;for(let e=0;e<t.length;e++){const o=t[e],n=Jg()(o,[Og,i],{});if("object"!==n.type&&"array"!==n.type){if(n.const===r)return e;if(null===(s=n.enum)||void 0===s?void 0:s.includes(r))return e}}}}function mm(e,t,i,s,r){if(void 0===t)return 0;const o=gm(t,i,r);if(om()(o))return o;for(let o=0;o<i.length;o++){const n=i[o];if(r&&sm()(n,[Og,r])){const i=Jg()(t,r),a=Jg()(n,[Og,r],{});if(e.isValid(a,i,s))return o}else if(n[Og]){const i={anyOf:Object.keys(n[Og]).map((e=>({required:[e]})))};let r;if(n.anyOf){const{...e}=n;e.allOf?e.allOf=e.allOf.slice():e.allOf=[],e.allOf.push(i),r=e}else r=Object.assign({},n,i);if(delete r.required,e.isValid(r,t,s))return o}else if(e.isValid(n,t,s))return o}return 0}function fm(e,t,i,s,r){return mm(e,t,i,s,r)}var vm=i(63560),Cm=i.n(vm),ym=i(69752),wm=i.n(ym),Sm=i(55364),bm=i.n(Sm),Rm=i(80795),Em=i.n(Rm),Fm=i(63375),Pm=i.n(Fm),xm=i(33978),Dm=i.n(xm);function Am(e){let t;const i=Jg()(e,"discriminator.propertyName",void 0);return dm()(i)?t=i:void 0!==i&&console.warn(`Expecting discriminator to be a string, got "${typeof i}" instead`),t}function Tm(e){return Array.isArray(e)?"array":"string"==typeof e?"string":null==e?"null":"boolean"==typeof e?"boolean":isNaN(e)?"object"==typeof e?"object":"string":"number"}var Mm=i(80299),Im=i.n(Mm);function km(e){let{type:t}=e;return!t&&e.const?Tm(e.const):!t&&e.enum?"string":t||!e.properties&&!e.additionalProperties?(Array.isArray(t)&&(t=2===t.length&&t.includes("null")?t.find((e=>"null"!==e)):t[0]),t):"object"}function Lm(e,t){const i=Object.assign({},e);return Object.keys(t).reduce(((i,s)=>{const r=e?e[s]:{},o=t[s];return e&&s in e&&bg(o)?i[s]=Lm(r,o):e&&t&&("object"===km(e)||"object"===km(t))&&"required"===s&&Array.isArray(r)&&Array.isArray(o)?i[s]=Im()(r,o):i[s]=o,i}),i)}function Om(e,t,i={},s,r){return Vm(e,t,i,s,void 0,void 0,r)[0]}function Nm(e){const t=e.reduce(((e,t)=>t.length>1?t.flatMap((t=>pm()(e.length,(i=>[...e[i]].concat(t))))):(e.forEach((e=>e.push(t[0]))),e)),[[]]);return t}function Gm(e,t,i,s,r,o,n){const a=Bm(t,i,r);return a!==t?Vm(e,a,i,o,s,r,n):[t]}function Bm(e,t,i){if(!bg(e))return e;let s=e;if(Gg in s){const{$ref:e,...r}=s;if(i.includes(e))return s;i.push(e),s={...tm(e,t),...r}}if(Og in s){const e=[],r=wm()(s[Og],((s,r,o)=>{const n=[...i];s[o]=Bm(r,t,n),e.push(n)}),{});bm()(i,Pm()(Em()(e))),s={...s,[Og]:r}}return Ig in s&&!Array.isArray(s.items)&&"boolean"!=typeof s.items&&(s={...s,items:Bm(s.items,t,i)}),Yg(e,s)?e:s}function Vm(e,t,i,s,r=!1,o=[],n){if(!bg(t))return[{}];const a=function(e,t,i,s,r,o,n){const a=Gm(e,t,i,s,r,o);return a.length>1||a[0]!==t?a:Ag in t?Hm(e,t,i,s,r,o).flatMap((t=>Vm(e,t,i,o,s,r,n))):Pg in t&&Array.isArray(t.allOf)?Nm(t.allOf.map((t=>Vm(e,t,i,o,s,r,n)))).map((e=>({...t,allOf:e}))):[t]}(e,t,i,r,o,s,n);return a.flatMap((t=>{var a;let l=t;if("if"in l)return function(e,t,i,s,r,o,n){const{if:a,then:l,else:d,...c}=t,u=e.isValid(a,o||{},i);let h=[c],p=[];if(s)l&&"boolean"!=typeof l&&(p=p.concat(Vm(e,l,i,o,s,r,n))),d&&"boolean"!=typeof d&&(p=p.concat(Vm(e,d,i,o,s,r,n)));else{const t=u?l:d;t&&"boolean"!=typeof t&&(p=p.concat(Vm(e,t,i,o,s,r,n)))}return p.length&&(h=p.map((e=>Lm(c,e)))),h.flatMap((t=>Vm(e,t,i,o,s,r,n)))}(e,l,i,r,o,s,n);if(Pg in l){if(r){const{allOf:e,...t}=l;return[...e,t]}try{const e=[],t=[];null===(a=l.allOf)||void 0===a||a.forEach((i=>{"object"==typeof i&&i.contains?e.push(i):t.push(i)})),e.length&&(l={...l,allOf:t}),l=n?n(l):Dm()(l,{deep:!1}),e.length&&(l.allOf=e)}catch(e){console.warn("could not merge subschemas in allOf:\n",e);const{allOf:t,...i}=l;return i}}return Fg in l&&!1!==l.additionalProperties?function(e,t,i,s,r){const o={...t,properties:{...t.properties}},n=s&&bg(s)?s:{};return Object.keys(n).forEach((t=>{if(t in o.properties)return;let s={};s="boolean"!=typeof o.additionalProperties?Gg in o.additionalProperties?Om(e,{$ref:Jg()(o.additionalProperties,[Gg])},i,n,r):"type"in o.additionalProperties?{...o.additionalProperties}:xg in o.additionalProperties||Lg in o.additionalProperties?{type:"object",...o.additionalProperties}:{type:Tm(Jg()(n,[t]))}:{type:Tm(Jg()(n,[t]))},o.properties[t]=s,Cm()(o.properties,[t,Eg],!0)})),o}(e,l,i,s,n):l}))}function Hm(e,t,i,s,r,o,n){const{dependencies:a,...l}=t,d=function(e,t,i,s,r){let o;const{oneOf:n,anyOf:a,...l}=t;if(Array.isArray(n)?o=n:Array.isArray(a)&&(o=a),o){const n=void 0===r&&s?{}:r,a=Am(t);o=o.map((e=>Bm(e,i,[])));const d=fm(e,n,o,i,a);if(s)return o.map((e=>Lm(l,e)));t=Lm(l,o[d])}return[t]}(e,l,i,s,o);return d.flatMap((t=>$m(e,a,t,i,s,r,o,n)))}function $m(e,t,i,s,r,o,n,a){let l=[i];for(const d in t){if(!r&&void 0===Jg()(n,[d]))continue;if(i.properties&&!(d in i.properties))continue;const[c,u]=Zg(d,t);return Array.isArray(u)?l[0]=Wm(i,u):bg(u)&&(l=_m(e,i,s,d,u,r,o,n,a)),l.flatMap((t=>$m(e,c,t,s,r,o,n,a)))}return l}function Wm(e,t){if(!t)return e;const i=Array.isArray(e.required)?Array.from(new Set([...e.required,...t])):t;return{...e,required:i}}function _m(e,t,i,s,r,o,n,a,l){return Vm(e,r,i,a,o,n,l).flatMap((r=>{const{oneOf:d,...c}=r;return t=Lm(t,c),void 0===d?t:Nm(d.map((t=>"boolean"!=typeof t&&Gg in t?Gm(e,t,i,o,n,a):[t]))).flatMap((r=>function(e,t,i,s,r,o,n,a,l){const d=r.filter((t=>{if("boolean"==typeof t||!t||!t.properties)return!1;const{[s]:r}=t.properties;if(r){const t={type:"object",properties:{[s]:r}};return e.isValid(t,a,i)||o}return!1}));return o||1===d.length?d.flatMap((r=>{const d=r,[c]=Zg(s,d.properties),u={...d,properties:c};return Vm(e,u,i,a,o,n,l).map((e=>Lm(t,e)))})):(console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),[t])}(e,t,i,s,r,o,n,a,l)))}))}const zm={type:"object",$id:"_$junk_option_schema_id$_",properties:{__not_really_there__:{type:"number"}}};function Um(e,t,i,s,r){let o=0;return i&&(am()(i.properties)?o+=um()(i.properties,((i,o,n)=>{const a=Jg()(s,n);if("boolean"==typeof o)return i;if(sm()(o,Gg)){const s=Om(e,o,t,a,r);return i+Um(e,t,s,a||{},r)}if((sm()(o,Lg)||sm()(o,xg))&&a){const s=sm()(o,Lg)?Lg:xg,n=Am(o);return i+jm(e,t,a,Jg()(o,s),-1,n,r)}if("object"===o.type)return am()(a)&&(i+=1),i+Um(e,t,o,a,r);if(o.type===Tm(a)){let e=i+1;return o.default?e+=a===o.default?1:-1:o.const&&(e+=a===o.const?1:-1),e}return i}),0):dm()(i.type)&&i.type===Tm(s)&&(o+=1)),o}function jm(e,t,i,s,r=-1,o,n){const a=s.map((e=>Bm(e,t,[]))),l=gm(i,s,o);if(om()(l))return l;const d=a.reduce(((s,r,n)=>(1===fm(e,i,[zm,r],t,o)&&s.push(n),s)),[]);if(1===d.length)return d[0];d.length||pm()(a.length,(e=>d.push(e)));const c=new Set,{bestIndex:u}=d.reduce(((s,r)=>{const{bestScore:o}=s,l=a[r],d=Um(e,t,l,i,n);return c.add(d),d>o?{bestIndex:r,bestScore:d}:s}),{bestIndex:r,bestScore:0});return 1===c.size&&r>=0?r:u}function qm(e){return Array.isArray(e.items)&&e.items.length>0&&e.items.every((e=>bg(e)))}var Km=i(69843),Ym=i.n(Km);function Qm(e,t,i=!1,s=!1,r=!1){if(Array.isArray(t)){const o=Array.isArray(e)?e:[],n=r?t:o,a=(r?o:t).map(((e,a)=>n[a]?Qm(o[a],t[a],i,s,r):e));return(i||r)&&a.length<n.length&&a.push(...n.slice(a.length)),a}if(bg(t)){const o=Object.assign({},e);return Object.keys(t).reduce(((o,n)=>{const a=Jg()(t,n),l=bg(e)&&n in e,d=n in t;return o[n]=Qm(e?Jg()(e,n):{},a,i,s,r&&(l||!d)),o}),o)}return s&&(!Ym()(e)&&Ym()(t)||"number"==typeof t&&isNaN(t))||r&&!Ym()(t)?e:t}function Jm(e,t,i=!1){return Object.keys(t).reduce(((s,r)=>{const o=e?e[r]:{},n=t[r];if(e&&r in e&&bg(n))s[r]=Jm(o,n,i);else if(i&&Array.isArray(o)&&Array.isArray(n)){let e=n;"preventDuplicates"===i&&(e=n.reduce(((e,t)=>(o.includes(t)||e.push(t),e)),[])),s[r]=o.concat(e)}else s[r]=n;return s}),Object.assign({},e))}function Xm(e){return Array.isArray(e.enum)&&1===e.enum.length||Dg in e}function Zm(e,t,i={},s){const r=Om(e,t,i,void 0,s),o=r.oneOf||r.anyOf;return!!Array.isArray(r.enum)||!!Array.isArray(o)&&o.every((e=>"boolean"!=typeof e&&Xm(e)))}function ef(e,t,i,s){return!(!t.uniqueItems||!t.items||"boolean"==typeof t.items)&&Zm(e,t.items,i,s)}function tf(e){const t=e[Dg],i=km(e);return bg(t)&&dm()(null==t?void 0:t.$data)&&"object"!==i&&"array"!==i}function sf(e,t){const i=e;if(e.enum){let s;if(t){const{enumNames:e}=Wg(t);s=e}return!s&&i.enumNames&&(s=i.enumNames),e.enum.map(((e,t)=>({label:(null==s?void 0:s[t])||String(e),value:e})))}let s,r;return e.anyOf?(s=e.anyOf,r=null==t?void 0:t.anyOf):e.oneOf&&(s=e.oneOf,r=null==t?void 0:t.oneOf),s&&s.map(((e,t)=>{const{title:i}=Wg(null==r?void 0:r[t]),s=e,o=function(e){if("enum"in e&&Array.isArray(e.enum)&&1===e.enum.length)return e.enum[0];if(Dg in e)return e.const;throw new Error("schema cannot be inferred as a constant")}(s);return{schema:s,label:i||s.title||String(o),value:o}}))}const rf=["string","number","integer","boolean","null"];var of;function nf(e,t=of.Ignore,i=-1){if(i>=0){if(Array.isArray(e.items)&&i<e.items.length){const t=e.items[i];if("boolean"!=typeof t)return t}}else if(e.items&&!Array.isArray(e.items)&&"boolean"!=typeof e.items)return e.items;return t!==of.Ignore&&bg(e.additionalItems)?e.additionalItems:{}}function af(e,t,i,s,r,o=[],n={},a=!1){const{emptyObjectFields:l="populateAllDefaults"}=n;if(s||a)e[t]=i;else if("skipDefaults"!==l){const s=void 0===r?o.includes(t):r;bg(i)?"skipEmptyDefaults"===l?B()(i)||(e[t]=i):B()(i)&&!o.includes(t)||!s&&"populateRequiredDefaults"===l||(e[t]=i):void 0!==i&&("populateAllDefaults"===l||"skipEmptyDefaults"===l||s&&o.includes(t))&&(e[t]=i)}}function lf(e,t,i={}){const{parentDefaults:s,rawFormData:r,rootSchema:o={},includeUndefinedValues:n=!1,_recurseList:a=[],experimental_defaultFormStateBehavior:l,experimental_customMergeAllOf:d,required:c,shouldMergeDefaultsIntoFormData:u=!1}=i,h=bg(r)?r:{},p=bg(t)?t:{};let g=s,m=null,f=l,v=a;if(p[Dg]&&"never"!==(null==l?void 0:l.constAsDefaults)&&!tf(p))g=p[Dg];else if(bg(g)&&bg(p.default))g=Jm(g,p.default);else if("default"in p)g=p.default;else if(Gg in p){const e=p[Gg];a.includes(e)||(v=a.concat(e),m=tm(e,o))}else if(Ag in p){const t={...df(e,p,i,g),...h};m=Hm(e,p,o,!1,[],t,d)[0]}else if(qm(p))g=p.items.map(((t,i)=>lf(e,t,{rootSchema:o,includeUndefinedValues:n,_recurseList:a,experimental_defaultFormStateBehavior:l,experimental_customMergeAllOf:d,parentDefaults:Array.isArray(s)?s[i]:void 0,rawFormData:h,required:c,shouldMergeDefaultsIntoFormData:u})));else if(Lg in p){const{oneOf:t,...i}=p;if(0===t.length)return;const s=Am(p),{type:n="null"}=i;!Array.isArray(n)&&rf.includes(n)&&"skipOneOf"===(null==f?void 0:f.constAsDefaults)&&(f={...f,constAsDefaults:"never"}),m=t[jm(e,o,r,t,0,s,d)],m=Lm(i,m)}else if(xg in p){const{anyOf:t,...i}=p;if(0===t.length)return;const s=Am(p);m=t[jm(e,o,r,t,0,s,d)],m=Lm(i,m)}if(m)return lf(e,m,{rootSchema:o,includeUndefinedValues:n,_recurseList:v,experimental_defaultFormStateBehavior:f,experimental_customMergeAllOf:d,parentDefaults:g,rawFormData:h,required:c,shouldMergeDefaultsIntoFormData:u});void 0===g&&(g=p.default);const C=df(e,p,i,g);let y=null!=C?C:g;if(u){const{arrayMinItems:t={}}=l||{},{mergeExtraDefaults:i}=t,s=function(e,t,i,s,r){const o=!Xm(t)&&Zm(e,t,i);let n=s;if(o){const e=sf(t);n=(null==e?void 0:e.some((e=>Yg(e.value,s))))?s:void 0}return t[Dg]&&"always"===(null==r?void 0:r.constAsDefaults)&&(n=t.const),n}(e,p,o,r,l);bg(r)||(y=Qm(y,s,i,!0))}return y}function df(e,t,i={},s){switch(km(t)){case"object":return function(e,t,{rawFormData:i,rootSchema:s={},includeUndefinedValues:r=!1,_recurseList:o=[],experimental_defaultFormStateBehavior:n,experimental_customMergeAllOf:a,required:l,shouldMergeDefaultsIntoFormData:d}={},c){{const u=bg(i)?i:{},h=t,p="populateDefaults"===(null==n?void 0:n.allOf)&&Pg in h?Om(e,h,s,u,a):h,g=p[Dg],m=Object.keys(p.properties||{}).reduce(((t,i)=>{var h;const m=Jg()(p,[Og,i]),f=bg(g)&&void 0!==g[i],v=(bg(m)&&Dg in m||f)&&"never"!==(null==n?void 0:n.constAsDefaults)&&!tf(m);return af(t,i,lf(e,m,{rootSchema:s,_recurseList:o,experimental_defaultFormStateBehavior:n,experimental_customMergeAllOf:a,includeUndefinedValues:!0===r,parentDefaults:Jg()(c,[i]),rawFormData:Jg()(u,[i]),required:null===(h=p.required)||void 0===h?void 0:h.includes(i),shouldMergeDefaultsIntoFormData:d}),r,l,p.required,n,v),t}),{});if(p.additionalProperties){const t=bg(p.additionalProperties)?p.additionalProperties:{},i=new Set;bg(c)&&Object.keys(c).filter((e=>!p.properties||!p.properties[e])).forEach((e=>i.add(e)));const h=[];Object.keys(u).filter((e=>!p.properties||!p.properties[e])).forEach((e=>{i.add(e),h.push(e)})),i.forEach((i=>{var g;const f=lf(e,t,{rootSchema:s,_recurseList:o,experimental_defaultFormStateBehavior:n,experimental_customMergeAllOf:a,includeUndefinedValues:!0===r,parentDefaults:Jg()(c,[i]),rawFormData:Jg()(u,[i]),required:null===(g=p.required)||void 0===g?void 0:g.includes(i),shouldMergeDefaultsIntoFormData:d});af(m,i,f,r,l,h)}))}return m}}(e,t,i,s);case"array":return function(e,t,{rawFormData:i,rootSchema:s={},_recurseList:r=[],experimental_defaultFormStateBehavior:o,experimental_customMergeAllOf:n,required:a,shouldMergeDefaultsIntoFormData:l}={},d){var c,u;const h=t,p=null!==(c=null==o?void 0:o.arrayMinItems)&&void 0!==c?c:{},{populate:g,mergeExtraDefaults:m}=p,f="never"===g,v="requiredOnly"===g,C="all"===g||!f&&!v,y=null!==(u=null==p?void 0:p.computeSkipPopulate)&&void 0!==u?u:()=>!1,w="skipEmptyDefaults"===(null==o?void 0:o.emptyObjectFields)?void 0:[];if(Array.isArray(d)&&(d=d.map(((t,i)=>{const d=nf(h,of.Fallback,i);return lf(e,d,{rootSchema:s,_recurseList:r,experimental_defaultFormStateBehavior:o,experimental_customMergeAllOf:n,parentDefaults:t,required:a,shouldMergeDefaultsIntoFormData:l})}))),Array.isArray(i)){const t=nf(h);if(f)d=i;else{const c=i.map(((i,c)=>lf(e,t,{rootSchema:s,_recurseList:r,experimental_defaultFormStateBehavior:o,experimental_customMergeAllOf:n,rawFormData:i,parentDefaults:Jg()(d,[c]),required:a,shouldMergeDefaultsIntoFormData:l})));d=Qm(d,c,(v&&a||C)&&m)}}if(!1===(bg(h)&&Dg in h&&"never"!==(null==o?void 0:o.constAsDefaults))){if(f)return null!=d?d:w;if(v&&!a)return d||void 0}const S=Array.isArray(d)?d.length:0;if(!h.minItems||ef(e,h,s,n)||y(e,h,s)||h.minItems<=S)return d||w;const b=d||[],R=nf(h,of.Invert),E=R.default,F=new Array(h.minItems-S).fill(lf(e,R,{parentDefaults:E,rootSchema:s,_recurseList:r,experimental_defaultFormStateBehavior:o,experimental_customMergeAllOf:n,required:a,shouldMergeDefaultsIntoFormData:l}));return b.concat(F)}(e,t,i,s)}}function cf(e,t,i,s,r=!1,o,n){if(!bg(t))throw new Error("Invalid schema: "+t);const a=lf(e,Om(e,t,s,i,n),{rootSchema:s,includeUndefinedValues:r,experimental_defaultFormStateBehavior:o,experimental_customMergeAllOf:n,rawFormData:i,shouldMergeDefaultsIntoFormData:!0});if(bg(i)||Array.isArray(i)){const{mergeDefaultsIntoFormData:e}=o||{};return Qm(a,i,!0,"useDefaultIfFormDataUndefined"===e,!0)}return a}function uf(e={}){return"widget"in Wg(e)&&"hidden"!==Wg(e).widget}function hf(e,t,i={},s,r){if("files"===i[Hg])return!0;if(t.items){const i=Om(e,t.items,s,void 0,r);return"string"===i.type&&"data-url"===i.format}return!1}!function(e){e[e.Ignore=0]="Ignore",e[e.Invert=1]="Invert",e[e.Fallback=2]="Fallback"}(of||(of={}));const pf=Symbol("no Value");function gf(e,t,i,s,r={},o){let n;if(sm()(i,Og)){const a={};if(sm()(s,Og)){const e=Jg()(s,Og,{});Object.keys(e).forEach((e=>{sm()(r,e)&&(a[e]=void 0)}))}const l=Object.keys(Jg()(i,Og,{})),d={};l.forEach((n=>{const l=Jg()(r,n);let c=Jg()(s,[Og,n],{}),u=Jg()(i,[Og,n],{});sm()(c,Gg)&&(c=Om(e,c,t,l,o)),sm()(u,Gg)&&(u=Om(e,u,t,l,o));const h=Jg()(c,"type"),p=Jg()(u,"type");if(!h||h===p)if(sm()(a,n)&&delete a[n],"object"===p||"array"===p&&Array.isArray(l)){const i=gf(e,t,u,c,l,o);void 0===i&&"array"!==p||(d[n]=i)}else{const e=Jg()(u,"default",pf),t=Jg()(c,"default",pf);e!==pf&&e!==l&&(t===l?a[n]=e:!0===Jg()(u,"readOnly")&&(a[n]=void 0));const i=Jg()(u,"const",pf),s=Jg()(c,"const",pf);i!==pf&&i!==l&&(a[n]=s===l?i:void 0)}})),n={..."string"==typeof r||Array.isArray(r)?void 0:r,...a,...d}}else if("array"===Jg()(s,"type")&&"array"===Jg()(i,"type")&&Array.isArray(r)){let a=Jg()(s,"items"),l=Jg()(i,"items");if("object"!=typeof a||"object"!=typeof l||Array.isArray(a)||Array.isArray(l))"boolean"==typeof a&&"boolean"==typeof l&&a===l&&(n=r);else{sm()(a,Gg)&&(a=Om(e,a,t,r,o)),sm()(l,Gg)&&(l=Om(e,l,t,r,o));const s=Jg()(a,"type"),d=Jg()(l,"type");if(!s||s===d){const s=Jg()(i,"maxItems",-1);n="object"===d?r.reduce(((i,r)=>{const n=gf(e,t,l,a,r,o);return void 0!==n&&(s<0||i.length<s)&&i.push(n),i}),[]):s>0&&r.length>s?r.slice(0,s):r}}}return n}function mf(e,t,i,s,r,o,n,a=[],l){if(Gg in t||Ag in t||Pg in t){const d=Om(e,t,o,n,l);if(-1===a.findIndex((e=>Yg(e,d))))return mf(e,d,i,s,r,o,n,a.concat(d),l)}if(Ig in t&&!Jg()(t,[Ig,Gg]))return mf(e,Jg()(t,Ig),i,s,r,o,n,a,l);const d={$id:r||i};if("object"===km(t)&&Og in t)for(const r in t.properties){const c=Jg()(t,[Og,r]),u=d[Mg]+s+r;d[r]=mf(e,bg(c)?c:{},i,s,u,o,Jg()(n,[r]),a,l)}return d}function ff(e,t,i,s,r,o="root",n="_",a){return mf(e,t,o,n,i,s,r,void 0,a)}function vf(e,t,i,s,r,o=[],n){if(Gg in t||Ag in t||Pg in t){const a=Om(e,t,s,r,n);if(-1===o.findIndex((e=>Yg(e,a))))return vf(e,a,i,s,r,o.concat(a),n)}let a={[kg]:i.replace(/^\./,"")};if(Lg in t||xg in t){const l=Lg in t?t.oneOf:t.anyOf,d=Am(t),c=l[jm(e,s,r,l,0,d,n)];a={...a,...vf(e,c,i,s,r,o,n)}}if(Fg in t&&!1!==t[Fg]&&Cm()(a,Bg,!0),Ig in t&&Array.isArray(r)){const{items:l,additionalItems:d}=t;Array.isArray(l)?r.forEach(((t,r)=>{l[r]?a[r]=vf(e,l[r],`${i}.${r}`,s,t,o,n):d?a[r]=vf(e,d,`${i}.${r}`,s,t,o,n):console.warn(`Unable to generate path schema for "${i}.${r}". No schema defined for it`)})):r.forEach(((t,r)=>{a[r]=vf(e,l,`${i}.${r}`,s,t,o,n)}))}else if(Og in t)for(const l in t.properties){const d=Jg()(t,[Og,l]);a[l]=vf(e,d,`${i}.${l}`,s,Jg()(r,[l]),o,n)}return a}function Cf(e,t,i="",s,r,o){return vf(e,t,i,s,r,void 0,o)}class yf{constructor(e,t,i,s){this.rootSchema=t,this.validator=e,this.experimental_defaultFormStateBehavior=i,this.experimental_customMergeAllOf=s}getValidator(){return this.validator}doesSchemaUtilsDiffer(e,t,i={},s){return!(!e||!t||this.validator===e&&Yg(this.rootSchema,t)&&Yg(this.experimental_defaultFormStateBehavior,i)&&this.experimental_customMergeAllOf===s)}getDefaultFormState(e,t,i=!1){return cf(this.validator,e,t,this.rootSchema,i,this.experimental_defaultFormStateBehavior,this.experimental_customMergeAllOf)}getDisplayLabel(e,t,i){return function(e,t,i={},s,r,o){const n=Wg(i,r),{label:a=!0}=n;let l=!!a;const d=km(t);return"array"===d&&(l=ef(e,t,s,o)||hf(e,t,i,s,o)||uf(i)),"object"===d&&(l=!1),"boolean"!==d||i[Hg]||(l=!1),i["ui:field"]&&(l=!1),l}(this.validator,e,t,this.rootSchema,i,this.experimental_customMergeAllOf)}getClosestMatchingOption(e,t,i,s){return jm(this.validator,this.rootSchema,e,t,i,s,this.experimental_customMergeAllOf)}getFirstMatchingOption(e,t,i){return fm(this.validator,e,t,this.rootSchema,i)}getMatchingOption(e,t,i){return mm(this.validator,e,t,this.rootSchema,i)}isFilesArray(e,t){return hf(this.validator,e,t,this.rootSchema,this.experimental_customMergeAllOf)}isMultiSelect(e){return ef(this.validator,e,this.rootSchema,this.experimental_customMergeAllOf)}isSelect(e){return Zm(this.validator,e,this.rootSchema,this.experimental_customMergeAllOf)}mergeValidationData(e,t){return function(e,t,i){if(!i)return t;const{errors:s,errorSchema:r}=t;let o=e.toErrorList(i),n=i;return B()(r)||(n=Jm(r,i,!0),o=[...s].concat(o)),{errorSchema:n,errors:o}}(this.validator,e,t)}retrieveSchema(e,t){return Om(this.validator,e,this.rootSchema,t,this.experimental_customMergeAllOf)}sanitizeDataForNewSchema(e,t,i){return gf(this.validator,this.rootSchema,e,t,i,this.experimental_customMergeAllOf)}toIdSchema(e,t,i,s="root",r="_"){return ff(this.validator,e,t,this.rootSchema,i,s,r,this.experimental_customMergeAllOf)}toPathSchema(e,t,i){return Cf(this.validator,e,t,this.rootSchema,i,this.experimental_customMergeAllOf)}}function wf(e,t){let i=String(e);for(;i.length<t;)i="0"+i;return i}function Sf(e,t){if(e<=0&&t<=0)e=(new Date).getFullYear()+e,t=(new Date).getFullYear()+t;else if(e<0||t<0)throw new Error(`Both start (${e}) and stop (${t}) must both be <= 0 or > 0, got one of each`);if(e>t)return Sf(t,e).reverse();const i=[];for(let s=e;s<=t;s++)i.push({value:s,label:wf(s,2)});return i}function bf(e,t){return function(e,t){let i=e;if(Array.isArray(t)){const e=i.split(/(%\d)/);t.forEach(((t,i)=>{const s=e.findIndex((e=>e===`%${i+1}`));s>=0&&(e[s]=t)})),i=e.join("")}return i}(e,t)}function Rf(e,t=[],i){if(Array.isArray(e))return e.map((e=>Rf(e,t))).filter((e=>e!==i));const s=""===e||null===e?-1:Number(e),r=t[s];return r?r.value:i}function Ef(e,t){return Array.isArray(t)?t.some((t=>Yg(t,e))):Yg(t,e)}var Ff=i(88055),Pf=i.n(Ff),xf=i(95632),Df=i.n(xf);class Af{constructor(e){this.errorSchema={},this.resetAllErrors(e)}get ErrorSchema(){return this.errorSchema}getOrCreateErrorBlock(e){let t=Array.isArray(e)&&e.length>0||"string"==typeof e?Jg()(this.errorSchema,e):this.errorSchema;return!t&&e&&(t={},Df()(this.errorSchema,e,t,Object)),t}resetAllErrors(e){return this.errorSchema=e?Pf()(e):{},this}addErrors(e,t){const i=this.getOrCreateErrorBlock(t);let s=Jg()(i,Tg);return Array.isArray(s)||(s=[],i[Tg]=s),Array.isArray(e)?Cm()(i,Tg,[...new Set([...s,...e])]):Cm()(i,Tg,[...new Set([...s,e])]),this}setErrors(e,t){const i=this.getOrCreateErrorBlock(t),s=Array.isArray(e)?[...new Set([...e])]:[e];return Cm()(i,Tg,s),this}clearErrors(e){const t=this.getOrCreateErrorBlock(e);return Cm()(t,Tg,[]),this}}function Tf(e,t,i=[1900,(new Date).getFullYear()+2],s="YMD"){const{day:r,month:o,year:n,hour:a,minute:l,second:d}=e,c={type:"day",range:[1,31],value:r},u={type:"month",range:[1,12],value:o},h={type:"year",range:i,value:n},p=[];switch(s){case"MDY":p.push(u,c,h);break;case"DMY":p.push(c,u,h);break;default:p.push(h,u,c)}return t&&p.push({type:"hour",range:[0,23],value:a},{type:"minute",range:[0,59],value:l},{type:"second",range:[0,59],value:d}),p}function Mf(e){const t={};return e.multipleOf&&(t.step=e.multipleOf),(e.minimum||0===e.minimum)&&(t.min=e.minimum),(e.maximum||0===e.maximum)&&(t.max=e.maximum),t}function If(e,t,i={},s=!0){const r={type:t||"text",...Mf(e)};return i.inputType?r.type=i.inputType:t||("number"===e.type?(r.type="number",s&&void 0===r.step&&(r.step="any")):"integer"===e.type&&(r.type="number",void 0===r.step&&(r.step=1))),i.autocomplete&&(r.autoComplete=i.autocomplete),r}const kf={props:{disabled:!1},submitText:"Submit",norender:!1};function Lf(e,t,i={}){const{templates:s}=t;return"ButtonTemplates"===e?s[e]:i[e]||s[e]}var Of=i(44363);const Nf={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",time:"TimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function Gf(e,t,i={}){const r=km(e);if("function"==typeof t||t&&Of.isForwardRef((0,s.createElement)(t))||Of.isMemo(t))return function(e){let t=Jg()(e,"MergedWidget");if(!t){const i=e.defaultProps&&e.defaultProps.options||{};t=({options:t,...s})=>(0,Sg.jsx)(e,{options:{...i,...t},...s}),Cm()(e,"MergedWidget",t)}return t}(t);if("string"!=typeof t)throw new Error("Unsupported widget definition: "+typeof t);if(t in i)return Gf(e,i[t],i);if("string"==typeof r){if(!(r in Nf))throw new Error(`No widget for type '${r}'`);if(t in Nf[r])return Gf(e,i[Nf[r][t]],i)}throw new Error(`No widget '${t}' for type '${r}'`)}function Bf(e,t){return`${dm()(e)?e:e[Mg]}__${t}`}function Vf(e){return Bf(e,"description")}function Hf(e){return Bf(e,"error")}function $f(e){return Bf(e,"examples")}function Wf(e){return Bf(e,"help")}function _f(e){return Bf(e,"title")}function zf(e,t=!1){const i=t?` ${$f(e)}`:"";return`${Hf(e)} ${Vf(e)} ${Wf(e)}${i}`}function Uf(e,t){return`${e}-${t}`}function jf(e,t,i){return t?i:e}function qf(e,t=!0){if(!e)return{year:-1,month:-1,day:-1,hour:t?-1:0,minute:t?-1:0,second:t?-1:0};const i=new Date(e);if(Number.isNaN(i.getTime()))throw new Error("Unable to parse date "+e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:t?i.getUTCHours():0,minute:t?i.getUTCMinutes():0,second:t?i.getUTCSeconds():0}}function Kf(e){if(e.const)return!0;if(e.enum&&1===e.enum.length&&!0===e.enum[0])return!0;if(e.anyOf&&1===e.anyOf.length)return Kf(e.anyOf[0]);if(e.oneOf&&1===e.oneOf.length)return Kf(e.oneOf[0]);if(e.allOf){const t=e=>Kf(e);return e.allOf.some(t)}return!1}function Yf(e,t=!0){const{year:i,month:s,day:r,hour:o=0,minute:n=0,second:a=0}=e,l=Date.UTC(i,s-1,r,o,n,a),d=new Date(l).toJSON();return t?d:d.slice(0,10)}function Qf(e,t=[]){if(!e)return[];let i=[];return Tg in e&&(i=i.concat(e[Tg].map((e=>{const i=`.${t.join(".")}`;return{property:i,message:e,stack:`${i} ${e}`}})))),Object.keys(e).reduce(((i,s)=>{if(s!==Tg){const r=e[s];Ug()(r)&&(i=i.concat(Qf(r,[...t,s])))}return i}),i)}var Jf=i(42072),Xf=i.n(Jf);function Zf(e){return Object.keys(e).reduce(((t,i)=>{if("addError"===i)return t;{const s=e[i];return Ug()(s)?{...t,[i]:Zf(s)}:{...t,[i]:s}}}),{})}function ev(e){if(!e)return"";const t=new Date(e);return`${wf(t.getFullYear(),4)}-${wf(t.getMonth()+1,2)}-${wf(t.getDate(),2)}T${wf(t.getHours(),2)}:${wf(t.getMinutes(),2)}:${wf(t.getSeconds(),2)}.${wf(t.getMilliseconds(),3)}`}function tv(e,t){if(!t)return e;const{errors:i,errorSchema:s}=e;let r=Qf(t),o=t;return B()(s)||(o=Jm(s,t,!0),r=[...i].concat(r)),{errorSchema:o,errors:r}}function iv(e){return Array.isArray(e)?function(e){for(let t=0;t<e.length;t++)e[t]=iv(e[t]);return e}([...e]):am()(e)?function(e){for(const t in e){const i=e,s=i[t];t===Gg&&"string"==typeof s&&s.startsWith("#")?i[t]=Vg+s:i[t]=iv(s)}return e}({...e}):e}var sv,rv=i(95950),ov=i.n(rv),nv=i(71086),av=i.n(nv),lv=i(66245),dv=i.n(lv);!function(e){e.ArrayItemTitle="Item",e.MissingItems="Missing items definition",e.YesLabel="Yes",e.NoLabel="No",e.CloseLabel="Close",e.ErrorsLabel="Errors",e.NewStringDefault="New Value",e.AddButton="Add",e.AddItemButton="Add Item",e.CopyButton="Copy",e.MoveDownButton="Move down",e.MoveUpButton="Move up",e.RemoveButton="Remove",e.NowLabel="Now",e.ClearLabel="Clear",e.AriaDateLabel="Select a date",e.PreviewLabel="Preview",e.DecrementAriaLabel="Decrease value by 1",e.IncrementAriaLabel="Increase value by 1",e.UnknownFieldType="Unknown field type %1",e.OptionPrefix="Option %1",e.TitleOptionPrefix="%1 option %2",e.KeyLabel="%1 Key",e.InvalidObjectField='Invalid "%1" object field configuration: _%2_.',e.UnsupportedField="Unsupported field schema.",e.UnsupportedFieldWithId="Unsupported field schema for field `%1`.",e.UnsupportedFieldWithReason="Unsupported field schema: _%1_.",e.UnsupportedFieldWithIdAndReason="Unsupported field schema for field `%1`: _%2_.",e.FilesInfo="**%1** (%2, %3 bytes)"}(sv||(sv={}));var cv=i(39754),uv=i.n(cv);function hv(){return((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),""))()}function pv(e){return Array.isArray(e)?e.map((e=>({key:hv(),item:e}))):[]}function gv(e){return Array.isArray(e)?e.map((e=>e.item)):[]}class mv extends s.Component{constructor(e){super(e),this._getNewFormDataRow=()=>{const{schema:e,registry:t}=this.props,{schemaUtils:i}=t;let s=e.items;return qm(e)&&function(e){return!0===e.additionalItems&&console.warn("additionalItems=true is currently not supported"),bg(e.additionalItems)}(e)&&(s=e.additionalItems),i.getDefaultFormState(s)},this.onAddClick=e=>{this._handleAddClick(e)},this.onAddIndexClick=e=>t=>{this._handleAddClick(t,e)},this.onCopyIndexClick=e=>t=>{t&&t.preventDefault();const{onChange:i,errorSchema:s}=this.props,{keyedFormData:r}=this.state;let o;if(s){o={};for(const t in s){const i=parseInt(t);i<=e?Cm()(o,[i],s[t]):i>e&&Cm()(o,[i+1],s[t])}}const n={key:hv(),item:Pf()(r[e].item)},a=[...r];void 0!==e?a.splice(e+1,0,n):a.push(n),this.setState({keyedFormData:a,updatedKeyedFormData:!0},(()=>i(gv(a),o)))},this.onDropIndexClick=e=>t=>{t&&t.preventDefault();const{onChange:i,errorSchema:s}=this.props,{keyedFormData:r}=this.state;let o;if(s){o={};for(const t in s){const i=parseInt(t);i<e?Cm()(o,[i],s[t]):i>e&&Cm()(o,[i-1],s[t])}}const n=r.filter(((t,i)=>i!==e));this.setState({keyedFormData:n,updatedKeyedFormData:!0},(()=>i(gv(n),o)))},this.onReorderClick=(e,t)=>i=>{i&&(i.preventDefault(),i.currentTarget.blur());const{onChange:s,errorSchema:r}=this.props;let o;if(r){o={};for(const i in r){const s=parseInt(i);s==e?Cm()(o,[t],r[e]):s==t?Cm()(o,[e],r[t]):Cm()(o,[i],r[s])}}const{keyedFormData:n}=this.state,a=function(){const i=n.slice();return i.splice(e,1),i.splice(t,0,n[e]),i}();this.setState({keyedFormData:a},(()=>s(gv(a),o)))},this.onChangeForIndex=e=>(t,i,s)=>{const{formData:r,onChange:o,errorSchema:n}=this.props,a=(Array.isArray(r)?r:[]).map(((i,s)=>e===s?void 0===t?null:t:i));o(a,n&&n&&{...n,[e]:i},s)},this.onSelectChange=e=>{const{onChange:t,idSchema:i}=this.props;t(e,void 0,i&&i.$id)};const{formData:t=[]}=e,i=pv(t);this.state={keyedFormData:i,updatedKeyedFormData:!1}}static getDerivedStateFromProps(e,t){if(t.updatedKeyedFormData)return{updatedKeyedFormData:!1};const i=Array.isArray(e.formData)?e.formData:[],s=t.keyedFormData||[];return{keyedFormData:i.length===s.length?s.map(((e,t)=>({key:e.key,item:i[t]}))):pv(i)}}get itemTitle(){const{schema:e,registry:t}=this.props,{translateString:i}=t;return Jg()(e,[Ig,"title"],Jg()(e,[Ig,"description"],i(sv.ArrayItemTitle)))}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):"null"!==e.type}canAddItem(e){const{schema:t,uiSchema:i,registry:s}=this.props;let{addable:r}=Wg(i,s.globalUiOptions);return!1!==r&&(r=void 0===t.maxItems||e.length<t.maxItems),r}_handleAddClick(e,t){e&&e.preventDefault();const{onChange:i,errorSchema:s}=this.props,{keyedFormData:r}=this.state;let o;if(s){o={};for(const e in s){const i=parseInt(e);void 0===t||i<t?Cm()(o,[i],s[e]):i>=t&&Cm()(o,[i+1],s[e])}}const n={key:hv(),item:this._getNewFormDataRow()},a=[...r];void 0!==t?a.splice(t,0,n):a.push(n),this.setState({keyedFormData:a,updatedKeyedFormData:!0},(()=>i(gv(a),o)))}render(){const{schema:e,uiSchema:t,idSchema:i,registry:s}=this.props,{schemaUtils:r,translateString:o}=s;if(!(Ig in e)){const r=Lf("UnsupportedFieldTemplate",s,Wg(t));return(0,Sg.jsx)(r,{schema:e,idSchema:i,reason:o(sv.MissingItems),registry:s})}return r.isMultiSelect(e)?this.renderMultiSelect():uf(t)?this.renderCustomWidget():qm(e)?this.renderFixedArray():r.isFilesArray(e,t)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:e,uiSchema:t={},errorSchema:i,idSchema:s,name:r,title:o,disabled:n=!1,readonly:a=!1,autofocus:l=!1,required:d=!1,registry:c,onBlur:u,onFocus:h,idPrefix:p,idSeparator:g="_",rawErrors:m}=this.props,{keyedFormData:f}=this.state,v=e.title||o||r,{schemaUtils:C,formContext:y}=c,w=Wg(t),S=am()(e.items)?e.items:{},b=C.retrieveSchema(S),R=gv(this.state.keyedFormData),E=this.canAddItem(R),F={canAdd:E,items:f.map(((e,o)=>{const{key:n,item:a}=e,d=a,c=C.retrieveSchema(S,d),y=i?i[o]:void 0,w=s.$id+g+o,b=C.toIdSchema(c,w,d,p,g);return this.renderArrayFieldItem({key:n,index:o,name:r&&`${r}-${o}`,title:v?`${v}-${o+1}`:void 0,canAdd:E,canMoveUp:o>0,canMoveDown:o<R.length-1,itemSchema:c,itemIdSchema:b,itemErrorSchema:y,itemData:d,itemUiSchema:t.items,autofocus:l&&0===o,onBlur:u,onFocus:h,rawErrors:m,totalItems:f.length})})),className:`field field-array field-array-of-${b.type}`,disabled:n,idSchema:s,uiSchema:t,onAddClick:this.onAddClick,readonly:a,required:d,schema:e,title:v,formContext:y,formData:R,rawErrors:m,registry:c},P=Lf("ArrayFieldTemplate",c,w);return(0,Sg.jsx)(P,{...F})}renderCustomWidget(){var e;const{schema:t,idSchema:i,uiSchema:s,disabled:r=!1,readonly:o=!1,autofocus:n=!1,required:a=!1,hideError:l,placeholder:d,onBlur:c,onFocus:u,formData:h=[],registry:p,rawErrors:g,name:m}=this.props,{widgets:f,formContext:v,globalUiOptions:C,schemaUtils:y}=p,{widget:w,title:S,...b}=Wg(s,C),R=Gf(t,w,f),E=null!==(e=null!=S?S:t.title)&&void 0!==e?e:m,F=y.getDisplayLabel(t,s,C);return(0,Sg.jsx)(R,{id:i.$id,name:m,multiple:!0,onChange:this.onSelectChange,onBlur:c,onFocus:u,options:b,schema:t,uiSchema:s,registry:p,value:h,disabled:r,readonly:o,hideError:l,required:a,label:E,hideLabel:!F,placeholder:d,formContext:v,autofocus:n,rawErrors:g})}renderMultiSelect(){var e;const{schema:t,idSchema:i,uiSchema:s,formData:r=[],disabled:o=!1,readonly:n=!1,autofocus:a=!1,required:l=!1,placeholder:d,onBlur:c,onFocus:u,registry:h,rawErrors:p,name:g}=this.props,{widgets:m,schemaUtils:f,formContext:v,globalUiOptions:C}=h,y=sf(f.retrieveSchema(t.items,r),s),{widget:w="select",title:S,...b}=Wg(s,C),R=Gf(t,w,m),E=null!==(e=null!=S?S:t.title)&&void 0!==e?e:g,F=f.getDisplayLabel(t,s,C);return(0,Sg.jsx)(R,{id:i.$id,name:g,multiple:!0,onChange:this.onSelectChange,onBlur:c,onFocus:u,options:{...b,enumOptions:y},schema:t,uiSchema:s,registry:h,value:r,disabled:o,readonly:n,required:l,label:E,hideLabel:!F,placeholder:d,formContext:v,autofocus:a,rawErrors:p})}renderFiles(){var e;const{schema:t,uiSchema:i,idSchema:s,name:r,disabled:o=!1,readonly:n=!1,autofocus:a=!1,required:l=!1,onBlur:d,onFocus:c,registry:u,formData:h=[],rawErrors:p}=this.props,{widgets:g,formContext:m,globalUiOptions:f,schemaUtils:v}=u,{widget:C="files",title:y,...w}=Wg(i,f),S=Gf(t,C,g),b=null!==(e=null!=y?y:t.title)&&void 0!==e?e:r,R=v.getDisplayLabel(t,i,f);return(0,Sg.jsx)(S,{options:w,id:s.$id,name:r,multiple:!0,onChange:this.onSelectChange,onBlur:d,onFocus:c,schema:t,uiSchema:i,value:h,disabled:o,readonly:n,required:l,registry:u,formContext:m,autofocus:a,rawErrors:p,label:b,hideLabel:!R})}renderFixedArray(){const{schema:e,uiSchema:t={},formData:i=[],errorSchema:s,idPrefix:r,idSeparator:o="_",idSchema:n,name:a,title:l,disabled:d=!1,readonly:c=!1,autofocus:u=!1,required:h=!1,registry:p,onBlur:g,onFocus:m,rawErrors:f}=this.props,{keyedFormData:v}=this.state;let{formData:C=[]}=this.props;const y=e.title||l||a,w=Wg(t),{schemaUtils:S,formContext:b}=p,R=(am()(e.items)?e.items:[]).map(((e,t)=>S.retrieveSchema(e,i[t]))),E=am()(e.additionalItems)?S.retrieveSchema(e.additionalItems,i):null;(!C||C.length<R.length)&&(C=C||[],C=C.concat(new Array(R.length-C.length)));const F=this.canAddItem(C)&&!!E,P={canAdd:F,className:"field field-array field-array-fixed-items",disabled:d,idSchema:n,formData:i,items:v.map(((i,l)=>{const{key:d,item:c}=i,h=c,p=l>=R.length,w=(p&&am()(e.additionalItems)?S.retrieveSchema(e.additionalItems,h):R[l])||{},b=n.$id+o+l,E=S.toIdSchema(w,b,h,r,o),P=p?t.additionalItems||{}:Array.isArray(t.items)?t.items[l]:t.items||{},x=s?s[l]:void 0;return this.renderArrayFieldItem({key:d,index:l,name:a&&`${a}-${l}`,title:y?`${y}-${l+1}`:void 0,canAdd:F,canRemove:p,canMoveUp:l>=R.length+1,canMoveDown:p&&l<C.length-1,itemSchema:w,itemData:h,itemUiSchema:P,itemIdSchema:E,itemErrorSchema:x,autofocus:u&&0===l,onBlur:g,onFocus:m,rawErrors:f,totalItems:v.length})})),onAddClick:this.onAddClick,readonly:c,required:h,registry:p,schema:e,uiSchema:t,title:y,formContext:b,errorSchema:s,rawErrors:f},x=Lf("ArrayFieldTemplate",p,w);return(0,Sg.jsx)(x,{...P})}renderArrayFieldItem(e){const{key:t,index:i,name:s,canAdd:r,canRemove:o=!0,canMoveUp:n,canMoveDown:a,itemSchema:l,itemData:d,itemUiSchema:c,itemIdSchema:u,itemErrorSchema:h,autofocus:p,onBlur:g,onFocus:m,rawErrors:f,totalItems:v,title:C}=e,{disabled:y,hideError:w,idPrefix:S,idSeparator:b,readonly:R,uiSchema:E,registry:F,formContext:P}=this.props,{fields:{ArraySchemaField:x,SchemaField:D},globalUiOptions:A}=F,T=x||D,{orderable:M=!0,removable:I=!0,copyable:k=!1}=Wg(E,A),L={moveUp:M&&n,moveDown:M&&a,copy:k&&r,remove:I&&o,toolbar:!1};return L.toolbar=Object.keys(L).some((e=>L[e])),{children:(0,Sg.jsx)(T,{name:s,title:C,index:i,schema:l,uiSchema:c,formData:d,formContext:P,errorSchema:h,idPrefix:S,idSeparator:b,idSchema:u,required:this.isItemRequired(l),onChange:this.onChangeForIndex(i),onBlur:g,onFocus:m,registry:F,disabled:y,readonly:R,hideError:w,autofocus:p,rawErrors:f}),className:"array-item",disabled:y,canAdd:r,hasCopy:L.copy,hasToolbar:L.toolbar,hasMoveUp:L.moveUp,hasMoveDown:L.moveDown,hasRemove:L.remove,index:i,totalItems:v,key:t,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:R,registry:F,schema:l,uiSchema:c}}}const fv=mv,vv=function(e){var t,i,s;const{schema:r,name:o,uiSchema:n,idSchema:a,formData:l,registry:d,required:c,disabled:u,readonly:h,hideError:p,autofocus:g,title:m,onChange:f,onFocus:v,onBlur:C,rawErrors:y}=e,{title:w}=r,{widgets:S,formContext:b,translateString:R,globalUiOptions:E}=d,{widget:F="checkbox",title:P,label:x=!0,...D}=Wg(n,E),A=Gf(r,F,S),T=R(sv.YesLabel),M=R(sv.NoLabel);let I;const k=null!==(i=null!==(t=null!=P?P:w)&&void 0!==t?t:m)&&void 0!==i?i:o;if(Array.isArray(r.oneOf))I=sf({oneOf:r.oneOf.map((e=>{if(am()(e))return{...e,title:e.title||(!0===e.const?T:M)}})).filter((e=>e))},n);else{const e=r,t=null!==(s=r.enum)&&void 0!==s?s:[!0,!1];I=!e.enumNames&&2===t.length&&t.every((e=>"boolean"==typeof e))?[{value:t[0],label:t[0]?T:M},{value:t[1],label:t[1]?T:M}]:sf({enum:t,enumNames:e.enumNames},n)}return(0,Sg.jsx)(A,{options:{...D,enumOptions:I},schema:r,uiSchema:n,id:a.$id,name:o,onChange:f,onFocus:v,onBlur:C,label:k,hideLabel:!x,value:l,required:c,disabled:u,readonly:h,hideError:p,registry:d,formContext:b,autofocus:g,rawErrors:y})};class Cv extends s.Component{constructor(e){super(e),this.onOptionChange=e=>{const{selectedOption:t,retrievedOptions:i}=this.state,{formData:s,onChange:r,registry:o}=this.props,{schemaUtils:n}=o,a=void 0!==e?parseInt(e,10):-1;if(a===t)return;const l=a>=0?i[a]:void 0,d=t>=0?i[t]:void 0;let c=n.sanitizeDataForNewSchema(l,d,s);l&&(c=n.getDefaultFormState(l,c,"excludeObjectChildren")),this.setState({selectedOption:a},(()=>{r(c,void 0,this.getFieldId())}))};const{formData:t,options:i,registry:{schemaUtils:s}}=this.props,r=i.map((e=>s.retrieveSchema(e,t)));this.state={retrievedOptions:r,selectedOption:this.getMatchingOption(0,t,r)}}componentDidUpdate(e,t){const{formData:i,options:s,idSchema:r}=this.props,{selectedOption:o}=this.state;let n=this.state;if(!Yg(e.options,s)){const{registry:{schemaUtils:e}}=this.props;n={selectedOption:o,retrievedOptions:s.map((t=>e.retrieveSchema(t,i)))}}if(!Yg(i,e.formData)&&r.$id===e.idSchema.$id){const{retrievedOptions:e}=n,s=this.getMatchingOption(o,i,e);t&&s!==o&&(n={selectedOption:s,retrievedOptions:e})}n!==this.state&&this.setState(n)}getMatchingOption(e,t,i){const{schema:s,registry:{schemaUtils:r}}=this.props,o=Am(s);return r.getClosestMatchingOption(t,i,e,o)}getFieldId(){const{idSchema:e,schema:t}=this.props;return`${e.$id}${t.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:e,disabled:t=!1,errorSchema:i={},formContext:s,onBlur:r,onFocus:o,registry:n,schema:a,uiSchema:l}=this.props,{widgets:d,fields:c,translateString:u,globalUiOptions:h,schemaUtils:p}=n,{SchemaField:g}=c,{selectedOption:m,retrievedOptions:f}=this.state,{widget:v="select",placeholder:C,autofocus:y,autocomplete:w,title:S=a.title,...b}=Wg(l,h),R=Gf({type:"number"},v,d),E=Jg()(i,Tg,[]),F=Ie()(i,[Tg]),P=p.getDisplayLabel(a,l,h),x=m>=0&&f[m]||null;let D;if(x){const{required:e}=a;D=e?Lm({required:e},x):x}let A=[];Lg in a&&l&&Lg in l?Array.isArray(l[Lg])?A=l[Lg]:console.warn(`uiSchema.oneOf is not an array for "${S||e}"`):xg in a&&l&&xg in l&&(Array.isArray(l[xg])?A=l[xg]:console.warn(`uiSchema.anyOf is not an array for "${S||e}"`));let T=l;m>=0&&A.length>m&&(T=A[m]);const M=S?sv.TitleOptionPrefix:sv.OptionPrefix,I=S?[S]:[],k=f.map(((e,t)=>{const{title:i=e.title}=Wg(A[t]);return{label:i||u(M,I.concat(String(t+1))),value:t}}));return(0,Sg.jsxs)("div",{className:"panel panel-default panel-body",children:[(0,Sg.jsx)("div",{className:"form-group",children:(0,Sg.jsx)(R,{id:this.getFieldId(),name:`${e}${a.oneOf?"__oneof_select":"__anyof_select"}`,schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:r,onFocus:o,disabled:t||B()(k),multiple:!1,rawErrors:E,errorSchema:F,value:m>=0?m:void 0,options:{enumOptions:k,...b},registry:n,formContext:s,placeholder:C,autocomplete:w,autofocus:y,label:null!=S?S:e,hideLabel:!P})}),D&&(0,Sg.jsx)(g,{...this.props,schema:D,uiSchema:T})]})}}const yv=Cv,wv=/\.([0-9]*0)*$/,Sv=/[0.]0*$/,bv=function(e){const{registry:t,onChange:i,formData:r,value:o}=e,[n,a]=(0,s.useState)(o),{StringField:l}=t.fields;let d=r;const c=(0,s.useCallback)(((e,t,s)=>{a(e),"."===`${e}`.charAt(0)&&(e=`0${e}`);const r="string"==typeof e&&e.match(wv)?Rg(e.replace(Sv,"")):Rg(e);i(r,t,s)}),[i]);if("string"==typeof n&&"number"==typeof d){const e=new RegExp(`^(${String(d).replace(".","\\.")})?\\.?0*$`);n.match(e)&&(d=n)}return(0,Sg.jsx)(l,{...e,formData:d,onChange:c})};function Rv(){return Rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Rv.apply(this,arguments)}const Ev=["children","options"],Fv="0",Pv="1",xv="2",Dv="3",Av="4",Tv="5",Mv="6",Iv="7",kv="8",Lv="9",Ov="10",Nv="11",Gv="12",Bv="13",Vv="14",Hv="15",$v="16",Wv="17",_v="18",zv="19",Uv="20",jv="21",qv="22",Kv="23",Yv="24",Qv="25",Jv="27",Xv="28",Zv="29",eC="30",tC="31",iC="32",sC="33";var rC,oC;(oC=rC||(rC={}))[oC.MAX=0]="MAX",oC[oC.HIGH=1]="HIGH",oC[oC.MED=2]="MED",oC[oC.LOW=3]="LOW",oC[oC.MIN=4]="MIN";const nC=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce(((e,t)=>(e[t.toLowerCase()]=t,e)),{class:"className",for:"htmlFor"}),aC={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},lC=["style","script"],dC=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,cC=/mailto:/i,uC=/\n{2,}$/,hC=/^(\s*>[\s\S]*?)(?=\n\n|$)/,pC=/^ *> ?/gm,gC=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,mC=/^ {2,}\n/,fC=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,vC=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,CC=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,yC=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,wC=/^(?:\n *)*\n/,SC=/\r\n?/g,bC=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,RC=/^\[\^([^\]]+)]/,EC=/\f/g,FC=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,PC=/^\s*?\[(x|\s)\]/,xC=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,DC=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,AC=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,TC=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,MC=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,IC=/^<!--[\s\S]*?(?:-->)/,kC=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,LC=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,OC=/^\{.*\}$/,NC=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,GC=/^<([^ >]+@[^ >]+)>/,BC=/^<([^ >]+:\/[^ >]+)>/,VC=/-([a-z])?/gi,HC=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,$C=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,WC=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,_C=/^\[([^\]]*)\] ?\[([^\]]*)\]/,zC=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,UC=/\t/g,jC=/(^ *\||\| *$)/g,qC=/^ *:-+: *$/,KC=/^ *:-+ *$/,YC=/^ *-+: *$/,QC="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~~.*?~~|==.*?==|.|\\n)*?)",JC=new RegExp(`^([*_])\\1${QC}\\1\\1(?!\\1)`),XC=new RegExp(`^([*_])${QC}\\1(?!\\1|\\w)`),ZC=new RegExp(`^==${QC}==`),ey=new RegExp(`^~~${QC}~~`),ty=/^\\([^0-9A-Za-z\s])/,iy=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&#;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,sy=/^\n+/,ry=/^([ \t]*)/,oy=/\\([^\\])/g,ny=/ *\n+$/,ay=/(?:^|\n)( *)$/,ly="(?:\\d+\\.)",dy="(?:[*+-])";function cy(e){return"( *)("+(1===e?ly:dy)+") +"}const uy=cy(1),hy=cy(2);function py(e){return new RegExp("^"+(1===e?uy:hy))}const gy=py(1),my=py(2);function fy(e){return new RegExp("^"+(1===e?uy:hy)+"[^\\n]*(?:\\n(?!\\1"+(1===e?ly:dy)+" )[^\\n]*)*(\\n|$)","gm")}const vy=fy(1),Cy=fy(2);function yy(e){const t=1===e?ly:dy;return new RegExp("^( *)("+t+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+t+" (?!"+t+" ))\\n*|\\s*\\n*$)")}const wy=yy(1),Sy=yy(2);function by(e,t){const i=1===t,s=i?wy:Sy,r=i?vy:Cy,o=i?gy:my;return{match(e,t){const i=ay.exec(t.prevCapture);return i&&(t.list||!t.inline&&!t.simple)?s.exec(e=i[1]+e):null},order:1,parse(e,t,s){const n=i?+e[2]:void 0,a=e[0].replace(uC,"\n").match(r);let l=!1;return{items:a.map((function(e,i){const r=o.exec(e)[0].length,n=new RegExp("^ {1,"+r+"}","gm"),d=e.replace(n,"").replace(o,""),c=i===a.length-1,u=-1!==d.indexOf("\n\n")||c&&l;l=u;const h=s.inline,p=s.list;let g;s.list=!0,u?(s.inline=!1,g=d.replace(ny,"\n\n")):(s.inline=!0,g=d.replace(ny,""));const m=t(g,s);return s.inline=h,s.list=p,m})),ordered:i,start:n}},render:(t,i,s)=>e(t.ordered?"ol":"ul",{key:s.key,start:"20"===t.type?t.start:void 0},t.items.map((function(t,r){return e("li",{key:r},i(t,s))})))}}const Ry=new RegExp("^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*\\)"),Ey=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,Fy=[hC,vC,CC,xC,AC,DC,IC,HC,vy,wy,Cy,Sy],Py=[...Fy,/^[^\n]+(?:  \n|\n{2,})/,TC,LC];function xy(e){return e.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function Dy(e){return YC.test(e)?"right":qC.test(e)?"center":KC.test(e)?"left":null}function Ay(e,t,i,s){const r=i.inTable;i.inTable=!0;let o=[[]],n="";function a(){if(!n)return;const e=o[o.length-1];e.push.apply(e,t(n,i)),n=""}return e.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach(((e,t,i)=>{"|"===e.trim()&&(a(),s)?0!==t&&t!==i.length-1&&o.push([]):n+=e})),a(),i.inTable=r,o}function Ty(e,t,i){i.inline=!0;const s=e[2]?e[2].replace(jC,"").split("|").map(Dy):[],r=e[3]?function(e,t,i){return e.trim().split("\n").map((function(e){return Ay(e,t,i,!0)}))}(e[3],t,i):[],o=Ay(e[1],t,i,!!r.length);return i.inline=!1,r.length?{align:s,cells:r,header:o,type:"25"}:{children:o,type:"21"}}function My(e,t){return null==e.align[t]?{}:{textAlign:e.align[t]}}function Iy(e){return function(t,i){return i.inline?e.exec(t):null}}function ky(e){return function(t,i){return i.inline||i.simple?e.exec(t):null}}function Ly(e){return function(t,i){return i.inline||i.simple?null:e.exec(t)}}function Oy(e){return function(t){return e.exec(t)}}function Ny(e,t){if(t.inline||t.simple)return null;let i="";e.split("\n").every((e=>(e+="\n",!Fy.some((t=>t.test(e)))&&(i+=e,!!e.trim()))));const s=i.trimEnd();return""==s?null:[i,s]}function Gy(e){try{if(decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return null}catch(e){return null}return e}function By(e){return e.replace(oy,"$1")}function Vy(e,t,i){const s=i.inline||!1,r=i.simple||!1;i.inline=!0,i.simple=!0;const o=e(t,i);return i.inline=s,i.simple=r,o}function Hy(e,t,i){const s=i.inline||!1,r=i.simple||!1;i.inline=!1,i.simple=!0;const o=e(t,i);return i.inline=s,i.simple=r,o}function $y(e,t,i){const s=i.inline||!1;i.inline=!1;const r=e(t,i);return i.inline=s,r}const Wy=(e,t,i)=>({children:Vy(t,e[1],i)});function _y(){return{}}function zy(){return null}function Uy(...e){return e.filter(Boolean).join(" ")}function jy(e,t,i){let s=e;const r=t.split(".");for(;r.length&&(s=s[r[0]],void 0!==s);)r.shift();return s||i}function qy(e="",t={}){function i(e,i,...s){const r=jy(t.overrides,`${e}.props`,{});return t.createElement(function(e,t){const i=jy(t,e);return i?"function"==typeof i||"object"==typeof i&&"render"in i?i:jy(t,`${e}.component`,e):e}(e,t.overrides),Rv({},i,r,{className:Uy(null==i?void 0:i.className,r.className)||void 0}),...s)}function r(e){e=e.replace(FC,"");let s=!1;t.forceInline?s=!0:t.forceBlock||(s=!1===zC.test(e));const r=c(d(s?e:`${e.trimEnd().replace(sy,"")}\n\n`,{inline:s}));for(;"string"==typeof r[r.length-1]&&!r[r.length-1].trim();)r.pop();if(null===t.wrapper)return r;const o=t.wrapper||(s?"span":"div");let n;if(r.length>1||t.forceWrapper)n=r;else{if(1===r.length)return n=r[0],"string"==typeof n?i("span",{key:"outer"},n):n;n=null}return t.createElement(o,{key:"outer"},n)}function o(e,i){const s=i.match(dC);return s?s.reduce((function(i,s){const o=s.indexOf("=");if(-1!==o){const n=function(e){return-1!==e.indexOf("-")&&null===e.match(kC)&&(e=e.replace(VC,(function(e,t){return t.toUpperCase()}))),e}(s.slice(0,o)).trim(),a=function(e){const t=e[0];return('"'===t||"'"===t)&&e.length>=2&&e[e.length-1]===t?e.slice(1,-1):e}(s.slice(o+1).trim()),l=nC[n]||n;if("ref"===l)return i;const d=i[l]=function(e,t,i,s){return"style"===t?i.split(/;\s?/).reduce((function(e,t){const i=t.slice(0,t.indexOf(":"));return e[i.trim().replace(/(-[a-z])/g,(e=>e[1].toUpperCase()))]=t.slice(i.length+1).trim(),e}),{}):"href"===t||"src"===t?s(i,e,t):(i.match(OC)&&(i=i.slice(1,i.length-1)),"true"===i||"false"!==i&&i)}(e,n,a,t.sanitizer);"string"==typeof d&&(TC.test(d)||LC.test(d))&&(i[l]=r(d.trim()))}else"style"!==s&&(i[nC[s]||s]=!0);return i}),{}):null}t.overrides=t.overrides||{},t.sanitizer=t.sanitizer||Gy,t.slugify=t.slugify||xy,t.namedCodesToUnicode=t.namedCodesToUnicode?Rv({},aC,t.namedCodesToUnicode):aC,t.createElement=t.createElement||s.createElement;const n=[],a={},l={[Fv]:{match:Ly(hC),order:1,parse(e,t,i){const[,s,r]=e[0].replace(pC,"").match(gC);return{alert:s,children:t(r,i)}},render(e,s,r){const o={key:r.key};return e.alert&&(o.className="markdown-alert-"+t.slugify(e.alert.toLowerCase(),xy),e.children.unshift({attrs:{},children:[{type:Jv,text:e.alert}],noInnerParse:!0,type:Nv,tag:"header"})),i("blockquote",o,s(e.children,r))}},[Pv]:{match:Oy(mC),order:1,parse:_y,render:(e,t,s)=>i("br",{key:s.key})},[xv]:{match:Ly(fC),order:1,parse:_y,render:(e,t,s)=>i("hr",{key:s.key})},[Dv]:{match:Ly(CC),order:0,parse:e=>({lang:void 0,text:e[0].replace(/^ {4}/gm,"").replace(/\n+$/,"")}),render:(e,t,s)=>i("pre",{key:s.key},i("code",Rv({},e.attrs,{className:e.lang?`lang-${e.lang}`:""}),e.text))},[Av]:{match:Ly(vC),order:0,parse:e=>({attrs:o("code",e[3]||""),lang:e[2]||void 0,text:e[4],type:"3"})},[Tv]:{match:ky(yC),order:3,parse:e=>({text:e[2]}),render:(e,t,s)=>i("code",{key:s.key},e.text)},[Mv]:{match:Ly(bC),order:0,parse:e=>(n.push({footnote:e[2],identifier:e[1]}),{}),render:zy},[Iv]:{match:Iy(RC),order:1,parse:e=>({target:`#${t.slugify(e[1],xy)}`,text:e[1]}),render:(e,s,r)=>i("a",{key:r.key,href:t.sanitizer(e.target,"a","href")},i("sup",{key:r.key},e.text))},[kv]:{match:Iy(PC),order:1,parse:e=>({completed:"x"===e[1].toLowerCase()}),render:(e,t,s)=>i("input",{checked:e.completed,key:s.key,readOnly:!0,type:"checkbox"})},[Lv]:{match:Ly(t.enforceAtxHeadings?DC:xC),order:1,parse:(e,i,s)=>({children:Vy(i,e[2],s),id:t.slugify(e[2],xy),level:e[1].length}),render:(e,t,s)=>i(`h${e.level}`,{id:e.id,key:s.key},t(e.children,s))},[Ov]:{match:Ly(AC),order:0,parse:(e,t,i)=>({children:Vy(t,e[1],i),level:"="===e[2]?1:2,type:"9"})},[Nv]:{match:Oy(TC),order:1,parse(e,t,i){const[,s]=e[3].match(ry),r=new RegExp(`^${s}`,"gm"),n=e[3].replace(r,""),a=(l=n,Py.some((e=>e.test(l)))?$y:Vy);var l;const d=e[1].toLowerCase(),c=-1!==lC.indexOf(d),u=(c?d:e[1]).trim(),h={attrs:o(u,e[2]),noInnerParse:c,tag:u};return i.inAnchor=i.inAnchor||"a"===d,c?h.text=e[3]:h.children=a(t,n,i),i.inAnchor=!1,h},render:(e,t,s)=>i(e.tag,Rv({key:s.key},e.attrs),e.text||(e.children?t(e.children,s):""))},[Bv]:{match:Oy(LC),order:1,parse(e){const t=e[1].trim();return{attrs:o(t,e[2]||""),tag:t}},render:(e,t,s)=>i(e.tag,Rv({},e.attrs,{key:s.key}))},[Gv]:{match:Oy(IC),order:1,parse:()=>({}),render:zy},[Vv]:{match:ky(Ey),order:1,parse:e=>({alt:e[1],target:By(e[2]),title:e[3]}),render:(e,s,r)=>i("img",{key:r.key,alt:e.alt||void 0,title:e.title||void 0,src:t.sanitizer(e.target,"img","src")})},[Hv]:{match:Iy(Ry),order:3,parse:(e,t,i)=>({children:Hy(t,e[1],i),target:By(e[2]),title:e[3]}),render:(e,s,r)=>i("a",{key:r.key,href:t.sanitizer(e.target,"a","href"),title:e.title},s(e.children,r))},[$v]:{match:Iy(BC),order:0,parse:e=>({children:[{text:e[1],type:Jv}],target:e[1],type:Hv})},[Wv]:{match:(e,i)=>i.inAnchor||t.disableAutoLink?null:Iy(NC)(e,i),order:0,parse:e=>({children:[{text:e[1],type:Jv}],target:e[1],title:void 0,type:Hv})},[_v]:{match:Iy(GC),order:0,parse(e){let t=e[1],i=e[1];return cC.test(i)||(i="mailto:"+i),{children:[{text:t.replace("mailto:",""),type:Jv}],target:i,type:Hv}}},[Uv]:by(i,1),[sC]:by(i,2),[zv]:{match:Ly(wC),order:3,parse:_y,render:()=>"\n"},[jv]:{match:Ny,order:3,parse:Wy,render:(e,t,s)=>i("p",{key:s.key},t(e.children,s))},[qv]:{match:Iy($C),order:0,parse:e=>(a[e[1]]={target:e[2],title:e[4]},{}),render:zy},[Kv]:{match:ky(WC),order:0,parse:e=>({alt:e[1]||void 0,ref:e[2]}),render:(e,s,r)=>a[e.ref]?i("img",{key:r.key,alt:e.alt,src:t.sanitizer(a[e.ref].target,"img","src"),title:a[e.ref].title}):null},[Yv]:{match:Iy(_C),order:0,parse:(e,t,i)=>({children:t(e[1],i),fallbackChildren:e[0],ref:e[2]}),render:(e,s,r)=>a[e.ref]?i("a",{key:r.key,href:t.sanitizer(a[e.ref].target,"a","href"),title:a[e.ref].title},s(e.children,r)):i("span",{key:r.key},e.fallbackChildren)},[Qv]:{match:Ly(HC),order:1,parse:Ty,render(e,t,s){const r=e;return i("table",{key:s.key},i("thead",null,i("tr",null,r.header.map((function(e,o){return i("th",{key:o,style:My(r,o)},t(e,s))})))),i("tbody",null,r.cells.map((function(e,o){return i("tr",{key:o},e.map((function(e,o){return i("td",{key:o,style:My(r,o)},t(e,s))})))}))))}},[Jv]:{match:Oy(iy),order:4,parse:e=>({text:e[0].replace(MC,((e,i)=>t.namedCodesToUnicode[i]?t.namedCodesToUnicode[i]:e))}),render:e=>e.text},[Xv]:{match:ky(JC),order:2,parse:(e,t,i)=>({children:t(e[2],i)}),render:(e,t,s)=>i("strong",{key:s.key},t(e.children,s))},[Zv]:{match:ky(XC),order:3,parse:(e,t,i)=>({children:t(e[2],i)}),render:(e,t,s)=>i("em",{key:s.key},t(e.children,s))},[eC]:{match:ky(ty),order:1,parse:e=>({text:e[1],type:Jv})},[tC]:{match:ky(ZC),order:3,parse:Wy,render:(e,t,s)=>i("mark",{key:s.key},t(e.children,s))},[iC]:{match:ky(ey),order:3,parse:Wy,render:(e,t,s)=>i("del",{key:s.key},t(e.children,s))}};!0===t.disableParsingRawHTML&&(delete l[Nv],delete l[13]);const d=function(e){let t=Object.keys(e);function i(s,r){let o=[];for(r.prevCapture=r.prevCapture||"";s;){let n=0;for(;n<t.length;){const a=t[n],l=e[a],d=l.match(s,r);if(d){const e=d[0];r.prevCapture+=e,s=s.substring(e.length);const t=l.parse(d,i,r);null==t.type&&(t.type=a),o.push(t);break}n++}}return r.prevCapture="",o}return t.sort((function(t,i){let s=e[t].order,r=e[i].order;return s!==r?s-r:t<i?-1:1})),function(e,t){return i(function(e){return e.replace(SC,"\n").replace(EC,"").replace(UC,"    ")}(e),t)}}(l),c=(u=function(e,t){return function(i,s,r){const o=e[i.type].render;return t?t((()=>o(i,s,r)),i,s,r):o(i,s,r)}}(l,t.renderRule),function e(t,i={}){if(Array.isArray(t)){const s=i.key,r=[];let o=!1;for(let s=0;s<t.length;s++){i.key=s;const n=e(t[s],i),a="string"==typeof n;a&&o?r[r.length-1]+=n:null!==n&&r.push(n),o=a}return i.key=s,r}return u(t,e,i)});var u;const h=r(e);return n.length?i("div",null,h,i("footer",{key:"footer"},n.map((function(e){return i("div",{id:t.slugify(e.identifier,xy),key:e.identifier},e.identifier,c(d(e.footnote,{inline:!0})))})))):h}const Ky=e=>{let{children:t="",options:i}=e,r=function(e,t){if(null==e)return{};var i,s,r={},o=Object.keys(e);for(s=0;s<o.length;s++)t.indexOf(i=o[s])>=0||(r[i]=e[i]);return r}(e,Ev);return s.cloneElement(qy(t,i),r)};var Yy=i(73357),Qy=i.n(Yy);class Jy extends s.Component{constructor(){super(...arguments),this.state={wasPropertyKeyModified:!1,additionalProperties:{}},this.onPropertyChange=(e,t=!1)=>(i,s,r)=>{const{formData:o,onChange:n,errorSchema:a}=this.props;void 0===i&&t&&(i=""),n({...o,[e]:i},a&&a&&{...a,[e]:s},r)},this.onDropPropertyClick=e=>t=>{t.preventDefault();const{onChange:i,formData:s}=this.props,r={...s};Qy()(r,e),i(r)},this.getAvailableKey=(e,t)=>{const{uiSchema:i,registry:s}=this.props,{duplicateKeySuffixSeparator:r="-"}=Wg(i,s.globalUiOptions);let o=0,n=e;for(;sm()(t,n);)n=`${e}${r}${++o}`;return n},this.onKeyChange=e=>(t,i)=>{if(e===t)return;const{formData:s,onChange:r,errorSchema:o}=this.props;t=this.getAvailableKey(t,s);const n={...s},a={[e]:t},l=Object.keys(n).map((e=>{const t=a[e]||e;return{[t]:n[e]}})),d=Object.assign({},...l);this.setState({wasPropertyKeyModified:!0}),r(d,o&&o&&{...o,[t]:i})},this.handleAddClick=e=>()=>{var t;if(!e.additionalProperties)return;const{formData:i,onChange:s,registry:r}=this.props,o={...i};let n,a,l;if(am()(e.additionalProperties)){n=e.additionalProperties.type,a=e.additionalProperties.const,l=e.additionalProperties.default;let t=e.additionalProperties;if(Gg in t){const{schemaUtils:e}=r;t=e.retrieveSchema({$ref:t[Gg]},i),n=t.type,a=t.const,l=t.default}n||!(xg in t)&&!(Lg in t)||(n="object")}const d=this.getAvailableKey("newKey",o),c=null!==(t=null!=a?a:l)&&void 0!==t?t:this.getDefaultValue(n);Cm()(o,d,c),s(o)}}isRequired(e){const{schema:t}=this.props;return Array.isArray(t.required)&&-1!==t.required.indexOf(e)}getDefaultValue(e){const{registry:{translateString:t}}=this.props;switch(e){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};default:return t(sv.NewStringDefault)}}render(){var e,t,i,s;const{schema:r,uiSchema:o={},formData:n,errorSchema:a,idSchema:l,name:d,required:c=!1,disabled:u,readonly:h,hideError:p,idPrefix:g,idSeparator:m,onBlur:f,onFocus:v,registry:C,title:y}=this.props,{fields:w,formContext:S,schemaUtils:b,translateString:R,globalUiOptions:E}=C,{SchemaField:F}=w,P=b.retrieveSchema(r,n),x=Wg(o,E),{properties:D={}}=P,A=null!==(i=null!==(t=null!==(e=x.title)&&void 0!==e?e:P.title)&&void 0!==t?t:y)&&void 0!==i?i:d,T=null!==(s=x.description)&&void 0!==s?s:P.description;let M;try{M=function(e,t){if(!Array.isArray(t))return e;const i=e=>e.reduce(((e,t)=>(e[t]=!0,e)),{}),s=i(e),r=t.filter((e=>"*"===e||s[e])),o=i(r),n=e.filter((e=>!o[e])),a=r.indexOf("*");if(-1===a){if(n.length)throw new Error("uiSchema order list does not contain "+((l=n).length>1?`properties '${l.join("', '")}'`:`property '${l[0]}'`));return r}var l;if(a!==r.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");const d=[...r];return d.splice(a,1,...n),d}(Object.keys(D),x.order)}catch(e){return(0,Sg.jsxs)("div",{children:[(0,Sg.jsx)("p",{className:"config-error",style:{color:"red"},children:(0,Sg.jsx)(Ky,{options:{disableParsingRawHTML:!0},children:R(sv.InvalidObjectField,[d||"root",e.message])})}),(0,Sg.jsx)("pre",{children:JSON.stringify(P)})]})}const I=Lf("ObjectFieldTemplate",C,x),k={title:!1===x.label?"":A,description:!1===x.label?void 0:T,properties:M.map((e=>{const t=sm()(P,[Og,e,Eg]),i=t?o.additionalProperties:o[e],s="hidden"===Wg(i).widget,r=Jg()(l,[e],{});return{content:(0,Sg.jsx)(F,{name:e,required:this.isRequired(e),schema:Jg()(P,[Og,e],{}),uiSchema:i,errorSchema:Jg()(a,e),idSchema:r,idPrefix:g,idSeparator:m,formData:Jg()(n,e),formContext:S,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(e),onChange:this.onPropertyChange(e,t),onBlur:f,onFocus:v,registry:C,disabled:u,readonly:h,hideError:p,onDropPropertyClick:this.onDropPropertyClick},e),name:e,readonly:h,disabled:u,required:c,hidden:s}})),readonly:h,disabled:u,required:c,idSchema:l,uiSchema:o,errorSchema:a,schema:P,formData:n,formContext:S,registry:C};return(0,Sg.jsx)(I,{...k,onAddClick:this.handleAddClick})}}const Xy=Jy,Zy={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function ew(e){var t,i,r;const{schema:o,idSchema:n,uiSchema:a,formData:l,errorSchema:d,idPrefix:c,idSeparator:u,name:h,onChange:p,onKeyChange:g,onDropPropertyClick:m,required:f,registry:v,wasPropertyKeyModified:C=!1}=e,{formContext:y,schemaUtils:w,globalUiOptions:S}=v,b=Wg(a,S),R=Lf("FieldTemplate",v,b),E=Lf("DescriptionFieldTemplate",v,b),F=Lf("FieldHelpTemplate",v,b),P=Lf("FieldErrorTemplate",v,b),x=w.retrieveSchema(o,l),D=n[Mg],A=Jm(w.toIdSchema(x,D,l,c,u),n),T=(0,s.useCallback)(((e,t,i)=>p(e,t,i||D)),[D,p]),M=function(e,t,i,s){const r=t.field,{fields:o,translateString:n}=s;if("function"==typeof r)return r;if("string"==typeof r&&r in o)return o[r];const a=km(e),l=Array.isArray(a)?a[0]:a||"",d=e.$id;let c=Zy[l];return d&&d in o&&(c=d),c||!e.anyOf&&!e.oneOf?c in o?o[c]:()=>{const r=Lf("UnsupportedFieldTemplate",s,t);return(0,Sg.jsx)(r,{schema:e,idSchema:i,reason:n(sv.UnknownFieldType,[String(e.type)]),registry:s})}:()=>null}(x,b,A,v),I=Boolean(null!==(t=b.disabled)&&void 0!==t?t:e.disabled),k=Boolean(null!==(i=b.readonly)&&void 0!==i?i:e.readonly||e.schema.readOnly||x.readOnly),L=b.hideError,O=void 0===L?e.hideError:Boolean(L),N=Boolean(null!==(r=b.autofocus)&&void 0!==r?r:e.autofocus);if(0===Object.keys(x).length)return null;const G=w.getDisplayLabel(x,a,S),{__errors:B,...V}=d||{},H=Ie()(a,["ui:classNames","classNames","ui:style"]);$g in H&&(H[$g]=Ie()(H[$g],["classNames","style"]));const $=(0,Sg.jsx)(M,{...e,onChange:T,idSchema:A,schema:x,uiSchema:H,disabled:I,readonly:k,hideError:O,autofocus:N,errorSchema:V,formContext:y,rawErrors:B}),W=A[Mg];let _;_=C||Eg in x?h:b.title||e.schema.title||x.title||e.title||h;const z=b.description||e.schema.description||x.description||"",U=b.enableMarkdownInDescription?(0,Sg.jsx)(Ky,{options:{disableParsingRawHTML:!0},children:z}):z,j=b.help,q="hidden"===b.widget,K=["form-group","field",`field-${km(x)}`];!O&&B&&B.length>0&&K.push("field-error has-error has-danger"),(null==a?void 0:a.classNames)&&K.push(a.classNames),b.classNames&&K.push(b.classNames);const Y=(0,Sg.jsx)(F,{help:j,idSchema:A,schema:x,uiSchema:a,hasErrors:!O&&B&&B.length>0,registry:v}),Q=O||(x.anyOf||x.oneOf)&&!w.isSelect(x)?void 0:(0,Sg.jsx)(P,{errors:B,errorSchema:d,idSchema:A,schema:x,uiSchema:a,registry:v}),J={description:(0,Sg.jsx)(E,{id:Vf(W),description:U,schema:x,uiSchema:a,registry:v}),rawDescription:z,help:Y,rawHelp:"string"==typeof j?j:void 0,errors:Q,rawErrors:O?void 0:B,id:W,label:_,hidden:q,onChange:p,onKeyChange:g,onDropPropertyClick:m,required:f,disabled:I,readonly:k,hideError:O,displayLabel:G,classNames:K.join(" ").trim(),style:b.style,formContext:y,formData:l,schema:x,uiSchema:a,registry:v},X=v.fields.AnyOfField,Z=v.fields.OneOfField,ee=(null==a?void 0:a["ui:field"])&&!0===(null==a?void 0:a["ui:fieldReplacesAnyOrOneOf"]);return(0,Sg.jsx)(R,{...J,children:(0,Sg.jsxs)(Sg.Fragment,{children:[$,x.anyOf&&!ee&&!w.isSelect(x)&&(0,Sg.jsx)(X,{name:h,disabled:I,readonly:k,hideError:O,errorSchema:d,formData:l,formContext:y,idPrefix:c,idSchema:A,idSeparator:u,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:x.anyOf.map((e=>w.retrieveSchema(am()(e)?e:{},l))),registry:v,required:f,schema:x,uiSchema:a}),x.oneOf&&!ee&&!w.isSelect(x)&&(0,Sg.jsx)(Z,{name:h,disabled:I,readonly:k,hideError:O,errorSchema:d,formData:l,formContext:y,idPrefix:c,idSchema:A,idSeparator:u,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:x.oneOf.map((e=>w.retrieveSchema(am()(e)?e:{},l))),registry:v,required:f,schema:x,uiSchema:a})]})})}class tw extends s.Component{shouldComponentUpdate(e){return!Yg(this.props,e)}render(){return(0,Sg.jsx)(ew,{...this.props})}}const iw=tw,sw=function(e){var t;const{schema:i,name:s,uiSchema:r,idSchema:o,formData:n,required:a,disabled:l=!1,readonly:d=!1,autofocus:c=!1,onChange:u,onBlur:h,onFocus:p,registry:g,rawErrors:m,hideError:f}=e,{title:v,format:C}=i,{widgets:y,formContext:w,schemaUtils:S,globalUiOptions:b}=g,R=S.isSelect(i)?sf(i,r):void 0;let E=R?"select":"text";C&&function(e,t,i={}){try{return Gf(e,t,i),!0}catch(e){const t=e;if(t.message&&(t.message.startsWith("No widget")||t.message.startsWith("Unsupported widget")))return!1;throw e}}(i,C,y)&&(E=C);const{widget:F=E,placeholder:P="",title:x,...D}=Wg(r),A=S.getDisplayLabel(i,r,b),T=null!==(t=null!=x?x:v)&&void 0!==t?t:s,M=Gf(i,F,y);return(0,Sg.jsx)(M,{options:{...D,enumOptions:R},schema:i,uiSchema:r,id:o.$id,name:s,label:T,hideLabel:!A,hideError:f,value:n,onChange:u,onBlur:h,onFocus:p,required:a,disabled:l,readonly:d,formContext:w,autofocus:c,registry:g,placeholder:P,rawErrors:m})},rw=function(e){const{formData:t,onChange:i}=e;return(0,s.useEffect)((()=>{void 0===t&&i(null)}),[t,i]),null};function ow(e){const{idSchema:t,description:i,registry:s,schema:r,uiSchema:o}=e,n=Wg(o,s.globalUiOptions),{label:a=!0}=n;if(!i||!a)return null;const l=Lf("DescriptionFieldTemplate",s,n);return(0,Sg.jsx)(l,{id:Vf(t),description:i,schema:r,uiSchema:o,registry:s})}function nw(e){const{children:t,className:i,disabled:s,hasToolbar:r,hasMoveDown:o,hasMoveUp:n,hasRemove:a,hasCopy:l,index:d,onCopyIndexClick:c,onDropIndexClick:u,onReorderClick:h,readonly:p,registry:g,uiSchema:m}=e,{CopyButton:f,MoveDownButton:v,MoveUpButton:C,RemoveButton:y}=g.templates.ButtonTemplates,w={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return(0,Sg.jsxs)("div",{className:i,children:[(0,Sg.jsx)("div",{className:r?"col-xs-9":"col-xs-12",children:t}),r&&(0,Sg.jsx)("div",{className:"col-xs-3 array-item-toolbox",children:(0,Sg.jsxs)("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(n||o)&&(0,Sg.jsx)(C,{style:w,disabled:s||p||!n,onClick:h(d,d-1),uiSchema:m,registry:g}),(n||o)&&(0,Sg.jsx)(v,{style:w,disabled:s||p||!o,onClick:h(d,d+1),uiSchema:m,registry:g}),l&&(0,Sg.jsx)(f,{style:w,disabled:s||p,onClick:c(d),uiSchema:m,registry:g}),a&&(0,Sg.jsx)(y,{style:w,disabled:s||p,onClick:u(d),uiSchema:m,registry:g})]})})]})}function aw(e){const{canAdd:t,className:i,disabled:s,idSchema:r,uiSchema:o,items:n,onAddClick:a,readonly:l,registry:d,required:c,schema:u,title:h}=e,p=Wg(o),g=Lf("ArrayFieldDescriptionTemplate",d,p),m=Lf("ArrayFieldItemTemplate",d,p),f=Lf("ArrayFieldTitleTemplate",d,p),{ButtonTemplates:{AddButton:v}}=d.templates;return(0,Sg.jsxs)("fieldset",{className:i,id:r.$id,children:[(0,Sg.jsx)(f,{idSchema:r,title:p.title||h,required:c,schema:u,uiSchema:o,registry:d}),(0,Sg.jsx)(g,{idSchema:r,description:p.description||u.description,schema:u,uiSchema:o,registry:d}),(0,Sg.jsx)("div",{className:"row array-item-list",children:n&&n.map((({key:e,...t})=>(0,Sg.jsx)(m,{...t},e)))}),t&&(0,Sg.jsx)(v,{className:"array-item-add",onClick:a,disabled:s||l,uiSchema:o,registry:d})]})}function lw(e){const{idSchema:t,title:i,schema:s,uiSchema:r,required:o,registry:n}=e,a=Wg(r,n.globalUiOptions),{label:l=!0}=a;if(!i||!l)return null;const d=Lf("TitleFieldTemplate",n,a);return(0,Sg.jsx)(d,{id:_f(t),title:i,required:o,schema:s,uiSchema:r,registry:n})}function dw(e){const{id:t,name:i,value:r,readonly:o,disabled:n,autofocus:a,onBlur:l,onFocus:d,onChange:c,onChangeOverride:u,options:h,schema:p,uiSchema:g,formContext:m,registry:f,rawErrors:v,type:C,hideLabel:y,hideError:w,...S}=e;if(!t)throw console.log("No id for",e),new Error(`no id for props ${JSON.stringify(e)}`);const b={...S,...If(p,C,h)};let R;R="number"===b.type||"integer"===b.type?r||0===r?r:"":null==r?"":r;const E=(0,s.useCallback)((({target:{value:e}})=>c(""===e?h.emptyValue:e)),[c,h]),F=(0,s.useCallback)((({target:e})=>l(t,e&&e.value)),[l,t]),P=(0,s.useCallback)((({target:e})=>d(t,e&&e.value)),[d,t]);return(0,Sg.jsxs)(Sg.Fragment,{children:[(0,Sg.jsx)("input",{id:t,name:t,className:"form-control",readOnly:o,disabled:n,autoFocus:a,value:R,...b,list:p.examples?$f(t):void 0,onChange:u||E,onBlur:F,onFocus:P,"aria-describedby":zf(t,!!p.examples)}),Array.isArray(p.examples)&&(0,Sg.jsx)("datalist",{id:$f(t),children:p.examples.concat(p.default&&!p.examples.includes(p.default)?[p.default]:[]).map((e=>(0,Sg.jsx)("option",{value:e},e)))},`datalist_${t}`)]})}function cw({uiSchema:e}){const{submitText:t,norender:i,props:s={}}=function(e={}){const t=Wg(e);if(t&&t[Ng]){const e=t[Ng];return{...kf,...e}}return kf}(e);return i?null:(0,Sg.jsx)("div",{children:(0,Sg.jsx)("button",{type:"submit",...s,className:`btn btn-info ${s.className||""}`,children:t})})}function uw(e){const{iconType:t="default",icon:i,className:s,uiSchema:r,registry:o,...n}=e;return(0,Sg.jsx)("button",{type:"button",className:`btn btn-${t} ${s}`,...n,children:(0,Sg.jsx)("i",{className:`glyphicon glyphicon-${i}`})})}function hw(e){const{registry:{translateString:t}}=e;return(0,Sg.jsx)(uw,{title:t(sv.CopyButton),className:"array-item-copy",...e,icon:"copy"})}function pw(e){const{registry:{translateString:t}}=e;return(0,Sg.jsx)(uw,{title:t(sv.MoveDownButton),className:"array-item-move-down",...e,icon:"arrow-down"})}function gw(e){const{registry:{translateString:t}}=e;return(0,Sg.jsx)(uw,{title:t(sv.MoveUpButton),className:"array-item-move-up",...e,icon:"arrow-up"})}function mw(e){const{registry:{translateString:t}}=e;return(0,Sg.jsx)(uw,{title:t(sv.RemoveButton),className:"array-item-remove",...e,iconType:"danger",icon:"remove"})}function fw({className:e,onClick:t,disabled:i,registry:s}){const{translateString:r}=s;return(0,Sg.jsx)("div",{className:"row",children:(0,Sg.jsx)("p",{className:`col-xs-3 col-xs-offset-9 text-right ${e}`,children:(0,Sg.jsx)(uw,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:r(sv.AddButton),onClick:t,disabled:i,registry:s})})})}function vw(e){const{id:t,description:i}=e;return i?"string"==typeof i?(0,Sg.jsx)("p",{id:t,className:"field-description",children:i}):(0,Sg.jsx)("div",{id:t,className:"field-description",children:i}):null}function Cw({errors:e,registry:t}){const{translateString:i}=t;return(0,Sg.jsxs)("div",{className:"panel panel-danger errors",children:[(0,Sg.jsx)("div",{className:"panel-heading",children:(0,Sg.jsx)("h3",{className:"panel-title",children:i(sv.ErrorsLabel)})}),(0,Sg.jsx)("ul",{className:"list-group",children:e.map(((e,t)=>(0,Sg.jsx)("li",{className:"list-group-item text-danger",children:e.stack},t)))})]})}function yw(e){const{label:t,required:i,id:s}=e;return t?(0,Sg.jsxs)("label",{className:"control-label",htmlFor:s,children:[t,i&&(0,Sg.jsx)("span",{className:"required",children:"*"})]}):null}const ww=function(e){const{id:t,label:i,children:s,errors:r,help:o,description:n,hidden:a,required:l,displayLabel:d,registry:c,uiSchema:u}=e,h=Lf("WrapIfAdditionalTemplate",c,Wg(u));return a?(0,Sg.jsx)("div",{className:"hidden",children:s}):(0,Sg.jsxs)(h,{...e,children:[d&&(0,Sg.jsx)(yw,{label:i,required:l,id:t}),d&&n?n:null,s,r,o]})};function Sw(e){const{errors:t=[],idSchema:i}=e;if(0===t.length)return null;const s=Hf(i);return(0,Sg.jsx)("div",{children:(0,Sg.jsx)("ul",{id:s,className:"error-detail bs-callout bs-callout-info",children:t.filter((e=>!!e)).map(((e,t)=>(0,Sg.jsx)("li",{className:"text-danger",children:e},t)))})})}function bw(e){const{idSchema:t,help:i}=e;if(!i)return null;const s=Wf(t);return"string"==typeof i?(0,Sg.jsx)("p",{id:s,className:"help-block",children:i}):(0,Sg.jsx)("div",{id:s,className:"help-block",children:i})}function Rw(e){const{description:t,disabled:i,formData:s,idSchema:r,onAddClick:o,properties:n,readonly:a,registry:l,required:d,schema:c,title:u,uiSchema:h}=e,p=Wg(h),g=Lf("TitleFieldTemplate",l,p),m=Lf("DescriptionFieldTemplate",l,p),{ButtonTemplates:{AddButton:f}}=l.templates;return(0,Sg.jsxs)("fieldset",{id:r.$id,children:[u&&(0,Sg.jsx)(g,{id:_f(r),title:u,required:d,schema:c,uiSchema:h,registry:l}),t&&(0,Sg.jsx)(m,{id:Vf(r),description:t,schema:c,uiSchema:h,registry:l}),n.map((e=>e.content)),_g(c,h,s)&&(0,Sg.jsx)(f,{className:"object-property-expand",onClick:o(c),disabled:i||a,uiSchema:h,registry:l})]})}function Ew(e){const{id:t,title:i,required:s}=e;return(0,Sg.jsxs)("legend",{id:t,children:[i,s&&(0,Sg.jsx)("span",{className:"required",children:"*"})]})}const Fw=function(e){const{schema:t,idSchema:i,reason:s,registry:r}=e,{translateString:o}=r;let n=sv.UnsupportedField;const a=[];return i&&i.$id&&(n=sv.UnsupportedFieldWithId,a.push(i.$id)),s&&(n=n===sv.UnsupportedField?sv.UnsupportedFieldWithReason:sv.UnsupportedFieldWithIdAndReason,a.push(s)),(0,Sg.jsxs)("div",{className:"unsupported-field",children:[(0,Sg.jsx)("p",{children:(0,Sg.jsx)(Ky,{options:{disableParsingRawHTML:!0},children:o(n,a)})}),t&&(0,Sg.jsx)("pre",{children:JSON.stringify(t,null,2)})]})};function Pw(e){const{id:t,classNames:i,style:s,disabled:r,label:o,onKeyChange:n,onDropPropertyClick:a,readonly:l,required:d,schema:c,children:u,uiSchema:h,registry:p}=e,{templates:g,translateString:m}=p,{RemoveButton:f}=g.ButtonTemplates,v=m(sv.KeyLabel,[o]);return Eg in c?(0,Sg.jsx)("div",{className:i,style:s,children:(0,Sg.jsxs)("div",{className:"row",children:[(0,Sg.jsx)("div",{className:"col-xs-5 form-additional",children:(0,Sg.jsxs)("div",{className:"form-group",children:[(0,Sg.jsx)(yw,{label:v,required:d,id:`${t}-key`}),(0,Sg.jsx)("input",{className:"form-control",type:"text",id:`${t}-key`,onBlur:({target:e})=>n(e&&e.value),defaultValue:o})]})}),(0,Sg.jsx)("div",{className:"form-additional form-group col-xs-5",children:u}),(0,Sg.jsx)("div",{className:"col-xs-2",children:(0,Sg.jsx)(f,{className:"array-item-remove btn-block",style:{border:"0"},disabled:r||l,onClick:a(o),uiSchema:h,registry:p})})]})}):(0,Sg.jsx)("div",{className:i,style:s,children:u})}function xw({type:e,range:t,value:i,select:s,rootId:r,name:o,disabled:n,readonly:a,autofocus:l,registry:d,onBlur:c,onFocus:u}){const h=r+"_"+e,{SelectWidget:p}=d.widgets;return(0,Sg.jsx)(p,{schema:{type:"integer"},id:h,name:o,className:"form-control",options:{enumOptions:Sf(t[0],t[1])},placeholder:e,value:i,disabled:n,readonly:a,autofocus:l,onChange:t=>s(e,t),onBlur:c,onFocus:u,registry:d,label:"","aria-describedby":zf(r)})}const Dw=function({time:e=!1,disabled:t=!1,readonly:i=!1,autofocus:r=!1,options:o,id:n,name:a,registry:l,onBlur:d,onFocus:c,onChange:u,value:h}){const{translateString:p}=l,[g,m]=(0,s.useState)(h),[f,v]=(0,s.useReducer)(((e,t)=>({...e,...t})),qf(h,e));(0,s.useEffect)((()=>{const t=Yf(f,e);!function(e){return Object.values(e).every((e=>-1!==e))}(f)||t===h?g!==h&&(m(h),v(qf(h,e))):u(t)}),[e,h,u,f,g]);const C=(0,s.useCallback)(((e,t)=>{v({[e]:t})}),[]),y=(0,s.useCallback)((s=>{if(s.preventDefault(),t||i)return;const r=qf((new Date).toJSON(),e);u(Yf(r,e))}),[t,i,e]),w=(0,s.useCallback)((e=>{e.preventDefault(),t||i||u(void 0)}),[t,i,u]);return(0,Sg.jsxs)("ul",{className:"list-inline",children:[Tf(f,e,o.yearsRange,o.format).map(((e,s)=>(0,Sg.jsx)("li",{className:"list-inline-item",children:(0,Sg.jsx)(xw,{rootId:n,name:a,select:C,...e,disabled:t,readonly:i,registry:l,onBlur:d,onFocus:c,autofocus:r&&0===s})},s))),("undefined"===o.hideNowButton||!o.hideNowButton)&&(0,Sg.jsx)("li",{className:"list-inline-item",children:(0,Sg.jsx)("a",{href:"#",className:"btn btn-info btn-now",onClick:y,children:p(sv.NowLabel)})}),("undefined"===o.hideClearButton||!o.hideClearButton)&&(0,Sg.jsx)("li",{className:"list-inline-item",children:(0,Sg.jsx)("a",{href:"#",className:"btn btn-warning btn-clear",onClick:w,children:p(sv.ClearLabel)})})]})},Aw=function({time:e=!0,...t}){const{AltDateWidget:i}=t.registry.widgets;return(0,Sg.jsx)(i,{time:e,...t})},Tw=function({schema:e,uiSchema:t,options:i,id:r,value:o,disabled:n,readonly:a,label:l,hideLabel:d,autofocus:c=!1,onBlur:u,onFocus:h,onChange:p,registry:g}){var m;const f=Lf("DescriptionFieldTemplate",g,i),v=Kf(e),C=(0,s.useCallback)((e=>p(e.target.checked)),[p]),y=(0,s.useCallback)((e=>u(r,e.target.checked)),[u,r]),w=(0,s.useCallback)((e=>h(r,e.target.checked)),[h,r]),S=null!==(m=i.description)&&void 0!==m?m:e.description;return(0,Sg.jsxs)("div",{className:"checkbox "+(n||a?"disabled":""),children:[!d&&!!S&&(0,Sg.jsx)(f,{id:Vf(r),description:S,schema:e,uiSchema:t,registry:g}),(0,Sg.jsxs)("label",{children:[(0,Sg.jsx)("input",{type:"checkbox",id:r,name:r,checked:void 0!==o&&o,required:v,disabled:n||a,autoFocus:c,onChange:C,onBlur:y,onFocus:w,"aria-describedby":zf(r)}),jf((0,Sg.jsx)("span",{children:l}),d)]})]})},Mw=function({id:e,disabled:t,options:{inline:i=!1,enumOptions:r,enumDisabled:o,emptyValue:n},value:a,autofocus:l=!1,readonly:d,onChange:c,onBlur:u,onFocus:h}){const p=Array.isArray(a)?a:[a],g=(0,s.useCallback)((({target:t})=>u(e,Rf(t&&t.value,r,n))),[u,e]),m=(0,s.useCallback)((({target:t})=>h(e,Rf(t&&t.value,r,n))),[h,e]);return(0,Sg.jsx)("div",{className:"checkboxes",id:e,children:Array.isArray(r)&&r.map(((s,n)=>{const a=Ef(s.value,p),u=Array.isArray(o)&&-1!==o.indexOf(s.value),h=t||u||d?"disabled":"",f=(0,Sg.jsxs)("span",{children:[(0,Sg.jsx)("input",{type:"checkbox",id:Uf(e,n),name:e,checked:a,value:String(n),disabled:t||u||d,autoFocus:l&&0===n,onChange:e=>{e.target.checked?c(function(e,t,i=[]){const s=Rf(e,i);if(!Ym()(s)){const e=i.findIndex((e=>s===e.value)),r=i.map((({value:e})=>e));return t.slice(0,e).concat(s,t.slice(e)).sort(((e,t)=>Number(r.indexOf(e)>r.indexOf(t))))}return t}(n,p,r)):c(function(e,t,i=[]){const s=Rf(e,i);return Array.isArray(t)?t.filter((e=>!Yg(e,s))):Yg(s,t)?void 0:t}(n,p,r))},onBlur:g,onFocus:m,"aria-describedby":zf(e)}),(0,Sg.jsx)("span",{children:s.label})]});return i?(0,Sg.jsx)("label",{className:`checkbox-inline ${h}`,children:f},n):(0,Sg.jsx)("div",{className:`checkbox ${h}`,children:(0,Sg.jsx)("label",{children:f})},n)}))})};function Iw(e){const{disabled:t,readonly:i,options:s,registry:r}=e,o=Lf("BaseInputTemplate",r,s);return(0,Sg.jsx)(o,{type:"color",...e,disabled:t||i})}function kw(e){const{onChange:t,options:i,registry:r}=e,o=Lf("BaseInputTemplate",r,i),n=(0,s.useCallback)((e=>t(e||void 0)),[t]);return(0,Sg.jsx)(o,{type:"date",...e,onChange:n})}function Lw(e){const{onChange:t,value:i,options:s,registry:r}=e,o=Lf("BaseInputTemplate",r,s);return(0,Sg.jsx)(o,{type:"datetime-local",...e,value:ev(i),onChange:e=>{return t((i=e)?new Date(i).toJSON():void 0);var i}})}function Ow(e){const{options:t,registry:i}=e,s=Lf("BaseInputTemplate",i,t);return(0,Sg.jsx)(s,{type:"email",...e})}function Nw(e,t){return null===e?null:e.replace(";base64",`;name=${encodeURIComponent(t)};base64`)}function Gw(e){const{name:t,size:i,type:s}=e;return new Promise(((r,o)=>{const n=new window.FileReader;n.onerror=o,n.onload=e=>{var o;"string"==typeof(null===(o=e.target)||void 0===o?void 0:o.result)?r({dataURL:Nw(e.target.result,t),name:t,size:i,type:s}):r({dataURL:null,name:t,size:i,type:s})},n.readAsDataURL(e)}))}function Bw({fileInfo:e,registry:t}){const{translateString:i}=t,{dataURL:s,type:r,name:o}=e;return s?["image/jpeg","image/png"].includes(r)?(0,Sg.jsx)("img",{src:s,style:{maxWidth:"100%"},className:"file-preview"}):(0,Sg.jsxs)(Sg.Fragment,{children:[" ",(0,Sg.jsx)("a",{download:`preview-${o}`,href:s,className:"file-download",children:i(sv.PreviewLabel)})]}):null}function Vw({filesInfo:e,registry:t,preview:i,onRemove:s,options:r}){if(0===e.length)return null;const{translateString:o}=t,{RemoveButton:n}=Lf("ButtonTemplates",t,r);return(0,Sg.jsx)("ul",{className:"file-info",children:e.map(((e,r)=>{const{name:a,size:l,type:d}=e;return(0,Sg.jsxs)("li",{children:[(0,Sg.jsx)(Ky,{children:o(sv.FilesInfo,[a,d,String(l)])}),i&&(0,Sg.jsx)(Bw,{fileInfo:e,registry:t}),(0,Sg.jsx)(n,{onClick:()=>s(r),registry:t})]},r)}))})}const Hw=function(e){const{disabled:t,readonly:i,required:r,multiple:o,onChange:n,value:a,options:l,registry:d}=e,c=Lf("BaseInputTemplate",d,l),u=(0,s.useCallback)((e=>{var t;e.target.files&&(t=e.target.files,Promise.all(Array.from(t).map(Gw))).then((e=>{const t=e.map((e=>e.dataURL));n(o?a.concat(t):t[0])}))}),[o,a,n]),h=(0,s.useMemo)((()=>(Array.isArray(a)?a:[a]).reduce(((e,t)=>{if(!t)return e;try{const{blob:i,name:s}=function(e){var t;if(-1===e.indexOf("data:"))throw new Error("File is invalid: URI must be a dataURI");const i=e.slice(5).split(";base64,");if(2!==i.length)throw new Error("File is invalid: dataURI must be base64");const[s,r]=i,[o,...n]=s.split(";"),a=o||"",l=decodeURI((null===(t=n.map((e=>e.split("="))).find((([e])=>"name"===e)))||void 0===t?void 0:t[1])||"unknown");try{const e=atob(r),t=new Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return{blob:new window.Blob([new Uint8Array(t)],{type:a}),name:l}}catch(e){throw new Error("File is invalid: "+e.message)}}(t);return[...e,{dataURL:t,name:s,size:i.size,type:i.type}]}catch(t){return e}}),[])),[a]),p=(0,s.useCallback)((e=>{if(o){const t=a.filter(((t,i)=>i!==e));n(t)}else n(void 0)}),[o,a,n]);return(0,Sg.jsxs)("div",{children:[(0,Sg.jsx)(c,{...e,disabled:t||i,type:"file",required:!a&&r,onChangeOverride:u,value:"",accept:l.accept?String(l.accept):void 0}),(0,Sg.jsx)(Vw,{filesInfo:h,onRemove:p,registry:d,preview:l.filePreview,options:l})]})},$w=function({id:e,value:t}){return(0,Sg.jsx)("input",{type:"hidden",id:e,name:e,value:void 0===t?"":t})};function Ww(e){const{options:t,registry:i}=e,s=Lf("BaseInputTemplate",i,t);return(0,Sg.jsx)(s,{type:"password",...e})}const _w=function({options:e,value:t,required:i,disabled:r,readonly:o,autofocus:n=!1,onBlur:a,onFocus:l,onChange:d,id:c}){const{enumOptions:u,enumDisabled:h,inline:p,emptyValue:g}=e,m=(0,s.useCallback)((({target:e})=>a(c,Rf(e&&e.value,u,g))),[a,c]),f=(0,s.useCallback)((({target:e})=>l(c,Rf(e&&e.value,u,g))),[l,c]);return(0,Sg.jsx)("div",{className:"field-radio-group",id:c,children:Array.isArray(u)&&u.map(((e,s)=>{const a=Ef(e.value,t),l=Array.isArray(h)&&-1!==h.indexOf(e.value),u=r||l||o?"disabled":"",g=(0,Sg.jsxs)("span",{children:[(0,Sg.jsx)("input",{type:"radio",id:Uf(c,s),checked:a,name:c,required:i,value:String(s),disabled:r||l||o,autoFocus:n&&0===s,onChange:()=>d(e.value),onBlur:m,onFocus:f,"aria-describedby":zf(c)}),(0,Sg.jsx)("span",{children:e.label})]});return p?(0,Sg.jsx)("label",{className:`radio-inline ${u}`,children:g},s):(0,Sg.jsx)("div",{className:`radio ${u}`,children:(0,Sg.jsx)("label",{children:g})},s)}))})};function zw(e){const{value:t,registry:{templates:{BaseInputTemplate:i}}}=e;return(0,Sg.jsxs)("div",{className:"field-range-wrapper",children:[(0,Sg.jsx)(i,{type:"range",...e}),(0,Sg.jsx)("span",{className:"range-view",children:t})]})}function Uw(e,t){return t?Array.from(e.target.options).slice().filter((e=>e.selected)).map((e=>e.value)):e.target.value}const jw=function({schema:e,id:t,options:i,value:r,required:o,disabled:n,readonly:a,multiple:l=!1,autofocus:d=!1,onChange:c,onBlur:u,onFocus:h,placeholder:p}){const{enumOptions:g,enumDisabled:m,emptyValue:f}=i,v=l?[]:"",C=(0,s.useCallback)((e=>{const i=Uw(e,l);return h(t,Rf(i,g,f))}),[h,t,e,l,g,f]),y=(0,s.useCallback)((e=>{const i=Uw(e,l);return u(t,Rf(i,g,f))}),[u,t,e,l,g,f]),w=(0,s.useCallback)((e=>{const t=Uw(e,l);return c(Rf(t,g,f))}),[c,e,l,g,f]),S=function(e,t=[],i=!1){const s=t.map(((t,i)=>Ef(t.value,e)?String(i):void 0)).filter((e=>void 0!==e));return i?s:s[0]}(r,g,l),b=!l&&void 0===e.default;return(0,Sg.jsxs)("select",{id:t,name:t,multiple:l,className:"form-control",value:void 0===S?v:S,required:o,disabled:n||a,autoFocus:d,onBlur:y,onFocus:C,onChange:w,"aria-describedby":zf(t),children:[b&&(0,Sg.jsx)("option",{value:"",children:p}),Array.isArray(g)&&g.map((({value:e,label:t},i)=>{const s=m&&-1!==m.indexOf(e);return(0,Sg.jsx)("option",{value:String(i),disabled:s,children:t},i)}))]})};function qw({id:e,options:t={},placeholder:i,value:r,required:o,disabled:n,readonly:a,autofocus:l=!1,onChange:d,onBlur:c,onFocus:u}){const h=(0,s.useCallback)((({target:{value:e}})=>d(""===e?t.emptyValue:e)),[d,t.emptyValue]),p=(0,s.useCallback)((({target:t})=>c(e,t&&t.value)),[c,e]),g=(0,s.useCallback)((({target:t})=>u(e,t&&t.value)),[e,u]);return(0,Sg.jsx)("textarea",{id:e,name:e,className:"form-control",value:r||"",placeholder:i,required:o,disabled:n,readOnly:a,autoFocus:l,rows:t.rows,onBlur:p,onFocus:g,onChange:h,"aria-describedby":zf(e)})}qw.defaultProps={autofocus:!1,options:{}};const Kw=qw;function Yw(e){const{options:t,registry:i}=e,s=Lf("BaseInputTemplate",i,t);return(0,Sg.jsx)(s,{...e})}function Qw(e){const{onChange:t,options:i,registry:r}=e,o=Lf("BaseInputTemplate",r,i),n=(0,s.useCallback)((e=>t(e?`${e}:00`:void 0)),[t]);return(0,Sg.jsx)(o,{type:"time",...e,onChange:n})}function Jw(e){const{options:t,registry:i}=e,s=Lf("BaseInputTemplate",i,t);return(0,Sg.jsx)(s,{type:"url",...e})}function Xw(e){const{options:t,registry:i}=e,s=Lf("BaseInputTemplate",i,t);return(0,Sg.jsx)(s,{type:"number",...e})}class Zw extends s.Component{constructor(e){if(super(e),this.getUsedFormData=(e,t)=>{if(0===t.length&&"object"!=typeof e)return e;const i=F()(e,t);return Array.isArray(e)?Object.keys(i).map((e=>i[e])):i},this.getFieldNames=(e,t)=>{const i=(e,s=[],r=[[]])=>(Object.keys(e).forEach((o=>{if("object"==typeof e[o]){const t=r.map((e=>[...e,o]));e[o][Bg]&&""!==e[o][kg]?s.push(e[o][kg]):i(e[o],s,t)}else o===kg&&""!==e[o]&&r.forEach((e=>{const i=Jg()(t,e);("object"!=typeof i||B()(i)||Array.isArray(i)&&i.every((e=>"object"!=typeof e)))&&s.push(e)}))})),s);return i(e)},this.omitExtraData=e=>{const{schema:t,schemaUtils:i}=this.state,s=i.retrieveSchema(t,e),r=i.toPathSchema(s,"",e),o=this.getFieldNames(r,e);return this.getUsedFormData(e,o)},this.onChange=(e,t,i)=>{const{extraErrors:s,omitExtraData:r,liveOmit:o,noValidate:n,liveValidate:a,onChange:l}=this.props,{schemaUtils:d,schema:c}=this.state;let u=this.state.retrievedSchema;if(bg(e)||Array.isArray(e)){const t=this.getStateFromProps(this.props,e);e=t.formData,u=t.retrievedSchema}const h=!n&&a;let p={formData:e,schema:c},g=e;if(!0===r&&!0===o&&(g=this.omitExtraData(e),p={formData:g}),h){const e=this.validate(g,c,d,u);let i=e.errors,r=e.errorSchema;const o=i,n=r;if(s){const t=tv(e,s);r=t.errorSchema,i=t.errors}t&&(r=Jm(r,this.filterErrorsBasedOnSchema(t,u,g),"preventDuplicates")),p={formData:g,errors:i,errorSchema:r,schemaValidationErrors:o,schemaValidationErrorSchema:n}}else if(!n&&t){const e=s?Jm(t,s,"preventDuplicates"):t;p={formData:g,errorSchema:e,errors:Qf(e)}}this.setState(p,(()=>l&&l({...this.state,...p},i)))},this.reset=()=>{const{onChange:e}=this.props,t={formData:this.getStateFromProps(this.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};this.setState(t,(()=>e&&e({...this.state,...t})))},this.onBlur=(e,t)=>{const{onBlur:i}=this.props;i&&i(e,t)},this.onFocus=(e,t)=>{const{onFocus:i}=this.props;i&&i(e,t)},this.onSubmit=e=>{if(e.preventDefault(),e.target!==e.currentTarget)return;e.persist();const{omitExtraData:t,extraErrors:i,noValidate:s,onSubmit:r}=this.props;let{formData:o}=this.state;if(!0===t&&(o=this.omitExtraData(o)),s||this.validateFormWithFormData(o)){const t=i||{},s=i?Qf(i):[];this.setState({formData:o,errors:s,errorSchema:t,schemaValidationErrors:[],schemaValidationErrorSchema:{}},(()=>{r&&r({...this.state,formData:o,status:"submitted"},e)}))}},this.submit=()=>{if(this.formElement.current){const e=new CustomEvent("submit",{cancelable:!0});e.preventDefault(),this.formElement.current.dispatchEvent(e),this.formElement.current.requestSubmit()}},this.validateFormWithFormData=e=>{const{extraErrors:t,extraErrorsBlockSubmit:i,focusOnFirstError:s,onError:r}=this.props,{errors:o}=this.state,n=this.validate(e);let a=n.errors,l=n.errorSchema;const d=a,c=l,u=a.length>0||t&&i;if(u){if(t){const e=tv(n,t);l=e.errorSchema,a=e.errors}s&&("function"==typeof s?s(a[0]):this.focusOnError(a[0])),this.setState({errors:a,errorSchema:l,schemaValidationErrors:d,schemaValidationErrorSchema:c},(()=>{r?r(a):console.error("Form validation failed",a)}))}else o.length>0&&this.setState({errors:[],errorSchema:{},schemaValidationErrors:[],schemaValidationErrorSchema:{}});return!u},!e.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(e,e.formData),this.props.onChange&&!Yg(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=(0,s.createRef)()}getSnapshotBeforeUpdate(e,t){if(!Yg(this.props,e)){const i=function(e,t){const i=Ug()(e),s=Ug()(t);return e===t||!i&&!s?[]:i&&!s?ov()(e):!i&&s?ov()(t):[...ov()(av()(e,((e,i)=>!Yg(e,Jg()(t,i))))),...dv()(ov()(t),ov()(e))]}(this.props.formData,e.formData),s=!Yg(e.schema,this.props.schema),r=i.length>0||!Yg(e.formData,this.props.formData),o=this.getStateFromProps(this.props,this.props.formData,s||r?void 0:this.state.retrievedSchema,s,i);return{nextState:o,shouldUpdate:!Yg(o,t)}}return{shouldUpdate:!1}}componentDidUpdate(e,t,i){if(i.shouldUpdate){const{nextState:e}=i;Yg(e.formData,this.props.formData)||Yg(e.formData,t.formData)||!this.props.onChange||this.props.onChange(e),this.setState(e)}}getStateFromProps(e,t,i,s=!1,r=[]){var o;const n=this.state||{},a="schema"in e?e.schema:this.props.schema,l=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},d=void 0!==t,c="liveValidate"in e?e.liveValidate:this.props.liveValidate,u=d&&!e.noValidate&&c,h=a,p="experimental_defaultFormStateBehavior"in e?e.experimental_defaultFormStateBehavior:this.props.experimental_defaultFormStateBehavior,g="experimental_customMergeAllOf"in e?e.experimental_customMergeAllOf:this.props.experimental_customMergeAllOf;let m=n.schemaUtils;m&&!m.doesSchemaUtilsDiffer(e.validator,h,p,g)||(m=function(e,t,i={},s){return new yf(e,t,i,s)}(e.validator,h,p,g));const f=m.getDefaultFormState(a,t),v=this.updateRetrievedSchema(null!=i?i:m.retrieveSchema(a,f));let C,y,w=n.schemaValidationErrors,S=n.schemaValidationErrorSchema;if(u){const e=this.validate(f,a,m,v);C=e.errors,y=void 0===i?e.errorSchema:Jm(null===(o=this.state)||void 0===o?void 0:o.errorSchema,e.errorSchema,"preventDuplicates"),w=C,S=y}else{const t=e.noValidate||s?{errors:[],errorSchema:{}}:e.liveValidate?{errors:n.errors||[],errorSchema:n.errorSchema||{}}:{errors:n.schemaValidationErrors||[],errorSchema:n.schemaValidationErrorSchema||{}};if(C=t.errors,y=t.errorSchema,r.length>0){const e=r.reduce(((e,t)=>(e[t]=void 0,e)),{});y=S=Jm(t.errorSchema,e,"preventDuplicates")}}if(e.extraErrors){const t=tv({errorSchema:y,errors:C},e.extraErrors);y=t.errorSchema,C=t.errors}const b=m.toIdSchema(v,l["ui:rootFieldId"],f,e.idPrefix,e.idSeparator);return{schemaUtils:m,schema:a,uiSchema:l,idSchema:b,formData:f,edit:d,errors:C,errorSchema:y,schemaValidationErrors:w,schemaValidationErrorSchema:S,retrievedSchema:v}}shouldComponentUpdate(e,t){return function(e,t,i){const{props:s,state:r}=e;return!Yg(s,t)||!Yg(r,i)}(this,e,t)}validate(e,t=this.props.schema,i,s){const r=i||this.state.schemaUtils,{customValidate:o,transformErrors:n,uiSchema:a}=this.props,l=null!=s?s:r.retrieveSchema(t,e);return r.getValidator().validateFormData(e,l,o,n,a)}renderErrors(e){const{errors:t,errorSchema:i,schema:s,uiSchema:r}=this.state,{formContext:o}=this.props,n=Lf("ErrorListTemplate",e,Wg(r));return t&&t.length?(0,Sg.jsx)(n,{errors:t,errorSchema:i||{},schema:s,uiSchema:r,formContext:o,registry:e}):null}filterErrorsBasedOnSchema(e,t,i){const{retrievedSchema:s,schemaUtils:r}=this.state,o=null!=t?t:s,n=r.toPathSchema(o,"",i),a=this.getFieldNames(n,i),l=F()(e,a);"object"!==(null==t?void 0:t.type)&&"array"!==(null==t?void 0:t.type)&&(l.__errors=e.__errors);const d=e=>(uv()(e,((t,i)=>{Ym()(t)?delete e[i]:"object"!=typeof t||Array.isArray(t.__errors)||d(t)})),e);return d(l)}updateRetrievedSchema(e){var t;return Yg(e,null===(t=this.state)||void 0===t?void 0:t.retrievedSchema)?this.state.retrievedSchema:e}getRegistry(){var e;const{translateString:t,uiSchema:i={}}=this.props,{schemaUtils:s}=this.state,{fields:r,templates:o,widgets:n,formContext:a,translateString:l}={fields:{AnyOfField:yv,ArrayField:fv,BooleanField:vv,NumberField:bv,ObjectField:Xy,OneOfField:yv,SchemaField:iw,StringField:sw,NullField:rw},templates:{ArrayFieldDescriptionTemplate:ow,ArrayFieldItemTemplate:nw,ArrayFieldTemplate:aw,ArrayFieldTitleTemplate:lw,ButtonTemplates:{SubmitButton:cw,AddButton:fw,CopyButton:hw,MoveDownButton:pw,MoveUpButton:gw,RemoveButton:mw},BaseInputTemplate:dw,DescriptionFieldTemplate:vw,ErrorListTemplate:Cw,FieldTemplate:ww,FieldErrorTemplate:Sw,FieldHelpTemplate:bw,ObjectFieldTemplate:Rw,TitleFieldTemplate:Ew,UnsupportedFieldTemplate:Fw,WrapIfAdditionalTemplate:Pw},widgets:{AltDateWidget:Dw,AltDateTimeWidget:Aw,CheckboxWidget:Tw,CheckboxesWidget:Mw,ColorWidget:Iw,DateWidget:kw,DateTimeWidget:Lw,EmailWidget:Ow,FileWidget:Hw,HiddenWidget:$w,PasswordWidget:Ww,RadioWidget:_w,RangeWidget:zw,SelectWidget:jw,TextWidget:Yw,TextareaWidget:Kw,TimeWidget:Qw,UpDownWidget:Xw,URLWidget:Jw},rootSchema:{},formContext:{},translateString:bf};return{fields:{...r,...this.props.fields},templates:{...o,...this.props.templates,ButtonTemplates:{...o.ButtonTemplates,...null===(e=this.props.templates)||void 0===e?void 0:e.ButtonTemplates}},widgets:{...n,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||a,schemaUtils:s,translateString:t||l,globalUiOptions:i["ui:globalOptions"]}}focusOnError(e){const{idPrefix:t="root",idSeparator:i="_"}=this.props,{property:s}=e,r=Xf()(s);""===r[0]?r[0]=t:r.unshift(t);const o=r.join(i);let n=this.formElement.current.elements[o];n||(n=this.formElement.current.querySelector(`input[id^="${o}"`)),n&&n.length&&(n=n[0]),n&&n.focus()}validateForm(){const{omitExtraData:e}=this.props;let{formData:t}=this.state;return!0===e&&(t=this.omitExtraData(t)),this.validateFormWithFormData(t)}render(){const{children:e,id:t,idPrefix:i,idSeparator:s,className:r="",tagName:o,name:n,method:a,target:l,action:d,autoComplete:c,enctype:u,acceptcharset:h,acceptCharset:p,noHtml5Validate:g=!1,disabled:m,readonly:f,formContext:v,showErrorList:C="top",_internalFormWrapper:y}=this.props,{schema:w,uiSchema:S,formData:b,errorSchema:R,idSchema:E}=this.state,F=this.getRegistry(),{SchemaField:P}=F.fields,{SubmitButton:x}=F.templates.ButtonTemplates,D=y?o:void 0,A=y||o||"form";let{[Ng]:T={}}=Wg(S);m&&(T={...T,props:{...T.props,disabled:!0}});const M={[$g]:{[Ng]:T}};return(0,Sg.jsxs)(A,{className:r||"rjsf",id:t,name:n,method:a,target:l,action:d,autoComplete:c,encType:u,acceptCharset:p||h,noValidate:g,onSubmit:this.onSubmit,as:D,ref:this.formElement,children:["top"===C&&this.renderErrors(F),(0,Sg.jsx)(P,{name:"",schema:w,uiSchema:S,errorSchema:R,idSchema:E,idPrefix:i,idSeparator:s,formContext:v,formData:b,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:F,disabled:m,readonly:f}),e||(0,Sg.jsx)(x,{uiSchema:M,registry:F}),"bottom"===C&&this.renderErrors(F)]})}}const eS=Zw;var tS=i(63282),iS=i.n(tS),sS=i(68182),rS=i.n(sS);const oS={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!1},nS=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,aS=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;function lS(e,t,i,s,r,o,n){const{validationError:a}=t;let l=function(e=[],t){return e.map((e=>{var i;const{instancePath:s,keyword:r,params:o,schemaPath:n,parentSchema:a,...l}=e;let{message:d=""}=l,c=s.replace(/\//g,"."),u=`${c} ${d}`.trim();const h=[...(null===(i=o.deps)||void 0===i?void 0:i.split(", "))||[],o.missingProperty,o.property].filter((e=>e));if(h.length>0)h.forEach((e=>{const i=c?`${c}.${e}`:e;let s=Wg(Jg()(t,`${i.replace(/^\./,"")}`)).title;if(void 0===s){const i=n.replace(/\/properties\//g,"/").split("/").slice(1,-1).concat([e]);s=Wg(Jg()(t,i)).title}if(s)d=d.replace(`'${e}'`,`'${s}'`);else{const t=Jg()(a,[Og,e,"title"]);t&&(d=d.replace(`'${e}'`,`'${t}'`))}})),u=d;else{const e=Wg(Jg()(t,`${c.replace(/^\./,"")}`)).title;if(e)u=`'${e}' ${d}`.trim();else{const e=null==a?void 0:a.title;e&&(u=`'${e}' ${d}`.trim())}}return"missingProperty"in o&&(c=c?`${c}.${o.missingProperty}`:o.missingProperty),{name:r,property:c,message:d,params:o,stack:u,schemaPath:n}}))}(t.errors,n);a&&(l=[...l,{stack:a.message}]),"function"==typeof o&&(l=o(l,n));let d=function(e){const t=new Af;return e.length&&e.forEach((e=>{const{property:i,message:s}=e,r="."===i?[]:Xf()(i);r.length>0&&""===r[0]&&r.splice(0,1),s&&t.addErrors(s,r)})),t.ErrorSchema}(l);if(a&&(d={...d,$schema:{__errors:[a.message]}}),"function"!=typeof r)return{errors:l,errorSchema:d};const c=cf(e,s,i,s,!0);return tv({errors:l,errorSchema:d},Zf(r(c,jg(c),n)))}class dS{constructor(e,t){const{additionalMetaSchemas:i,customFormats:s,ajvOptionsOverrides:r,ajvFormatOptions:o,AjvClass:n}=e;this.ajv=function(e,t,i={},s,r=iS()){const o=new r({...oS,...i});return s?rS()(o,s):!1!==s&&rS()(o),o.addFormat("data-url",aS),o.addFormat("color",nS),o.addKeyword(Eg),o.addKeyword(Bg),Array.isArray(e)&&o.addMetaSchema(e),am()(t)&&Object.keys(t).forEach((e=>{o.addFormat(e,t[e])})),o}(i,s,r,o,n),this.localizer=t}reset(){this.ajv.removeSchema()}toErrorList(e,t=[]){return Qf(e,t)}rawValidation(e,t){var i,s;let r,o,n;e[Mg]&&(o=this.ajv.getSchema(e[Mg]));try{void 0===o&&(o=this.ajv.compile(e)),o(t)}catch(e){r=e}return o&&("function"==typeof this.localizer&&((null!==(i=o.errors)&&void 0!==i?i:[]).forEach((e=>{var t;["missingProperty","property"].forEach((t=>{var i;(null===(i=e.params)||void 0===i?void 0:i[t])&&(e.params[t]=`'${e.params[t]}'`)})),(null===(t=e.params)||void 0===t?void 0:t.deps)&&(e.params.deps=e.params.deps.split(", ").map((e=>`'${e}'`)).join(", "))})),this.localizer(o.errors),(null!==(s=o.errors)&&void 0!==s?s:[]).forEach((e=>{var t;["missingProperty","property"].forEach((t=>{var i;(null===(i=e.params)||void 0===i?void 0:i[t])&&(e.params[t]=e.params[t].slice(1,-1))})),(null===(t=e.params)||void 0===t?void 0:t.deps)&&(e.params.deps=e.params.deps.split(", ").map((e=>e.slice(1,-1))).join(", "))}))),n=o.errors||void 0,o.errors=null),{errors:n,validationError:r}}validateFormData(e,t,i,s,r){return lS(this,this.rawValidation(t,e),e,t,i,s,r)}handleSchemaUpdate(e){var t,i;const s=null!==(t=e[Mg])&&void 0!==t?t:Vg;void 0===this.ajv.getSchema(s)?this.ajv.addSchema(e,s):Yg(e,null===(i=this.ajv.getSchema(s))||void 0===i?void 0:i.schema)||(this.ajv.removeSchema(s),this.ajv.addSchema(e,s))}isValid(e,t,i){var s;try{this.handleSchemaUpdate(i);const r=iv(e),o=null!==(s=r[Mg])&&void 0!==s?s:function(e){const t=new Set;return JSON.stringify(e,((e,i)=>(t.add(e),i))),function(e){let t=0;for(let i=0;i<e.length;i+=1)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t.toString(16)}(JSON.stringify(e,Array.from(t).sort()))}(r);let n;return n=this.ajv.getSchema(o),void 0===n&&(n=this.ajv.addSchema(r,o).getSchema(o)||this.ajv.compile(r)),n(t)}catch(e){return console.warn("Error encountered compiling schema:",e),!1}}}const cS=function(e={}){return new dS(e,void 0)}();var uS,hS,pS,gS,mS=i(41816),fS=i(74353);function vS(e,t){e.assign("day",t.date()),e.assign("month",t.month()+1),e.assign("year",t.year())}function CS(e,t){e.assign("hour",t.hour()),e.assign("minute",t.minute()),e.assign("second",t.second()),e.assign("millisecond",t.millisecond()),e.get("hour")<12?e.assign("meridiem",uS.AM):e.assign("meridiem",uS.PM)}function yS(e,t){e.imply("day",t.date()),e.imply("month",t.month()+1),e.imply("year",t.year())}function wS(e,t){e.imply("hour",t.hour()),e.imply("minute",t.minute()),e.imply("second",t.second()),e.imply("millisecond",t.millisecond())}(gS=uS||(uS={}))[gS.AM=0]="AM",gS[gS.PM=1]="PM",function(e){e[e.SUNDAY=0]="SUNDAY",e[e.MONDAY=1]="MONDAY",e[e.TUESDAY=2]="TUESDAY",e[e.WEDNESDAY=3]="WEDNESDAY",e[e.THURSDAY=4]="THURSDAY",e[e.FRIDAY=5]="FRIDAY",e[e.SATURDAY=6]="SATURDAY"}(hS||(hS={})),function(e){e[e.JANUARY=1]="JANUARY",e[e.FEBRUARY=2]="FEBRUARY",e[e.MARCH=3]="MARCH",e[e.APRIL=4]="APRIL",e[e.MAY=5]="MAY",e[e.JUNE=6]="JUNE",e[e.JULY=7]="JULY",e[e.AUGUST=8]="AUGUST",e[e.SEPTEMBER=9]="SEPTEMBER",e[e.OCTOBER=10]="OCTOBER",e[e.NOVEMBER=11]="NOVEMBER",e[e.DECEMBER=12]="DECEMBER"}(pS||(pS={}));const SS={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:120,timezoneOffsetNonDst:60,dstStart:e=>RS(e,pS.MARCH,hS.SUNDAY,2),dstEnd:e=>RS(e,pS.OCTOBER,hS.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-300,timezoneOffsetNonDst:-360,dstStart:e=>bS(e,pS.MARCH,hS.SUNDAY,2,2),dstEnd:e=>bS(e,pS.NOVEMBER,hS.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-240,timezoneOffsetNonDst:-300,dstStart:e=>bS(e,pS.MARCH,hS.SUNDAY,2,2),dstEnd:e=>bS(e,pS.NOVEMBER,hS.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-360,timezoneOffsetNonDst:-420,dstStart:e=>bS(e,pS.MARCH,hS.SUNDAY,2,2),dstEnd:e=>bS(e,pS.NOVEMBER,hS.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-420,timezoneOffsetNonDst:-480,dstStart:e=>bS(e,pS.MARCH,hS.SUNDAY,2,2),dstEnd:e=>bS(e,pS.NOVEMBER,hS.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function bS(e,t,i,s,r=0){let o=0,n=0;for(;n<s;)o++,new Date(e,t-1,o).getDay()===i&&n++;return new Date(e,t-1,o,r)}function RS(e,t,i,s=0){const r=0===i?7:i,o=new Date(e,t-1+1,1,12),n=0===o.getDay()?7:o.getDay();let a;return a=n===r?7:n<r?7+n-r:n-r,o.setDate(o.getDate()-a),new Date(e,t-1,o.getDate(),s)}function ES(e,t,i={}){if(null==e)return null;if("number"==typeof e)return e;const s=i[e]??SS[e];return null==s?null:"number"==typeof s?s:null==t?null:fS(t).isAfter(s.dstStart(t.getFullYear()))&&!fS(t).isAfter(s.dstEnd(t.getFullYear()))?s.timezoneOffsetDuringDst:s.timezoneOffsetNonDst}fS.extend(mS);class FS{constructor(e){(e=e??new Date)instanceof Date?this.instant=e:(this.instant=e.instant??new Date,this.timezoneOffset=ES(e.timezone,this.instant))}getDateWithAdjustedTimezone(){return new Date(this.instant.getTime()+6e4*this.getSystemTimezoneAdjustmentMinute(this.instant))}getSystemTimezoneAdjustmentMinute(e,t){(!e||e.getTime()<0)&&(e=new Date);const i=-e.getTimezoneOffset();return i-(t??this.timezoneOffset??i)}}class PS{constructor(e,t){if(this._tags=new Set,this.reference=e,this.knownValues={},this.impliedValues={},t)for(const e in t)this.knownValues[e]=t[e];const i=fS(e.instant);this.imply("day",i.date()),this.imply("month",i.month()+1),this.imply("year",i.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues||(this.impliedValues[e]=t),this}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){const e=new PS(this.reference);e.knownValues={},e.impliedValues={};for(const t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(const t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!(this.isCertain("weekday")||this.isCertain("day")||this.isCertain("month")||this.isCertain("year"))}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){const e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||null!=this.get("hour")&&e.getHours()!=this.get("hour")||null!=this.get("minute")&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {\n            tags: ${JSON.stringify(Array.from(this._tags).sort())}, \n            knownValues: ${JSON.stringify(this.knownValues)}, \n            impliedValues: ${JSON.stringify(this.impliedValues)}}, \n            reference: ${JSON.stringify(this.reference)}]`}dayjs(){return fS(this.date())}date(){const e=this.dateWithoutTimezoneAdjustment(),t=this.reference.getSystemTimezoneAdjustmentMinute(e,this.get("timezoneOffset"));return new Date(e.getTime()+6e4*t)}addTag(e){return this._tags.add(e),this}addTags(e){for(const t of e)this._tags.add(t);return this}tags(){return new Set(this._tags)}dateWithoutTimezoneAdjustment(){const e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}static createRelativeFromReference(e,t){let i=fS(e.instant);for(const e in t)i=i.add(t[e],e);const s=new PS(e);return t.hour||t.minute||t.second?(CS(s,i),vS(s,i),null!==e.timezoneOffset&&s.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(wS(s,i),null!==e.timezoneOffset&&s.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year())):t.week?(s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s.imply("weekday",i.day())):(s.imply("day",i.date()),t.month?(s.assign("month",i.month()+1),s.assign("year",i.year())):(s.imply("month",i.month()+1),t.year?s.assign("year",i.year()):s.imply("year",i.year())))),s}}class xS{constructor(e,t,i,s,r){this.reference=e,this.refDate=e.instant,this.index=t,this.text=i,this.start=s||new PS(e),this.end=r}clone(){const e=new xS(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}tags(){const e=new Set(this.start.tags());if(this.end)for(const t of this.end.tags())e.add(t);return e}toString(){const e=Array.from(this.tags()).sort();return`[ParsingResult {index: ${this.index}, text: '${this.text}', tags: ${JSON.stringify(e)} ...}]`}}function DS(e,t,i="\\s{0,5},?\\s{0,5}"){const s=t.replace(/\((?!\?)/g,"(?:");return`${e}${s}(?:${i}${s}){0,10}`}function AS(e){const t=function(e){let t;return t=e instanceof Array?[...e]:e instanceof Map?Array.from(e.keys()):Object.keys(e),t}(e).sort(((e,t)=>t.length-e.length)).join("|").replace(/\./g,"\\.");return`(?:${t})`}function TS(e){return e<100&&(e+=e>50?1900:2e3),e}function MS(e,t,i){const s=fS(e);let r=s;r=r.month(i-1),r=r.date(t),r=r.year(s.year());const o=r.add(1,"y"),n=r.add(-1,"y");return Math.abs(o.diff(s))<Math.abs(r.diff(s))?r=o:Math.abs(n.diff(s))<Math.abs(r.diff(s))&&(r=n),r.year()}const IS={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},kS={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},LS={...kS,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},OS={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},NS={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},GS={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},BS={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...GS},VS=`(?:${AS(OS)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`,HS=`(?:${AS(NS)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function $S(e){let t=e.toLowerCase();return void 0!==NS[t]?NS[t]:(t=t.replace(/(?:st|nd|rd|th)$/i,""),parseInt(t))}const WS="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9]|2[0-5])";function _S(e){return/BE/i.test(e)?(e=e.replace(/BE/i,""),parseInt(e)-543):/BCE?/i.test(e)?(e=e.replace(/BCE?/i,""),-parseInt(e)):/(AD|CE)/i.test(e)?(e=e.replace(/(AD|CE)/i,""),parseInt(e)):TS(parseInt(e))}const zS=`(${VS})\\s{0,3}(${AS(BS)})`,US=new RegExp(zS,"i"),jS=`(${VS})\\s{0,3}(${AS(GS)})`,qS="\\s{0,5},?(?:\\s*and)?\\s{0,5}",KS=DS("(?:(?:about|around)\\s{0,3})?",zS,qS),YS=DS("(?:(?:about|around)\\s{0,3})?",jS,qS);function QS(e){const t={};let i=e,s=US.exec(i);for(;s;)JS(t,s),i=i.substring(s[0].length).trim(),s=US.exec(i);return 0==Object.keys(t).length?null:t}function JS(e,t){if(t[0].match(/^[a-zA-Z]+$/))return;const i=function(e){const t=e.toLowerCase();return void 0!==OS[t]?OS[t]:"a"===t||"an"===t||"the"==t?1:t.match(/few/)?3:t.match(/half/)?.5:t.match(/couple/)?2:t.match(/several/)?7:parseFloat(t)}(t[1]);e[BS[t[2].toLowerCase()]]=i}class XS{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}innerPatternHasChange(e,t){return this.innerPattern(e)!==t}patternLeftBoundary(){return"(\\W|^)"}pattern(e){return this.cachedInnerPattern&&!this.innerPatternHasChange(e,this.cachedInnerPattern)||(this.cachedInnerPattern=this.innerPattern(e),this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${this.cachedInnerPattern.source}`,this.cachedInnerPattern.flags)),this.cachedPattern}extract(e,t){const i=t[1]??"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let e=2;e<t.length;e++)t[e-1]=t[e];return this.innerExtract(e,t)}}const ZS=new RegExp(`(?:(?:within|in|for)\\s*)?(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${KS})(?=\\W|$)`,"i"),eb=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${KS})(?=\\W|$)`,"i"),tb=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${YS})(?=\\W|$)`,"i");class ib extends XS{constructor(e){super(),this.strictMode=e}innerPattern(e){return this.strictMode?tb:e.option.forwardDate?ZS:eb}innerExtract(e,t){if(t[0].match(/^for\s*the\s*\w+/))return null;const i=QS(t[1]);return i?PS.createRelativeFromReference(e.reference,i):null}}const sb=new RegExp(`(?:on\\s{0,3})?(${HS})(?:\\s{0,3}(?:to|\\-|\\–|until|through|till)?\\s{0,3}(${HS}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${AS(LS)})(?:(?:-|/|,?\\s{0,3})(${WS}(?!\\w)))?(?=\\W|$)`,"i");class rb extends XS{innerPattern(){return sb}innerExtract(e,t){const i=e.createParsingResult(t.index,t[0]),s=LS[t[3].toLowerCase()],r=$S(t[1]);if(r>31)return t.index=t.index+t[1].length,null;if(i.start.assign("month",s),i.start.assign("day",r),t[4]){const e=_S(t[4]);i.start.assign("year",e)}else{const t=MS(e.refDate,r,s);i.start.imply("year",t)}if(t[2]){const e=$S(t[2]);i.end=i.start.clone(),i.end.assign("day",e)}return i}}const ob=new RegExp(`(${AS(LS)})(?:-|/|\\s*,?\\s*)(${HS})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${HS})\\s*)?(?:(?:-|/|\\s*,\\s*|\\s+)(${WS}))?(?=\\W|$)(?!\\:\\d)`,"i");class nb extends XS{constructor(e){super(),this.shouldSkipYearLikeDate=e}innerPattern(){return ob}innerExtract(e,t){const i=LS[t[1].toLowerCase()],s=$S(t[2]);if(s>31)return null;if(this.shouldSkipYearLikeDate&&!t[3]&&!t[4]&&t[2].match(/^2[0-5]$/))return null;const r=e.createParsingComponents({day:s,month:i}).addTag("parser/ENMonthNameMiddleEndianParser");if(t[4]){const e=_S(t[4]);r.assign("year",e)}else{const t=MS(e.refDate,s,i);r.imply("year",t)}if(!t[3])return r;const o=$S(t[3]),n=e.createParsingResult(t.index,t[0]);return n.start=r,n.end=r.clone(),n.end.assign("day",o),n}}const ab=new RegExp(`((?:in)\\s*)?(${AS(LS)})\\s*(?:[,-]?\\s*(${WS})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i");class lb extends XS{innerPattern(){return ab}innerExtract(e,t){const i=t[2].toLowerCase();if(t[0].length<=3&&!kS[i])return null;const s=e.createParsingResult(t.index+(t[1]||"").length,t.index+t[0].length);s.start.imply("day",1),s.start.addTag("parser/ENMonthNameParser");const r=LS[i];if(s.start.assign("month",r),t[3]){const e=_S(t[3]);s.start.assign("year",e)}else{const t=MS(e.refDate,1,r);s.start.imply("year",t)}return s}}const db=new RegExp(`([0-9]{4})[-\\.\\/\\s](?:(${AS(LS)})|([0-9]{1,2}))[-\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i");class cb extends XS{constructor(e){super(),this.strictMonthDateOrder=e}innerPattern(){return db}innerExtract(e,t){const i=parseInt(t[1]);let s=parseInt(t[4]),r=t[3]?parseInt(t[3]):LS[t[2].toLowerCase()];if(r<1||r>12){if(this.strictMonthDateOrder)return null;s>=1&&s<=12&&([r,s]=[s,r])}return s<1||s>31?null:{day:s,month:r,year:i}}}const ub=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i");class hb extends XS{innerPattern(){return ub}innerExtract(e,t){const i=parseInt(t[2]),s=parseInt(t[1]);return e.createParsingComponents().imply("day",1).assign("month",s).assign("year",i)}}class pb{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?!/)(?=\\W|$)"}followingSuffix(){return"(?!/)(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){const i=this.extractPrimaryTimeComponents(e,t);if(!i)return t[0].match(/^\d{4}/)?(t.index+=4,null):(t.index+=t[0].length,null);const s=t.index+t[1].length,r=t[0].substring(t[1].length),o=e.createParsingResult(s,r,i);t.index+=t[0].length;const n=e.text.substring(t.index),a=this.getFollowingTimePatternThroughCache().exec(n);if(r.match(/^\d{3,4}/)&&a){if(a[0].match(/^\s*([+-])\s*\d{2,4}$/))return null;if(a[0].match(/^\s*([+-])\s*\d{2}\W\d{2}/))return null}return!a||a[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(o):(o.end=this.extractFollowingTimeComponents(e,a,o),o.end&&(o.text+=a[0]),this.checkAndReturnWithFollowingPattern(o))}extractPrimaryTimeComponents(e,t,i=!1){const s=e.createParsingComponents();let r=0,o=null,n=parseInt(t[2]);if(n>100){if(this.strictMode||null!=t[3])return null;r=n%100,n=Math.floor(n/100)}if(n>24)return null;if(null!=t[3]){if(1==t[3].length&&!t[6])return null;r=parseInt(t[3])}if(r>=60)return null;if(n>12&&(o=uS.PM),null!=t[6]){if(n>12)return null;const e=t[6][0].toLowerCase();"a"==e&&(o=uS.AM,12==n&&(n=0)),"p"==e&&(o=uS.PM,12!=n&&(n+=12))}if(s.assign("hour",n),s.assign("minute",r),null!==o?s.assign("meridiem",o):n<12?s.imply("meridiem",uS.AM):s.imply("meridiem",uS.PM),null!=t[5]){const e=parseInt(t[5].substring(0,3));if(e>=1e3)return null;s.assign("millisecond",e)}if(null!=t[4]){const e=parseInt(t[4]);if(e>=60)return null;s.assign("second",e)}return s}extractFollowingTimeComponents(e,t,i){const s=e.createParsingComponents();if(null!=t[5]){const e=parseInt(t[5].substring(0,3));if(e>=1e3)return null;s.assign("millisecond",e)}if(null!=t[4]){const e=parseInt(t[4]);if(e>=60)return null;s.assign("second",e)}let r=parseInt(t[2]),o=0,n=-1;if(null!=t[3]?o=parseInt(t[3]):r>100&&(o=r%100,r=Math.floor(r/100)),o>=60||r>24)return null;if(r>=12&&(n=uS.PM),null!=t[6]){if(r>12)return null;const e=t[6][0].toLowerCase();"a"==e&&(n=uS.AM,12==r&&(r=0,s.isCertain("day")||s.imply("day",s.get("day")+1))),"p"==e&&(n=uS.PM,12!=r&&(r+=12)),i.start.isCertain("meridiem")||(n==uS.AM?(i.start.imply("meridiem",uS.AM),12==i.start.get("hour")&&i.start.assign("hour",0)):(i.start.imply("meridiem",uS.PM),12!=i.start.get("hour")&&i.start.assign("hour",i.start.get("hour")+12)))}return s.assign("hour",r),s.assign("minute",o),n>=0?s.assign("meridiem",n):i.start.isCertain("meridiem")&&i.start.get("hour")>12?i.start.get("hour")-12>r?s.imply("meridiem",uS.AM):r<=12&&(s.assign("hour",r+12),s.assign("meridiem",uS.PM)):r>12?s.imply("meridiem",uS.PM):r<=12&&s.imply("meridiem",uS.AM),s.date().getTime()<i.start.date().getTime()&&s.imply("day",s.get("day")+1),s}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/))return null;if(e.text.match(/^\d\d\d+$/))return null;if(e.text.match(/\d[apAP]$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){const e=t[1];if(this.strictMode)return null;if(e.includes(".")&&!e.match(/\d(\.\d{2})+$/))return null;if(parseInt(e)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;const e=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;const s=parseInt(i),r=parseInt(e);if(s>24||r>24)return null}return e}getPrimaryTimePatternThroughCache(){const e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t||(this.cachedPrimaryTimePattern=function(e,t,i,s){return new RegExp(`${e}${t}(\\d{1,4})(?:(?:\\.|:|：)(\\d{1,2})(?:(?::|：)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${i}`,s)}(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t),this.cachedPrimaryTimePattern}getFollowingTimePatternThroughCache(){const e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t||(this.cachedFollowingTimePatten=function(e,t){return new RegExp(`^(${e})(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,"i")}(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t),this.cachedFollowingTimePatten}}class gb extends pb{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){const i=super.extractPrimaryTimeComponents(e,t);if(!i)return i;if(t[0].endsWith("night")){const e=i.get("hour");e>=6&&e<12?(i.assign("hour",i.get("hour")+12),i.assign("meridiem",uS.PM)):e<6&&i.assign("meridiem",uS.AM)}if(t[0].endsWith("afternoon")){i.assign("meridiem",uS.PM);const e=i.get("hour");e>=0&&e<=6&&i.assign("hour",i.get("hour")+12)}return t[0].endsWith("morning")&&(i.assign("meridiem",uS.AM),i.get("hour")<12&&i.assign("hour",i.get("hour"))),i.addTag("parser/ENTimeExpressionParser")}}function mb(e){const t={};for(const i in e)t[i]=-e[i];return t}const fb=new RegExp(`(${KS})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),vb=new RegExp(`(${YS})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i");class Cb extends XS{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?vb:fb}innerExtract(e,t){const i=QS(t[1]);if(!i)return null;const s=mb(i);return PS.createRelativeFromReference(e.reference,s)}}const yb=new RegExp(`(${KS})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),wb=new RegExp(`(${YS})\\s{0,5}(later|after|from now)(?=\\W|$)`,"i");class Sb extends XS{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?wb:yb}innerExtract(e,t){const i=QS(t[1]);return i?PS.createRelativeFromReference(e.reference,i):null}}class bb{refine(e,t){return t.filter((t=>this.isValid(e,t)))}}class Rb{refine(e,t){if(t.length<2)return t;const i=[];let s=t[0],r=null;for(let o=1;o<t.length;o++){r=t[o];const n=e.text.substring(s.index+s.text.length,r.index);if(this.shouldMergeResults(n,s,r,e)){const t=s,i=r,o=this.mergeResults(n,t,i,e);e.debug((()=>{console.log(`${this.constructor.name} merged ${t} and ${i} into ${o}`)})),s=o}else i.push(s),s=r}return null!=s&&i.push(s),i}}class Eb extends Rb{shouldMergeResults(e,t,i){return!t.end&&!i.end&&null!=e.match(this.patternBetween())}mergeResults(e,t,i){if(t.start.isOnlyWeekdayComponent()||i.start.isOnlyWeekdayComponent()||(i.start.getCertainComponents().forEach((e=>{t.start.isCertain(e)||t.start.imply(e,i.start.get(e))})),t.start.getCertainComponents().forEach((e=>{i.start.isCertain(e)||i.start.imply(e,t.start.get(e))}))),t.start.date().getTime()>i.start.date().getTime()){let e=t.start.dayjs(),s=i.start.dayjs();i.start.isOnlyWeekdayComponent()&&s.add(7,"days").isAfter(e)?(s=s.add(7,"days"),i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year())):t.start.isOnlyWeekdayComponent()&&e.add(-7,"days").isBefore(s)?(e=e.add(-7,"days"),t.start.imply("day",e.date()),t.start.imply("month",e.month()+1),t.start.imply("year",e.year())):i.start.isDateWithUnknownYear()&&s.add(1,"years").isAfter(e)?(s=s.add(1,"years"),i.start.imply("year",s.year())):t.start.isDateWithUnknownYear()&&e.add(-1,"years").isBefore(s)?(e=e.add(-1,"years"),t.start.imply("year",e.year())):[i,t]=[t,i]}const s=t.clone();return s.start=t.start,s.end=i.start,s.index=Math.min(t.index,i.index),t.index<i.index?s.text=t.text+e+i.text:s.text=i.text+e+t.text,s}}class Fb extends Eb{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}}function Pb(e,t){const i=e.clone(),s=e.start,r=t.start;if(i.start=xb(s,r),null!=e.end||null!=t.end){const s=xb(null==e.end?e.start:e.end,null==t.end?t.start:t.end);if(null==e.end&&s.date().getTime()<i.start.date().getTime()){const e=s.dayjs().add(1,"day");s.isCertain("day")?vS(s,e):yS(s,e)}i.end=s}return i}function xb(e,t){const i=e.clone();return t.isCertain("hour")?(i.assign("hour",t.get("hour")),i.assign("minute",t.get("minute")),t.isCertain("second")?(i.assign("second",t.get("second")),t.isCertain("millisecond")?i.assign("millisecond",t.get("millisecond")):i.imply("millisecond",t.get("millisecond"))):(i.imply("second",t.get("second")),i.imply("millisecond",t.get("millisecond")))):(i.imply("hour",t.get("hour")),i.imply("minute",t.get("minute")),i.imply("second",t.get("second")),i.imply("millisecond",t.get("millisecond"))),t.isCertain("timezoneOffset")&&i.assign("timezoneOffset",t.get("timezoneOffset")),t.isCertain("meridiem")?i.assign("meridiem",t.get("meridiem")):null!=t.get("meridiem")&&null==i.get("meridiem")&&i.imply("meridiem",t.get("meridiem")),i.get("meridiem")==uS.PM&&i.get("hour")<12&&(t.isCertain("hour")?i.assign("hour",i.get("hour")+12):i.imply("hour",i.get("hour")+12)),i.addTags(e.tags()),i.addTags(t.tags()),i}class Db extends Rb{shouldMergeResults(e,t,i){return(t.start.isOnlyDate()&&i.start.isOnlyTime()||i.start.isOnlyDate()&&t.start.isOnlyTime())&&null!=e.match(this.patternBetween())}mergeResults(e,t,i){const s=t.start.isOnlyDate()?Pb(t,i):Pb(i,t);return s.index=t.index,s.text=t.text+e+i.text,s}}class Ab extends Db{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-|\\.|∙|:)?\\s*$")}}const Tb=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i");class Mb{constructor(e){this.timezoneOverrides=e}refine(e,t){const i=e.option.timezones??{};return t.forEach((t=>{const s=e.text.substring(t.index+t.text.length),r=Tb.exec(s);if(!r)return;const o=r[1].toUpperCase(),n=t.start.date()??t.refDate??new Date,a={...this.timezoneOverrides,...i},l=ES(o,n,a);if(null==l)return;e.debug((()=>{console.log(`Extracting timezone: '${o}' into: ${l} for: ${t.start}`)}));const d=t.start.get("timezoneOffset");if(null!==d&&l!=d){if(t.start.isCertain("timezoneOffset"))return;if(o!=r[1])return}t.start.isOnlyDate()&&o!=r[1]||(t.text+=r[0],t.start.isCertain("timezoneOffset")||t.start.assign("timezoneOffset",l),null==t.end||t.end.isCertain("timezoneOffset")||t.end.assign("timezoneOffset",l))})),t}}const Ib=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i");class kb{refine(e,t){return t.forEach((function(t){if(t.start.isCertain("timezoneOffset"))return;const i=e.text.substring(t.index+t.text.length),s=Ib.exec(i);if(!s)return;e.debug((()=>{console.log(`Extracting timezone: '${s[0]}' into : ${t}`)}));let r=60*parseInt(s[2])+parseInt(s[3]||"0");r>840||("-"===s[1]&&(r=-r),null!=t.end&&t.end.assign("timezoneOffset",r),t.start.assign("timezoneOffset",r),t.text+=s[0])})),t}}class Lb{refine(e,t){if(t.length<2)return t;const i=[];let s=t[0];for(let r=1;r<t.length;r++){const o=t[r];if(o.index>=s.index+s.text.length){i.push(s),s=o;continue}let n=null,a=null;o.text.length>s.text.length?(n=o,a=s):(n=s,a=o),e.debug((()=>{console.log(`${this.constructor.name} remove ${a} by ${n}`)})),s=n}return null!=s&&i.push(s),i}}class Ob{refine(e,t){return e.option.forwardDate?(t.forEach((t=>{let i=fS(e.refDate);if(t.start.isOnlyTime()&&i.isAfter(t.start.dayjs())&&(i=i.add(1,"day"),yS(t.start,i),t.end&&t.end.isOnlyTime()&&(yS(t.end,i),t.start.dayjs().isAfter(t.end.dayjs())&&(i=i.add(1,"day"),yS(t.end,i))),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} time result (${t.start})`)}))),t.start.isOnlyWeekdayComponent()&&i.isAfter(t.start.dayjs())&&(i=i.day()>=t.start.get("weekday")?i.day(t.start.get("weekday")+7):i.day(t.start.get("weekday")),t.start.imply("day",i.date()),t.start.imply("month",i.month()+1),t.start.imply("year",i.year()),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.start})`)})),t.end&&t.end.isOnlyWeekdayComponent()&&(i=i.day()>t.end.get("weekday")?i.day(t.end.get("weekday")+7):i.day(t.end.get("weekday")),t.end.imply("day",i.date()),t.end.imply("month",i.month()+1),t.end.imply("year",i.year()),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.end})`)})))),t.start.isDateWithUnknownYear()&&i.isAfter(t.start.dayjs()))for(let s=0;s<3&&i.isAfter(t.start.dayjs());s++)t.start.imply("year",t.start.get("year")+1),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} year (${t.start})`)})),t.end&&!t.end.isCertain("year")&&(t.end.imply("year",t.end.get("year")+1),e.debug((()=>{console.log(`${this.constructor.name} adjusted ${t} month (${t.start})`)})))})),t):t}}class Nb extends bb{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug((()=>{console.log(`Removing unlikely result '${t.text}'`)})),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug((()=>{console.log(`Removing invalid result: ${t} (${t.end})`)})),!1):!this.strictMode||this.isStrictModeValid(e,t):(e.debug((()=>{console.log(`Removing invalid result: ${t} (${t.start})`)})),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug((()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)})),!1):!!(!t.start.isOnlyTime()||t.start.isCertain("hour")&&t.start.isCertain("minute"))||(e.debug((()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)})),!1)}}const Gb=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i");class Bb extends XS{innerPattern(){return Gb}innerExtract(e,t){const i=e.createParsingComponents({year:parseInt(t[1]),month:parseInt(t[2]),day:parseInt(t[3])});if(null!=t[4]&&(i.assign("hour",parseInt(t[4])),i.assign("minute",parseInt(t[5])),null!=t[6]&&i.assign("second",parseInt(t[6])),null!=t[7]&&i.assign("millisecond",parseInt(t[7])),null!=t[8])){let e=0;if(t[9]){const i=parseInt(t[9]);let s=0;null!=t[10]&&(s=parseInt(t[10])),e=60*i,e<0?e-=s:e+=s}i.assign("timezoneOffset",e)}return i.addTag("parser/ISOFormatParser")}}class Vb extends Rb{mergeResults(e,t,i){const s=i.clone();return s.index=t.index,s.text=t.text+e+s.text,s.start.assign("weekday",t.start.get("weekday")),s.end&&s.end.assign("weekday",t.start.get("weekday")),s}shouldMergeResults(e,t,i){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&i.start.isCertain("day")&&null!=e.match(/^,?\s*$/)}}function Hb(e,t){let i=fS(e.instant);const s=new PS(e,{});return i=i.add(t,"day"),vS(s,i),wS(s,i),s}const $b=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i;class Wb extends XS{innerPattern(e){return $b}innerExtract(e,t){let i=fS(e.refDate);const s=t[0].toLowerCase();let r=e.createParsingComponents();switch(s){case"now":r=function(e){const t=fS(e.instant),i=new PS(e,{});return vS(i,t),CS(i,t),null!==e.timezoneOffset&&i.assign("timezoneOffset",t.utcOffset()),i.addTag("casualReference/now"),i}(e.reference);break;case"today":r=function(e){const t=fS(e.instant),i=new PS(e,{});return vS(i,t),wS(i,t),i.addTag("casualReference/today"),i}(e.reference);break;case"yesterday":r=function(e){return Hb(e,-1)}(e.reference).addTag("casualReference/yesterday");break;case"tomorrow":case"tmr":case"tmrw":r=Hb(e.reference,1).addTag("casualReference/tomorrow");break;case"tonight":r=function(e,t=22){const i=fS(e.instant),s=new PS(e,{});return vS(s,i),s.imply("hour",t),s.imply("meridiem",uS.PM),s.addTag("casualReference/tonight"),s}(e.reference);break;default:s.match(/last\s*night/)&&(i.hour()>6&&(i=i.add(-1,"day")),vS(r,i),r.imply("hour",0))}return r.addTag("parser/ENCasualDateParser"),r}}const _b=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i;class zb extends XS{innerPattern(){return _b}innerExtract(e,t){let i=null;switch(t[1].toLowerCase()){case"afternoon":i=function(e,t=15){const i=new PS(e,{});return i.imply("meridiem",uS.PM),i.imply("hour",t),i.imply("minute",0),i.imply("second",0),i.imply("millisecond",0),i.addTag("casualReference/afternoon"),i}(e.reference);break;case"evening":case"night":i=function(e,t=20){const i=new PS(e,{});return i.imply("meridiem",uS.PM),i.imply("hour",t),i.addTag("casualReference/evening"),i}(e.reference);break;case"midnight":i=function(e){const t=new PS(e,{}),i=fS(e.instant);return i.hour()>2&&function(e,t){yS(e,t=t.add(1,"day")),wS(e,t)}(t,i),t.assign("hour",0),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/midnight"),t}(e.reference);break;case"morning":i=function(e,t=6){const i=new PS(e,{});return i.imply("meridiem",uS.AM),i.imply("hour",t),i.imply("minute",0),i.imply("second",0),i.imply("millisecond",0),i.addTag("casualReference/morning"),i}(e.reference);break;case"noon":case"midday":i=function(e){const t=new PS(e,{});return t.imply("meridiem",uS.AM),t.imply("hour",12),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/noon"),t}(e.reference)}return i&&i.addTag("parser/ENCasualTimeParser"),i}}function Ub(e,t){let i=t-e.getDay();return i<0&&(i+=7),i}function jb(e,t){let i=t-e.getDay();return i>=0&&(i-=7),i}const qb=new RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${AS(IS)})(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i");class Kb extends XS{innerPattern(){return qb}innerExtract(e,t){const i=t[2].toLowerCase(),s=IS[i],r=t[1],o=t[3];let n=r||o;n=n||"",n=n.toLowerCase();let a=null;return"last"==n||"past"==n?a="last":"next"==n?a="next":"this"==n&&(a="this"),function(e,t,i){const s=function(e,t,i){const s=e.getDay();switch(i){case"this":return Ub(e,t);case"last":return jb(e,t);case"next":return s==hS.SUNDAY?t==hS.SUNDAY?7:t:s==hS.SATURDAY?t==hS.SATURDAY?7:t==hS.SUNDAY?8:1+t:t<s&&t!=hS.SUNDAY?Ub(e,t):Ub(e,t)+7}return function(e,t){const i=jb(e,t),s=Ub(e,t);return s<-i?s:i}(e,t)}(e.getDateWithAdjustedTimezone(),t,i);let r=new PS(e);return r=function(e,t){const i=e.clone();let s=e.dayjs();for(const e in t)s=s.add(t[e],e);return("day"in t||"d"in t||"week"in t||"month"in t||"year"in t)&&(i.imply("day",s.date()),i.imply("month",s.month()+1),i.imply("year",s.year())),("second"in t||"minute"in t||"hour"in t)&&(i.imply("second",s.second()),i.imply("minute",s.minute()),i.imply("hour",s.hour())),i}(r,{day:s}),r.assign("weekday",t),r}(e.reference,s,a)}}const Yb=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${AS(BS)})(?=\\s*)(?=\\W|$)`,"i");class Qb extends XS{innerPattern(){return Yb}innerExtract(e,t){const i=t[1].toLowerCase(),s=t[2].toLowerCase(),r=BS[s];if("next"==i||i.startsWith("after")){const t={};return t[r]=1,PS.createRelativeFromReference(e.reference,t)}if("last"==i||"past"==i){const t={};return t[r]=-1,PS.createRelativeFromReference(e.reference,t)}const o=e.createParsingComponents();let n=fS(e.reference.instant);return s.match(/week/i)?(n=n.add(-n.get("d"),"d"),o.imply("day",n.date()),o.imply("month",n.month()+1),o.imply("year",n.year())):s.match(/month/i)?(n=n.add(1-n.date(),"d"),o.imply("day",n.date()),o.assign("year",n.year()),o.assign("month",n.month()+1)):s.match(/year/i)&&(n=n.add(1-n.date(),"d"),n=n.add(-n.month(),"month"),o.imply("day",n.date()),o.imply("month",n.month()+1),o.assign("year",n.year())),o}}const Jb=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i");class Xb{constructor(e){this.groupNumberMonth=e?3:2,this.groupNumberDay=e?2:3}pattern(){return Jb}extract(e,t){const i=t.index+t[1].length,s=t.index+t[0].length-t[5].length;if(i>0&&e.text.substring(0,i).match("\\d/?$"))return;if(s<e.text.length&&e.text.substring(s).match("^/?\\d"))return;const r=e.text.substring(i,s);if(r.match(/^\d\.\d$/)||r.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/))return;if(!t[4]&&r.indexOf("/")<0)return;const o=e.createParsingResult(i,r);let n=parseInt(t[this.groupNumberMonth]),a=parseInt(t[this.groupNumberDay]);if((n<1||n>12)&&n>12){if(!(a>=1&&a<=12&&n<=31))return null;[a,n]=[n,a]}if(a<1||a>31)return null;if(o.start.assign("day",a),o.start.assign("month",n),t[4]){const e=TS(parseInt(t[4]));o.start.assign("year",e)}else{const t=MS(e.refDate,a,n);o.start.imply("year",t)}return o}}const Zb=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${KS})(?=\\W|$)`,"i"),eR=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${YS})(?=\\W|$)`,"i");class tR extends XS{constructor(e=!0){super(),this.allowAbbreviations=e}innerPattern(){return this.allowAbbreviations?Zb:eR}innerExtract(e,t){const i=t[1].toLowerCase();let s=QS(t[2]);if(!s)return null;switch(i){case"last":case"past":case"-":s=mb(s)}return PS.createRelativeFromReference(e.reference,s)}}function iR(e){return null!=e.text.match(/^-/i)}class sR extends Rb{shouldMergeResults(e,t,i){return!!e.match(/^\s*$/i)&&(null!=i.text.match(/^[+-]/i)||iR(i))}mergeResults(e,t,i,s){let r=QS(i.text);iR(i)&&(r=mb(r));const o=PS.createRelativeFromReference(new FS(t.start.date()),r);return new xS(t.reference,t.index,`${t.text}${e}${i.text}`,o)}}function rR(e){return null!=e.text.match(/\s+(before|from)$/i)}class oR extends Rb{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,i){return!(!e.match(this.patternBetween())||!rR(t)&&(s=t,null==s.text.match(/\s+(after|since)$/i))||!i.start.get("day")||!i.start.get("month")||!i.start.get("year"));var s}mergeResults(e,t,i){let s=QS(t.text);rR(t)&&(s=mb(s));const r=PS.createRelativeFromReference(new FS(i.start.date()),s);return new xS(i.reference,t.index,`${t.text}${e}${i.text}`,r)}}const nR=new RegExp(`^\\s*(${WS})`,"i");class aR{refine(e,t){return t.forEach((function(t){if(!t.start.isDateWithUnknownYear())return;const i=e.text.substring(t.index+t.text.length),s=nR.exec(i);if(!s)return;e.debug((()=>{console.log(`Extracting year: '${s[0]}' into : ${t}`)}));const r=_S(s[1]);null!=t.end&&t.end.assign("year",r),t.start.assign("year",r),t.text+=s[0]})),t}}class lR{createCasualConfiguration(e=!1){const t=this.createConfiguration(!1,e);return t.parsers.push(new Wb),t.parsers.push(new zb),t.parsers.push(new lb),t.parsers.push(new Qb),t.parsers.push(new tR),t}createConfiguration(e=!0,t=!1){const i=function(e,t=!1){return e.parsers.unshift(new Bb),e.refiners.unshift(new Vb),e.refiners.unshift(new kb),e.refiners.unshift(new Lb),e.refiners.push(new Mb),e.refiners.push(new Lb),e.refiners.push(new Ob),e.refiners.push(new Nb(t)),e}({parsers:[new Xb(t),new ib(e),new rb,new nb(t),new Kb,new hb,new gb(e),new Cb(e),new Sb(e)],refiners:[new Ab]},e);return i.parsers.unshift(new cb(e)),i.refiners.unshift(new oR),i.refiners.unshift(new sR),i.refiners.unshift(new Lb),i.refiners.push(new Ab),i.refiners.push(new aR),i.refiners.push(new Fb),i}}class dR{constructor(e){this.defaultConfig=new lR,e=e||this.defaultConfig.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new dR({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,i){const s=this.parse(e,t,i);return s.length>0?s[0].start.date():null}parse(e,t,i){const s=new cR(e,t,i);let r=[];return this.parsers.forEach((e=>{const t=dR.executeParser(s,e);r=r.concat(t)})),r.sort(((e,t)=>e.index-t.index)),this.refiners.forEach((function(e){r=e.refine(s,r)})),r}static executeParser(e,t){const i=[],s=t.pattern(e),r=e.text;let o=e.text,n=s.exec(o);for(;n;){const a=n.index+r.length-o.length;n.index=a;const l=t.extract(e,n);if(!l){o=r.substring(n.index+1),n=s.exec(o);continue}let d=null;l instanceof xS?d=l:l instanceof PS?(d=e.createParsingResult(n.index,n[0]),d.start=l):d=e.createParsingResult(n.index,n[0],l);const c=d.index,u=d.text;e.debug((()=>console.log(`${t.constructor.name} extracted (at index=${c}) '${u}'`))),i.push(d),o=r.substring(c+u.length),n=s.exec(o)}return i}}class cR{constructor(e,t,i){this.text=e,this.reference=new FS(t),this.option=i??{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof PS?e:new PS(this.reference,e)}createParsingResult(e,t,i,s){const r="string"==typeof t?t:this.text.substring(e,t),o=i?this.createParsingComponents(i):null,n=s?this.createParsingComponents(s):null;return new xS(this.reference,e,r,o,n)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}}const uR=new lR,hR=new dR(uR.createCasualConfiguration(!1));new dR(uR.createConfiguration(!0,!1)),new dR(uR.createCasualConfiguration(!0));const pR=hR;var gR,mR;const fR=(0,I.A)(),vR=null==fR||null==(gR=fR.common)||null==(mR=gR.conf)?void 0:mR.SCHEDULED_QUERIES,CR={greater:(e,t)=>e>t,greater_equal:(e,t)=>e>=t,less:(e,t)=>e<t,less_equal:(e,t)=>e<=t},yR=()=>{const e=null==vR?void 0:vR.JSONSCHEMA;return e?(Object.entries(e.properties).forEach((([t,i])=>{if(i.default&&"date-time"===i.format){const r=(s=i.default,pR.parseDate(s,undefined,undefined));e.properties[t]={...i,default:r?r.toISOString():null}}var s})),e):{}},wR=()=>{const e=(null==vR?void 0:vR.VALIDATION)||[];return(t,i)=>(e.forEach((e=>{const s=CR[e.name],r=e.arguments.map((e=>t[e])),o=e.container||e.arguments.slice(-1)[0];var n;s(r[0],r[1])||null==(n=i[o])||n.addError(e.message)})),i)},SR=(0,y.I4)(he.fI)`
  padding-bottom: ${({theme:e})=>2*e.gridUnit}px;
`,bR=(0,y.I4)(de.A)`
  ${({theme:e})=>`\n    background: none;\n    text-transform: none;\n    padding: 0px;\n    color: ${e.colors.grayscale.dark2};\n    font-size: 14px;\n    font-weight: ${e.typography.weights.normal};\n    margin-left: 0;\n    &:disabled {\n      margin-left: 0;\n      background: none;\n      color: ${e.colors.grayscale.dark2};\n      &:hover {\n        background: none;\n        color: ${e.colors.grayscale.dark2};\n      }\n    }\n  `}
`,RR=y.I4.div`
  i.glyphicon {
    display: none;
  }
  .btn-add::after {
    content: '+';
  }
  .array-item-move-up::after {
    content: '↑';
  }
  .array-item-move-down::after {
    content: '↓';
  }
  .array-item-remove::after {
    content: '-';
  }
`;var ER={name:"tjo4qw",styles:"float:right"};const FR=({defaultLabel:e=(0,w.t)("Undefined"),sql:t,schema:i,dbId:r,onSchedule:o=()=>{},scheduleQueryWarning:n,tooltip:a,disabled:l=!1})=>{const[d,c]=(0,s.useState)(""),[u,p]=(0,s.useState)(e),[g,m]=(0,s.useState)(!1),f=(0,s.useRef)();return(0,h.Y)("span",{className:"ScheduleQueryButton",children:(0,h.Y)(be.A,{ref:f,modalTitle:(0,w.t)("Schedule query"),modalBody:(0,h.FD)(mg.lV,{layout:"vertical",children:[(0,h.Y)(SR,{children:(0,h.Y)(he.fv,{xs:24,children:(0,h.Y)(mg.eI,{label:(0,w.t)("Label"),children:(0,h.Y)(ge.pd,{type:"text",placeholder:(0,w.t)("Label for your query"),value:u,onChange:e=>p(e.target.value)})})})}),(0,h.Y)(SR,{children:(0,h.Y)(he.fv,{xs:24,children:(0,h.Y)(mg.eI,{label:(0,w.t)("Description"),children:(0,h.Y)(ge.fs,{rows:4,placeholder:(0,w.t)("Write a description for your query"),value:d,onChange:e=>c(e.target.value)})})})}),(0,h.Y)(he.fI,{children:(0,h.Y)(he.fv,{xs:24,children:(0,h.Y)(RR,{children:(0,h.Y)(eS,{schema:yR(),uiSchema:null==vR?void 0:vR.UISCHEMA,onSubmit:({formData:e})=>{var s;const n={label:u,description:d,db_id:r,schema:i,sql:t,extra_json:JSON.stringify({schedule_info:e})};o(n),null==f||null==(s=f.current)||s.close()},customValidate:wR(),validator:cS,children:(0,h.Y)(de.A,{buttonStyle:"primary",htmlType:"submit",css:ER,children:(0,w.t)("Submit")})})})})}),n&&(0,h.Y)(he.fI,{children:(0,h.Y)(he.fv,{xs:24,children:(0,h.Y)("small",{children:n})})})]}),triggerNode:(0,h.Y)(bR,{onClick:()=>m(!g),buttonSize:"small",buttonStyle:"link",tooltip:a,disabled:l,children:(0,w.t)("Schedule")})})})};var PR=i(54016);const xR=y.I4.div`
  ${({theme:e})=>o.AH`
    font-size: ${e.typography.sizes.s};
  `}
`,DR=({getEstimate:e,queryEditorId:t,tooltip:i="",disabled:o=!1})=>{const n=(0,r.d4)((e=>{var i;return null==(i=e.sqlLab.queryCostEstimates)?void 0:i[t]})),{selectedText:a}=Fe(t,["selectedText"]),{cost:l}=n||{},d=(0,s.useMemo)((()=>Array.isArray(l)?l:[]),[l]),c=(0,s.useMemo)((()=>Array.isArray(l)&&l.length?Object.keys(l[0]).map((e=>({accessor:e,Header:e}))):[]),[l]),u=a?(0,w.t)("Estimate selected query cost"):(0,w.t)("Estimate cost");return(0,h.Y)("span",{className:"EstimateQueryCostButton",children:(0,h.Y)(be.A,{modalTitle:(0,w.t)("Cost estimate"),modalBody:null!=n&&n.error?(0,h.Y)(Ce.A,{type:"error",message:null==n?void 0:n.error},"query-estimate-error"):null!=n&&n.completed?(0,h.Y)(xR,{children:(0,h.Y)(Ge.A,{columns:c,data:d,withPagination:!1,emptyWrapperType:PR.V.Small})}):(0,h.Y)(Ke.A,{position:"normal"}),triggerNode:(0,h.Y)(de.A,{style:{height:32,padding:"4px 15px"},onClick:()=>{e()},tooltip:i,disabled:o,children:u},"query-estimate-btn")})})};var AR=i(35742),TR=i(51436),MR=i(5261);const IR=(0,y.I4)(fe.A.Link)`
  &:first-of-type {
    margin: 0;
    display: flex;
    svg {
      margin: 0;
    }
  }
`,kR=(0,MR.Ay)((({queryEditorId:e,addDangerToast:t})=>{const i=(0,y.DP)(),s=ye({queryEditorId:e}),{dbId:r,name:o,schema:n,autorun:a,sql:l,templateParams:d}=Fe(e,["dbId","name","schema","autorun","sql","templateParams"]);return(0,h.Y)(et.A,{getText:e=>(s(R.GM,{shortcut:!1}),(e=>{const i={dbId:r,name:o,schema:n,autorun:a,sql:l,templateParams:d};return AR.A.post({endpoint:"/api/v1/sqllab/permalink",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((({json:t})=>{e(t.url)})).catch((e=>{(0,TR.h4)(e).then((()=>{t((0,w.t)("There was an error with your request"))}))}))})(e)),wrapped:!1,copyNode:(()=>{const e=(0,w.t)("Copy query link to your clipboard");return(0,h.FD)(de.A,{buttonSize:"small",tooltip:e,children:[(0,h.Y)(IR,{iconColor:i.colors.primary.base,iconSize:"xl"}),(0,w.t)("Copy link")]})})()})}));var LR=i(86663),OR=i(61693),NR=i(8791);const GR=e=>{const t=(0,y.DP)();return(0,h.Y)(o.Z2,{children:({css:i})=>(0,h.Y)(A.m_,{overlayClassName:i`
            .antd5-tooltip-inner {
              max-width: ${125*t.gridUnit}px;
              word-wrap: break-word;
              text-align: center;

              pre {
                background: transparent;
                border: none;
                text-align: left;
                color: ${t.colors.grayscale.light5};
                font-size: ${t.typography.sizes.xs}px;
              }
            }
          `,...e})})},BR=y.I4.hr`
  margin-top: ${({theme:e})=>1.5*e.gridUnit}px;
`,VR={pk:"fa-key",fk:"fa-link",index:"fa-bookmark"},HR={pk:(0,w.t)("Primary key"),fk:(0,w.t)("Foreign key"),index:(0,w.t)("Index")},$R=y.I4.div`
  white-space: nowrap;
`,WR=({column:e})=>{let t,i=e.name;return e.keys&&e.keys.length>0&&(i=(0,h.Y)("strong",{children:e.name}),t=e.keys.map(((e,t)=>(0,h.Y)("span",{className:"ColumnElement",children:(0,h.Y)(GR,{placement:"right",title:(0,h.FD)(h.FK,{children:[(0,h.Y)("strong",{children:HR[e.type]}),(0,h.Y)(BR,{}),(0,h.Y)("pre",{className:"text-small",children:JSON.stringify(e,null,"  ")})]}),children:(0,h.Y)("i",{className:`fa text-muted m-l-2 ${VR[e.type]}`})})},t)))),(0,h.FD)("div",{className:"clearfix table-column",children:[(0,h.FD)("div",{className:"pull-left m-l-10 col-name",children:[i,t]}),(0,h.Y)($R,{className:"pull-right text-muted",children:(0,h.FD)("small",{children:[" ",e.type]})})]})},_R=y.I4.span`
  color: ${({theme:e})=>e.colors.primary.dark1};
  &:hover {
    color: ${({theme:e})=>e.colors.primary.dark2};
  }
  cursor: pointer;
`,zR=y.I4.div`
  transition: all ${({theme:e})=>e.transitionTiming}s;
  opacity: ${e=>e.hovered?1:0};
`,UR=(0,y.I4)(OR.A.Panel)`
  ${({theme:e})=>o.AH`
    & {
      .ws-el-controls {
        margin-right: ${-e.gridUnit}px;
        display: flex;
      }

      .header-container {
        display: flex;
        flex: 1;
        align-items: center;
        width: 100%;

        .table-name {
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          font-size: ${e.typography.sizes.l}px;
          flex: 1;
        }

        .header-right-side {
          margin-left: auto;
          display: flex;
          align-items: center;
          margin-right: ${8*e.gridUnit}px;
        }
      }
    }
  `}
`;var jR={name:"1hs1mx1",styles:"padding-top:6px"};const qR=({table:e,...t})=>{const{dbId:i,catalog:n,schema:a,name:l,expanded:d}=e,u=(0,y.DP)(),p=(0,r.wA)(),{currentData:g,isSuccess:m,isFetching:f,isError:v}=(0,og.rq)({dbId:i,catalog:n,schema:a,table:l},{skip:!d}),{currentData:C,isSuccess:S,isLoading:b,isError:R}=(0,og.ii)({dbId:i,catalog:n,schema:a,table:l},{skip:!d});(0,s.useEffect)((()=>{(v||R)&&p((0,c.addDangerToast)((0,w.t)("An error occurred while fetching table metadata")))}),[v,R,p]);const E={...g,...C},F=(0,$.A)((()=>{const{initialized:t}=e;t||p((0,c.syncTable)(e,E))}));(0,s.useEffect)((()=>{m&&S&&F()}),[m,S,F]);const[P,x]=(0,s.useState)(!1),[D,T]=(0,s.useState)(!1),M=(0,s.useRef)(null),I=e=>{H()((()=>T(e)),100)()},k=()=>{p((0,c.removeDataPreview)(e)),p((0,c.removeTables)([e]))},L=()=>{x((e=>!e))},O=()=>{p(og.z7.invalidateTags([{type:"TableMetadatas",id:l}])),p((0,c.syncTable)(e,E))},N=()=>{let e,t;if(E.partitions){var i;let t,s;if(E.partitions.partitionQuery){({partitionQuery:t}=E.partitions);const e=(0,w.t)("Copy partition query to clipboard");s=(0,h.Y)(et.A,{text:t,shouldShowText:!1,tooltipText:e,copyNode:(0,h.Y)("i",{className:"fa fa-clipboard"})})}const r=Object.entries((null==(i=E.partitions)?void 0:i.latest)||[]).map((([e,t])=>`${e}=${t}`)).join("/");e=(0,h.FD)("div",{children:[(0,h.FD)("small",{children:[(0,w.t)("latest partition:")," ",r]})," ",s]})}var s;return E.metadata&&(t=Object.entries(E.metadata).map((([e,t])=>(0,h.Y)("div",{children:(0,h.FD)("small",{children:[(0,h.FD)("strong",{children:[e,":"]})," ",t]})}))),null==(s=t)||!s.length)?null:e?(0,h.FD)(Le.A,{size:"small",children:[e,t]}):null},G=()=>{var e;let t;const i=(0,w.t)("Keys for table");return null!=E&&null!=(e=E.indexes)&&e.length&&(t=(0,h.Y)(be.A,{modalTitle:`${i} ${l}`,modalBody:E.indexes.map(((e,t)=>(0,h.Y)("pre",{children:JSON.stringify(e,null,"  ")},t))),triggerNode:(0,h.Y)(zp,{className:"fa fa-key pull-left m-l-2",tooltip:(0,w.t)("View keys & indexes (%s)",E.indexes.length)})})),(0,h.FD)(Ve,{css:o.AH`
          column-gap: ${1.5*u.gridUnit}px;
          margin-right: ${u.gridUnit}px;
          & span {
            display: flex;
            justify-content: center;
            width: ${4*u.gridUnit}px;
          }
        `,children:[(0,h.Y)(zp,{className:"fa fa-refresh pull-left m-l-2 pointer",onClick:O,tooltip:(0,w.t)("Refresh table schema")}),t,(0,h.Y)(zp,{className:`fa fa-sort-${P?"numeric":"alpha"}-asc pull-left sort-cols m-l-2 pointer`,onClick:L,tooltip:P?(0,w.t)("Original table column order"):(0,w.t)("Sort columns alphabetically")}),E.selectStar&&(0,h.Y)(et.A,{copyNode:(0,h.Y)(zp,{"aria-label":"Copy",tooltip:(0,w.t)("Copy SELECT statement to the clipboard"),children:(0,h.Y)("i",{"aria-hidden":!0,className:"fa fa-clipboard pull-left m-l-2"})}),text:E.selectStar,shouldShowText:!1}),E.view&&(0,h.Y)(ng,{sql:E.view,tooltipText:(0,w.t)("Show CREATE VIEW statement"),title:(0,w.t)("CREATE VIEW statement")}),(0,h.Y)(zp,{className:"fa fa-times table-remove pull-left m-l-2 pointer",onClick:k,tooltip:(0,w.t)("Remove table preview")})]})};return(0,o.n)(UR,{...t,key:e.id,header:(()=>{const e=M.current;let t=[];return e&&e.offsetWidth<e.scrollWidth&&(t=["hover"]),(0,h.FD)("div",{className:"clearfix header-container",onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:[(0,h.Y)(A.m_,{id:"copy-to-clipboard-tooltip",style:{cursor:"pointer"},title:l,trigger:t,children:(0,h.Y)(_R,{ref:M,className:"table-name",children:(0,h.Y)("strong",{children:l})})}),(0,h.Y)("div",{className:"pull-right header-right-side",children:f||b?(0,h.Y)(Ke.A,{position:"inline"}):(0,h.Y)(zR,{hovered:D,onClick:e=>e.stopPropagation(),children:G()})})]})})(),className:"TableElement",forceRender:!0},(()=>{var e;let t;return E.columns&&(t=E.columns.slice(),P&&t.sort(((e,t)=>{const i=e.name.toUpperCase(),s=t.name.toUpperCase();return i<s?-1:i>s?1:0}))),(0,h.FD)("div",{onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),css:jR,children:[N(),(0,h.Y)("div",{children:null==(e=t)?void 0:e.map((e=>(0,h.Y)(WR,{column:e},e.name)))})]})})())},KR=y.I4.div`
  flex: 1 1 auto;
  overflow: auto;
`,YR=e=>o.AH`
  .ant-collapse-item {
    margin-bottom: ${3*e.gridUnit}px;
  }
  .ant-collapse-header {
    padding: 0px !important;
    display: flex;
    align-items: center;
  }
  .ant-collapse-content-box {
    padding: 0px ${4*e.gridUnit}px 0px 0px !important;
  }
  .ant-collapse-arrow {
    padding: 0 !important;
    bottom: ${e.gridUnit}px !important;
    right: ${4*e.gridUnit}px !important;
    color: ${e.colors.primary.dark1} !important;
    &:hover {
      color: ${e.colors.primary.dark2} !important;
    }
  }
`,QR=y.I4.div`
  ${({theme:e})=>o.AH`
    height: 100%;
    display: flex;
    flex-direction: column;

    .divider {
      border-bottom: 1px solid ${e.colors.grayscale.light4};
      margin: ${4*e.gridUnit}px 0;
    }
  `}
`,JR=({database:e,queryEditorId:t,height:i=500})=>{const n=(0,r.d4)((({sqlLab:e})=>e.tables.filter((e=>e.queryEditorId===t))),r.bN),a=(0,r.wA)(),l=Fe(t,["dbId","catalog","schema"]),[d,u]=(0,s.useState)(!1),[p,g]=(0,s.useState)(null),{dbId:m,catalog:f,schema:v}=l,C=(0,s.useMemo)((()=>n.filter((e=>e.dbId===m&&e.schema===v))),[n,m,v]);(0,s.useEffect)((()=>{const t=LR.parse(window.location.search).db,i=(0,ve.Gq)(ve.Hh.Database,null);t&&i?(g(i),(0,ve.SO)(ve.Hh.Database,null)):e&&g(e)}),[e]);const y=(0,s.useCallback)((e=>{u(!!e)}),[]),S=(0,s.useMemo)((()=>(null==C?void 0:C.map((e=>e.name)))||[]),[C]),b="?reset=1"===window.location.search,R=i-130,E=(0,s.useCallback)((e=>{l&&a((0,c.queryEditorSetCatalog)(l,e))}),[a,l]),F=(0,s.useCallback)((e=>{l&&a((0,c.queryEditorSetSchema)(l,e))}),[a,l]),P=(0,s.useCallback)((e=>{a((0,c.setDatabases)(e))}),[a]),x=(0,s.useCallback)((e=>{a((0,c.addDangerToast)(e))}),[a]),D=(0,s.useCallback)((()=>{a((0,c.resetState)())}),[a]);return(0,h.FD)(QR,{children:[(0,h.Y)(NR.Kt,{onEmptyResults:y,emptyState:(0,h.Y)(M.p,{}),database:p,getDbList:P,handleError:x,onDbChange:({id:e})=>{a((0,c.queryEditorSetDb)(l,e))},onCatalogChange:E,catalog:f,onSchemaChange:F,schema:v,onTableSelectChange:(e,t,i)=>{if(!i)return;const s=[...C];e.filter((e=>{const t=s.findIndex((t=>t.name===e));return!(t>=0&&(s.splice(t,1),1))})).forEach((e=>{a((0,c.addTable)(l,e,t,i))})),a((0,c.removeTables)(s))},tableValue:S,sqlLabMode:!0}),(0,h.Y)("div",{className:"divider"}),(0,h.Y)(KR,{children:(0,h.Y)("div",{css:o.AH`
            height: ${R}px;
          `,children:(0,h.Y)(OR.A,{activeKey:C.filter((({expanded:e})=>e)).map((({id:e})=>e)),css:YR,expandIconPosition:"right",ghost:!0,onChange:e=>{C.forEach((t=>{!e.includes(t.id.toString())&&t.expanded?a((0,c.collapseTable)(t)):e.includes(t.id.toString())&&!t.expanded&&a((0,c.expandTable)(t))}))},expandIcon:({isActive:e})=>(0,h.Y)(zp,{css:o.AH`
        transform: rotate(90deg);
      `,"aria-label":"Collapse",tooltip:e?(0,w.t)("Collapse table preview"):(0,w.t)("Expand table preview"),children:(0,h.Y)(fe.A.RightOutlined,{iconSize:"s",css:o.AH`
          transform: ${e?"rotateY(180deg)":""};
        `})}),children:C.map((e=>(0,h.Y)(qR,{table:e},e.id)))})})}),b&&(0,h.FD)(de.A,{buttonSize:"small",buttonStyle:"danger",onClick:D,children:[(0,h.Y)("i",{className:"fa fa-bomb"})," ",(0,w.t)("Reset state")]})]})};var XR=i(1639),ZR=i(84248);const eE=[];var tE=i(28274);const iE=a.F.injectEndpoints({endpoints:e=>({databaseFunctions:e.query({providesTags:["DatabaseFunctions"],query:({dbId:e})=>({endpoint:`/api/v1/database/${e}/function_names/`,transformResponse:({json:e})=>e.function_names})})})}),{useDatabaseFunctionsQuery:sE}=iE,rE=[],{useQueryState:oE}=og.IX.schemas,{useQueryState:nE}=og.PG.tables,aE=e=>e.length>30&&{docText:e},lE=(0,ae.a)(),dE=(0,y.I4)(Re.pw)`
  ${({theme:e})=>o.AH`
    && {
      // double class is better than !important
      border: 1px solid ${e.colors.grayscale.light2};
      font-feature-settings:
        'liga' off,
        'calt' off;
    }
  `}
`,cE=({autocomplete:e,onBlur:t=()=>{},onChange:i=()=>{},queryEditorId:n,onCursorPositionChange:l,height:d,hotkeys:u})=>{var p;const g=(0,r.wA)(),m=Fe(n,["id","dbId","sql","catalog","schema","templateParams"]),f=(0,r.d4)((({sqlLab:{queryEditors:e}})=>{const{cursorPosition:t}={...e.find((({id:e})=>e===n))};return null!=t?t:{row:0,column:0}}),r.bN),v=null!=(p=m.sql)?p:"",[C,b]=(0,s.useState)(v),R=(0,s.useRef)("");(0,s.useEffect)((()=>{g((0,c.queryEditorSetSelectedText)(m,null))}),[]);const E=(0,He.Z)(v);(0,s.useEffect)((()=>{v!==E&&b(v)}),[v]);const{data:F}=function(e){const{sql:t,dbId:i,schema:s,templateParams:o}=e,n=(0,ZR.Q)(t,S.$V),a=(0,r.d4)((({sqlLab:e,common:t})=>{var s,r,o,n;return Boolean(null==t||null==(s=t.conf)||null==(r=s.SQL_VALIDATORS_BY_ENGINE)?void 0:r[null==e||null==(o=e.databases)||null==(n=o[i||""])?void 0:n.backend])}));return(0,og.IV)({dbId:i,schema:s,sql:n,templateParams:o},{skip:!(a&&i&&t),selectFromResult:({isLoading:e,isError:t,error:i,data:s})=>{const r=null!=i?i:{};let o=(null==r?void 0:r.error)||(null==r?void 0:r.statusText)||(0,w.t)("Unknown error");return o.includes("CSRF token")&&(o=(0,w.t)(XR.HL.SESSION_TIMED_OUT)),{data:!e&&null!=s&&s.length?s.map((e=>({type:"error",row:(e.line_number||0)-1,column:(e.start_column||0)-1,text:e.message}))):t?[{type:"error",row:0,column:0,text:`The server failed to validate your query.\n${o}`}]:eE}}})}({dbId:m.dbId,catalog:m.catalog,schema:m.schema,sql:v,templateParams:m.templateParams}),P=function({queryEditorId:e,dbId:t,catalog:i,schema:o},n=!1){const l=lE.get("sqleditor.extension.customAutocomplete"),d=null==l?void 0:l({queryEditorId:String(e),dbId:t,catalog:i,schema:o}),u=(0,r.wA)(),h=(0,s.useRef)(!1),p=h&&n,{currentData:g}=oE({dbId:t,catalog:i||void 0,forceRefresh:!1},{skip:p||!t}),{currentData:m}=nE({dbId:t,catalog:i,schema:o,forceRefresh:!1},{skip:p||!t||!o}),{currentData:f,isError:v}=sE({dbId:t},{skip:p||!t});(0,s.useEffect)((()=>{v&&u((0,c.addDangerToast)((0,w.t)("An error occurred while fetching function names.")))}),[u,v]);const C=(0,r.d4)((({sqlLab:t})=>{var i;return n?[]:(null!=(i=null==t?void 0:t.tables)?i:[]).filter((t=>t.queryEditorId===e)).map((e=>e.name))}),r.bN),y=(0,r.Pj)().getState()[a.F.reducerPath],b=(0,s.useMemo)((()=>{const e=new Set;return C.forEach((s=>{var r,n;null==(r=og.PG.tableMetadata.select(t&&o?{dbId:t,catalog:i,schema:o,table:s}:og.hT)({[a.F.reducerPath]:y}).data)||null==(n=r.columns)||n.forEach((({name:t})=>{e.add(t)}))})),[...e]}),[t,i,o,y,C]),R=(0,$.A)(((s,r)=>{"table"===r.meta&&u((0,c.addTable)({id:e,dbId:t},r.value,i,o));let{caption:n}=r;"table"===r.meta&&n.includes(" ")&&(n=`"${n}"`),s.completer.insertMatch(`${n}${["function","schema"].includes(r.meta)?"":" "}`)})),E=(0,s.useMemo)((()=>(null!=g?g:[]).map((e=>({name:e.label,value:e.value,score:S.e3,meta:"schema",completer:{insertMatch:R},...aE(e.value)})))),[g,R]),F=(0,s.useMemo)((()=>{var e;return(null!=(e=null==m?void 0:m.options)?e:[]).map((({value:e,label:t})=>({name:t,value:e,score:S.de,meta:"table",completer:{insertMatch:R},...aE(e)})))}),[null==m?void 0:m.options,R]),P=(0,s.useMemo)((()=>b.map((e=>({name:e,value:e,score:S.v9,meta:"column",...aE(e)})))),[b]),x=(0,s.useMemo)((()=>(null!=f?f:[]).map((e=>({name:e,value:e,score:S.T_,meta:"function",completer:{insertMatch:R},...aE(e)})))),[f,R]),D=(0,s.useMemo)((()=>P.concat(E).concat(F).concat(x).concat(tE.A).concat(null!=d?d:[])),[E,F,P,x,d]);return h.current=!n,n?rE:D}({queryEditorId:n,dbId:m.dbId,catalog:m.catalog,schema:m.schema},!e),x=(0,y.DP)();return(0,h.FD)(h.FK,{children:[(0,h.Y)(o.mL,{styles:o.AH`
          .ace_text-layer {
            width: 100% !important;
          }

          .ace_autocomplete {
            // Use !important because Ace Editor applies extra CSS at the last second
            // when opening the autocomplete.
            width: ${130*x.gridUnit}px !important;
          }

          .ace_tooltip {
            max-width: ${S.fq}px;
          }

          .ace_scroller {
            background-color: ${x.colors.grayscale.light4};
          }
        `}),(0,h.Y)(dE,{keywords:P,onLoad:e=>{e.commands.addCommand({name:"runQuery",bindKey:{win:"Alt-enter",mac:"Alt-enter"},exec:()=>{t(C)}}),u.forEach((t=>{e.commands.addCommand({name:t.name,bindKey:{win:t.key,mac:t.key},exec:t.func})})),e.$blockScrolling=1/0,e.selection.on("changeSelection",(()=>{const t=e.getSelectedText();t!==R.current&&1!==t.length&&g((0,c.queryEditorSetSelectedText)(m,t)),R.current=t})),e.selection.on("changeCursor",(()=>{const t=e.getCursorPosition();l(t)}));const{row:i,column:s}=f;e.moveCursorToPosition({row:i,column:s}),e.focus(),e.scrollToLine(i,!0,!0)},onBlur:()=>{t(C)},height:d,onChange:e=>{e!==C&&(b(e),i(e))},width:"100%",editorProps:{$blockScrolling:!0},enableLiveAutocompletion:e,value:C,annotations:F})]})},uE=(e,t)=>e?(0,h.FD)(h.FK,{children:[(0,h.Y)("i",{className:"fa fa-stop"})," ",(0,w.t)("Stop")]}):t?(0,w.t)("Run selection"):(0,w.t)("Run"),hE=y.I4.span`
  button {
    line-height: 13px;
    // this is to over ride a previous transition built into the component
    transition: background-color 0ms;
    &:last-of-type {
      margin-right: ${({theme:e})=>2*e.gridUnit}px;
    }
    span[name='caret-down'] {
      display: flex;
      margin-left: ${({theme:e})=>1*e.gridUnit}px;
    }
  }
`,pE=({allowAsync:e=!1,queryEditorId:t,queryState:i,overlayCreateAsMenu:r,runQuery:o,stopQuery:n})=>{const a=(0,y.DP)(),l=ye({queryEditorId:t}),d=(0,T.UX)(),{selectedText:c,sql:u}=Fe(t,["selectedText","sql"]),p=!!i&&["running","pending"].indexOf(i)>-1,g=r?fg.g:de.A,m=c||u||"",f=!(null!=m&&m.replace(/(\/\*[^*]*\*\/)|(\/\/[^*]*)|(--[^.].*)/gm,"").trim()),v=(0,s.useMemo)((()=>"MacOS"===d?(0,w.t)("Stop running (Ctrl + x)"):(0,w.t)("Stop running (Ctrl + e)")),[d]);return(0,h.Y)(hE,{children:(0,h.Y)(g,{onClick:()=>((e,t,i=()=>{},s=()=>{},r)=>(r(e?R.fL:R.Mr,{shortcut:!1}),e?s():i(!!t)))(p,e,o,n,l),disabled:f,tooltip:!f&&(p?v:(0,w.t)("Run query (Ctrl + Return)")),cta:!0,...r?{overlay:r,icon:(0,h.Y)(fe.A.CaretDown,{iconColor:f?a.colors.grayscale.base:a.colors.grayscale.light5,name:"caret-down"}),trigger:"click"}:{buttonStyle:p?"warning":"primary"},children:uE(p,c)})})};function gE(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}const mE=y.I4.span`
  ${({theme:e})=>`\n    .ant-dropdown-trigger {\n      align-items: center;\n      color: ${e.colors.grayscale.dark2};\n      display: flex;\n      font-size: 12px;\n      margin-right: ${2*e.gridUnit}px;\n      text-decoration: none;\n      border: 0;\n      background: transparent;\n      span {\n        display: inline-block;\n        margin-right: ${2*e.gridUnit}px;\n        &:last-of-type: {\n          margin-right: ${4*e.gridUnit}px;\n        }\n      }\n    }\n  `}
`;function fE(e,t){const i=[];for(let t=10;t<e;t*=10)i.push(t);return i.push(e),(0,h.Y)(me.W1,{children:[...new Set(i)].map((e=>(0,h.FD)(me.W1.Item,{onClick:()=>t(e),children:[gE(e)," "]},`${e}`)))})}const vE=({queryEditorId:e,maxRow:t,defaultQueryLimit:i})=>{const s=(0,y.DP)(),o=(0,r.wA)(),n=Fe(e,["id","queryLimit"]),a=n.queryLimit||i;return(0,h.Y)(mE,{children:(0,h.Y)(he.rM,{overlay:fE(t,(e=>o((0,c.queryEditorSetQueryLimit)(n,e)))),trigger:["click"],children:(0,h.FD)("button",{type:"button",onClick:e=>e.preventDefault(),children:[(0,h.FD)("span",{children:[(0,w.t)("LIMIT"),":"]}),(0,h.Y)("span",{className:"limitDropdown",children:gE(a)}),(0,h.Y)(fe.A.TriangleDown,{iconColor:s.colors.grayscale.base})]})})})},CE=(0,T.UX)();var yE;!function(e){e.CtrlR="ctrl+r",e.CtrlEnter="ctrl+enter",e.CtrlShiftEnter="ctrl+shift+enter",e.CtrlP="ctrl+p",e.CtrlQ="ctrl+q",e.CtrlE="ctrl+e",e.CtrlT="ctrl+t",e.CtrlX="ctrl+x",e.AltEnter="alt+enter",e.CmdF="cmd+f",e.CmdOptF="cmd+opt+f",e.CtrlF="ctrl+f",e.CtrlH="ctrl+h",e.CtrlShiftF="ctrl+shift+f",e.CtrlLeft="ctrl+[",e.CtrlRight="ctrl+]"}(yE||(yE={}));const wE={[yE.CtrlR]:(0,w.t)("Run query"),[yE.CtrlEnter]:(0,w.t)("Run query"),[yE.AltEnter]:(0,w.t)("Run query"),[yE.CtrlShiftEnter]:(0,w.t)("Run current query"),[yE.CtrlX]:"MacOS"===CE?(0,w.t)("Stop query"):void 0,[yE.CtrlE]:"MacOS"!==CE?(0,w.t)("Stop query"):void 0,[yE.CtrlQ]:"Windows"===CE?(0,w.t)("New tab"):void 0,[yE.CtrlT]:"Windows"!==CE?(0,w.t)("New tab"):void 0,[yE.CtrlP]:(0,w.t)("Previous Line"),[yE.CtrlShiftF]:(0,w.t)("Format SQL"),[yE.CtrlLeft]:(0,w.t)("Switch to the previous tab"),[yE.CtrlRight]:(0,w.t)("Switch to the next tab"),[yE.CmdF]:"MacOS"===CE?(0,w.t)("Find"):void 0,[yE.CtrlF]:"MacOS"!==CE?(0,w.t)("Find"):void 0,[yE.CmdOptF]:"MacOS"===CE?(0,w.t)("Replace"):void 0,[yE.CtrlH]:"MacOS"!==CE?(0,w.t)("Replace"):void 0},SE=Object.entries(wE).reduce(((e,[t,i])=>(i&&(e[i]=[...e[i]||[],t]),e)),{}),bE=y.I4.span`
  font-size: ${({theme:e})=>e.typography.sizes.m}px;
  color: ${({theme:e})=>e.colors.text.help};
  padding-left: ${({theme:e})=>2*e.gridUnit}px;
`,RE=y.I4.div`
  display: flex;
  flex-wrap: wrap;
  gap: ${({theme:e})=>e.gridUnit}px;
  padding: ${({theme:e})=>2*e.gridUnit}px;
`,EE=y.I4.code`
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
  color: ${({theme:e})=>e.colors.grayscale.dark1};
  border-radius: ${({theme:e})=>e.borderRadius}px;
  padding: ${({theme:e})=>`${e.gridUnit}px ${2*e.gridUnit}px`};
`,FE=({children:e})=>(0,h.Y)(be.A,{modalTitle:(0,w.t)("Keyboard shortcuts"),modalBody:(0,h.Y)("div",{children:Object.entries(SE).map((([e,t])=>(0,h.FD)("div",{css:o.AH`
              display: table-row;
            `,children:[(0,h.Y)("div",{css:o.AH`
                display: table-cell;
                max-width: 200px;
                vertical-align: middle;
              `,children:(0,h.Y)(bE,{children:e})}),(0,h.Y)("div",{css:o.AH`
                display: table-cell;
              `,children:(0,h.Y)(RE,{children:t.map((e=>(0,h.Y)(EE,{children:e},e)))})})]},e)))}),triggerNode:e});var PE,xE;const DE=(0,I.A)(),AE=null==DE||null==(PE=DE.common)||null==(xE=PE.conf)?void 0:xE.SCHEDULED_QUERIES,TE=y.I4.div`
  padding: ${({theme:e})=>2*e.gridUnit}px;
  background: ${({theme:e})=>e.colors.grayscale.light5};
  display: flex;
  justify-content: space-between;
  border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  border-top: 0;
  column-gap: ${({theme:e})=>e.gridUnit}px;

  form {
    margin-block-end: 0;
  }

  .leftItems,
  .rightItems {
    display: flex;
    align-items: center;
    & > span {
      margin-right: ${({theme:e})=>2*e.gridUnit}px;
      display: inline-block;

      &:last-child {
        margin-right: 0;
      }
    }
  }

  .limitDropdown {
    white-space: nowrap;
  }
`,ME=y.I4.div`
  flex: 0 0 ${({width:e})=>e}px;
  width: ${({width:e})=>e}px;
  padding: ${({theme:e,hide:t})=>t?0:2.5*e.gridUnit}px;
  border-right: 1px solid
    ${({theme:e,hide:t})=>t?"transparent":e.colors.grayscale.light2};
`,IE=y.I4.div`
  ${({theme:e})=>o.AH`
    display: flex;
    flex-direction: row;
    height: 100%;

    .schemaPane {
      transition: transform ${e.transitionTiming}s ease-in-out;
    }

    .queryPane {
      flex: 1 1 auto;
      padding: ${2*e.gridUnit}px;
      overflow-y: auto;
      overflow-x: scroll;
    }

    .schemaPane-enter-done,
    .schemaPane-exit {
      transform: translateX(0);
      z-index: 7;
    }

    .schemaPane-exit-active {
      transform: translateX(-120%);
    }

    .schemaPane-enter-active {
      transform: translateX(0);
      max-width: ${75*e.gridUnit}px;
    }

    .schemaPane-enter,
    .schemaPane-exit-done {
      max-width: 0;
      transform: translateX(-120%);
      overflow: hidden;
    }

    .schemaPane-exit-done + .queryPane {
      margin-left: 0;
    }

    .gutter {
      border-top: 1px solid ${e.colors.grayscale.light2};
      border-bottom: 1px solid ${e.colors.grayscale.light2};
      width: 3%;
      margin: ${S.oL}px 47%;
    }

    .gutter.gutter-vertical {
      cursor: row-resize;
    }
  `}
`,kE=(0,ae.a)(),LE=(e,t,i)=>({[e]:`calc(${t}% - ${i+S.oL}px)`});var OE={name:"1eoy87d",styles:"display:flex;justify-content:space-between"},NE={name:"1eoy87d",styles:"display:flex;justify-content:space-between"};const GE=({queryEditor:e,defaultQueryLimit:t,maxRow:i,displayLimit:a,saveQueryWarning:l,scheduleQueryWarning:d})=>{const u=(0,y.DP)(),p=(0,r.wA)(),{database:g,latestQuery:f,hideLeftBar:v,currentQueryEditorId:b,hasSqlStatement:E}=(0,r.d4)((({sqlLab:{unsavedQueryEditor:t,databases:i,queries:s,tabHistory:r}})=>{var o;let{dbId:n,latestQueryId:a,hideLeftBar:l}=e;return(null==t?void 0:t.id)===e.id&&(n=t.dbId||n,a=t.latestQueryId||a,l="boolean"==typeof t.hideLeftBar?t.hideLeftBar:l),{hasSqlStatement:Boolean((null==(o=e.sql)?void 0:o.trim().length)>0),database:i[n||""],latestQuery:s[a||""],hideLeftBar:l,currentQueryEditorId:r.slice(-1)[0]}}),r.bN),F=ye({queryEditorId:e.id}),P=b===e.id,[x,D]=(0,s.useState)(0),[A,I]=(0,s.useState)(e.autorun),[k,L]=(0,s.useState)(""),[O,N]=(0,s.useState)(e.northPercent||S.du),[G,V]=(0,s.useState)(e.southPercent||S.tR),[W,_]=(0,s.useState)((0,ve.Gq)(ve.Hh.SqllabIsAutocompleteEnabled,!0)),[z,U]=(0,s.useState)((0,ve.Gq)(ve.Hh.SqllabIsRenderHtmlEnabled,!0)),[j,q]=(0,s.useState)(!1),[K,Y]=(0,s.useState)(""),Q=(0,s.useMemo)((()=>!g||B()(g)),[g]),J=(0,s.useRef)(null),X=(0,s.useRef)(null),Z=kE.get("sqleditor.extension.form"),ee=(0,s.useCallback)(((i=!1,s=c.CtasEnum.Table)=>{g&&(p((0,c.runQueryFromSqlEditor)(g,e,t,i?k:"",i,s)),p((0,c.setActiveSouthPaneTab)("Results")))}),[k,g,t,p,e]),te=(0,s.useCallback)((t=>{F(R.Ob,{shortcut:Boolean(t)}),p((0,c.formatQuery)(e))}),[p,e,F]),ie=(0,s.useCallback)((()=>(f&&["running","pending"].indexOf(f.state)>=0&&p((0,c.postStopQuery)(f)),!1)),[p,f]),se=()=>{g&&ee()};(0,s.useEffect)((()=>{A&&(I(!1),p((0,c.queryEditorSetAutorun)(e,!1)),ee())}),[A,p,e,ee]);const re=()=>J.current?J.current.clientHeight-2*S.b:0,ae=(0,s.useCallback)((()=>{const t=(0,T.UX)();return[{name:"runQuery1",key:yE.CtrlR,descr:wE[yE.CtrlR],func:()=>{""!==e.sql.trim()&&(F(R.Mr,{shortcut:!0}),ee())}},{name:"runQuery2",key:yE.CtrlEnter,descr:wE[yE.CtrlEnter],func:()=>{""!==e.sql.trim()&&(F(R.Mr,{shortcut:!0}),ee())}},{name:"newTab",..."Windows"===t?{key:yE.CtrlQ,descr:wE[yE.CtrlQ]}:{key:yE.CtrlT,descr:wE[yE.CtrlT]},func:()=>{R.Vy.markTimeOrigin(),p((0,c.addNewQueryEditor)())}},{name:"stopQuery",..."MacOS"===t?{key:yE.CtrlX,descr:wE[yE.CtrlX]}:{key:yE.CtrlE,descr:wE[yE.CtrlE]},func:()=>{F(R.fL,{shortcut:!0}),ie()}},{name:"formatQuery",key:yE.CtrlShiftF,descr:wE[yE.CtrlShiftF],func:()=>{te(!0)}},{name:"switchTabToLeft",key:yE.CtrlLeft,descr:wE[yE.CtrlLeft],func:()=>{p((0,c.switchQueryEditor)(!0))}},{name:"switchTabToRight",key:yE.CtrlRight,descr:wE[yE.CtrlRight],func:()=>{p((0,c.switchQueryEditor)(!1))}}]}),[p,e.sql,ee,ie,te]),we=(0,s.useMemo)((()=>{const e=(0,T.UX)(),t=[...ae(),{name:"runQuery3",key:yE.CtrlShiftEnter,descr:wE[yE.CtrlShiftEnter],func:e=>{var t,i,s,r,o;if(!e.getValue().trim())return;const n=e.getSession(),a=e.getCursorPosition(),l=n.getLength(),d=e.getFirstVisibleRow(),c=e.find(";",{backwards:!1,skipCurrent:!0});let u;c&&({end:u}=c),(!u||u.row<a.row)&&(u={row:l+1,column:0});const h=e.find(";",{backwards:!0,skipCurrent:!0});let p;h&&(p=h.end);let g=null==(t=p)?void 0:t.row;(!g||g>a.row||g===a.row&&((null==(i=p)?void 0:i.column)||0)>a.column)&&(g=0);let m=g===(null==(s=p)?void 0:s.row)?n.getLine(g).slice(p.column).trim():n.getLine(g).trim();for(;!m&&g<l;)g+=1,m=n.getLine(g).trim();g!==(null==(r=p)?void 0:r.row)&&(p={row:g,column:0}),e.selection.setSelectionRange({start:null!=(o=p)?o:{row:0,column:0},end:u}),ee(),e.selection.clearSelection(),e.moveCursorToPosition(a),e.scrollToRow(d)}}];return"MacOS"===e&&t.push({name:"previousLine",key:yE.CtrlP,descr:wE[yE.CtrlP],func:e=>{e.navigateUp()}}),t}),[ae,ee]),Se=(0,$.A)((e=>{var t;null!=g&&null!=(t=g.extra_json)&&t.cancel_query_on_windows_unload&&"running"===(null==f?void 0:f.state)&&(e.preventDefault(),ie())})),be=(0,n.G7)(n.TO.SqllabBackendPersistence)&&!e.loaded,Re=(0,$.A)((()=>{const t=R.Vy.getTimestamp();F(R.CY,{duration:t,queryEditorId:e.id,inLocalStorage:Boolean(e.inLocalStorage),hasLoaded:!be}),be&&p((0,c.fetchQueryEditor)(e,a))}));(0,s.useEffect)((()=>{D(re());const e=m()((()=>D(re())),S.A7);return P&&(Re(),window.addEventListener("resize",e),window.addEventListener("beforeunload",Se)),()=>{window.removeEventListener("resize",e),window.removeEventListener("beforeunload",Se)}}),[Se,Re,P]),(0,s.useEffect)((()=>{const e=ae();P&&e.forEach((e=>{C().bind([e.key],e.func)}))}),[ae,f,P]);const Ee=()=>{const e=document.getElementsByClassName("ace_content")[0];e&&(e.style.height="100%")},Fe=([t,i])=>{var s;N(t),V(i),null!=(s=X.current)&&s.clientHeight&&p((0,c.persistEditorHeight)(e,t,i))},Pe=(0,s.useCallback)((t=>{p((0,c.queryEditorSetAndSaveSql)(e,t))}),[p,e]),xe=(0,s.useMemo)((()=>H()(Pe,S.cD)),[Pe]),Ae=(0,$.A)((t=>{p((0,c.queryEditorSetSql)(e,t))})),Te=()=>{F(R.Lb,{shortcut:!1}),g&&p((0,c.estimateQueryCost)(e))},Me=()=>{(0,ve.SO)(ve.Hh.SqllabIsAutocompleteEnabled,!W),_(!W)},Ie=()=>{(0,ve.SO)(ve.Hh.SqllabIsRenderHtmlEnabled,!z),U(!z)},ke=()=>{const t=e,i="success"===(null==f?void 0:f.state),s=i?(0,w.t)("Schedule the query periodically"):(0,w.t)("You must run the query successfully first");return(0,h.FD)(me.W1,{css:(0,o.AH)({width:50*u.gridUnit},"",""),children:[(0,h.FD)(me.W1.Item,{css:OE,children:[" ",(0,h.Y)("span",{children:(0,w.t)("Render HTML")})," ",(0,h.Y)(pe.d,{checked:z,onChange:Ie})," "]}),(0,h.FD)(me.W1.Item,{css:NE,children:[" ",(0,h.Y)("span",{children:(0,w.t)("Autocomplete")})," ",(0,h.Y)(pe.d,{checked:W,onChange:Me})," "]}),(0,n.G7)(n.TO.EnableTemplateProcessing)&&(0,h.Y)(me.W1.Item,{children:(0,h.Y)(De,{language:"json",onChange:e=>{p((0,c.queryEditorSetTemplateParams)(t,e))},queryEditorId:t.id})}),(0,h.Y)(me.W1.Item,{onClick:()=>te(),children:(0,w.t)("Format SQL")}),!B()(AE)&&(0,h.Y)(me.W1.Item,{children:(0,h.Y)(FR,{defaultLabel:t.name,sql:t.sql,onSchedule:e=>p((0,c.scheduleQuery)(e)),schema:t.schema,dbId:t.dbId,scheduleQueryWarning:d,tooltip:s,disabled:!i})}),(0,h.Y)(me.W1.Item,{children:(0,h.Y)(FE,{children:(0,w.t)("Keyboard shortcuts")})})]})},Le=async(t,i)=>{const s=await p((0,c.saveQuery)(t,i));p((0,c.addSavedQueryToTabState)(e,s))},Oe=s=>{var r;const{allow_ctas:o,allow_cvas:a}=g||{},d=o||a,m=(0,h.FD)(me.W1,{children:[o&&(0,h.Y)(me.W1.Item,{onClick:()=>{F(R.Ek,{shortcut:!1}),q(!0),Y(c.CtasEnum.Table)},children:(0,w.t)("CREATE TABLE AS")},"1"),a&&(0,h.Y)(me.W1.Item,{onClick:()=>{F(R.XC,{shortcut:!1}),q(!0),Y(c.CtasEnum.View)},children:(0,w.t)("CREATE VIEW AS")},"2")]});return(0,h.Y)(TE,{className:"sql-toolbar",id:"js-sql-toolbar",children:s?(0,h.Y)(Ce.A,{type:"warning",message:(0,w.t)("The database that was used to generate this query could not be found"),description:(0,w.t)("Choose one of the available databases on the left panel."),closable:!1}):(0,h.FD)(h.FK,{children:[(0,h.FD)("div",{className:"leftItems",children:[(0,h.Y)("span",{children:(0,h.Y)(pE,{allowAsync:!0===(null==g?void 0:g.allow_run_async),queryEditorId:e.id,queryState:null==f?void 0:f.state,runQuery:se,stopQuery:ie,overlayCreateAsMenu:d?m:null})}),(0,n.G7)(n.TO.EstimateQueryCost)&&(null==g?void 0:g.allows_cost_estimate)&&(0,h.Y)("span",{children:(0,h.Y)(DR,{getEstimate:Te,queryEditorId:e.id,tooltip:(0,w.t)("Estimate the cost before running a query")})}),(0,h.Y)("span",{children:(0,h.Y)(vE,{queryEditorId:e.id,maxRow:i,defaultQueryLimit:t})}),f&&(0,h.Y)(ce.A,{startTime:f.startDttm,endTime:f.endDttm,status:S.sA[f.state],isRunning:"running"===f.state})]}),(0,h.FD)("div",{className:"rightItems",children:[(0,h.Y)("span",{children:(0,h.Y)(wg,{queryEditorId:e.id,columns:(null==f||null==(r=f.results)?void 0:r.columns)||[],onSave:Le,onUpdate:(e,t)=>p((0,c.updateSavedQuery)(e,t)),saveQueryWarning:l,database:g})}),(0,h.Y)("span",{children:(0,h.Y)(kR,{queryEditorId:e.id})}),(0,h.Y)(he.rM,{overlay:ke(),trigger:["click"],children:(0,h.Y)(fe.A.MoreHoriz,{iconColor:u.colors.grayscale.base})})]})]})})},Ne=t=>{p((0,c.queryEditorSetCursorPosition)(e,t))},Ge=K===c.CtasEnum.View?"CREATE VIEW AS":"CREATE TABLE AS",Be=K===c.CtasEnum.View?(0,w.t)("Specify name to CREATE VIEW AS schema in: public"):(0,w.t)("Specify name to CREATE TABLE AS schema in: public"),Ve=v?"schemaPane-exit-done":"schemaPane-enter-done";return(0,h.FD)(IE,{ref:J,className:"SqlEditor",children:[(0,h.Y)(oe,{classNames:"schemaPane",in:!v,timeout:300,children:(0,h.Y)(ue.A,{id:`sqllab:${e.id}`,minWidth:S.fq,initialWidth:S.fq,enable:!v,children:t=>(0,h.Y)(ME,{className:`schemaPane ${Ve}`,width:t,hide:v,children:(0,h.Y)(JR,{database:g,queryEditorId:e.id})})})}),be?(0,h.Y)("div",{css:o.AH`
            flex: 1;
            padding: ${4*u.gridUnit}px;
          `,children:(0,h.Y)(he.EA,{active:!0})}):Q&&!E?(0,h.Y)(M.p,{image:"vector.svg",size:"large",title:(0,w.t)("Select a database to write a query"),description:(0,w.t)("Choose one of the available databases from the panel on the left.")}):(()=>{const{aceEditorHeight:i,southPaneHeight:s}=((e,t,i)=>({aceEditorHeight:e*t/(25*u.gridUnit)-(S.B8/2+S.oL)-S.d$,southPaneHeight:e*i/(25*u.gridUnit)-(S.B8/2+S.oL)}))(x,O,G);return(0,h.FD)(ne.A,{expandToMin:!0,className:"queryPane",sizes:[O,G],elementStyle:LE,minSize:200,direction:"vertical",gutterSize:S.B8,onDragStart:Ee,onDragEnd:Fe,children:[(0,h.FD)("div",{ref:X,className:"north-pane",children:[Z&&(0,h.Y)(Z,{queryEditorId:e.id,setQueryEditorAndSaveSqlWithDebounce:xe,startQuery:ee}),P&&(0,h.Y)(cE,{autocomplete:W&&(r=e.id,!Number.isNaN(Number(r))),onBlur:Ae,onChange:Ae,queryEditorId:e.id,onCursorPositionChange:Ne,height:`${i}px`,hotkeys:we}),Oe(Q)]}),(0,h.Y)(gg,{queryEditorId:e.id,latestQueryId:null==f?void 0:f.id,height:s,displayLimit:a,defaultQueryLimit:t})]});var r})(),(0,h.FD)(le.Ay,{show:j,title:(0,w.t)(Ge),onHide:()=>q(!1),footer:(0,h.FD)(h.FK,{children:[(0,h.Y)(de.A,{onClick:()=>q(!1),children:(0,w.t)("Cancel")}),K===c.CtasEnum.Table&&(0,h.Y)(de.A,{buttonStyle:"primary",disabled:0===k.length,onClick:()=>{ee(!0,c.CtasEnum.Table),q(!1),L("")},children:(0,w.t)("Create")}),K===c.CtasEnum.View&&(0,h.Y)(de.A,{buttonStyle:"primary",disabled:0===k.length,onClick:()=>{ee(!0,c.CtasEnum.View),q(!1),L("")},children:(0,w.t)("Create")})]}),children:[(0,h.Y)("span",{children:(0,w.t)("Name")}),(0,h.Y)(ge.pd,{placeholder:Be,onChange:e=>{L(e.target.value)}})]})]})};var BE=i(82960);const VE=y.I4.span`
  position: absolute;
  top: -6px;
  left: 1px;
`,HE=y.I4.div`
  ${({theme:e})=>o.AH`
    border-radius: 50%;
    width: ${3*e.gridUnit}px;
    height: ${3*e.gridUnit}px;

    display: inline-block;
    background-color: ${e.colors.grayscale.light2};
    text-align: center;
    vertical-align: middle;
    font-size: ${e.typography.sizes.m}px;
    font-weight: ${e.typography.weights.bold};
    color: ${e.colors.grayscale.light5};
    position: relative;

    &.running {
      background-color: ${e.colors.info.base};
    }

    &.success {
      background-color: ${e.colors.success.base};
    }

    &.failed {
      background-color: ${e.colors.error.base};
    }
  `}
`,$E={success:fe.A.Check,failed:fe.A.CancelX};function WE({tabState:e}){const t=$E[e];return(0,h.Y)(HE,{className:`circle ${e}`,children:t&&(0,h.Y)(VE,{children:(0,h.Y)(t,{iconSize:"xs"})})})}const _E=y.I4.div`
  display: flex;
  align-items: center;
`,zE=y.I4.span`
  margin-right: ${({theme:e})=>2*e.gridUnit}px;
  text-transform: none;
`,UE=y.I4.div`
  display: inline-block;
  width: ${({theme:e})=>8*e.gridUnit}px;
  text-align: center;
`,jE=({queryEditor:e})=>{const t=(0,r.d4)((({sqlLab:{unsavedQueryEditor:t}})=>({...e,...e.id===(null==t?void 0:t.id)&&t})),r.bN),i=(0,r.d4)((({sqlLab:e})=>{var i;return(null==(i=e.queries[t.latestQueryId||""])?void 0:i.state)||""})),o=(0,r.wA)(),n=(0,s.useMemo)((()=>(0,BE.zH)({removeQueryEditor:c.removeQueryEditor,removeAllOtherQueryEditors:c.removeAllOtherQueryEditors,queryEditorSetTitle:c.queryEditorSetTitle,cloneQueryToNewTab:c.cloneQueryToNewTab,toggleLeftBar:c.toggleLeftBar},o)),[o]);return(0,h.FD)(_E,{children:[(0,h.Y)(ip.ms,{trigger:["click"],overlay:(0,h.FD)(me.W1,{style:{width:176},children:[(0,h.FD)(me.W1.Item,{className:"close-btn",onClick:()=>n.removeQueryEditor(t),children:[(0,h.Y)(UE,{children:(0,h.Y)("i",{className:"fa fa-close"})}),(0,w.t)("Close tab")]},"1"),(0,h.FD)(me.W1.Item,{onClick:function(){const e=prompt((0,w.t)("Enter a new title for the tab"));e&&n.queryEditorSetTitle(t,e,t.id)},children:[(0,h.Y)(UE,{children:(0,h.Y)("i",{className:"fa fa-i-cursor"})}),(0,w.t)("Rename tab")]},"2"),(0,h.FD)(me.W1.Item,{onClick:()=>n.toggleLeftBar(t),children:[(0,h.Y)(UE,{children:(0,h.Y)("i",{className:"fa fa-cogs"})}),t.hideLeftBar?(0,w.t)("Expand tool bar"):(0,w.t)("Hide tool bar")]},"3"),(0,h.FD)(me.W1.Item,{onClick:()=>n.removeAllOtherQueryEditors(t),children:[(0,h.Y)(UE,{children:(0,h.Y)("i",{className:"fa fa-times-circle-o"})}),(0,w.t)("Close all other tabs")]},"4"),(0,h.FD)(me.W1.Item,{onClick:()=>n.cloneQueryToNewTab(t,!1),children:[(0,h.Y)(UE,{children:(0,h.Y)("i",{className:"fa fa-files-o"})}),(0,w.t)("Duplicate tab")]},"5")]})}),(0,h.Y)(zE,{children:t.name})," ",(0,h.Y)(WE,{tabState:i})," "]})},qE={queryEditors:[],offline:!1,saveQueryWarning:null,scheduleQueryWarning:null},KE=(0,y.I4)(P.fn)`
  height: 100%;
  display: flex;
  flex-direction: column;
`,YE=y.I4.span`
  line-height: 24px;
`,QE=y.I4.span`
  margin-right: ${({theme:e})=>2*e.gridUnit}px;
  text-transform: none;
`,JE=(0,T.UX)(),XE="/sqllab";class ZE extends s.PureComponent{constructor(e){super(e),this.onTabClicked=()=>{var e;R.Vy.markTimeOrigin(),0===(null==(e=this.props.queryEditors)?void 0:e.length)&&this.newQueryEditor()},this.removeQueryEditor=this.removeQueryEditor.bind(this),this.handleSelect=this.handleSelect.bind(this),this.handleEdit=this.handleEdit.bind(this)}componentDidMount(){var e;const t=(0,I.A)(),i=D()(window.location).search(!0),s=D()(window.location).path(),{id:r,name:o,sql:a,savedQueryId:l,datasourceKey:d,queryId:c,dbid:u,dbname:h,catalog:p,schema:g,autorun:m,new:f,...v}={...this.context.requestedQuery,...t.requested_query,...i},C=null==(e=s.match(/\/p\/\w+/))?void 0:e[0].slice(3);if(C||r||a||l||d||c){if(C)this.props.actions.popPermalink(C);else if(r)this.props.actions.popStoredQuery(r);else if(l)this.props.actions.popSavedQuery(l);else if(c)this.props.actions.popQuery(c);else if(d)this.props.actions.popDatasourceQuery(d,a);else if(a){let e=u;if(e)e=parseInt(e,10);else{const{databases:t}=this.props,i=h;i&&Object.keys(t).forEach((s=>{t[s].database_name===i&&(e=t[s].id)}))}const t={name:o,dbId:e,catalog:p,schema:g,autorun:m,sql:a};this.props.actions.addQueryEditor(t)}this.popNewTab(F()(v,Object.keys(null!=i?i:{})))}else if(f||0===this.props.queryEditors.length)this.newQueryEditor(),f&&window.history.replaceState({},document.title,XE);else{const e=this.activeQueryEditor(),t=this.props.queries[(null==e?void 0:e.latestQueryId)||""];(0,n.G7)(n.TO.SqllabBackendPersistence)&&t&&t.resultsKey&&this.props.actions.fetchQueryResults(t,this.props.displayLimit)}}popNewTab(e){const t=`${D()(XE).query(e)}`;window.history.replaceState({},document.title,t)}activeQueryEditor(){if(0===this.props.tabHistory.length)return this.props.queryEditors[0];const e=this.props.tabHistory[this.props.tabHistory.length-1];return this.props.queryEditors.find((t=>t.id===e))||null}newQueryEditor(){this.props.actions.addNewQueryEditor()}handleSelect(e){const t=this.props.tabHistory[this.props.tabHistory.length-1];if(e!==t){const t=this.props.queryEditors.find((t=>t.id===e));if(!t)return;this.props.actions.setActiveQueryEditor(t)}}handleEdit(e,t){if("remove"===t){const t=this.props.queryEditors.find((t=>t.id===e));t&&this.removeQueryEditor(t)}"add"===t&&(R.Vy.markTimeOrigin(),this.newQueryEditor())}removeQueryEditor(e){this.props.actions.removeQueryEditor(e)}render(){var e,t;const i=0===(null==(e=this.props.queryEditors)?void 0:e.length),s=null==(t=this.props.queryEditors)?void 0:t.map((e=>(0,h.Y)(P.fn.TabPane,{tab:(0,h.Y)(jE,{queryEditor:e}),"data-key":e.id,children:(0,h.Y)(GE,{queryEditor:e,defaultQueryLimit:this.props.defaultQueryLimit,maxRow:this.props.maxRow,displayLimit:this.props.displayLimit,saveQueryWarning:this.props.saveQueryWarning,scheduleQueryWarning:this.props.scheduleQueryWarning})},e.id))),r=(0,h.FD)(YE,{children:[(0,h.Y)(QE,{children:(0,w.t)("Add a new tab")}),(0,h.Y)(A.m_,{id:"add-tab",placement:"bottom",title:"Windows"===JE?(0,w.t)("New tab (Ctrl + q)"):(0,w.t)("New tab (Ctrl + t)"),children:(0,h.Y)("i",{className:"fa fa-plus-circle"})})]}),o=(0,h.Y)(P.fn.TabPane,{"data-key":0,tab:r,closable:!1,children:(0,h.Y)(M.p,{image:"empty_sql_chart.svg",size:"large",description:(0,w.t)("Add a new tab to create SQL Query")})},0);return(0,h.FD)(KE,{activeKey:this.props.tabHistory[this.props.tabHistory.length-1],id:"a11y-query-editor-tabs",className:"SqlEditorTabs",onChange:this.handleSelect,fullWidth:!1,hideAdd:this.props.offline,onTabClick:this.onTabClicked,onEdit:this.handleEdit,type:i?"card":"editable-card",addIcon:(0,h.Y)(A.m_,{id:"add-tab",placement:"bottom",title:"Windows"===JE?(0,w.t)("New tab (Ctrl + q)"):(0,w.t)("New tab (Ctrl + t)"),children:(0,h.Y)("i",{className:"fa fa-plus-circle"})}),children:[s,i&&o]})}}ZE.contextType=k;const eF={...c},tF=(0,r.Ng)((function({sqlLab:e,common:t}){var i,s,r,o;return{databases:e.databases,queryEditors:null!=(i=e.queryEditors)?i:qE.queryEditors,queries:e.queries,tabHistory:e.tabHistory,defaultDbId:t.conf.SQLLAB_DEFAULT_DBID,displayLimit:t.conf.DISPLAY_MAX_ROW,offline:null!=(s=e.offline)?s:qE.offline,defaultQueryLimit:t.conf.DEFAULT_SQLLAB_LIMIT,maxRow:t.conf.SQL_MAX_ROW,saveQueryWarning:null!=(r=t.conf.SQLLAB_SAVE_WARNING_MESSAGE)?r:qE.saveQueryWarning,scheduleQueryWarning:null!=(o=t.conf.SQLLAB_SCHEDULE_WARNING_MESSAGE)?o:qE.scheduleQueryWarning}}),eF,(function(e,t){return{...e,actions:t}}))(ZE);var iF=i(58561),sF=i.n(iF),rF=i(9450);const oF=2e3,nF=function({queries:e,queriesLastUpdate:t}){const i=(0,s.useRef)(!1),o=(0,s.useRef)(!1),n=(0,s.useRef)((0,rF.E)(1e3)),a=(0,r.d4)((({sqlLab:e})=>e.databases)),l=(0,s.useRef)(new Set(Object.values(a).filter((({allow_run_async:e})=>Boolean(e))).map((({id:e})=>e)))),d=(0,r.wA)();return function(e,t){const i=(0,s.useRef)(e);(0,s.useEffect)((()=>{i.current=e}),[e]),(0,s.useEffect)((()=>{if(null!==t){const e=setInterval((function(){null==i||null==i.current||i.current()}),t);return()=>clearInterval(e)}return()=>{}}),[t])}((()=>{(()=>{const s=(e=>{let t=!1;const i=Date.now();return am()(e)&&(t=Object.values(e).some((e=>(e=>We.P7.includes(null==e?void 0:e.state))(e)&&i-(null==e?void 0:e.startDttm)<216e5))),t})(e);if(!i.current&&s){const e=sF().encode({last_updated_ms:t-5e3}),s=new AbortController;i.current=!0,AR.A.get({endpoint:`/api/v1/query/updated_since?q=${e}`,timeout:1e4,parseMethod:"json-bigint",signal:s.signal}).then((({json:e})=>{if(e){var t;const r=e;if(null!=r&&null!=(t=r.result)&&t.length){var i,s;const e=null!=(i=null==r||null==(s=r.result)?void 0:s.reduce(((e,t)=>(e[t.id]=t,e)),{}))?i:{};d((0,c.refreshQueries)(e)),r.result.forEach((e=>{const{id:t,dbId:i,state:s}=e;var r;l.current.has(i)&&!n.current.has(t)&&s===We.kZ.Failed&&(d((0,c.logFailedQuery)(e,null==(r=e.extra)?void 0:r.errors)),n.current.set(t,!0))}))}else d((0,c.clearInactiveQueries)(oF))}})).catch((()=>{s.abort()})).finally((()=>{i.current=!1}))}o.current||s||(d((0,c.clearInactiveQueries)(oF)),o.current=!0)})()}),oF),null},aF=y.I4.div`
  ${({theme:e})=>o.AH`
    &.SqlLab {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      padding: 0 ${2*e.gridUnit}px;

      pre:not(.code) {
        padding: 0 !important;
        margin: 0;
        border: none;
        font-size: ${e.typography.sizes.s}px;
        background: transparent !important;
      }

      .north-pane {
        display: flex;
        flex-direction: column;
      }

      .ace_editor {
        flex-grow: 1;
      }

      .ace_content {
        height: 100%;
      }

      .ant-tabs-content-holder {
        /* This is needed for Safari */
        height: 100%;
      }

      .ant-tabs-content {
        height: 100%;
        position: relative;
        background-color: ${e.colors.grayscale.light5};
        overflow-x: auto;
        overflow-y: auto;

        > .ant-tabs-tabpane {
          position: absolute;
          top: 0;
          right: 0;
          bottom: 0;
          left: 0;
        }
      }

      .ResultsModal .antd5-modal-body {
        min-height: ${140*e.gridUnit}px;
      }

      .antd5-modal-body {
        overflow: auto;
      }
    }
  `};
`;class lF extends s.PureComponent{constructor(e){super(e),this.hasLoggedLocalStorageUsage=void 0,this.state={hash:window.location.hash},this.showLocalStorageUsageWarning=m()(this.showLocalStorageUsageWarning,S.Cq,{trailing:!1})}componentDidMount(){window.addEventListener("hashchange",this.onHashChanged.bind(this)),document.body.style.overscrollBehaviorX="none"}componentDidUpdate(){const{localStorageUsageInKilobytes:e,actions:t,queries:i}=this.props,s=Object.keys(i||{}).length||0;if(e>=S.sC*S.QJ&&this.showLocalStorageUsageWarning(e,s),e>0&&!this.hasLoggedLocalStorageUsage){const i={current_usage:e,query_count:s};t.logEvent(R.A_,i),this.hasLoggedLocalStorageUsage=!0}}componentWillUnmount(){window.removeEventListener("hashchange",this.onHashChanged.bind(this)),document.body.style.overscrollBehaviorX="auto",C().reset()}onHashChanged(){this.setState({hash:window.location.hash})}showLocalStorageUsageWarning(e,t){this.props.actions.addDangerToast((0,w.t)("SQL Lab uses your browser's local storage to store queries and results.\nCurrently, you are using %(currentUsage)s KB out of %(maxStorage)d KB storage space.\nTo keep SQL Lab from crashing, please delete some query tabs.\nYou can re-access these queries by using the Save feature before you delete the tab.\nNote that you will need to close other SQL Lab windows before you do this.",{currentUsage:e.toFixed(2),maxStorage:S.QJ}));const i={current_usage:e,query_count:t};this.props.actions.logEvent(R.hK,i)}render(){const{queries:e,queriesLastUpdate:t}=this.props;return this.state.hash&&"#search"===this.state.hash?(0,h.Y)(f.rd,{to:{pathname:"/sqllab/history/"}}):(0,h.FD)(aF,{className:"App SqlLab",children:[(0,h.Y)(nF,{queries:e,queriesLastUpdate:t}),(0,h.Y)(tF,{})]})}}const dF={addDangerToast:u.iB,logEvent:b.logEvent},cF=(0,r.Ng)((function(e){const{common:t,localStorageUsageInKilobytes:i,sqlLab:s}=e;return{common:t,localStorageUsageInKilobytes:i,queries:null==s?void 0:s.queries,queriesLastUpdate:null==s?void 0:s.queriesLastUpdate}}),dF,(function(e,t,i){return{...i,...e,actions:t}}))(lF);var uF=i(94500);function hF(){const e=(0,r.d4)((e=>e.sqlLab.queriesLastUpdate||0)),{data:t,isLoading:i,isError:a,error:l,fulfilledTimeStamp:g}=d(),m=e<=(g||0),f=(0,r.wA)(),v=(0,$.A)((e=>{m&&f((0,c.resetState)(e))}));return(0,s.useEffect)((()=>{t&&v(t)}),[t,v]),i||m?(0,h.Y)(Ke.A,{}):a&&null!=l&&l.message?(f((0,u.iB)(null==l?void 0:l.message)),null):(0,h.Y)(N,{children:(0,h.FD)("div",{css:o.AH`
          flex: 1 1 auto;
          position: relative;
          display: flex;
          flex-direction: column;
        `,children:[(0,h.Y)(p,{}),(0,h.Y)(cF,{}),(0,n.G7)(n.TO.SqllabBackendPersistence)&&(0,h.Y)(uF.Ay,{})]})})}},30327:(e,t)=>{"use strict";t.ITEM_TYPES={PAGE:"PAGE",ELLIPSIS:"ELLIPSIS",FIRST_PAGE_LINK:"FIRST_PAGE_LINK",PREVIOUS_PAGE_LINK:"PREVIOUS_PAGE_LINK",NEXT_PAGE_LINK:"NEXT_PAGE_LINK",LAST_PAGE_LINK:"LAST_PAGE_LINK"},t.ITEM_KEYS={FIRST_ELLIPSIS:-1,SECOND_ELLIPSIS:-2,FIRST_PAGE_LINK:-3,PREVIOUS_PAGE_LINK:-4,NEXT_PAGE_LINK:-5,LAST_PAGE_LINK:-6}},8960:(e,t,i)=>{"use strict";var s=i(30327);t.createFirstEllipsis=function(e){return{type:s.ITEM_TYPES.ELLIPSIS,key:s.ITEM_KEYS.FIRST_ELLIPSIS,value:e,isActive:!1}},t.createSecondEllipsis=function(e){return{type:s.ITEM_TYPES.ELLIPSIS,key:s.ITEM_KEYS.SECOND_ELLIPSIS,value:e,isActive:!1}},t.createFirstPageLink=function(e){var t=e.currentPage;return{type:s.ITEM_TYPES.FIRST_PAGE_LINK,key:s.ITEM_KEYS.FIRST_PAGE_LINK,value:1,isActive:1===t}},t.createPreviousPageLink=function(e){var t=e.currentPage;return{type:s.ITEM_TYPES.PREVIOUS_PAGE_LINK,key:s.ITEM_KEYS.PREVIOUS_PAGE_LINK,value:Math.max(1,t-1),isActive:1===t}},t.createNextPageLink=function(e){var t=e.currentPage,i=e.totalPages;return{type:s.ITEM_TYPES.NEXT_PAGE_LINK,key:s.ITEM_KEYS.NEXT_PAGE_LINK,value:Math.min(i,t+1),isActive:t===i}},t.createLastPageLink=function(e){var t=e.currentPage,i=e.totalPages;return{type:s.ITEM_TYPES.LAST_PAGE_LINK,key:s.ITEM_KEYS.LAST_PAGE_LINK,value:i,isActive:t===i}},t.createPageFunctionFactory=function(e){var t=e.currentPage;return function(e){return{type:s.ITEM_TYPES.PAGE,key:e,value:e,isActive:e===t}}}},17991:(e,t)=>{"use strict";t.createRange=function(e,t){for(var i=[],s=e;s<=t;s++)i.push(s);return i}},11447:(e,t,i)=>{"use strict";var s=i(17991),r=i(8960);t.getPaginationModel=function(e){if(null==e)throw new Error("getPaginationModel(): options object should be a passed");var t=Number(e.totalPages);if(isNaN(t))throw new Error("getPaginationModel(): totalPages should be a number");if(t<0)throw new Error("getPaginationModel(): totalPages shouldn't be a negative number");var i=Number(e.currentPage);if(isNaN(i))throw new Error("getPaginationModel(): currentPage should be a number");if(i<0)throw new Error("getPaginationModel(): currentPage shouldn't be a negative number");if(i>t)throw new Error("getPaginationModel(): currentPage shouldn't be greater than totalPages");var o=null==e.boundaryPagesRange?1:Number(e.boundaryPagesRange);if(isNaN(o))throw new Error("getPaginationModel(): boundaryPagesRange should be a number");if(o<0)throw new Error("getPaginationModel(): boundaryPagesRange shouldn't be a negative number");var n=null==e.siblingPagesRange?1:Number(e.siblingPagesRange);if(isNaN(n))throw new Error("getPaginationModel(): siblingPagesRange should be a number");if(n<0)throw new Error("getPaginationModel(): siblingPagesRange shouldn't be a negative number");var a=Boolean(e.hidePreviousAndNextPageLinks),l=Boolean(e.hideFirstAndLastPageLinks),d=Boolean(e.hideEllipsis),c=d?0:1,u=[],h=r.createPageFunctionFactory(e);if(l||u.push(r.createFirstPageLink(e)),a||u.push(r.createPreviousPageLink(e)),1+2*c+2*n+2*o>=t){var p=s.createRange(1,t).map(h);u.push.apply(u,p)}else{var g=o,m=s.createRange(1,g).map(h),f=t+1-o,v=t,C=s.createRange(f,v).map(h),y=Math.min(Math.max(i-n,g+c+1),f-c-2*n-1),w=y+2*n,S=s.createRange(y,w).map(h);if(u.push.apply(u,m),!d){var b=y-1,R=(b===g+1?h:r.createFirstEllipsis)(b);u.push(R)}if(u.push.apply(u,S),!d){var E=w+1,F=(E===f-1?h:r.createSecondEllipsis)(E);u.push(F)}u.push.apply(u,C)}return a||u.push(r.createNextPageLink(e)),l||u.push(r.createLastPageLink(e)),u};var o=i(30327);t.ITEM_TYPES=o.ITEM_TYPES,t.ITEM_KEYS=o.ITEM_KEYS},85419:e=>{"use strict";e.exports=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},82986:e=>{"use strict";e.exports=function(e){return"function"==typeof e}},96552:(e,t,i)=>{"use strict";var s=i(85419),r=i(84356);e.exports=function(e){var t;if(!s(e))return!1;if(!(t=e.length))return!1;for(var i=0;i<t;i++)if(!r(e[i]))return!1;return!0}},84356:(e,t,i)=>{"use strict";var s=i(66415);e.exports=function(e){return s(e)&&e%1==0}},66415:e=>{"use strict";e.exports=function(e){return("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))&&e.valueOf()==e.valueOf()}},48343:(e,t,i)=>{"use strict";const{normalizeIPv6:s,normalizeIPv4:r,removeDotSegments:o,recomposeAuthority:n,normalizeComponentEncoding:a}=i(34834),l=i(343);function d(e,t,i,s){const r={};return s||(e=p(c(e,i),i),t=p(c(t,i),i)),!(i=i||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=o(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=o(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=o(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?r.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:r.path=t.path:r.path="/"+t.path,r.path=o(r.path)),r.query=t.query):(r.path=e.path,void 0!==t.query?r.query=t.query:r.query=e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function c(e,t){const i={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},s=Object.assign({},t),r=[],a=l[(s.scheme||i.scheme||"").toLowerCase()];a&&a.serialize&&a.serialize(i,s),void 0!==i.path&&(s.skipEscape?i.path=unescape(i.path):(i.path=escape(i.path),void 0!==i.scheme&&(i.path=i.path.split("%3A").join(":")))),"suffix"!==s.reference&&i.scheme&&r.push(i.scheme,":");const d=n(i);if(void 0!==d&&("suffix"!==s.reference&&r.push("//"),r.push(d),i.path&&"/"!==i.path.charAt(0)&&r.push("/")),void 0!==i.path){let e=i.path;s.absolutePath||a&&a.absolutePath||(e=o(e)),void 0===d&&(e=e.replace(/^\/\//u,"/%2F")),r.push(e)}return void 0!==i.query&&r.push("?",i.query),void 0!==i.fragment&&r.push("#",i.fragment),r.join("")}const u=Array.from({length:127},((e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)))),h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p(e,t){const i=Object.assign({},t),o={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},n=-1!==e.indexOf("%");let a=!1;"suffix"===i.reference&&(e=(i.scheme?i.scheme+":":"")+"//"+e);const d=e.match(h);if(d){if(o.scheme=d[1],o.userinfo=d[3],o.host=d[4],o.port=parseInt(d[5],10),o.path=d[6]||"",o.query=d[7],o.fragment=d[8],isNaN(o.port)&&(o.port=d[5]),o.host){const e=r(o.host);if(!1===e.isIPV4){const t=s(e.host);o.host=t.host.toLowerCase(),a=t.isIPV6}else o.host=e.host,a=!0}void 0!==o.scheme||void 0!==o.userinfo||void 0!==o.host||void 0!==o.port||void 0!==o.query||o.path?void 0===o.scheme?o.reference="relative":void 0===o.fragment?o.reference="absolute":o.reference="uri":o.reference="same-document",i.reference&&"suffix"!==i.reference&&i.reference!==o.reference&&(o.error=o.error||"URI is not a "+i.reference+" reference.");const e=l[(i.scheme||o.scheme||"").toLowerCase()];if(!(i.unicodeSupport||e&&e.unicodeSupport)&&o.host&&(i.domainHost||e&&e.domainHost)&&!1===a&&function(e){let t=0;for(let i=0,s=e.length;i<s;++i)if(t=e.charCodeAt(i),t>126||u[t])return!0;return!1}(o.host))try{o.host=URL.domainToASCII(o.host.toLowerCase())}catch(e){o.error=o.error||"Host's domain name can not be converted to ASCII: "+e}(!e||e&&!e.skipNormalize)&&(n&&void 0!==o.scheme&&(o.scheme=unescape(o.scheme)),n&&void 0!==o.host&&(o.host=unescape(o.host)),o.path&&(o.path=escape(unescape(o.path))),o.fragment&&(o.fragment=encodeURI(decodeURIComponent(o.fragment)))),e&&e.parse&&e.parse(o,i)}else o.error=o.error||"URI can not be parsed.";return o}const g={SCHEMES:l,normalize:function(e,t){return"string"==typeof e?e=c(p(e,t),t):"object"==typeof e&&(e=p(c(e,t),t)),e},resolve:function(e,t,i){const s=Object.assign({scheme:"null"},i);return c(d(p(e,s),p(t,s),s,!0),{...s,skipEscape:!0})},resolveComponents:d,equal:function(e,t,i){return"string"==typeof e?(e=unescape(e),e=c(a(p(e,i),!0),{...i,skipEscape:!0})):"object"==typeof e&&(e=c(a(e,!0),{...i,skipEscape:!0})),"string"==typeof t?(t=unescape(t),t=c(a(p(t,i),!0),{...i,skipEscape:!0})):"object"==typeof t&&(t=c(a(t,!0),{...i,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:c,parse:p};e.exports=g,e.exports.default=g,e.exports.fastUri=g},343:e=>{"use strict";const t=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,i=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function s(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}function r(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function o(e){const t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}const n={scheme:"http",domainHost:!0,parse:r,serialize:o},a={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=s(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(s(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,i]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=i,e.resourceName=void 0}return e.fragment=void 0,e}},l={http:n,https:{scheme:"https",domainHost:n.domainHost,parse:r,serialize:o},ws:a,wss:{scheme:"wss",domainHost:a.domainHost,parse:a.parse,serialize:a.serialize},urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;const s=e.path.match(i);if(s){const i=t.scheme||e.scheme||"urn";e.nid=s[1].toLowerCase(),e.nss=s[2];const r=`${i}:${t.nid||e.nid}`,o=l[r];e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){const i=t.scheme||e.scheme||"urn",s=e.nid.toLowerCase(),r=`${i}:${t.nid||s}`,o=l[r];o&&(e=o.serialize(e,t));const n=e,a=e.nss;return n.path=`${s||t.nid}:${a}`,t.skipEscape=!0,n},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,i){const s=e;return s.uuid=s.nss,s.nss=void 0,i.tolerant||s.uuid&&t.test(s.uuid)||(s.error=s.error||"UUID is not valid."),s},serialize:function(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0}};e.exports=l},64914:e=>{"use strict";e.exports={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}},34834:(e,t,i)=>{"use strict";const{HEX:s}=i(64914),r=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function o(e){if(d(e,".")<3)return{host:e,isIPV4:!1};const t=e.match(r)||[],[i]=t;return i?{host:l(i,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function n(e,t=!1){let i="",r=!0;for(const t of e){if(void 0===s[t])return;"0"!==t&&!0===r&&(r=!1),r||(i+=t)}return t&&0===i.length&&(i="0"),i}function a(e){if(d(e,":")<2)return{host:e,isIPV6:!1};const t=function(e){let t=0;const i={error:!1,address:"",zone:""},s=[],r=[];let o=!1,a=!1,l=!1;function d(){if(r.length){if(!1===o){const e=n(r);if(void 0===e)return i.error=!0,!1;s.push(e)}r.length=0}return!0}for(let n=0;n<e.length;n++){const c=e[n];if("["!==c&&"]"!==c)if(":"!==c)if("%"===c){if(!d())break;o=!0}else r.push(c);else{if(!0===a&&(l=!0),!d())break;if(t++,s.push(":"),t>7){i.error=!0;break}n-1>=0&&":"===e[n-1]&&(a=!0)}}return r.length&&(o?i.zone=r.join(""):l?s.push(r.join("")):s.push(n(r))),i.address=s.join(""),i}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,i=t.address;return t.zone&&(e+="%"+t.zone,i+="%25"+t.zone),{host:e,escapedHost:i,isIPV6:!0}}}function l(e,t){let i="",s=!0;const r=e.length;for(let o=0;o<r;o++){const n=e[o];"0"===n&&s?(o+1<=r&&e[o+1]===t||o+1===r)&&(i+=n,s=!1):(s=n===t,i+=n)}return i}function d(e,t){let i=0;for(let s=0;s<e.length;s++)e[s]===t&&i++;return i}const c=/^\.\.?\//u,u=/^\/\.(?:\/|$)/u,h=/^\/\.\.(?:\/|$)/u,p=/^\/?(?:.|\n)*?(?=\/|$)/u;e.exports={recomposeAuthority:function(e){const t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let i=unescape(e.host);const s=o(i);if(s.isIPV4)i=s.host;else{const t=a(s.host);i=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}t.push(i)}return"number"!=typeof e.port&&"string"!=typeof e.port||(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){const i=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=i(e.scheme)),void 0!==e.userinfo&&(e.userinfo=i(e.userinfo)),void 0!==e.host&&(e.host=i(e.host)),void 0!==e.path&&(e.path=i(e.path)),void 0!==e.query&&(e.query=i(e.query)),void 0!==e.fragment&&(e.fragment=i(e.fragment)),e},removeDotSegments:function(e){const t=[];for(;e.length;)if(e.match(c))e=e.replace(c,"");else if(e.match(u))e=e.replace(u,"/");else if(e.match(h))e=e.replace(h,"/"),t.pop();else if("."===e||".."===e)e="";else{const i=e.match(p);if(!i)throw new Error("Unexpected dot segment condition");{const s=i[0];e=e.slice(s.length),t.push(s)}}return t.join("")},normalizeIPv4:o,normalizeIPv6:a,stringArrayToHexStripped:n}},85692:(e,t,i)=>{"use strict";i.d(t,{Wx:()=>d});var s=i(96540),r=(Object.defineProperty,new Map),o=new WeakMap,n=0,a=void 0;function l(e,t,i={},s=a){if(void 0===window.IntersectionObserver&&void 0!==s){const r=e.getBoundingClientRect();return t(s,{isIntersecting:s,target:e,intersectionRatio:"number"==typeof i.threshold?i.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),()=>{}}const{id:l,observer:d,elements:c}=function(e){const t=function(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(i=e.root,i?(o.has(i)||(n+=1,o.set(i,n.toString())),o.get(i)):"0"):e[t]}`;var i})).toString()}(e);let i=r.get(t);if(!i){const s=new Map;let o;const n=new IntersectionObserver((t=>{t.forEach((t=>{var i;const r=t.isIntersecting&&o.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=r),null==(i=s.get(t.target))||i.forEach((e=>{e(r,t)}))}))}),e);o=n.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),i={id:t,observer:n,elements:s},r.set(t,i)}return i}(i),u=c.get(e)||[];return c.has(e)||c.set(e,u),u.push(t),d.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(c.delete(e),d.unobserve(e)),0===c.size&&(d.disconnect(),r.delete(l))}}function d({threshold:e,delay:t,trackVisibility:i,rootMargin:r,root:o,triggerOnce:n,skip:a,initialInView:d,fallbackInView:c,onChange:u}={}){var h;const[p,g]=s.useState(null),m=s.useRef(u),[f,v]=s.useState({inView:!!d,entry:void 0});m.current=u,s.useEffect((()=>{if(a||!p)return;let s;return s=l(p,((e,t)=>{v({inView:e,entry:t}),m.current&&m.current(e,t),t.isIntersecting&&n&&s&&(s(),s=void 0)}),{root:o,rootMargin:r,threshold:e,trackVisibility:i,delay:t},c),()=>{s&&s()}}),[Array.isArray(e)?e.toString():e,p,o,r,n,a,i,c,t]);const C=null==(h=f.entry)?void 0:h.target,y=s.useRef(void 0);p||!C||n||a||y.current===C||(y.current=C,v({inView:!!d,entry:void 0}));const w=[g,f.inView,f.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}s.Component},63837:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},72079:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}}]);